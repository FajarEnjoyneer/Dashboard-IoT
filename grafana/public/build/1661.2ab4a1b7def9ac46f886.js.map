{"version":3,"file":"1661.2ab4a1b7def9ac46f886.js","mappings":"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","sources":["webpack://grafana/./public/app/extensions/reports/api/csv.ts","webpack://grafana/./public/app/extensions/reports/ReportFormV2/components/ActionsMenu.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/components/SendPreviewToggletip.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/ReportActions.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/WorkdaysOnlyCheckbox.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/DatePickerInput.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/EndDateInput.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/EndTimeInput.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/FrequencyInput.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/SendTimeOptions.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/CustomFrequencyOptions.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/StartDateInput.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/components/StartTimeInput.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/SendLaterSchedule.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/SelectDashboards/SelectDashboardScene.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/SelectDashboards/useSelectDashboards.ts","webpack://grafana/./public/app/extensions/reports/ReportFormV2/ReportSection.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Attachments.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/EmailConfiguration.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Recipients.tsx","webpack://grafana/./node_modules/date-fns/startOfYear.js","webpack://grafana/./node_modules/date-fns/getDayOfYear.js","webpack://grafana/./node_modules/date-fns/startOfWeek.js","webpack://grafana/./node_modules/date-fns/startOfISOWeek.js","webpack://grafana/./node_modules/date-fns/getISOWeekYear.js","webpack://grafana/./node_modules/date-fns/startOfISOWeekYear.js","webpack://grafana/./node_modules/date-fns/getISOWeek.js","webpack://grafana/./node_modules/date-fns/getWeekYear.js","webpack://grafana/./node_modules/date-fns/startOfWeekYear.js","webpack://grafana/./node_modules/date-fns/getWeek.js","webpack://grafana/./node_modules/date-fns/_lib/addLeadingZeros.js","webpack://grafana/./node_modules/date-fns/_lib/format/lightFormatters.js","webpack://grafana/./node_modules/date-fns/_lib/format/formatters.js","webpack://grafana/./node_modules/date-fns/_lib/format/longFormatters.js","webpack://grafana/./node_modules/date-fns/_lib/protectedTokens.js","webpack://grafana/./node_modules/date-fns/isDate.js","webpack://grafana/./node_modules/date-fns/isValid.js","webpack://grafana/./node_modules/date-fns/format.js","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/useFrequencyInputs.ts","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/Frequency.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/Schedule/Schedule.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/SelectDashboards/SelectDashboards.tsx","webpack://grafana/./public/app/extensions/reports/ReportFormV2/sections/useReportSections.ts","webpack://grafana/./public/app/extensions/reports/ReportFormV2/ReportForm.tsx"],"sourcesContent":["import saveAs from 'file-saver';\nimport { lastValueFrom } from 'rxjs';\n\nimport { AppEvents, urlUtil } from '@grafana/data';\nimport { getAppEvents, getBackendSrv } from '@grafana/runtime';\n\nimport { SelectDashboardScene } from '../ReportFormV2/sections/SelectDashboards/SelectDashboardScene';\nimport { API_RENDER_CSVS } from '../constants';\nimport { dashboardsInvalidV2 } from '../utils/dashboards';\nimport { getReportDashboardsAsUrlParamV2 } from '../utils/url';\n\nexport const downloadCSV = async (reportTitle: string, sceneDashboards: SelectDashboardScene[]): Promise<void> => {\n  if (dashboardsInvalidV2(sceneDashboards)) {\n    getAppEvents().publish({\n      type: AppEvents.alertError.name,\n      payload: ['Invalid dashboards'],\n    });\n    return;\n  }\n\n  const params = {\n    title: reportTitle,\n    dashboards: getReportDashboardsAsUrlParamV2(sceneDashboards),\n  };\n\n  const downloadCSVUrl = urlUtil.appendQueryToUrl(API_RENDER_CSVS, urlUtil.toUrlParams(params));\n\n  try {\n    const response = await lastValueFrom(\n      getBackendSrv().fetch<BlobPart>({ url: downloadCSVUrl, method: 'GET', responseType: 'blob' })\n    );\n    if (response.status === 204) {\n      getAppEvents().publish({\n        type: AppEvents.alertWarning.name,\n        payload: ['The report does not contain any dashboard with a table panel'],\n      });\n      return;\n    }\n    const blob = new Blob([response.data], { type: 'application/zip' });\n    saveAs(blob, `${reportTitle || 'report-csv'}.zip`);\n    getAppEvents().publish({\n      type: AppEvents.alertSuccess.name,\n      payload: ['CSV downloaded'],\n    });\n  } catch (error) {\n    getAppEvents().publish({\n      type: AppEvents.alertError.name,\n      payload: ['There was an error downloading the CSV'],\n    });\n  }\n};\n","import { MouseEvent } from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport { useAsyncFn } from 'react-use';\n\nimport { AppEvents, urlUtil } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { getAppEvents } from '@grafana/runtime';\nimport { Button, Dropdown, Menu, MenuItem } from '@grafana/ui';\nimport { ReportBaseV2 } from 'app/extensions/types';\n\nimport { downloadCSV } from '../../api/csv';\nimport { API_RENDER_PDFS, SETTINGS_URL } from '../../constants';\nimport { useReportFormContext } from '../../dashboard-scene/ReportRenderingProvider';\nimport { selectors } from '../../e2e-selectors/selectors';\nimport { dashboardsInvalidV2 } from '../../utils/dashboards';\nimport { getReportDashboardsAsUrlParamV2 } from '../../utils/url';\nimport { ReportingInteractions } from '../reportingInteractions';\nimport { SelectDashboardScene } from '../sections/SelectDashboards/SelectDashboardScene';\n\nexport default function ActionsMenu({ sceneDashboards }: { sceneDashboards: SelectDashboardScene[] }) {\n  const { watch } = useFormContext<ReportBaseV2>();\n\n  const reportFormContext = useReportFormContext();\n\n  const reportName = watch('title');\n\n  const [state, handleDownloadCSV] = useAsyncFn(\n    async (e: MouseEvent) => {\n      ReportingInteractions.downloadCSVClicked(reportFormContext.renderingContext);\n      e.stopPropagation();\n      await downloadCSV(reportName, sceneDashboards);\n    },\n    [reportName, sceneDashboards]\n  );\n\n  const dashboardsInvalid = dashboardsInvalidV2(sceneDashboards);\n\n  const redirectToPDFPreview = (e: MouseEvent) => {\n    ReportingInteractions.previewPDFClicked(reportFormContext.renderingContext);\n\n    if (dashboardsInvalid) {\n      e.stopPropagation();\n      getAppEvents().publish({\n        type: AppEvents.alertError.name,\n        payload: ['Invalid dashboards'],\n      });\n    }\n\n    const params = {\n      title: reportName,\n      scaleFactor: watch('pdfOptions.scaleFactor') || 100,\n      orientation: watch('pdfOptions.orientation') || 'landscape',\n      layout: watch('pdfOptions.layout') || 'grid',\n      pdfShowTemplateVariables: Boolean(watch('pdfOptions.dashboardPDF.showTemplateVariables')).toString(),\n      pdfCombineOneFile: Boolean(watch('pdfOptions.dashboardPDF.combineOneFile')).toString(),\n      includeTables: Boolean(watch('pdfOptions.dashboardPDF.addPDFTablesAppendix')).toString(),\n      dashboards: getReportDashboardsAsUrlParamV2(sceneDashboards),\n    };\n\n    const url = urlUtil.appendQueryToUrl(API_RENDER_PDFS, urlUtil.toUrlParams(params));\n    window.open(url, '_blank');\n  };\n\n  const menu = (\n    <Menu>\n      <MenuItem\n        label={\n          state.loading\n            ? t('share-report.actions.downloading-label', 'Downloading...')\n            : t('share-report.actions.download-csv-label', 'Download CSV')\n        }\n        icon={state.loading ? 'spinner' : 'file-download'}\n        onClick={handleDownloadCSV}\n        disabled={state.loading}\n        testId={selectors.components.ReportFormDrawer.ActionsMenu.downloadCsv}\n      />\n      <MenuItem\n        label={t('share-report.actions.preview-pdf-label', 'Preview PDF')}\n        icon=\"external-link-alt\"\n        onClick={redirectToPDFPreview}\n        testId={selectors.components.ReportFormDrawer.ActionsMenu.previewPdf}\n      />\n      <Menu.Divider />\n      <MenuItem\n        label={t('share-report.actions.report-settings-label', 'Report settings')}\n        icon=\"external-link-alt\"\n        url={SETTINGS_URL}\n        target=\"_blank\"\n        testId={selectors.components.ReportFormDrawer.ActionsMenu.reportSettings}\n        onClick={() => ReportingInteractions.settingsClicked(reportFormContext.renderingContext)}\n      />\n    </Menu>\n  );\n\n  return (\n    <Dropdown overlay={menu} placement=\"bottom-end\">\n      <Button\n        variant=\"secondary\"\n        fill=\"outline\"\n        icon=\"ellipsis-v\"\n        data-testid={selectors.components.ReportFormDrawer.actionsMenuButton}\n      />\n    </Dropdown>\n  );\n}\n","import { css } from '@emotion/css';\nimport { useState } from 'react';\nimport { useForm, useFormContext } from 'react-hook-form';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { Button, Field, Input, Stack, Checkbox, Toggletip, useStyles2 } from '@grafana/ui';\nimport { useSendTestEmailMutation } from 'app/extensions/api/clients/reporting';\nimport { ReportFormV2 } from 'app/extensions/types/reports';\n\nimport { validateMultipleEmails } from '../../../utils/validators';\nimport { useReportFormContext } from '../../dashboard-scene/ReportRenderingProvider';\nimport { transformReportV2ToDTO } from '../../utils/serialization';\nimport { ReportingInteractions } from '../reportingInteractions';\nimport { SelectDashboardScene } from '../sections/SelectDashboards/SelectDashboardScene';\n\ninterface FormValues {\n  previewEmail: string;\n  useReportEmails: boolean;\n}\n\nexport function SendPreviewToggletip({ sceneDashboards }: { sceneDashboards: SelectDashboardScene[] }) {\n  const styles = useStyles2(getStyles);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const { watch: watchMainForm, trigger: triggerMainForm } = useFormContext<ReportFormV2>();\n  const recipients = watchMainForm('recipients') || [];\n  const reportFormContext = useReportFormContext();\n\n  const [sendTestEmail, { isLoading: isSendingTestEmail }] = useSendTestEmailMutation();\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    setValue,\n    clearErrors,\n    formState: { errors },\n    reset,\n  } = useForm<FormValues>({\n    defaultValues: {\n      previewEmail: '',\n      useReportEmails: false,\n    },\n  });\n\n  const useReportEmails = watch('useReportEmails');\n\n  const handleClose = () => {\n    setIsOpen(false);\n    reset({\n      previewEmail: '',\n      useReportEmails: false,\n    });\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(onSubmit)();\n    }\n  };\n\n  const onSubmit = async (data: FormValues) => {\n    ReportingInteractions.sendClicked(reportFormContext.renderingContext);\n\n    const report = { ...watchMainForm(), recipients: data.useReportEmails ? recipients : [data.previewEmail] };\n    const reportDTO = transformReportV2ToDTO({ ...report, dashboardsScene: sceneDashboards });\n\n    await sendTestEmail(reportDTO).unwrap();\n    handleClose();\n  };\n\n  const onOpenClick = async () => {\n    ReportingInteractions.sendPreviewClicked(reportFormContext.renderingContext);\n    const isValid = await triggerMainForm(['title', 'dashboards'], {\n      shouldFocus: true,\n    });\n\n    if (!isValid) {\n      return;\n    }\n\n    setIsOpen(true);\n  };\n\n  const content = (\n    <div className={styles.container}>\n      <Stack direction=\"column\" gap={1.5}>\n        <Field\n          label={t('share-report.send-preview.email', 'Email')}\n          required\n          description={t(\n            'share-report.send-preview.email-description',\n            'Separate multiple email addresses with a comma or semicolon'\n          )}\n          error={errors.previewEmail?.message}\n          invalid={!!errors.previewEmail}\n        >\n          <Input\n            // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n            placeholder=\"your.address@company.com\"\n            {...register('previewEmail', {\n              required: t('share-report.send-preview.email-required', 'Email is required'),\n              validate: (value) =>\n                validateMultipleEmails(value) ||\n                t('share-report.recipients.invalid-emails', 'Invalid emails: {{emails}}', {\n                  emails: value,\n                }),\n            })}\n            onKeyDown={handleKeyDown}\n            disabled={useReportEmails}\n          />\n        </Field>\n        <Field>\n          <Checkbox\n            disabled={!recipients.length}\n            label={t('share-report.send-preview.use-report-emails', 'Use emails from report')}\n            {...register('useReportEmails', {\n              onChange: (e) => {\n                const checked = e.target.checked;\n                setValue('useReportEmails', checked);\n                if (checked) {\n                  setValue('previewEmail', recipients.join(', '));\n                  clearErrors('previewEmail');\n                } else {\n                  setValue('previewEmail', '');\n                }\n              },\n            })}\n          />\n        </Field>\n        <Stack gap={2} justifyContent=\"flex-start\" direction={{ xs: 'column', sm: 'row' }}>\n          <Button variant=\"secondary\" disabled={isSendingTestEmail} onClick={handleClose}>\n            {t('share-report.send-preview.cancel', 'Cancel')}\n          </Button>\n          <Button\n            onClick={() => handleSubmit(onSubmit)()}\n            disabled={isSendingTestEmail}\n            icon={isSendingTestEmail ? 'fa fa-spinner' : undefined}\n          >\n            {isSendingTestEmail\n              ? t('share-report.send-preview.sending', 'Sending...')\n              : t('share-report.send-preview.send', 'Send')}\n          </Button>\n        </Stack>\n      </Stack>\n    </div>\n  );\n\n  return (\n    <Toggletip\n      content={content}\n      title={t('share-report.send-preview.title', 'Send preview')}\n      placement=\"auto-start\"\n      theme=\"info\"\n      show={isOpen}\n      onOpen={onOpenClick}\n      onClose={handleClose}\n    >\n      <Button variant=\"secondary\" fill=\"outline\">\n        {t('share-report.send-preview.button', 'Send preview')}\n      </Button>\n    </Toggletip>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css({\n      width: '400',\n    }),\n  };\n};\n","import { useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Button, Stack } from '@grafana/ui';\n\nimport { ReportState } from '../../types';\nimport { selectors } from '../e2e-selectors/selectors';\n\nimport ActionsMenu from './components/ActionsMenu';\nimport { SendPreviewToggletip } from './components/SendPreviewToggletip';\nimport { SelectDashboardScene } from './sections/SelectDashboards/SelectDashboardScene';\n\nexport function ReportActions({\n  isUpsertLoading,\n  isSaveDraftLoading,\n  isUpdateStateReportLoading,\n  onSaveDraftClick,\n  onDeleteClick,\n  onToggleStateClick,\n  sceneDashboards,\n  isEditMode,\n  reportState,\n}: {\n  isUpsertLoading: boolean;\n  isSaveDraftLoading: boolean;\n  isUpdateStateReportLoading: boolean;\n  onSaveDraftClick: () => void;\n  onDeleteClick: () => void;\n  onToggleStateClick: () => void;\n  sceneDashboards: SelectDashboardScene[];\n  isEditMode: boolean;\n  reportState: ReportState | undefined;\n}) {\n  const {\n    formState: { isDirty },\n  } = useFormContext();\n\n  return (\n    <Stack justifyContent=\"space-between\" direction={{ xs: 'column', md: 'row' }} gap={{ xs: 2, md: 0 }}>\n      <Stack gap={1}>\n        <ActionsMenu sceneDashboards={sceneDashboards} />\n        <SendPreviewToggletip sceneDashboards={sceneDashboards} />\n      </Stack>\n      <Stack gap={{ xs: 2, md: 1 }} direction={{ xs: 'column', md: 'row' }}>\n        <Button\n          type=\"submit\"\n          variant=\"primary\"\n          data-testid={selectors.components.ReportFormDrawer.submitButton}\n          icon={isUpsertLoading ? 'spinner' : undefined}\n          fullWidth\n        >\n          {isEditMode && reportState !== ReportState.Draft\n            ? isUpsertLoading\n              ? t('share-report.update-report.updating-button', 'Updating report...')\n              : t('share-report.update-report.button', 'Update report')\n            : isUpsertLoading\n              ? t('share-report.schedule-report.scheduling-button', 'Scheduling report...')\n              : t('share-report.schedule-report.button', 'Schedule report')}\n        </Button>\n        {(!isEditMode || reportState === ReportState.Draft) && (\n          <Button\n            variant=\"secondary\"\n            icon={isSaveDraftLoading ? 'spinner' : undefined}\n            onClick={onSaveDraftClick}\n            fullWidth\n          >\n            {isSaveDraftLoading\n              ? t('share-report.save-draft.saving-button', 'Saving draft...')\n              : t('share-report.save-draft.button', 'Save draft')}\n          </Button>\n        )}\n        {(reportState === ReportState.Scheduled || reportState === ReportState.Paused) && (\n          <Button\n            variant=\"secondary\"\n            disabled={isDirty}\n            icon={reportState === ReportState.Scheduled ? 'pause' : 'play'}\n            onClick={onToggleStateClick}\n            fullWidth\n          >\n            {reportState === ReportState.Scheduled\n              ? isUpdateStateReportLoading\n                ? t('share-report.update-report.pausing-button', 'Pausing report...')\n                : t('share-report.update-report.pause-button', 'Pause')\n              : isUpdateStateReportLoading\n                ? t('share-report.update-report.resuming-button', 'Resuming report...')\n                : t('share-report.update-report.resume-button', 'Resume')}\n          </Button>\n        )}\n        {reportState && (\n          <Button icon=\"trash-alt\" variant=\"destructive\" onClick={onDeleteClick} fullWidth>\n            {t('share-report.update-report.delete-button', 'Delete')}\n          </Button>\n        )}\n      </Stack>\n    </Stack>\n  );\n}\n","import { useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Checkbox } from '@grafana/ui';\n\nexport function WorkdaysOnlyCheckbox() {\n  const { register } = useFormContext();\n\n  return (\n    <Checkbox\n      {...register('schedule.workdaysOnly')}\n      label={t('share-report.schedule.workdays-only', 'Send Monday to Friday only')}\n    />\n  );\n}\n","import { css } from '@emotion/css';\nimport { forwardRef } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, Stack, useStyles2, DatePickerWithInput, DatePickerWithInputProps } from '@grafana/ui';\n\ninterface DatePickerInputProps extends DatePickerWithInputProps {\n  onClear?: () => void;\n}\n\nexport const DatePickerInput = forwardRef<HTMLInputElement, DatePickerInputProps>(({ onClear, ...props }, ref) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <DatePickerWithInput\n      {...props}\n      ref={ref}\n      closeOnSelect\n      suffix={\n        <Stack gap={1} alignItems=\"center\">\n          {props.value && onClear && <Icon name=\"times\" size=\"lg\" className={styles.iconButton} onClick={onClear} />}\n          <Icon name=\"calendar-alt\" />\n        </Stack>\n      }\n    />\n  );\n});\n\nDatePickerInput.displayName = 'DatePickerInput';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    iconButton: css({\n      '&:hover': {\n        color: theme.colors.text.maxContrast,\n      },\n      cursor: 'pointer',\n    }),\n  };\n};\n","import { Controller, useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Field } from '@grafana/ui';\nimport { formSchemaValidationRules } from 'app/extensions/reports/utils/validation';\nimport { ReportFormV2 } from 'app/extensions/types/reports';\n\nimport { DatePickerInput } from './DatePickerInput';\n\nexport function EndDateInput() {\n  const {\n    control,\n    watch,\n    formState: { errors },\n    resetField,\n  } = useFormContext<ReportFormV2>();\n\n  const startDate = watch('schedule.startDate') ?? new Date();\n\n  return (\n    <Field\n      label={t('share-report.schedule.end-date', 'End date')}\n      error={errors.schedule?.endDate?.message}\n      invalid={!!errors.schedule?.endDate?.message}\n      htmlFor=\"end-date-picker\"\n    >\n      <Controller\n        name=\"schedule.endDate\"\n        control={control}\n        rules={formSchemaValidationRules(watch()).schedule.endDate}\n        render={({ field: { value, ...field } }) => (\n          <DatePickerInput\n            id=\"end-date-picker\"\n            {...field}\n            value={value || ''}\n            placeholder={t('share-report.schedule.end-date-placeholder', 'Does not end')}\n            minDate={new Date(startDate)}\n            onClear={() => resetField('schedule.endDate')}\n          />\n        )}\n      />\n    </Field>\n  );\n}\n","import { Controller, useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Field, TimeOfDayPicker } from '@grafana/ui';\nimport { ReportFormV2 } from 'app/extensions/types/reports';\n\nexport function EndTimeInput() {\n  const { control } = useFormContext<ReportFormV2>();\n\n  return (\n    <Field label={t('share-report.schedule.end-time', 'End time')}>\n      <Controller\n        name=\"schedule.endTime\"\n        render={({ field: { ref, ...field } }) => {\n          return <TimeOfDayPicker {...field} minuteStep={10} />;\n        }}\n        control={control}\n      />\n    </Field>\n  );\n}\n","import { Controller, useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Combobox, Field } from '@grafana/ui';\nimport { ReportSchedulingFrequencyV2, ReportFormV2 } from 'app/extensions/types/reports';\n\nconst frequencyOptions = [\n  { label: 'Once', value: ReportSchedulingFrequencyV2.Once },\n  { label: 'Hourly', value: ReportSchedulingFrequencyV2.Hourly },\n  { label: 'Daily', value: ReportSchedulingFrequencyV2.Daily },\n  { label: 'Weekly', value: ReportSchedulingFrequencyV2.Weekly },\n  { label: 'Monthly', value: ReportSchedulingFrequencyV2.Monthly },\n  { label: 'Custom', value: ReportSchedulingFrequencyV2.Custom },\n];\n\nexport function FrequencyInput() {\n  const { control } = useFormContext<ReportFormV2>();\n\n  return (\n    <Field label={t('share-report.schedule.frequency', 'Frequency')} htmlFor=\"frequency-combobox\">\n      <Controller\n        name=\"schedule.frequency\"\n        control={control}\n        render={({ field: { ref, onChange, ...rest } }) => (\n          <Combobox\n            id=\"frequency-combobox\"\n            {...rest}\n            options={frequencyOptions}\n            onChange={(v) => {\n              onChange(v.value);\n            }}\n          />\n        )}\n      />\n    </Field>\n  );\n}\n","import { Controller, useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Field, RadioButtonGroup } from '@grafana/ui';\nimport { ReportFormV2, SendTime } from 'app/extensions/types/reports';\n\nconst sendTimeOptions = [\n  { label: 'Send now', value: SendTime.Now },\n  { label: 'Send later', value: SendTime.Later },\n];\n\nexport function SendTimeOptions() {\n  const { control } = useFormContext<ReportFormV2>();\n\n  return (\n    <Field label={t('share-report.schedule.send-time', 'Schedule')}>\n      <Controller\n        control={control}\n        name=\"schedule.sendTime\"\n        render={({ field: { ref, ...rest } }) => <RadioButtonGroup fullWidth {...rest} options={sendTimeOptions} />}\n      />\n    </Field>\n  );\n}\n","import { useFormContext, Controller } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Combobox, Field, Input, Stack } from '@grafana/ui';\nimport { formSchemaValidationRules } from 'app/extensions/reports/utils/validation';\nimport { ReportFormV2, ReportIntervalFrequency } from 'app/extensions/types/reports';\n\nimport { intervalOptions } from '../SendLaterSchedule';\n\nexport function CustomFrequencyOptions() {\n  const { register, control, formState } = useFormContext<ReportFormV2>();\n\n  const hasError = !!formState.errors.schedule?.intervalAmount;\n\n  return (\n    <Field\n      label={t('share-report.schedule.repeat-every', 'Repeat every')}\n      error={formState.errors.schedule?.intervalAmount?.message}\n      {...(hasError && { invalid: true })}\n      htmlFor=\"repeat-frequency\"\n    >\n      <Stack gap={1}>\n        <Input\n          width={8}\n          id=\"repeat-frequency\"\n          type=\"number\"\n          min={2}\n          {...register('schedule.intervalAmount', {\n            valueAsNumber: true,\n            ...formSchemaValidationRules().schedule.intervalAmount,\n          })}\n          placeholder={t('share-report.schedule.repeat-every-placeholder', 'e.g. 2')}\n          defaultValue={2}\n        />\n        <Controller\n          control={control}\n          name=\"schedule.intervalFrequency\"\n          defaultValue={ReportIntervalFrequency.Hours}\n          render={({ field: { ref, onChange, ...field } }) => (\n            <Combobox\n              {...field}\n              onChange={(interval) => onChange(interval.value)}\n              options={intervalOptions}\n              placeholder={t('share-report.schedule.repeat-interval-frequency-placeholder', 'e.g. hours')}\n            />\n          )}\n        />\n      </Stack>\n    </Field>\n  );\n}\n","import { isLastDayOfMonth } from 'date-fns';\nimport { useFormContext, Controller } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Field } from '@grafana/ui';\nimport { formSchemaValidationRules } from 'app/extensions/reports/utils/validation';\nimport { ReportFormV2 } from 'app/extensions/types';\n\nimport { DatePickerInput } from './DatePickerInput';\n\nexport function StartDateInput() {\n  const {\n    watch,\n    setValue,\n    trigger,\n    control,\n    formState: { errors, isSubmitted },\n  } = useFormContext<ReportFormV2>();\n\n  const onStartDateChange = (date: Date) => {\n    const lastDayOfMonth = watch('schedule.lastDayOfMonthOnly');\n    const sendOnLastDayOfMonth = lastDayOfMonth && isLastDayOfMonth(date);\n    setValue('schedule.lastDayOfMonthOnly', sendOnLastDayOfMonth);\n  };\n\n  return (\n    <Field\n      label={t('share-report.schedule.start-date', 'Start date')}\n      error={errors.schedule?.startDate?.message}\n      invalid={!!errors.schedule?.startDate?.message}\n      htmlFor=\"start-date-picker\"\n    >\n      <Controller\n        name=\"schedule.startDate\"\n        control={control}\n        rules={formSchemaValidationRules().schedule.startDate}\n        defaultValue={new Date()}\n        render={({ field: { onChange, ...field } }) => (\n          <DatePickerInput\n            id=\"start-date-picker\"\n            {...field}\n            placeholder={t('share-report.schedule.start-date-placeholder', 'Select date')}\n            onChange={(v) => {\n              const date = new Date(v);\n              onStartDateChange(date);\n              onChange(date);\n              if (isSubmitted) {\n                trigger('schedule.endDate');\n              }\n            }}\n            minDate={new Date()}\n          />\n        )}\n      />\n    </Field>\n  );\n}\n","import { Controller, useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Field, TimeOfDayPicker } from '@grafana/ui';\nimport { ReportFormV2 } from 'app/extensions/types';\n\nexport function StartTimeInput() {\n  const { control } = useFormContext<ReportFormV2>();\n\n  return (\n    <Field label={t('share-report.schedule.start-time', 'Start time')}>\n      <Controller\n        name=\"schedule.startTime\"\n        render={({ field: { ref, ...field } }) => {\n          return <TimeOfDayPicker {...field} minuteStep={10} />;\n        }}\n        control={control}\n      />\n    </Field>\n  );\n}\n","import { Controller, useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Field, TimeZonePicker } from '@grafana/ui';\nimport { ReportFormV2, ReportIntervalFrequency } from 'app/extensions/types/reports';\n\nimport { StartDateInput, StartTimeInput } from './components';\n\nexport const intervalOptions = [\n  { label: 'hours', value: ReportIntervalFrequency.Hours },\n  { label: 'days', value: ReportIntervalFrequency.Days },\n  { label: 'weeks', value: ReportIntervalFrequency.Weeks },\n  { label: 'months', value: ReportIntervalFrequency.Months },\n];\n\nexport function SendLaterSchedule() {\n  const { control } = useFormContext<ReportFormV2>();\n\n  return (\n    <>\n      <StartDateInput />\n      <StartTimeInput />\n      <Field label={t('share-report.schedule.time-zone', 'Time zone')}>\n        <Controller\n          name=\"schedule.timeZone\"\n          render={({ field: { ref, ...field } }) => <TimeZonePicker {...field} openMenuOnFocus={false} />}\n          control={control}\n        />\n      </Field>\n    </>\n  );\n}\n","import { css } from '@emotion/css';\nimport { useState } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\nimport { useMedia } from 'react-use';\n\nimport { GrafanaTheme2, VariableHide } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport {\n  SceneComponentProps,\n  SceneDataLayerControls,\n  sceneGraph,\n  SceneObject,\n  SceneObjectBase,\n  SceneObjectState,\n  SceneTimeRange,\n  SceneTimeRangeLike,\n  SceneVariables,\n  VariableValueSelectors,\n} from '@grafana/scenes';\nimport {\n  CollapsableSection,\n  Field,\n  isWeekStart,\n  Stack,\n  useTheme2,\n  useStyles2,\n  IconButton,\n  Alert,\n  TimeRangeInput,\n  LinkButton,\n  Label,\n  Icon,\n  Tooltip,\n} from '@grafana/ui';\nimport { DashboardPicker, DashboardPickerDTO } from 'app/core/components/Select/DashboardPicker';\nimport { formSchemaValidationRules } from 'app/extensions/reports/utils/validation';\nimport { ReportFormV2 } from 'app/extensions/types';\nimport { getDashboardAPI } from 'app/features/dashboard/api/dashboard_api';\nimport { DashboardModel } from 'app/features/dashboard/state/DashboardModel';\nimport { createVariablesForDashboard } from 'app/features/dashboard-scene/utils/variables';\n\nexport interface SelectDashboardState extends SceneObjectState {\n  uid?: string;\n  title: string;\n  variables?: SceneVariables;\n  timeRange?: SceneTimeRangeLike;\n  variableControls?: SceneObject[];\n  onRemoveClick: (scene: SelectDashboardScene) => void;\n}\n\nexport class SelectDashboardScene extends SceneObjectBase<SelectDashboardState> {\n  static Component = SelectDashboardRenderer;\n\n  public constructor(state?: Partial<SelectDashboardState>) {\n    super({\n      ...state,\n      title: state?.title ?? '',\n      onRemoveClick: state?.onRemoveClick ?? (() => {}),\n    });\n  }\n\n  public onDashboardChange = (\n    uid: string,\n    title: string,\n    timeRange: SceneTimeRangeLike,\n    variables: SceneVariables,\n    variableControls: SceneObject[]\n  ) => {\n    this.setState({ uid, title, $timeRange: timeRange, $variables: variables, variableControls });\n  };\n\n  public onRemove = () => {\n    this.setState({ uid: undefined, title: undefined, $variables: undefined, $timeRange: undefined });\n  };\n}\n\nfunction SelectDashboardRenderer({ model }: SceneComponentProps<SelectDashboardScene>) {\n  const {\n    watch,\n    control,\n    formState: { errors },\n    setValue,\n  } = useFormContext<ReportFormV2>();\n\n  const { uid, variableControls, $variables, onRemoveClick, key } = model.useState();\n\n  const [isTemplateVariablesOpen, setIsTemplateVariablesOpen] = useState(true);\n\n  const styles = useStyles2(getStyles);\n  const theme = useTheme2();\n  const isTimeRangeReversed = useMedia(`(max-width: ${theme.breakpoints.values.md}px)`);\n\n  const dashboards = watch('dashboards');\n  const isDuplicate = dashboards.filter((dashboard) => dashboard.uid === uid).length > 1;\n  const firstIndex = dashboards.findIndex((dashboard) => dashboard.uid === uid);\n  const dashboardIndex = dashboards.findIndex((dashboard) => dashboard.key === key);\n\n  const showDuplicateTemplateVariablesAlert = isDuplicate && dashboardIndex > firstIndex;\n\n  const onDashboardChange = async (dashboard?: DashboardPickerDTO) => {\n    if (!dashboard) {\n      model.onRemove();\n      return;\n    }\n\n    const resp = await getDashboardAPI('v1').getDashboardDTO(dashboard.uid);\n    const dashboardModel = new DashboardModel(resp.dashboard, resp.meta);\n\n    const timeRange = new SceneTimeRange({\n      from: dashboardModel.time.from,\n      to: dashboardModel.time.to,\n      fiscalYearStartMonth: dashboardModel.fiscalYearStartMonth,\n      timeZone: dashboardModel.timezone,\n      weekStart: isWeekStart(dashboardModel.weekStart) ? dashboardModel.weekStart : undefined,\n    });\n    const variables = createVariablesForDashboard(dashboardModel);\n\n    model.onDashboardChange(dashboard.uid, dashboard.title, timeRange, variables, [\n      new VariableValueSelectors({ layout: 'vertical' }),\n      new SceneDataLayerControls(),\n    ]);\n\n    setValue(`dashboards.${dashboardIndex}.uid`, dashboard.uid);\n    setValue(`dashboards.${dashboardIndex}.timeRange`, timeRange.state.value);\n  };\n\n  const timeRange = sceneGraph.getTimeRange(model);\n\n  const templateVariables = $variables?.state.variables?.filter(\n    ({ state }) => state.hide !== VariableHide.hideVariable\n  );\n\n  return (\n    <Stack direction=\"column\" flex={1}>\n      <Stack alignItems=\"flex-start\" flex={1} direction={{ xs: 'column', md: 'row' }}>\n        <div className={styles.sourceDashboard}>\n          <Field\n            label={t('share-report.dashboard.source-dashboard-label', 'Source dashboard')}\n            required\n            className={styles.field}\n            error={errors.dashboards?.[dashboardIndex]?.uid?.message}\n            invalid={!!errors.dashboards?.[dashboardIndex]?.uid?.message}\n          >\n            <Controller\n              name={`dashboards.${dashboardIndex}.uid`}\n              control={control}\n              rules={formSchemaValidationRules().dashboards.uid}\n              render={({ field: { onChange, ...fieldProps } }) => {\n                return (\n                  <DashboardPicker\n                    {...fieldProps}\n                    onChange={(dashboard) => {\n                      onChange(dashboard?.uid);\n                      onDashboardChange(dashboard);\n                    }}\n                  />\n                );\n              }}\n            />\n          </Field>\n        </div>\n        <Field\n          label={\n            <Label>\n              <Stack alignItems=\"center\">\n                {t('share-report.dashboard.time-range-label', 'Time range')}\n                <Tooltip\n                  content={t(\n                    'share-report.dashboard.time-range-description',\n                    \"Empty time range will fallback to the time range from the report's dashboard. Absolute time range is represented in your browser's timezone.\"\n                  )}\n                >\n                  <Icon name=\"info-circle\" />\n                </Tooltip>\n              </Stack>\n            </Label>\n          }\n          className={styles.field}\n          error={errors.dashboards?.[dashboardIndex]?.timeRange?.message}\n          invalid={!!errors.dashboards?.[dashboardIndex]?.timeRange?.message}\n          required\n        >\n          <Controller\n            name={`dashboards.${dashboardIndex}.timeRange`}\n            control={control}\n            render={({ field: { onChange, ref, ...fieldProps } }) => {\n              return (\n                <TimeRangeInput\n                  {...fieldProps}\n                  clearable\n                  value={timeRange.state.value}\n                  timeZone=\"browser\"\n                  onChange={(e) => {\n                    onChange(e);\n                    timeRange.onTimeRangeChange(e);\n                  }}\n                  isReversed={isTimeRangeReversed}\n                />\n              );\n            }}\n          />\n        </Field>\n        <Field label=\"\">\n          <Stack alignItems=\"center\">\n            <LinkButton\n              disabled={!uid}\n              href={`${config.appUrl}d/${uid}`}\n              target=\"_blank\"\n              icon=\"external-link-alt\"\n              variant=\"secondary\"\n              fill=\"text\"\n              tooltip={t('share-report.dashboard.view-dashboard-tooltip', 'View dashboard')}\n            />\n            {dashboards.length > 1 && (\n              <IconButton\n                key=\"delete\"\n                name=\"trash-alt\"\n                tooltip={t('share-report.dashboard.delete-dashboard-tooltip', 'Delete this dashboard')}\n                onClick={() => onRemoveClick(model)}\n              />\n            )}\n          </Stack>\n        </Field>\n      </Stack>\n      {templateVariables?.length ? (\n        showDuplicateTemplateVariablesAlert ? (\n          <Alert\n            severity=\"info\"\n            title={t(\n              'share-report.dashboard.repeated-template-variables-description',\n              'When adding the same dashboard multiple times in one report, template variables that you selected first are applied to all instances of that dashboard in the report.'\n            )}\n          ></Alert>\n        ) : (\n          <div>\n            <CollapsableSection\n              label={t('share-report.dashboard.template-variables-title', 'Customize template variables')}\n              isOpen={isTemplateVariablesOpen}\n              onToggle={() => setIsTemplateVariablesOpen((prevState) => !prevState)}\n              className={styles.templateVariablesSectionTitle}\n            >\n              <Stack gap={1} direction={{ xs: 'column', md: 'row' }} wrap={'wrap'}>\n                {variableControls?.map((c) => <c.Component model={c} key={c.state.key} />) ?? <></>}\n              </Stack>\n            </CollapsableSection>\n          </div>\n        )\n      ) : null}\n    </Stack>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    sourceDashboard: css({\n      flex: 1,\n      width: '100%',\n      [theme.breakpoints.up('md')]: {\n        width: 'auto',\n      },\n    }),\n    field: css({\n      width: '100%',\n      [theme.breakpoints.up('md')]: {\n        width: 'auto',\n      },\n    }),\n    templateVariablesSectionTitle: css({\n      fontSize: theme.typography.h6.fontSize,\n      color: theme.colors.text.primary,\n    }),\n  };\n};\n","import { useState } from 'react';\nimport { UseFormSetValue } from 'react-hook-form';\nimport { useAsync } from 'react-use';\n\nimport { dateTime, getDefaultTimeRange } from '@grafana/data';\nimport {\n  SceneDataLayerControls,\n  SceneTimeRange,\n  SceneTimeRangeLike,\n  SceneVariables,\n  VariableValueSelectors,\n} from '@grafana/scenes';\nimport { isWeekStart } from '@grafana/ui';\nimport { notifyApp } from 'app/core/actions';\nimport { createErrorNotification } from 'app/core/copy/appNotification';\nimport { applyDefaultVariablesV2 } from 'app/extensions/reports/utils/variables';\nimport { ReportFormDashboard, ReportFormV2, ReportV2 } from 'app/extensions/types/reports';\nimport { getDashboardAPI } from 'app/features/dashboard/api/dashboard_api';\nimport { DashboardModel } from 'app/features/dashboard/state/DashboardModel';\nimport { createVariablesForDashboard } from 'app/features/dashboard-scene/utils/variables';\nimport { useDispatch } from 'app/types/store';\n\nimport { SelectDashboardScene } from './SelectDashboardScene';\n\nexport type ReportDashboardScene = {\n  key?: string;\n  uid?: string;\n  title?: string;\n  timeRange?: SceneTimeRangeLike;\n  variables?: SceneVariables;\n};\n\nexport const useSelectDashboards = ({\n  report,\n  setValue,\n  appendDashboard,\n  removeDashboard,\n}: {\n  report?: Partial<ReportV2>;\n  setValue: UseFormSetValue<ReportFormV2>;\n  appendDashboard: (dashboard: ReportFormDashboard) => void;\n  removeDashboard: (index: number) => void;\n}) => {\n  const dispatch = useDispatch();\n  const [sceneDashboards, setSceneDashboards] = useState<SelectDashboardScene[]>([]);\n\n  const getDashboards = async () => {\n    try {\n      const dashboards = report?.dashboards?.filter((dashboard) => dashboard?.uid);\n      if (!dashboards?.length) {\n        return [createSelectDashboardScene()];\n      }\n\n      return await Promise.all(\n        dashboards.map(async (dashboard) => {\n          const resp = await getDashboardAPI('v1').getDashboardDTO(dashboard.uid!);\n          const dashboardModel = new DashboardModel(resp.dashboard, resp.meta);\n\n          // time range is automatically converted to browser tz\n          const timeRange = new SceneTimeRange({\n            from: dashboard.timeRange.from,\n            to: dashboard.timeRange.to,\n            fiscalYearStartMonth: dashboardModel.fiscalYearStartMonth,\n            timeZone: dashboardModel.timezone,\n            weekStart: isWeekStart(dashboardModel.weekStart) ? dashboardModel.weekStart : undefined,\n          });\n\n          // it is not possible to set the time range to null in the constructor\n          if (!dashboard.timeRange.from && !dashboard.timeRange.to) {\n            const from = dateTime(null);\n            const to = dateTime(null);\n            timeRange.onTimeRangeChange({ from, to, raw: { from, to } });\n          }\n\n          const reportVariables = applyDefaultVariablesV2(dashboardModel.templating.list, dashboard.variables);\n          dashboardModel.templating.list = reportVariables;\n\n          const variables = createVariablesForDashboard(dashboardModel);\n\n          const sceneDashboard = createSelectDashboardScene({\n            key: undefined,\n            uid: dashboard?.uid,\n            title: dashboard?.title,\n            timeRange,\n            variables,\n          });\n\n          return sceneDashboard;\n        })\n      );\n    } catch (e) {\n      dispatch(\n        notifyApp(\n          createErrorNotification(\n            e instanceof Error ? e.message : 'There was an error trying to load report dashboards'\n          )\n        )\n      );\n      return [];\n    }\n  };\n\n  const { loading: isLoadingDashboards } = useAsync(async () => {\n    const dashboards = await getDashboards();\n\n    const formDashboards = dashboards?.map((scene) => {\n      const timeRange = scene.state.$timeRange?.state.value || getDefaultTimeRange();\n      return {\n        uid: scene.state.uid,\n        key: scene.state.key,\n        timeRange,\n      };\n    });\n\n    setSceneDashboards(dashboards ?? []);\n    setValue('dashboards', formDashboards ?? [], { shouldDirty: false });\n  }, [report]);\n\n  const createSelectDashboardScene = (dashboard?: ReportDashboardScene) => {\n    return new SelectDashboardScene({\n      key: dashboard?.key,\n      uid: dashboard?.uid,\n      title: dashboard?.title,\n      $timeRange: dashboard?.timeRange?.clone() || new SceneTimeRange({ value: getDefaultTimeRange() }),\n      $variables: dashboard?.variables?.clone(),\n      variableControls: [new VariableValueSelectors({ layout: 'vertical' }), new SceneDataLayerControls()],\n      onRemoveClick: onRemoveDashboardClick,\n    });\n  };\n\n  const onRemoveDashboardClick = (dashboard: SelectDashboardScene) => {\n    const index = sceneDashboards?.findIndex((d) => d.state.key === dashboard.state.key);\n    if (index !== undefined) {\n      removeDashboard(index);\n      setSceneDashboards((prevState) => prevState.filter((d) => d !== dashboard));\n    }\n  };\n\n  const onAddDashboardClick = () => {\n    const customScene = createSelectDashboardScene();\n\n    setSceneDashboards((prevState) => [...prevState, customScene]);\n\n    const timeRange = customScene.state.$timeRange?.state.value || getDefaultTimeRange();\n    appendDashboard({\n      uid: undefined,\n      key: customScene.state.key,\n      timeRange,\n    });\n  };\n\n  return {\n    sceneDashboards,\n    isLoadingDashboards,\n    onAddDashboardClick,\n  };\n};\n","import { css, cx } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { CollapsableSection, useStyles2 } from '@grafana/ui';\n\nexport default function ReportSection({\n  label,\n  children,\n  contentClassName,\n  dataTestId,\n  isOpen,\n  onToggle,\n  contentDataTestId,\n}: {\n  label: string;\n  children: React.ReactNode;\n  isOpen: boolean;\n  onToggle: (isOpen: boolean) => void;\n  contentClassName?: string;\n  dataTestId?: string;\n  contentDataTestId?: string;\n}) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <CollapsableSection\n      isOpen={isOpen}\n      onToggle={onToggle}\n      label={label}\n      className={styles.sectionTitle}\n      contentClassName={cx(styles.content, contentClassName)}\n      unmountContentWhenClosed={false}\n      headerDataTestId={dataTestId}\n      contentDataTestId={contentDataTestId}\n    >\n      {children}\n    </CollapsableSection>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    sectionTitle: css({\n      fontSize: theme.typography.h4.fontSize,\n    }),\n    content: css({\n      paddingBottom: theme.spacing(0),\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { useEffect, useRef } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\n\nimport { GrafanaTheme2, VariableHide } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { Checkbox, Combobox, Field, Stack, useStyles2, Tooltip, Icon, Label, Grid, Divider } from '@grafana/ui';\nimport config from 'app/core/config';\n\nimport { reportOrientations, reportLayouts, ReportFormV2 } from '../../../types';\nimport { getZoomOptions } from '../../constants';\nimport { selectors } from '../../e2e-selectors/selectors';\nimport ReportSection from '../ReportSection';\n\nimport { SectionProps } from './types';\n\n// Convert options to Combobox format with required value property\nconst orientationOptions = reportOrientations.map(({ icon, ...rest }) => ({\n  ...rest,\n  value: rest.value ?? '',\n}));\n\nconst layoutOptions = reportLayouts.map(({ icon, ...rest }) => ({\n  ...rest,\n  value: rest.value ?? '',\n}));\n\nexport default function Attachments({ open, onToggle, dashboards }: SectionProps) {\n  const {\n    register,\n    watch,\n    control,\n    formState: { touchedFields },\n  } = useFormContext<ReportFormV2>();\n\n  const styles = useStyles2(getStyles);\n  const pdfFormatRef = useRef<HTMLDivElement>(null);\n\n  const isNewPDFRenderingEnabled = !!config.featureToggles.newPDFRendering;\n  const isPDFTablesEnabled = !!config.featureToggles.pdfTables;\n\n  const isPDFSelected = watch('attachments.pdf');\n  const isPDFTablesSelected = watch('attachments.pdfTables');\n  const hasDashboardWithVariables = dashboards?.some((d) =>\n    d.state.$variables?.state.variables?.some(({ state }) => state.hide !== VariableHide.hideVariable)\n  );\n\n  useEffect(() => {\n    if (\n      (isPDFSelected && touchedFields.attachments?.pdf) ||\n      (isPDFTablesSelected && touchedFields.attachments?.pdfTables)\n    ) {\n      pdfFormatRef?.current?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }, [isPDFSelected, isPDFTablesSelected, touchedFields, pdfFormatRef]);\n\n  const zoomOptions = getZoomOptions(isNewPDFRenderingEnabled)\n    .filter((opt) => !opt.isDisabled)\n    .map((opt) => ({\n      label: opt.label,\n      value: opt.value ?? 1,\n    }));\n\n  return (\n    <ReportSection\n      isOpen={open}\n      label={t('share-report.attachments.section-title', 'Attachments')}\n      onToggle={onToggle}\n      dataTestId={selectors.components.ReportFormDrawer.Attachments.header}\n      contentDataTestId={selectors.components.ReportFormDrawer.Attachments.content}\n    >\n      <Stack direction=\"column\" alignItems={'start'} gap={1.5}>\n        <Checkbox\n          label={t('share-report.attachments.pdf-report', 'Attach the report as a PDF')}\n          {...register('attachments.pdf')}\n          data-test-id={selectors.components.ReportFormDrawer.Attachments.pdfReportCheckbox}\n        />\n        {isPDFTablesEnabled && (\n          <Checkbox\n            label={t('share-report.attachments.pdf-tables', 'Attach a separate PDF of table data')}\n            {...register('attachments.pdfTables')}\n            data-test-id={selectors.components.ReportFormDrawer.Attachments.pdfTablesCheckbox}\n          />\n        )}\n        <Checkbox\n          label={t('share-report.attachments.csv-tables', 'Attach a CSV file of table panel data')}\n          {...register('attachments.csv')}\n          data-test-id={selectors.components.ReportFormDrawer.Attachments.csvTablesCheckbox}\n        />\n      </Stack>\n      {(isPDFSelected || isPDFTablesSelected) && (\n        <>\n          <Divider />\n          <div ref={pdfFormatRef}>\n            <h4 className={styles.pdfFormatTitle}>{t('share-report.attachments.pdf-format', 'PDF format')}</h4>\n            <Grid columns={{ xs: 1, md: 3 }} gap={1}>\n              <Field\n                label={\n                  <Stack>\n                    <Label>{t('share-report.attachments.orientation', 'Orientation')}</Label>\n                    <Tooltip\n                      placement=\"right-end\"\n                      content={t(\n                        'share-report.attachments.orientation-tooltip',\n                        'The orientation selection will be applied to the dashboard PDF, table data and the PDF appendix'\n                      )}\n                    >\n                      <Icon name=\"info-circle\" size=\"xs\" />\n                    </Tooltip>\n                  </Stack>\n                }\n              >\n                <Controller\n                  control={control}\n                  name={'pdfOptions.orientation'}\n                  render={({ field: { onChange, ref, ...rest } }) => {\n                    return <Combobox {...rest} options={orientationOptions} onChange={(v) => onChange(v.value)} />;\n                  }}\n                />\n              </Field>\n              {isPDFSelected && (\n                <>\n                  <Field label={t('share-report.attachments.layout', 'Layout')}>\n                    <Controller\n                      control={control}\n                      name={'pdfOptions.layout'}\n                      render={({ field: { onChange, ref, ...rest } }) => {\n                        return <Combobox {...rest} options={layoutOptions} onChange={(v) => onChange(v.value)} />;\n                      }}\n                    />\n                  </Field>\n                  <Field label={t('share-report.attachments.zoom', 'Zoom scale')}>\n                    <Controller\n                      control={control}\n                      name={'pdfOptions.scaleFactor'}\n                      render={({ field: { onChange, ref, ...rest } }) => {\n                        return <Combobox {...rest} options={zoomOptions} onChange={(v) => onChange(v.value)} />;\n                      }}\n                    />\n                  </Field>\n                </>\n              )}\n            </Grid>\n            {isPDFSelected && (\n              <div>\n                <Stack direction=\"column\" alignItems={'start'} gap={1.5}>\n                  {dashboards && dashboards?.length > 1 && (\n                    <Checkbox\n                      {...register('pdfOptions.dashboardPDF.combineOneFile')}\n                      label={t('share-report.attachments.combine-one-file', 'Combine all dashboards PDFs in one file')}\n                      data-test-id={selectors.components.ReportFormDrawer.Attachments.combineDashboardsCheckbox}\n                    />\n                  )}\n                  {hasDashboardWithVariables && (\n                    <Checkbox\n                      {...register('pdfOptions.dashboardPDF.showTemplateVariables')}\n                      label={t(\n                        'share-report.attachments.show-template-variables',\n                        'Show template variables in the header'\n                      )}\n                      data-test-id={selectors.components.ReportFormDrawer.Attachments.showTemplateVariablesCheckbox}\n                    />\n                  )}\n                  {isPDFTablesEnabled && (\n                    <Checkbox\n                      {...register('pdfOptions.dashboardPDF.addPDFTablesAppendix')}\n                      label={t('share-report.attachments.pdf-tables-appendix', 'Include table data as PDF appendix')}\n                      data-test-id={selectors.components.ReportFormDrawer.Attachments.pdfTablesAppendixCheckbox}\n                    />\n                  )}\n                </Stack>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </ReportSection>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    pdfFormatTitle: css({\n      color: theme.colors.text.secondary,\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { useFormContext } from 'react-hook-form';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Checkbox, Field, Icon, Input, Stack, TextArea, TextLink, useStyles2 } from '@grafana/ui';\nimport { ReportFormV2 } from 'app/extensions/types/reports';\n\nimport { SETTINGS_URL } from '../../constants';\nimport { selectors } from '../../e2e-selectors/selectors';\nimport { formSchemaValidationRules } from '../../utils/validation';\nimport ReportSection from '../ReportSection';\n\nimport { SectionProps } from './types';\n\nexport default function EmailConfiguration({ open, onToggle }: SectionProps) {\n  const styles = useStyles2(getStyles);\n\n  const {\n    register,\n    formState: { errors },\n  } = useFormContext<ReportFormV2>();\n\n  return (\n    <ReportSection\n      label={t('share-report.email-configuration.section-title', 'Email settings')}\n      dataTestId={selectors.components.ReportFormDrawer.EmailConfiguration.header}\n      contentDataTestId={selectors.components.ReportFormDrawer.EmailConfiguration.content}\n      isOpen={open}\n      onToggle={onToggle}\n    >\n      <Field\n        label={t('share-report.email-configuration.subject-label', 'Email subject')}\n        description={t(\n          'share-report.email-configuration.subject-description',\n          'The report name will be used as the email subject if this field is left empty'\n        )}\n      >\n        <Input\n          id=\"subject-input\"\n          {...register('subject')}\n          type=\"text\"\n          data-testid={selectors.components.ReportFormDrawer.EmailConfiguration.subjectInput}\n        />\n      </Field>\n      <Field label={t('share-report.email-configuration.message-label', 'Message')}>\n        <TextArea\n          id=\"message-input\"\n          {...register('message')}\n          rows={4}\n          placeholder={t('share-report.email-configuration.message-placeholder', 'Enter a message')}\n          data-testid={selectors.components.ReportFormDrawer.EmailConfiguration.messageInput}\n        />\n      </Field>\n      <Field\n        label={t('share-report.email-configuration.reply-to-label', 'Reply-to-email address')}\n        invalid={!!errors.replyTo}\n        error={errors.replyTo?.message}\n      >\n        <Input\n          id=\"reply-to-input\"\n          {...register('replyTo', formSchemaValidationRules().replyTo)}\n          // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n          placeholder=\"your.address@company.com\"\n          type=\"text\"\n          data-testid={selectors.components.ReportFormDrawer.EmailConfiguration.replyToInput}\n        />\n      </Field>\n      <Stack direction=\"column\" gap={1} alignItems={'start'}>\n        <Checkbox\n          {...register('addDashboardUrl')}\n          label={t('share-report.email-configuration.add-dashboard-url-label', 'Include dashboard link')}\n          data-testid={selectors.components.ReportFormDrawer.EmailConfiguration.addDashboardUrlCheckbox}\n        />\n        <Checkbox\n          {...register('addDashboardImage')}\n          label={t('share-report.email-configuration.add-dashboard-image-label', 'Embed dashboard image')}\n          data-testid={selectors.components.ReportFormDrawer.EmailConfiguration.addDashboardImageCheckbox}\n        />\n        <div className={styles.imageSettings}>\n          <Stack gap={1} alignItems=\"center\">\n            <Icon name=\"info-circle\" />\n            <Trans i18nKey=\"share-report.email-configuration.dashboard-image-settings-description\">\n              The dashboard image settings can be adjusted in the general\n              <TextLink variant=\"bodySmall\" href={SETTINGS_URL} inline external>\n                report settings\n              </TextLink>\n            </Trans>\n          </Stack>\n        </div>\n      </Stack>\n    </ReportSection>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  imageSettings: css({\n    fontSize: theme.typography.bodySmall.fontSize,\n    color: theme.colors.text.secondary,\n    marginTop: theme.spacing(1),\n  }),\n});\n","import { Controller, useFormContext } from 'react-hook-form';\n\nimport { t } from '@grafana/i18n';\nimport { Field, TagsInput } from '@grafana/ui';\nimport { ReportFormV2 } from 'app/extensions/types/reports';\nimport { emailSeparator, isEmail } from 'app/extensions/utils/validators';\n\nimport { selectors } from '../../e2e-selectors/selectors';\nimport { canEditReport } from '../../utils/permissions';\nimport { formSchemaValidationRules } from '../../utils/validation';\nimport ReportSection from '../ReportSection';\n\nimport { SectionProps } from './types';\n\nexport default function Recipients({ open, onToggle }: SectionProps) {\n  const {\n    control,\n    formState: { errors },\n    setError,\n    clearErrors,\n    setValue,\n  } = useFormContext<ReportFormV2>();\n\n  function handleTagsChange(tags: string[]) {\n    // First, split any tags that contain separators (semicolons or commas)\n    const splitTags = tags.flatMap((tag) =>\n      tag\n        .split(emailSeparator)\n        .filter(Boolean)\n        .map((email) => email.trim())\n    );\n\n    // Remove duplicates using Set\n    const uniqueTags = [...new Set(splitTags)];\n\n    const validEmails = uniqueTags.filter((tag) => isEmail(tag));\n    const invalidEmails = uniqueTags.filter((tag) => !isEmail(tag));\n\n    // Update form value with array of valid emails\n    setValue('recipients', validEmails, {\n      shouldDirty: true,\n    });\n\n    if (invalidEmails.length) {\n      setError('recipients', {\n        type: 'manual',\n        message:\n          invalidEmails.length > 1\n            ? t('share-report.recipients.invalid-emails', 'Invalid emails: {{emails}}', {\n                emails: invalidEmails.join('; '),\n              })\n            : t('share-report.recipients.invalid-email', 'Invalid email: {{email}}', {\n                email: invalidEmails[0],\n              }),\n      });\n    } else {\n      clearErrors('recipients');\n    }\n  }\n\n  return (\n    <ReportSection\n      isOpen={open}\n      label={t('share-report.recipients.section-title', 'Recipients')}\n      onToggle={onToggle}\n      dataTestId={selectors.components.ReportFormDrawer.Recipients.header}\n      contentDataTestId={selectors.components.ReportFormDrawer.Recipients.content}\n    >\n      <Field\n        label={t('share-report.recipients.field-label', 'Recipients')}\n        description={t(\n          'share-report.recipients.tooltip',\n          'Separate multiple email addresses with a comma or semicolon'\n        )}\n        required\n        invalid={!!errors.recipients}\n        error={errors.recipients?.message}\n      >\n        <Controller\n          name=\"recipients\"\n          control={control}\n          rules={formSchemaValidationRules().recipients}\n          render={({ field: { value, ...rest } }) => (\n            <TagsInput\n              {...rest}\n              disabled={!canEditReport}\n              invalid={!!errors.recipients}\n              onChange={handleTagsChange}\n              placeholder={t(\n                'share-report.recipients.placeholder',\n                \"Type in the recipients' email addresses and press Enter\"\n              )}\n              tags={value}\n              autoColors={false}\n              addOnBlur\n            />\n          )}\n        />\n      </Field>\n    </ReportSection>\n  );\n}\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfYear} function options.\n */\n\n/**\n * @name startOfYear\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * const result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nexport function startOfYear(date, options) {\n  const date_ = toDate(date, options?.in);\n  date_.setFullYear(date_.getFullYear(), 0, 1);\n  date_.setHours(0, 0, 0, 0);\n  return date_;\n}\n\n// Fallback for modularized imports:\nexport default startOfYear;\n","import { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\nimport { startOfYear } from \"./startOfYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getDayOfYear} function options.\n */\n\n/**\n * @name getDayOfYear\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * const result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nexport function getDayOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = differenceInCalendarDays(_date, startOfYear(_date));\n  const dayOfYear = diff + 1;\n  return dayOfYear;\n}\n\n// Fallback for modularized imports:\nexport default getDayOfYear;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;\n","import { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfISOWeek} function options.\n */\n\n/**\n * @name startOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * const result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfISOWeek(date, options) {\n  return startOfWeek(date, { ...options, weekStartsOn: 1 });\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeek;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeekYear} function options.\n */\n\n/**\n * @name getISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n *\n * @returns The ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * const result = getISOWeekYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nexport function getISOWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n\n  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);\n\n  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);\n\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getISOWeekYear;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { getISOWeekYear } from \"./getISOWeekYear.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\n\n/**\n * The {@link startOfISOWeekYear} function options.\n */\n\n/**\n * @name startOfISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week-numbering year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * const result = startOfISOWeekYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfISOWeekYear(date, options) {\n  const year = getISOWeekYear(date, options);\n  const fourthOfJanuary = constructFrom(options?.in || date, 0);\n  fourthOfJanuary.setFullYear(year, 0, 4);\n  fourthOfJanuary.setHours(0, 0, 0, 0);\n  return startOfISOWeek(fourthOfJanuary);\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeekYear;\n","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { startOfISOWeekYear } from \"./startOfISOWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeek} function options.\n */\n\n/**\n * @name getISOWeek\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * const result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nexport function getISOWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getISOWeek;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeekYear} function options.\n */\n\n/**\n * @name getWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Get the local week-numbering year of the given date.\n *\n * @description\n * Get the local week-numbering year of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options.\n *\n * @returns The local week-numbering year\n *\n * @example\n * // Which week numbering year is 26 December 2004 with the default settings?\n * const result = getWeekYear(new Date(2004, 11, 26))\n * //=> 2005\n *\n * @example\n * // Which week numbering year is 26 December 2004 if week starts on Saturday?\n * const result = getWeekYear(new Date(2004, 11, 26), { weekStartsOn: 6 })\n * //=> 2004\n *\n * @example\n * // Which week numbering year is 26 December 2004 if the first week contains 4 January?\n * const result = getWeekYear(new Date(2004, 11, 26), { firstWeekContainsDate: 4 })\n * //=> 2004\n */\nexport function getWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const firstWeekOfNextYear = constructFrom(options?.in || date, 0);\n  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);\n\n  const firstWeekOfThisYear = constructFrom(options?.in || date, 0);\n  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);\n\n  if (+_date >= +startOfNextYear) {\n    return year + 1;\n  } else if (+_date >= +startOfThisYear) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getWeekYear;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { getWeekYear } from \"./getWeekYear.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfWeekYear} function options.\n */\n\n/**\n * @name startOfWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Return the start of a local week-numbering year for the given date.\n *\n * @description\n * Return the start of a local week-numbering year.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week-numbering year\n *\n * @example\n * // The start of an a week-numbering year for 2 July 2005 with default settings:\n * const result = startOfWeekYear(new Date(2005, 6, 2))\n * //=> Sun Dec 26 2004 00:00:00\n *\n * @example\n * // The start of a week-numbering year for 2 July 2005\n * // if Monday is the first day of week\n * // and 4 January is always in the first week of the year:\n * const result = startOfWeekYear(new Date(2005, 6, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfWeekYear(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const year = getWeekYear(date, options);\n  const firstWeek = constructFrom(options?.in || date, 0);\n  firstWeek.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setHours(0, 0, 0, 0);\n  const _date = startOfWeek(firstWeek, options);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeekYear;\n","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { startOfWeekYear } from \"./startOfWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeek} function options.\n */\n\n/**\n * @name getWeek\n * @category Week Helpers\n * @summary Get the local week index of the given date.\n *\n * @description\n * Get the local week index of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The week\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005 with default options?\n * const result = getWeek(new Date(2005, 0, 2))\n * //=> 2\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005,\n * // if Monday is the first day of the week,\n * // and the first week of the year always contains 4 January?\n * const result = getWeek(new Date(2005, 0, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> 53\n */\nexport function getWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getWeek;\n","export function addLeadingZeros(number, targetLength) {\n  const sign = number < 0 ? \"-\" : \"\";\n  const output = Math.abs(number).toString().padStart(targetLength, \"0\");\n  return sign + output;\n}\n","import { addLeadingZeros } from \"../addLeadingZeros.js\";\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nexport const lightFormatters = {\n  // Year\n  y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    const signedYear = date.getFullYear();\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n\n  // Month\n  M(date, token) {\n    const month = date.getMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n\n  // Day of the month\n  d(date, token) {\n    return addLeadingZeros(date.getDate(), token.length);\n  },\n\n  // AM or PM\n  a(date, token) {\n    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n\n  // Hour [1-12]\n  h(date, token) {\n    return addLeadingZeros(date.getHours() % 12 || 12, token.length);\n  },\n\n  // Hour [0-23]\n  H(date, token) {\n    return addLeadingZeros(date.getHours(), token.length);\n  },\n\n  // Minute\n  m(date, token) {\n    return addLeadingZeros(date.getMinutes(), token.length);\n  },\n\n  // Second\n  s(date, token) {\n    return addLeadingZeros(date.getSeconds(), token.length);\n  },\n\n  // Fraction of second\n  S(date, token) {\n    const numberOfDigits = token.length;\n    const milliseconds = date.getMilliseconds();\n    const fractionalSeconds = Math.trunc(\n      milliseconds * Math.pow(10, numberOfDigits - 3),\n    );\n    return addLeadingZeros(fractionalSeconds, token.length);\n  },\n};\n","import { getDayOfYear } from \"../../getDayOfYear.js\";\nimport { getISOWeek } from \"../../getISOWeek.js\";\nimport { getISOWeekYear } from \"../../getISOWeekYear.js\";\nimport { getWeek } from \"../../getWeek.js\";\nimport { getWeekYear } from \"../../getWeekYear.js\";\n\nimport { addLeadingZeros } from \"../addLeadingZeros.js\";\nimport { lightFormatters } from \"./lightFormatters.js\";\n\nconst dayPeriodEnum = {\n  am: \"am\",\n  pm: \"pm\",\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\",\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nexport const formatters = {\n  // Era\n  G: function (date, token, localize) {\n    const era = date.getFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize.era(era, { width: \"abbreviated\" });\n      // A, B\n      case \"GGGGG\":\n        return localize.era(era, { width: \"narrow\" });\n      // Anno Domini, Before Christ\n      case \"GGGG\":\n      default:\n        return localize.era(era, { width: \"wide\" });\n    }\n  },\n\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === \"yo\") {\n      const signedYear = date.getFullYear();\n      // Returns 1 for 1 BC (which is year 0 in JavaScript)\n      const year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, { unit: \"year\" });\n    }\n\n    return lightFormatters.y(date, token);\n  },\n\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    const signedWeekYear = getWeekYear(date, options);\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === \"YY\") {\n      const twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n\n    // Ordinal number\n    if (token === \"Yo\") {\n      return localize.ordinalNumber(weekYear, { unit: \"year\" });\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length);\n  },\n\n  // ISO week-numbering year\n  R: function (date, token) {\n    const isoWeekYear = getISOWeekYear(date);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    const year = date.getFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n\n  // Quarter\n  Q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"Q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"Qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"QQQ\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"QQQQQ\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"QQQQ\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"qqq\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"qqqqq\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"qqqq\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // Month\n  M: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n      case \"Mo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"MMM\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // J, F, ..., D\n      case \"MMMMM\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // January, February, ..., December\n      case \"MMMM\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"formatting\" });\n    }\n  },\n\n  // Stand-alone month\n  L: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case \"L\":\n        return String(month + 1);\n      // 01, 02, ..., 12\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n      case \"Lo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"LLL\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // J, F, ..., D\n      case \"LLLLL\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // January, February, ..., December\n      case \"LLLL\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"standalone\" });\n    }\n  },\n\n  // Local week of year\n  w: function (date, token, localize, options) {\n    const week = getWeek(date, options);\n\n    if (token === \"wo\") {\n      return localize.ordinalNumber(week, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(week, token.length);\n  },\n\n  // ISO week of year\n  I: function (date, token, localize) {\n    const isoWeek = getISOWeek(date);\n\n    if (token === \"Io\") {\n      return localize.ordinalNumber(isoWeek, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(isoWeek, token.length);\n  },\n\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === \"do\") {\n      return localize.ordinalNumber(date.getDate(), { unit: \"date\" });\n    }\n\n    return lightFormatters.d(date, token);\n  },\n\n  // Day of year\n  D: function (date, token, localize) {\n    const dayOfYear = getDayOfYear(date);\n\n    if (token === \"Do\") {\n      return localize.ordinalNumber(dayOfYear, { unit: \"dayOfYear\" });\n    }\n\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n\n  // Day of week\n  E: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    switch (token) {\n      // Tue\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"EEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"EEEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"EEEE\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Local day of week\n  e: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case \"e\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n      case \"eo\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"eee\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"eeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"eeeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"eeee\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case \"c\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n      case \"co\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"ccc\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // T\n      case \"ccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // Tu\n      case \"cccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\",\n        });\n      // Tuesday\n      case \"cccc\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // ISO day of week\n  i: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case \"i\":\n        return String(isoDayOfWeek);\n      // 02\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n      case \"io\":\n        return localize.ordinalNumber(isoDayOfWeek, { unit: \"day\" });\n      // Tue\n      case \"iii\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"iiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"iiiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"iiii\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM or PM\n  a: function (date, token, localize) {\n    const hours = date.getHours();\n    const dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"aaa\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"aaaaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"aaaa\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"bbb\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"bbbbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"bbbb\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"BBBBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"BBBB\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === \"ho\") {\n      let hours = date.getHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return lightFormatters.h(date, token);\n  },\n\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === \"Ho\") {\n      return localize.ordinalNumber(date.getHours(), { unit: \"hour\" });\n    }\n\n    return lightFormatters.H(date, token);\n  },\n\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    const hours = date.getHours() % 12;\n\n    if (token === \"Ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    let hours = date.getHours();\n    if (hours === 0) hours = 24;\n\n    if (token === \"ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Minute\n  m: function (date, token, localize) {\n    if (token === \"mo\") {\n      return localize.ordinalNumber(date.getMinutes(), { unit: \"minute\" });\n    }\n\n    return lightFormatters.m(date, token);\n  },\n\n  // Second\n  s: function (date, token, localize) {\n    if (token === \"so\") {\n      return localize.ordinalNumber(date.getSeconds(), { unit: \"second\" });\n    }\n\n    return lightFormatters.s(date, token);\n  },\n\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case \"XXXX\":\n      case \"XX\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case \"XXXXX\":\n      case \"XXX\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case \"xxxx\":\n      case \"xx\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case \"xxxxx\":\n      case \"xxx\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (GMT)\n  O: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (specific non-location)\n  z: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Seconds timestamp\n  t: function (date, token, _localize) {\n    const timestamp = Math.trunc(+date / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n\n  // Milliseconds timestamp\n  T: function (date, token, _localize) {\n    return addLeadingZeros(+date, token.length);\n  },\n};\n\nfunction formatTimezoneShort(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = Math.trunc(absOffset / 60);\n  const minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\n\nfunction formatTimezoneWithOptionalMinutes(offset, delimiter) {\n  if (offset % 60 === 0) {\n    const sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, delimiter);\n}\n\nfunction formatTimezone(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);\n  const minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}\n","const dateLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"P\":\n      return formatLong.date({ width: \"short\" });\n    case \"PP\":\n      return formatLong.date({ width: \"medium\" });\n    case \"PPP\":\n      return formatLong.date({ width: \"long\" });\n    case \"PPPP\":\n    default:\n      return formatLong.date({ width: \"full\" });\n  }\n};\n\nconst timeLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"p\":\n      return formatLong.time({ width: \"short\" });\n    case \"pp\":\n      return formatLong.time({ width: \"medium\" });\n    case \"ppp\":\n      return formatLong.time({ width: \"long\" });\n    case \"pppp\":\n    default:\n      return formatLong.time({ width: \"full\" });\n  }\n};\n\nconst dateTimeLongFormatter = (pattern, formatLong) => {\n  const matchResult = pattern.match(/(P+)(p+)?/) || [];\n  const datePattern = matchResult[1];\n  const timePattern = matchResult[2];\n\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n\n  let dateTimeFormat;\n\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong.dateTime({ width: \"short\" });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"medium\" });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"long\" });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong.dateTime({ width: \"full\" });\n      break;\n  }\n\n  return dateTimeFormat\n    .replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong))\n    .replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n};\n\nexport const longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter,\n};\n","const dayOfYearTokenRE = /^D+$/;\nconst weekYearTokenRE = /^Y+$/;\n\nconst throwTokens = [\"D\", \"DD\", \"YY\", \"YYYY\"];\n\nexport function isProtectedDayOfYearToken(token) {\n  return dayOfYearTokenRE.test(token);\n}\n\nexport function isProtectedWeekYearToken(token) {\n  return weekYearTokenRE.test(token);\n}\n\nexport function warnOrThrowProtectedError(token, format, input) {\n  const _message = message(token, format, input);\n  console.warn(_message);\n  if (throwTokens.includes(token)) throw new RangeError(_message);\n}\n\nfunction message(token, format, input) {\n  const subject = token[0] === \"Y\" ? \"years\" : \"days of the month\";\n  return `Use \\`${token.toLowerCase()}\\` instead of \\`${token}\\` (in \\`${format}\\`) for formatting ${subject} to the input \\`${input}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;\n}\n","/**\n * @name isDate\n * @category Common Helpers\n * @summary Is the given value a date?\n *\n * @description\n * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.\n *\n * @param value - The value to check\n *\n * @returns True if the given value is a date\n *\n * @example\n * // For a valid date:\n * const result = isDate(new Date())\n * //=> true\n *\n * @example\n * // For an invalid date:\n * const result = isDate(new Date(NaN))\n * //=> true\n *\n * @example\n * // For some value:\n * const result = isDate('2014-02-31')\n * //=> false\n *\n * @example\n * // For an object:\n * const result = isDate({})\n * //=> false\n */\nexport function isDate(value) {\n  return (\n    value instanceof Date ||\n    (typeof value === \"object\" &&\n      Object.prototype.toString.call(value) === \"[object Date]\")\n  );\n}\n\n// Fallback for modularized imports:\nexport default isDate;\n","import { isDate } from \"./isDate.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * @name isValid\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Argument is converted to Date using `toDate`. See [toDate](https://date-fns.org/docs/toDate)\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @param date - The date to check\n *\n * @returns The date is valid\n *\n * @example\n * // For the valid date:\n * const result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the value, convertible into a date:\n * const result = isValid(1393804800000)\n * //=> true\n *\n * @example\n * // For the invalid date:\n * const result = isValid(new Date(''))\n * //=> false\n */\nexport function isValid(date) {\n  return !((!isDate(date) && typeof date !== \"number\") || isNaN(+toDate(date)));\n}\n\n// Fallback for modularized imports:\nexport default isValid;\n","import { defaultLocale } from \"./_lib/defaultLocale.js\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { formatters } from \"./_lib/format/formatters.js\";\nimport { longFormatters } from \"./_lib/format/longFormatters.js\";\nimport {\n  isProtectedDayOfYearToken,\n  isProtectedWeekYearToken,\n  warnOrThrowProtectedError,\n} from \"./_lib/protectedTokens.js\";\nimport { isValid } from \"./isValid.js\";\nimport { toDate } from \"./toDate.js\";\n\n// Rexports of internal for libraries to use.\n// See: https://github.com/date-fns/date-fns/issues/3638#issuecomment-1877082874\nexport { formatters, longFormatters };\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nconst formattingTokensRegExp =\n  /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nconst longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\n\nconst escapedStringRegExp = /^'([^]*?)'?$/;\nconst doubleQuoteRegExp = /''/g;\nconst unescapedLatinCharacterRegExp = /[a-zA-Z]/;\n\nexport { format as formatDate };\n\n/**\n * The {@link format} function options.\n */\n\n/**\n * @name format\n * @alias formatDate\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * >  Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear](https://date-fns.org/docs/getISOWeekYear)\n *    and [getWeekYear](https://date-fns.org/docs/getWeekYear)).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @param date - The original date\n * @param format - The string of tokens\n * @param options - An object with options\n *\n * @returns The formatted date string\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `localize` property\n * @throws `options.locale` must contain `formatLong` property\n * @throws use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\nexport function format(date, formatStr, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const originalDate = toDate(date, options?.in);\n\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n\n  let parts = formatStr\n    .match(longFormattingTokensRegExp)\n    .map((substring) => {\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n        const longFormatter = longFormatters[firstCharacter];\n        return longFormatter(substring, locale.formatLong);\n      }\n      return substring;\n    })\n    .join(\"\")\n    .match(formattingTokensRegExp)\n    .map((substring) => {\n      // Replace two single quote characters with one single quote character\n      if (substring === \"''\") {\n        return { isToken: false, value: \"'\" };\n      }\n\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"'\") {\n        return { isToken: false, value: cleanEscapedString(substring) };\n      }\n\n      if (formatters[firstCharacter]) {\n        return { isToken: true, value: substring };\n      }\n\n      if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n        throw new RangeError(\n          \"Format string contains an unescaped latin alphabet character `\" +\n            firstCharacter +\n            \"`\",\n        );\n      }\n\n      return { isToken: false, value: substring };\n    });\n\n  // invoke localize preprocessor (only for french locales at the moment)\n  if (locale.localize.preprocessor) {\n    parts = locale.localize.preprocessor(originalDate, parts);\n  }\n\n  const formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale,\n  };\n\n  return parts\n    .map((part) => {\n      if (!part.isToken) return part.value;\n\n      const token = part.value;\n\n      if (\n        (!options?.useAdditionalWeekYearTokens &&\n          isProtectedWeekYearToken(token)) ||\n        (!options?.useAdditionalDayOfYearTokens &&\n          isProtectedDayOfYearToken(token))\n      ) {\n        warnOrThrowProtectedError(token, formatStr, String(date));\n      }\n\n      const formatter = formatters[token[0]];\n      return formatter(originalDate, token, locale.localize, formatterOptions);\n    })\n    .join(\"\");\n}\n\nfunction cleanEscapedString(input) {\n  const matched = input.match(escapedStringRegExp);\n\n  if (!matched) {\n    return input;\n  }\n\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\n\n// Fallback for modularized imports:\nexport default format;\n","import { useFormContext } from 'react-hook-form';\n\nimport { dateTime } from '@grafana/data';\nimport { canBeLastDayOfMonth } from 'app/extensions/reports/utils/dateTime';\nimport {\n  ReportFormV2,\n  ReportIntervalFrequency,\n  ReportSchedulingFrequencyV2,\n  SendTime,\n} from 'app/extensions/types/reports';\n\nexport const useFrequencyInputs = () => {\n  const { watch } = useFormContext<ReportFormV2>();\n\n  const { frequency, lastDayOfMonthOnly, startDate, endDate, intervalFrequency, sendTime } = watch('schedule');\n\n  const canStartDateBeLastDayOfMonth = startDate && canBeLastDayOfMonth(new Date(startDate).getDate());\n  const canCurrentDateBeLastDayOfMonth =\n    sendTime === SendTime.Now && canBeLastDayOfMonth(dateTime().toDate().getDate());\n\n  const showWorkdaysOnlyCheckbox =\n    [ReportSchedulingFrequencyV2.Hourly, ReportSchedulingFrequencyV2.Daily].includes(frequency) ||\n    (frequency === ReportSchedulingFrequencyV2.Custom && intervalFrequency === ReportIntervalFrequency.Hours);\n\n  const showEndTimeInput =\n    endDate &&\n    (frequency === ReportSchedulingFrequencyV2.Hourly ||\n      (frequency === ReportSchedulingFrequencyV2.Custom && intervalFrequency === ReportIntervalFrequency.Hours));\n\n  const showLastDayOfMonthWarning =\n    frequency === ReportSchedulingFrequencyV2.Monthly &&\n    !lastDayOfMonthOnly &&\n    (canStartDateBeLastDayOfMonth || canCurrentDateBeLastDayOfMonth);\n\n  return {\n    showWorkdaysOnlyCheckbox,\n    showEndTimeInput,\n    showLastDayOfMonthWarning,\n  };\n};\n","import { format } from 'date-fns';\nimport { useFormContext } from 'react-hook-form';\n\nimport { dateTime } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { Alert, Checkbox, Grid } from '@grafana/ui';\nimport { ReportFormV2, ReportSchedulingFrequencyV2, SendTime } from 'app/extensions/types/reports';\n\nimport { EndDateInput, EndTimeInput, WorkdaysOnlyCheckbox } from './components';\nimport { useFrequencyInputs } from './useFrequencyInputs';\n\nexport function Frequency() {\n  const { watch, setValue, register } = useFormContext<ReportFormV2>();\n\n  const { frequency, sendTime, startDate } = watch('schedule');\n  const { showWorkdaysOnlyCheckbox, showEndTimeInput, showLastDayOfMonthWarning } = useFrequencyInputs();\n\n  const onSendOnLastDayOfMonthChange = () => {\n    const endOfMonthDate = dateTime(startDate).endOf('month').toDate();\n    setValue('schedule.startDate', endOfMonthDate);\n  };\n\n  const lastDayOfMonthOnlyRegister = register('schedule.lastDayOfMonthOnly');\n\n  return (\n    <>\n      {showLastDayOfMonthWarning && (\n        <Alert severity=\"warning\" title=\"\">\n          {t(\n            'share-report.schedule.monthly-schedule-alert-title',\n            'Note: Reports won\\'t be sent on months that don\\'t have a {{ dayNumber }} day. Choose an earlier date or select \"Send on the last day of the month\" to send a report at the end of every month.',\n            {\n              dayNumber: format(sendTime === 'now' ? dateTime().toDate() : startDate!, 'do'),\n            }\n          )}\n        </Alert>\n      )}\n      {frequency !== ReportSchedulingFrequencyV2.Once && (\n        <Grid columnGap={2} columns={{ xs: 1, md: 3 }}>\n          <EndDateInput />\n          {showEndTimeInput && <EndTimeInput />}\n        </Grid>\n      )}\n      {showWorkdaysOnlyCheckbox && <WorkdaysOnlyCheckbox />}\n      {sendTime === SendTime.Later && frequency === ReportSchedulingFrequencyV2.Monthly && (\n        <Checkbox\n          {...lastDayOfMonthOnlyRegister}\n          label={t('share-report.schedule.last-day-of-month', 'Send on the last day of month')}\n          onChange={(e) => {\n            onSendOnLastDayOfMonthChange();\n            lastDayOfMonthOnlyRegister.onChange(e);\n          }}\n        />\n      )}\n    </>\n  );\n}\n","import { css } from '@emotion/css';\nimport { useFormContext } from 'react-hook-form';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { Grid, Icon, Stack, useStyles2 } from '@grafana/ui';\nimport { selectors } from 'app/extensions/reports/e2e-selectors/selectors';\nimport { schedulePreview } from 'app/extensions/reports/utils/scheduler';\nimport {\n  LAST_DAY_OF_MONTH,\n  ReportFormV2,\n  ReportSchedulingFrequency,\n  ReportSchedulingFrequencyV2,\n  SchedulingData,\n  SendTime,\n} from 'app/extensions/types/reports';\n\nimport ReportSection from '../../ReportSection';\nimport { SectionProps } from '../types';\n\nimport { Frequency } from './Frequency';\nimport { SendLaterSchedule } from './SendLaterSchedule';\nimport { CustomFrequencyOptions, FrequencyInput, SendTimeOptions } from './components';\n\nfunction SchedulePreview() {\n  const { watch } = useFormContext<ReportFormV2>();\n  const styles = useStyles2(getStyles);\n\n  const {\n    frequency,\n    startTime,\n    endTime,\n    sendTime,\n    lastDayOfMonthOnly,\n    timeZone,\n    startDate,\n    endDate,\n    intervalFrequency,\n    intervalAmount,\n    workdaysOnly,\n  } = watch('schedule');\n\n  const scheduleData: SchedulingData = {\n    frequency: frequency as unknown as ReportSchedulingFrequency,\n    time: { hour: startTime?.hour?.() ?? 0, minute: startTime?.minute?.() ?? 0 },\n    endTime: { hour: endTime?.hour?.() ?? 0, minute: endTime?.minute?.() ?? 0 },\n    sendTime,\n    dayOfMonth: lastDayOfMonthOnly ? LAST_DAY_OF_MONTH : undefined,\n    timeZone,\n    startDate,\n    endDate,\n    intervalFrequency,\n    intervalAmount: intervalAmount?.toString(),\n    workdaysOnly,\n  };\n\n  return (\n    <div className={styles.preview} data-testid=\"schedule-preview\">\n      <Stack alignItems=\"center\">\n        <Icon name=\"calendar-alt\" />\n        {schedulePreview(scheduleData)}\n      </Stack>\n    </div>\n  );\n}\n\nexport default function Schedule({ open, onToggle }: SectionProps) {\n  const { watch } = useFormContext<ReportFormV2>();\n\n  const { frequency, sendTime } = watch('schedule');\n\n  return (\n    <ReportSection\n      isOpen={open}\n      label={t('share-report.schedule.section-title', 'Schedule')}\n      onToggle={onToggle}\n      dataTestId={selectors.components.ReportFormDrawer.Schedule.header}\n      contentDataTestId={selectors.components.ReportFormDrawer.Schedule.content}\n    >\n      <Grid columnGap={2} columns={{ xs: 1, md: 3 }}>\n        <SendTimeOptions />\n        <FrequencyInput />\n        {frequency === ReportSchedulingFrequencyV2.Custom ? <CustomFrequencyOptions /> : <div></div>}\n        {sendTime === SendTime.Later && <SendLaterSchedule />}\n      </Grid>\n      <Frequency />\n      <SchedulePreview />\n    </ReportSection>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    preview: css({\n      marginTop: theme.spacing(2),\n      color: theme.colors.text.secondary,\n    }),\n  };\n};\n","import { t } from '@grafana/i18n';\nimport { Button, Divider, Stack } from '@grafana/ui';\nimport { selectors } from 'app/extensions/reports/e2e-selectors/selectors';\n\nimport ReportSection from '../../ReportSection';\nimport { SectionProps } from '../types';\n\nexport default function SelectDashboards({ dashboards = [], onAddDashboard, open, onToggle }: SectionProps) {\n  return (\n    <ReportSection\n      label={t('share-report.dashboard.section-title', 'Dashboards')}\n      isOpen={open}\n      onToggle={onToggle}\n      dataTestId={selectors.components.ReportFormDrawer.SelectDashboards.header}\n      contentDataTestId={selectors.components.ReportFormDrawer.SelectDashboards.content}\n    >\n      <Stack direction=\"column\" gap={2}>\n        {dashboards.map((dashboard, index) => {\n          return (\n            <Stack direction=\"column\" key={dashboard.state.key}>\n              <dashboard.Component model={dashboard} />\n              {index < dashboards.length - 1 && <Divider spacing={0} />}\n            </Stack>\n          );\n        })}\n      </Stack>\n      <Divider />\n      <Button variant=\"primary\" fill=\"text\" onClick={onAddDashboard}>\n        + {t('share-report.dashboard.add-dashboard', 'Add dashboard')}\n      </Button>\n    </ReportSection>\n  );\n}\n","import { useState } from 'react';\nimport { FieldErrors } from 'react-hook-form';\n\nimport { ReportFormV2 } from 'app/extensions/types/reports';\n\nimport Attachments from './Attachments';\nimport EmailConfiguration from './EmailConfiguration';\nimport Recipients from './Recipients';\nimport Schedule from './Schedule/Schedule';\nimport SelectDashboards from './SelectDashboards/SelectDashboards';\nimport { SectionProps, SectionId } from './types';\n\nexport const REPORT_FORM_SECTIONS: Array<{\n  id: SectionId;\n  inputs: Array<keyof ReportFormV2>;\n  component: React.ComponentType<SectionProps>;\n}> = [\n  { id: SectionId.SelectDashboards, inputs: ['dashboards'], component: SelectDashboards },\n  { id: SectionId.Schedule, inputs: ['schedule'], component: Schedule },\n  {\n    id: SectionId.EmailConfiguration,\n    inputs: ['subject', 'message', 'replyTo', 'addDashboardUrl', 'addDashboardImage'],\n    component: EmailConfiguration,\n  },\n  { id: SectionId.Recipients, inputs: ['recipients'], component: Recipients },\n  { id: SectionId.Attachments, inputs: ['attachments'], component: Attachments },\n];\n\nexport const useReportSections = (defaultOpenSections?: Partial<Record<SectionId, boolean>>) => {\n  const [openSections, setOpenSections] = useState<Record<SectionId, boolean>>({\n    [SectionId.SelectDashboards]: defaultOpenSections?.[SectionId.SelectDashboards] ?? true,\n    [SectionId.Schedule]: defaultOpenSections?.[SectionId.Schedule] ?? true,\n    [SectionId.EmailConfiguration]: defaultOpenSections?.[SectionId.EmailConfiguration] ?? true,\n    [SectionId.Recipients]: defaultOpenSections?.[SectionId.Recipients] ?? true,\n    [SectionId.Attachments]: defaultOpenSections?.[SectionId.Attachments] ?? true,\n  });\n\n  const updateOpenSectionsByErrors = (errors: FieldErrors<ReportFormV2>) => {\n    const errorFields = Object.keys(errors);\n\n    const sectionsWithErrors = REPORT_FORM_SECTIONS.filter((section) =>\n      section.inputs.some((input) => errorFields.includes(input))\n    ).map((section) => section.id);\n\n    setOpenSections((prevState) => {\n      const newState = { ...prevState };\n      REPORT_FORM_SECTIONS.forEach((section) => {\n        const isClosed = !newState[section.id];\n        if (isClosed) {\n          newState[section.id] = sectionsWithErrors.includes(section.id);\n        }\n      });\n      return newState;\n    });\n  };\n\n  return {\n    openSections,\n    updateOpenSectionsByErrors,\n    setOpenSections,\n  };\n};\n","import { css, cx } from '@emotion/css';\nimport { useEffect, useState } from 'react';\nimport { FormProvider, useFieldArray, useForm } from 'react-hook-form';\n\nimport { dateTime, GrafanaTheme2 } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { featureEnabled } from '@grafana/runtime';\nimport { Divider, Field, Input, LoadingPlaceholder, Stack, Text, useStyles2 } from '@grafana/ui';\nimport { FormPrompt } from 'app/core/components/FormPrompt/FormPrompt';\nimport {\n  useCreateReportMutation,\n  useDeleteReportMutation,\n  useSaveDraftReportMutation,\n  useUpdateReportMutation,\n  useUpdateStateReportMutation,\n} from 'app/extensions/api/clients/reporting';\nimport {\n  ReportFormV2,\n  ReportIntervalFrequency,\n  ReportSchedulingFrequencyV2,\n  ReportState,\n  ReportV2,\n  SendTime,\n} from 'app/extensions/types/reports';\n\nimport { ShareDrawerConfirmAction } from '../../../features/dashboard-scene/sharing/ShareDrawer/ShareDrawerConfirmAction';\nimport { ReportStateLegend } from '../ReportStateLegend';\nimport { DEFAULT_EMAIL_MESSAGE, defaultZoom } from '../constants';\nimport { useReportFormContext } from '../dashboard-scene/ReportRenderingProvider';\nimport { selectors } from '../e2e-selectors/selectors';\nimport { getTimezone } from '../state/reducers';\nimport { canEditReport } from '../utils/permissions';\nimport { getToggledReportState } from '../utils/reportState';\nimport { transformReportV2ToDTO } from '../utils/serialization';\nimport { formSchemaValidationRules } from '../utils/validation';\n\nimport { ReportActions } from './ReportActions';\nimport { ReportingInteractions } from './reportingInteractions';\nimport { intervalOptions } from './sections/Schedule/SendLaterSchedule';\nimport { useSelectDashboards } from './sections/SelectDashboards/useSelectDashboards';\nimport { SectionId } from './sections/types';\nimport { REPORT_FORM_SECTIONS, useReportSections } from './sections/useReportSections';\n\nconst defaultReport: Partial<ReportFormV2> = {\n  message: DEFAULT_EMAIL_MESSAGE,\n  addDashboardUrl: true,\n  addDashboardImage: false,\n  schedule: {\n    sendTime: SendTime.Later,\n    frequency: ReportSchedulingFrequencyV2.Daily,\n    startDate: new Date(),\n    endTime: dateTime().add(2, 'hour').startOf('hour'),\n    startTime: dateTime().add(1, 'hour').startOf('hour'),\n    timeZone: getTimezone(),\n  },\n  attachments: {\n    pdf: true,\n    csv: false,\n    pdfTables: false,\n  },\n  pdfOptions: {\n    orientation: 'landscape',\n    layout: 'grid',\n    scaleFactor: defaultZoom,\n  },\n};\n\nexport default function ReportForm({\n  report,\n  setIsDirty,\n  onSuccess,\n  defaultOpenSections,\n  headerActions,\n}: {\n  report?: Partial<ReportV2>;\n  setIsDirty: (isDirty: boolean) => void;\n  onSuccess: () => void;\n  defaultOpenSections?: Partial<Record<SectionId, boolean>>;\n  headerActions?: React.ReactNode;\n}) {\n  const styles = useStyles2(getStyles);\n  const reportFormContext = useReportFormContext();\n\n  const { openSections, setOpenSections, updateOpenSectionsByErrors } = useReportSections(defaultOpenSections);\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState(false);\n\n  const [createReport, { isLoading: isCreateReportLoading }] = useCreateReportMutation();\n  const [updateReport, { isLoading: isUpdateReportLoading }] = useUpdateReportMutation();\n  const [updateStateReport, { isLoading: isUpdateStateReportLoading }] = useUpdateStateReportMutation();\n  const [saveDraftReport, { isLoading: isSaveDraftLoading }] = useSaveDraftReportMutation();\n  const [deleteReport, { isLoading: isDeleteReportLoading }] = useDeleteReportMutation();\n\n  const isUpsertLoading = isCreateReportLoading || isUpdateReportLoading || isUpdateStateReportLoading;\n\n  const form = useForm<ReportFormV2>({\n    mode: 'onSubmit',\n    defaultValues: {\n      ...defaultReport,\n      ...report,\n      schedule: {\n        ...defaultReport.schedule,\n        ...report?.schedule,\n        intervalFrequency:\n          intervalOptions.find((opt) => opt.value === report?.schedule?.intervalFrequency)?.value ||\n          ReportIntervalFrequency.Hours,\n      },\n    },\n    shouldUnregister: true,\n    shouldFocusError: true,\n  });\n\n  const { remove: removeDashboard, append: appendDashboard } = useFieldArray({\n    control: form.control,\n    name: 'dashboards',\n  });\n\n  const { sceneDashboards, onAddDashboardClick, isLoadingDashboards } = useSelectDashboards({\n    report,\n    setValue: form.setValue,\n    appendDashboard,\n    removeDashboard,\n  });\n\n  useEffect(() => {\n    if (!isLoadingDashboards) {\n      form.setFocus('title');\n    }\n  }, [form, form.setFocus, isLoadingDashboards]);\n\n  useEffect(() => {\n    setIsDirty(form.formState.isDirty);\n  }, [form.formState.isDirty, setIsDirty]);\n\n  const onSubmit = async (data: ReportFormV2) => {\n    const reportDTO = transformReportV2ToDTO({\n      ...data,\n      state: ReportState.Scheduled,\n      dashboardsScene: sceneDashboards,\n      id: report?.id,\n    });\n\n    ReportingInteractions.saveClicked(reportFormContext.renderingContext, reportDTO);\n\n    const upsert = report?.id ? updateReport : createReport;\n    await upsert(reportDTO).unwrap();\n    onSuccess();\n  };\n\n  const onSaveDraftClick = async () => {\n    const data = form.getValues();\n    const reportDTO = transformReportV2ToDTO({\n      ...data,\n      state: ReportState.Draft,\n      dashboardsScene: sceneDashboards,\n      id: report?.id,\n    });\n\n    ReportingInteractions.saveDraftClicked(reportFormContext.renderingContext, reportDTO);\n\n    const upsert = report?.id ? updateReport : saveDraftReport;\n    await upsert(reportDTO).unwrap();\n    onSuccess();\n  };\n\n  const onToggleStateClick = async () => {\n    const data = form.getValues();\n    const newState = report?.state && getToggledReportState(report.state);\n    report?.state === ReportState.Scheduled\n      ? ReportingInteractions.pauseClicked(reportFormContext.renderingContext)\n      : ReportingInteractions.resumeClicked(reportFormContext.renderingContext);\n\n    const reportDTO = transformReportV2ToDTO({\n      ...data,\n      state: newState,\n      dashboardsScene: sceneDashboards,\n      id: report?.id,\n    });\n\n    await updateStateReport(reportDTO).unwrap();\n  };\n\n  const onDeleteClick = () => {\n    ReportingInteractions.deleteClicked(reportFormContext.renderingContext);\n    setShowDeleteConfirmation(true);\n  };\n\n  const onDeleteConfirm = async () => {\n    if (!report?.id) {\n      return;\n    }\n\n    await deleteReport(report?.id).unwrap();\n    setShowDeleteConfirmation(false);\n    onSuccess();\n  };\n\n  return (\n    <>\n      <FormPrompt\n        confirmRedirect={form.formState.isDirty}\n        onDiscard={() => {\n          ReportingInteractions.discardClicked(reportFormContext.renderingContext);\n        }}\n      />\n      <div className={cx({ [styles.hidden]: !showDeleteConfirmation })}>\n        <ShareDrawerConfirmAction\n          title={t('share-report.confirm-delete.title', 'Delete report')}\n          confirmButtonLabel={t('share-report.confirm-delete.button', 'Delete report')}\n          onConfirm={onDeleteConfirm}\n          onDismiss={() => setShowDeleteConfirmation(false)}\n          description={t('share-report.confirm-delete.description', 'Are you sure you want to delete this report?')}\n          isActionLoading={isDeleteReportLoading}\n        />\n      </div>\n      <div className={cx(styles.formContainer, { [styles.hidden]: showDeleteConfirmation })}>\n        <Stack justifyContent=\"space-between\">\n          {headerActions}\n          <Stack justifyContent=\"space-between\" flex={1}>\n            {isLoadingDashboards && (\n              <LoadingPlaceholder\n                data-testid=\"form-loading-placeholder\"\n                text={t('share-report.loading-form', 'Loading form...')}\n              />\n            )}\n            <div className={styles.stateContainer}>\n              <Text>{t('share-report.state', 'State:')}</Text>\n              <ReportStateLegend reportState={report?.state} />\n            </div>\n          </Stack>\n        </Stack>\n        <FormProvider {...form}>\n          <form\n            onSubmit={form.handleSubmit(onSubmit, updateOpenSectionsByErrors)}\n            className={styles.form}\n            data-testid={selectors.components.ReportFormDrawer.container}\n          >\n            <fieldset\n              disabled={\n                !canEditReport ||\n                isUpsertLoading ||\n                isSaveDraftLoading ||\n                isLoadingDashboards ||\n                !featureEnabled('reports.creation')\n              }\n              className={styles.container}\n            >\n              <Field\n                label={t('share-report.report-name.label', 'Report name')}\n                required\n                error={form.formState.errors.title?.message}\n                invalid={!!form.formState.errors.title}\n              >\n                <Input\n                  id=\"title\"\n                  {...form.register('title', formSchemaValidationRules().title)}\n                  placeholder={report?.title}\n                  type=\"text\"\n                  autoComplete=\"off\"\n                />\n              </Field>\n              <Divider spacing={0} />\n              <div className={styles.reportSectionContainer}>\n                <Stack direction=\"column\" flex={1}>\n                  {REPORT_FORM_SECTIONS.map((section, index) => (\n                    <div key={section.id}>\n                      <section.component\n                        dashboards={sceneDashboards}\n                        onAddDashboard={onAddDashboardClick}\n                        open={openSections[section.id]}\n                        onToggle={() =>\n                          setOpenSections((prevState) => ({ ...prevState, [section.id]: !prevState[section.id] }))\n                        }\n                      />\n                      {index < REPORT_FORM_SECTIONS.length - 1 && <Divider />}\n                    </div>\n                  ))}\n                </Stack>\n              </div>\n              <div className={styles.actionsContainer}>\n                <Divider />\n                <ReportActions\n                  isEditMode={!!report?.id}\n                  isUpsertLoading={isUpsertLoading}\n                  isUpdateStateReportLoading={isUpdateStateReportLoading}\n                  isSaveDraftLoading={isSaveDraftLoading}\n                  onSaveDraftClick={onSaveDraftClick}\n                  onDeleteClick={onDeleteClick}\n                  onToggleStateClick={onToggleStateClick}\n                  sceneDashboards={sceneDashboards}\n                  reportState={report?.state}\n                />\n              </div>\n            </fieldset>\n          </form>\n        </FormProvider>\n      </div>\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    form: css({\n      height: '100%',\n    }),\n    container: css({\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n    }),\n    reportSectionContainer: css({\n      height: '100%',\n      marginTop: theme.spacing(2),\n    }),\n    actionsContainer: css({\n      position: 'sticky',\n      bottom: 0,\n      left: 0,\n      right: 0,\n      width: '100%',\n      background: theme.colors.background.primary,\n      zIndex: theme.zIndex.tooltip,\n      marginBottom: theme.spacing(-2),\n      paddingBottom: theme.spacing(2),\n    }),\n    hidden: css({\n      display: 'none',\n    }),\n    formContainer: css({\n      display: 'flex',\n      flexDirection: 'column',\n      gap: theme.spacing(2),\n      flex: 1,\n    }),\n    stateContainer: css({\n      display: 'flex',\n      gap: theme.spacing(1),\n      marginLeft: 'auto',\n    }),\n  };\n};\n"],"names":["downloadCSV","reportTitle","sceneDashboards","dashboards","params","downloadCSVUrl","response","lastValueFrom","blob","ActionsMenu","watch","reportFormContext","reportName","state","handleDownloadCSV","useAsyncFn","e","dashboardsInvalid","redirectToPDFPreview","url","menu","Menu","MenuItem","selectors","Dropdown","Button","SendPreviewToggletip","styles","getStyles","isOpen","setIsOpen","watchMainForm","triggerMainForm","recipients","sendTestEmail","isSendingTestEmail","register","handleSubmit","setValue","clearErrors","errors","reset","useReportEmails","handleClose","handleKeyDown","onSubmit","data","report","reportDTO","onOpenClick","content","Stack","Field","Input","value","Checkbox","checked","Toggletip","theme","ReportActions","isUpsertLoading","isSaveDraftLoading","isUpdateStateReportLoading","onSaveDraftClick","onDeleteClick","onToggleStateClick","isEditMode","reportState","isDirty","WorkdaysOnlyCheckbox","DatePickerInput","onClear","props","ref","DatePickerWithInput","Icon","EndDateInput","control","resetField","startDate","field","EndTimeInput","TimeOfDayPicker","frequencyOptions","FrequencyInput","onChange","rest","Combobox","v","sendTimeOptions","SendTimeOptions","RadioButtonGroup","CustomFrequencyOptions","formState","hasError","interval","intervalOptions","StartDateInput","trigger","isSubmitted","onStartDateChange","date","sendOnLastDayOfMonth","isLastDayOfMonth","StartTimeInput","SendLaterSchedule","TimeZonePicker","SelectDashboardScene","uid","title","timeRange","variables","variableControls","SelectDashboardRenderer","model","$variables","onRemoveClick","key","isTemplateVariablesOpen","setIsTemplateVariablesOpen","isTimeRangeReversed","useMedia","isDuplicate","dashboard","firstIndex","dashboardIndex","showDuplicateTemplateVariablesAlert","onDashboardChange","resp","dashboardModel","DashboardModel","templateVariables","fieldProps","DashboardPicker","Label","Tooltip","TimeRangeInput","config","IconButton","Alert","CollapsableSection","prevState","useSelectDashboards","appendDashboard","removeDashboard","dispatch","setSceneDashboards","getDashboards","from","to","reportVariables","createSelectDashboardScene","isLoadingDashboards","useAsync","formDashboards","scene","onRemoveDashboardClick","index","d","customScene","ReportSection","label","children","contentClassName","dataTestId","onToggle","contentDataTestId","orientationOptions","icon","layoutOptions","Attachments","open","touchedFields","pdfFormatRef","isNewPDFRenderingEnabled","isPDFTablesEnabled","isPDFSelected","isPDFTablesSelected","hasDashboardWithVariables","zoomOptions","opt","Divider","Grid","EmailConfiguration","TextArea","TextLink","Recipients","setError","handleTagsChange","tags","splitTags","tag","email","uniqueTags","validEmails","invalidEmails","TagsInput","startOfYear","options","date_","toDate","getDayOfYear","_date","differenceInCalendarDays","startOfWeek","defaultOptions","weekStartsOn","day","diff","startOfISOWeek","getISOWeekYear","year","fourthOfJanuaryOfNextYear","constructFrom","startOfNextYear","fourthOfJanuaryOfThisYear","startOfThisYear","startOfISOWeekYear","fourthOfJanuary","getISOWeek","getWeekYear","firstWeekContainsDate","firstWeekOfNextYear","firstWeekOfThisYear","startOfWeekYear","firstWeek","getWeek","addLeadingZeros","number","targetLength","sign","output","lightFormatters","token","signedYear","month","dayPeriodEnumValue","numberOfDigits","milliseconds","fractionalSeconds","dayPeriodEnum","formatters","localize","era","signedWeekYear","weekYear","twoDigitYear","isoWeekYear","quarter","week","isoWeek","dayOfYear","dayOfWeek","localDayOfWeek","isoDayOfWeek","hours","_localize","timezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","formatTimezoneShort","timestamp","offset","delimiter","absOffset","minutes","dateLongFormatter","pattern","formatLong","timeLongFormatter","longFormatters","matchResult","datePattern","timePattern","dateTimeFormat","dayOfYearTokenRE","weekYearTokenRE","throwTokens","isProtectedDayOfYearToken","isProtectedWeekYearToken","warnOrThrowProtectedError","format","input","_message","message","subject","isDate","isValid","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","formatStr","locale","originalDate","parts","substring","firstCharacter","longFormatter","cleanEscapedString","formatterOptions","part","formatter","matched","useFrequencyInputs","frequency","lastDayOfMonthOnly","endDate","intervalFrequency","sendTime","canStartDateBeLastDayOfMonth","canCurrentDateBeLastDayOfMonth","showWorkdaysOnlyCheckbox","showEndTimeInput","showLastDayOfMonthWarning","Frequency","onSendOnLastDayOfMonthChange","endOfMonthDate","lastDayOfMonthOnlyRegister","SchedulePreview","startTime","endTime","timeZone","intervalAmount","workdaysOnly","scheduleData","Schedule","SelectDashboards","onAddDashboard","REPORT_FORM_SECTIONS","useReportSections","defaultOpenSections","openSections","setOpenSections","errorFields","sectionsWithErrors","section","newState","defaultReport","ReportForm","setIsDirty","onSuccess","headerActions","updateOpenSectionsByErrors","showDeleteConfirmation","setShowDeleteConfirmation","createReport","isCreateReportLoading","updateReport","isUpdateReportLoading","updateStateReport","saveDraftReport","deleteReport","isDeleteReportLoading","form","onAddDashboardClick","onDeleteConfirm","FormPrompt","ShareDrawerConfirmAction","LoadingPlaceholder","Text","ReportStateLegend"],"sourceRoot":""}