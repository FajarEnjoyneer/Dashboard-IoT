"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6104],{86956:(B,W,n)=>{n.d(W,{r:()=>i});var e=n(74848),E=n(59695);const i=({onChange:l,options:r,label:u})=>(0,e.jsx)(E.i,{icon:"plus",label:u,variant:"secondary",options:r,onChange:l,isFullWidth:!0})},34316:(B,W,n)=>{n.d(W,{R:()=>h});var e=n(74848),E=n(22803),i=n(96540),l=n(92745),r=n(63142),u=n(30703),R=n(63527),P=n(12594);const h=({name:d,onChange:D,verifyLayerNameUniqueness:x,overrideStyles:_})=>{const a=(0,r.of)(O),[s,I]=(0,i.useState)(!1),[t,c]=(0,i.useState)(null),v=o=>{I(!0)},f=o=>{if(I(!1),t){c(null);return}d!==o&&D(o)},p=o=>{const m=o.currentTarget.value.trim();if(m.length===0){c("An empty layer name is not allowed");return}if(x&&!x(m)&&m!==d){c("Layer name already exists");return}t&&c(null)},g=o=>{f(o.currentTarget.value.trim())},M=o=>{o.key==="Enter"&&f(o.currentTarget.value)},U=o=>{o.target.select()};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:a.wrapper,children:[!s&&(0,e.jsxs)("button",{className:a.layerNameWrapper,title:(0,l.t)("layers.layer-name.edit-layer-title","Edit layer name"),onClick:v,"data-testid":"layer-name-div",children:[(0,e.jsx)("span",{className:_?"":a.layerName,children:d}),(0,e.jsx)(u.I,{name:"pen",className:a.layerEditIcon,size:"sm"})]}),s&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.p,{type:"text",defaultValue:d,onBlur:g,autoFocus:!0,onKeyDown:M,onFocus:U,invalid:t!==null,onChange:p,className:a.layerNameInput,"data-testid":"layer-name-input"}),t&&(0,e.jsx)(P.P,{horizontal:!0,children:t})]})]})})},O=d=>({wrapper:(0,E.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:d.spacing(.5)}),layerNameWrapper:(0,E.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:d.shape.radius.default,alignItems:"center",padding:`0 0 0 ${d.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:d.colors.action.hover,border:`1px dashed ${d.colors.border.strong}`},"&:focus":{border:`2px solid ${d.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,E.css)({fontWeight:d.typography.fontWeightMedium,color:d.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:d.spacing(.5)}),layerEditIcon:(0,E.cx)((0,E.css)({marginLeft:d.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,E.css)({maxWidth:"300px",margin:"-4px 0"})})},87405:(B,W,n)=>{n.d(W,{N:()=>h});var e=n(74848),E=n(22803),i=n(96540),l=n(92745),r=n(63142),u=n(18857),R=n(35427),P=n(56755);const h=d=>{const D=(0,i.useMemo)(()=>({label:(0,l.t)("dimensions.color-dimension-editor.label-fixed-color","Fixed color"),value:"_____fixed_____"}),[]),{value:x,context:_,onChange:a,item:s}=d,I="dark-green",t=(0,r.of)(O),c=x?.field,v=x&&!c&&x?.fixed,f=(0,P.sE)(_.data),p=(0,P.m3)(f,c,D,void 0,s.settings?.baseNameMode),g=(0,i.useCallback)(o=>{if(!o){a(void 0);return}const m=o.value;if(m&&m!==D.value)a({...x,field:m});else{const j=x?.fixed??I;a({...x,field:void 0,fixed:j})}},[D.value,a,x]),M=(0,i.useCallback)(o=>{a({field:void 0,fixed:o??I})},[a]),U=v?D:p.find(o=>o.value===c);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:t.container,children:[(0,e.jsx)(u.l6,{value:U,options:p,onChange:g,noOptionsMessage:(0,l.t)("dimensions.color-dimension-editor.noOptionsMessage-no-fields-found","No fields found"),isClearable:s.settings?.isClearable,placeholder:s.settings?.placeholder}),v&&(0,e.jsx)("div",{className:t.picker,children:(0,e.jsx)(R.sk,{color:x?.fixed,onChange:M,enableNamedColors:!0})})]})})},O=d=>({container:(0,E.css)({display:"flex",flexWrap:"nowrap",justifyContent:"flex-end",alignItems:"center"}),picker:(0,E.css)({paddingLeft:d.spacing(1)})})},44798:(B,W,n)=>{n.d(W,{m:()=>x});var e=n(74848),E=n(96540),i=n(92745),l=n(739),r=n(97095),u=n(18027),R=n(77824),P=n(48457),h=n(20012),O=n(4896),d=n(71451);const D={settings:{}},x=a=>{const{value:s,context:I,onChange:t,item:c}=a,v=9,f=[{label:(0,i.t)("dimensions.resource-dimension-editor.label-fixed","Fixed"),value:l.q_.Fixed,description:(0,i.t)("dimensions.resource-dimension-editor.description-fixed","Fixed value")},{label:(0,i.t)("dimensions.resource-dimension-editor.label-field","Field"),value:l.q_.Field,description:(0,i.t)("dimensions.resource-dimension-editor.description-field","Use a string field result")}],p=(0,E.useCallback)(T=>{t({...s,mode:T})},[t,s]),g=(0,E.useCallback)((T="")=>{t({...s,field:T})},[t,s]),M=(0,E.useCallback)(T=>{t({...s,fixed:T??""})},[t,s]),U=T=>{T.stopPropagation(),t({mode:l.q_.Fixed,fixed:"",field:""})},o=s?.mode??l.q_.Fixed,m=c.settings?.showSourceRadio??!0,j=c.settings?.resourceType??O.zu.Icon,K=c.settings?.folderName??O.Iu.Icon,y=c.settings?.maxFiles;let A="";return j===O.zu.Icon&&(s?.fixed?A=(0,h.D)(s.fixed):c.settings?.placeholderValue&&(A=(0,h.D)(c.settings.placeholderValue))),(0,e.jsxs)(e.Fragment,{children:[m&&(0,e.jsx)(r.C,{children:(0,e.jsx)(u.I,{label:(0,i.t)("dimensions.resource-dimension-editor.label-source","Source"),labelWidth:v,grow:!0,children:(0,e.jsx)(R.z,{value:o,options:f,onChange:p,fullWidth:!0})})}),o!==l.q_.Fixed&&(0,e.jsx)(r.C,{children:(0,e.jsx)(u.I,{label:(0,i.t)("dimensions.resource-dimension-editor.label-field","Field"),labelWidth:v,grow:!0,children:(0,e.jsx)(P.O,{context:I,value:s.field??"",onChange:g,item:D})})}),o===l.q_.Fixed&&(0,e.jsx)(d.n,{onChange:M,onClear:U,value:s?.fixed,src:A,placeholder:c.settings?.placeholderText??"Select a value",name:_(s?.fixed)??"",mediaType:j,folderName:K,size:O.Iy.NORMAL,maxFiles:y}),o===l.q_.Mapping&&(0,e.jsx)(r.C,{children:(0,e.jsx)(u.I,{label:(0,i.t)("dimensions.resource-dimension-editor.label-mappings","Mappings"),labelWidth:v,grow:!0,children:(0,e.jsx)("div",{children:"TODO mappings editor!"})})})]})};function _(a){if(!a)return;const s=a.lastIndexOf("/");return s>0?a.substring(s+1):a}},68694:(B,W,n)=>{n.d(W,{A:()=>_});var e=n(74848),E=n(22803),i=n(96540),l=n(95004),r=n(92745),u=n(739),R=n(63142),P=n(97095),h=n(18027),O=n(77824),d=n(18857),D=n(56755),x=n(19753);const _=({value:s,context:I,onChange:t,item:c})=>{const{settings:v}=c,f=(0,i.useMemo)(()=>({label:(0,r.t)("dimensions.scalar-dimension-editor.fixed-value-options.label-fixed-values","Fixed value"),value:"_____fixed_____"}),[]),p=[{label:(0,r.t)("dimensions.scalar-dimension-editor.scalar-options.label-mod","Mod"),value:u.WQ.Mod,description:(0,r.t)("dimensions.scalar-dimension-editor.scalar-options.description-mod","Use field values, mod from max")},{label:(0,r.t)("dimensions.scalar-dimension-editor.scalar-options.label-clamped","Clamped"),value:u.WQ.Clamped,description:(0,r.t)("dimensions.scalar-dimension-editor.scalar-options.description-clamped","Use field values, clamped to max and min")}],g=0,M=s?.field,U=!M,o=(0,D.sE)(I.data),m=(0,D.m3)(o,M,f,l.PU.number),j=(0,R.of)(a),K=(0,i.useCallback)(L=>{const b=L.value;if(b&&b!==f.value)t({...s,field:b});else{const N=s.fixed??g;t({...s,field:void 0,fixed:N})}},[t,s,f.value]),y=(0,i.useCallback)(L=>{t({...s,mode:L})},[t,s]),A=(0,i.useCallback)(L=>{t({...s,field:void 0,fixed:L??g})},[t,s]),T=s??{},F=s?.mode??u.WQ.Mod,C=U?f:m.find(L=>L.value===M);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(P.C,{children:(0,e.jsx)(h.I,{label:(0,r.t)("dimensions.scalar-dimension-editor.label-limit","Limit"),labelWidth:8,grow:!0,children:(0,e.jsx)(O.z,{value:F,options:p,onChange:y,fullWidth:!0})})}),(0,e.jsx)(d.l6,{value:C,options:m,onChange:K,noOptionsMessage:(0,r.t)("dimensions.scalar-dimension-editor.noOptionsMessage-no-fields-found","No fields found")})]}),(0,e.jsx)("div",{className:j.range,children:U&&(0,e.jsx)(P.C,{children:(0,e.jsx)(h.I,{label:(0,r.t)("dimensions.scalar-dimension-editor.label-value","Value"),labelWidth:8,grow:!0,children:(0,e.jsx)(x.Q,{value:T?.fixed??g,onChange:A,max:v?.max,min:v?.min})})})})]})},a=s=>({range:(0,E.css)({paddingTop:s.spacing(1)})})},71820:(B,W,n)=>{n.d(W,{g:()=>D});var e=n(74848),E=n(22803),i=n(96540),l=n(92745),r=n(63142),u=n(18857),R=n(97095),P=n(18027),h=n(56755),O=n(19753),d=n(10392);const D=_=>{const{value:a,context:s,onChange:I,item:t}=_,{settings:c}=t,v=(0,r.of)(x),f=(0,i.useMemo)(()=>({label:(0,l.t)("dimensions.scale-dimension-editor.fixed-value-option.label.fixed-value","Fixed value"),value:"_____fixed_____"}),[]),p=a?.field,g=!p,M=(0,h.sE)(s.data),U=(0,h.m3)(M,p,f,c?.filteredFieldType),o=(0,i.useMemo)(()=>(0,d.Nn)(c),[c]),m=(0,i.useCallback)(C=>{I((0,d.Ru)(C,o))},[I,o]),j=(0,i.useCallback)(C=>{const L=C.value;L&&L!==f.value?m({...a,field:L}):m({...a,field:void 0})},[m,a,f.value]),K=(0,i.useCallback)(C=>{C!==void 0&&m({...a,min:C})},[m,a]),y=(0,i.useCallback)(C=>{C!==void 0&&m({...a,max:C})},[m,a]),A=(0,i.useCallback)(C=>{C!==void 0&&m({...a,fixed:C})},[m,a]),T=a??{},F=g?f:U.find(C=>C.value===p);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:(0,e.jsx)(u.l6,{value:F,options:U,onChange:j,noOptionsMessage:(0,l.t)("dimensions.scale-dimension-editor.noOptionsMessage-no-fields-found","No fields found")})}),(0,e.jsxs)("div",{className:v.range,children:[g&&(0,e.jsx)(R.C,{children:(0,e.jsx)(P.I,{label:(0,l.t)("dimensions.scale-dimension-editor.label-value","Value"),labelWidth:8,grow:!0,children:(0,e.jsx)(O.Q,{value:T.fixed,...o,onChange:A})})}),!g&&!o.hideRange&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.C,{children:(0,e.jsx)(P.I,{label:(0,l.t)("dimensions.scale-dimension-editor.label-min","Min"),labelWidth:8,grow:!0,children:(0,e.jsx)(O.Q,{value:T.min,...o,onChange:K})})}),(0,e.jsx)(R.C,{children:(0,e.jsx)(P.I,{label:(0,l.t)("dimensions.scale-dimension-editor.label-max","Max"),labelWidth:8,grow:!0,children:(0,e.jsx)(O.Q,{value:T.max,...o,onChange:y})})})]})]})]})},x=_=>({range:(0,E.css)({paddingTop:_.spacing(1)})})},22001:(B,W,n)=>{n.d(W,{h:()=>x});var e=n(74848),E=n(96540),i=n(92745),l=n(739),r=n(97095),u=n(18027),R=n(77824),P=n(45861),h=n(48457),O=n(41185);const d={settings:{}},D={settings:{}},x=({value:_,context:a,onChange:s})=>{const I=[{label:(0,i.t)("dimensions.text-dimension-editor.label-fixed","Fixed"),value:l.RU.Fixed,description:(0,i.t)("dimensions.text-dimension-editor.description-fixed","Fixed value")},{label:(0,i.t)("dimensions.text-dimension-editor.label-field","Field"),value:l.RU.Field,description:(0,i.t)("dimensions.text-dimension-editor.description-field","Display field value")}],t=9,c=(0,E.useCallback)(M=>{s({..._,mode:M})},[s,_]),v=(0,E.useCallback)(M=>{s({..._,field:M})},[s,_]),f=(0,E.useCallback)((M="")=>{s({..._,fixed:M})},[s,_]),p=()=>{f("")},g=_?.mode??l.RU.Fixed;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.C,{children:(0,e.jsx)(u.I,{label:(0,i.t)("dimensions.text-dimension-editor.label-source","Source"),labelWidth:t,grow:!0,children:(0,e.jsx)(R.z,{value:g,options:I,onChange:c,fullWidth:!0})})}),g!==l.RU.Fixed&&(0,e.jsx)(r.C,{children:(0,e.jsx)(u.I,{label:(0,i.t)("dimensions.text-dimension-editor.label-field","Field"),labelWidth:t,grow:!0,children:(0,e.jsx)(h.O,{context:a,value:_.field??"",onChange:v,item:d})})}),g===l.RU.Fixed&&(0,e.jsx)(r.C,{children:(0,e.jsx)(u.I,{label:(0,i.t)("dimensions.text-dimension-editor.label-value","Value"),labelWidth:t,grow:!0,children:(0,e.jsx)(O.g,{context:a,value:_?.fixed,onChange:f,item:D,suffix:_?.fixed&&(0,e.jsx)(P.$n,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:p})})})},_?.fixed),g===l.RU.Template&&(0,e.jsx)(r.C,{children:(0,e.jsx)(u.I,{label:(0,i.t)("dimensions.text-dimension-editor.label-template","Template"),labelWidth:t,grow:!0,children:(0,e.jsx)(O.g,{context:a,value:_?.fixed,onChange:f,item:D})})})]})}}}]);

//# sourceMappingURL=6104.8d6f4d156eafc8f4d7e2.js.map