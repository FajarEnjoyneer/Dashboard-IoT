"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4492,4650],{14414:(z,P,t)=>{t.r(P),t.d(P,{default:()=>S});var s=t(74848),I=t(4213),l=t.n(I),E=t(96540),T=t(71468),U=t(54148),D=t(28105),m=t(60519),A=t(68125),B=t(80011),L=t(43173),K=t(27963),R=t(49286),W=t(27081);const h=a=>({dashboard:a.dashboard.getModel()}),v={initDashboard:W.v},S=(0,T.connect)(h,v)(({initDashboard:a,route:e,queryParams:n,dashboard:o})=>{const{keybindings:i}=(0,K.Il)(),[f,r]=(0,E.useState)(null),[c,C]=(0,E.useState)(!1),{slug:M,uid:O,type:g}=(0,U.g)();(0,E.useEffect)(()=>{a({urlSlug:M,urlUid:O,urlType:g,routeName:e.routeName,fixUrl:!1,keybindingSrv:i})},[M,O,g,e.routeName,i,a]);const p=()=>parseInt(n.panelId??"0",10);return(0,E.useEffect)(()=>{if(o){const _=d=>{if(!d||d.state!==D.Gu.Done&&d.state!==D.Gu.Streaming)return;const F=d.series,j=n.timezone||o?.timezone;let N={defaults:{},overrides:[]};const V=(0,m.we)({data:F,theme:L.$.theme2,fieldConfig:u?.fieldConfig||N,replaceVariables:Q=>Q,timeZone:j}),G=(0,A._O)([V[0]],{}),$=new Blob(["\uFEFF",G],{type:"text/csv;charset=utf-8"}),X=`${u?.getDisplayTitle()}-data-${(0,B.LE)(new Date)}.csv`;(0,I.saveAs)($,X)},u=o.getPanelByUrlId(n.panelId);if(!u){C(!0);return}r(u),u.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:d=>_(d)})}},[o,n.panelId,n.timezone]),(0,s.jsx)(R.SoloPanel,{dashboard:o,notFound:c,panel:f,panelId:p(),timezone:n.timezone})})},49286:(z,P,t)=>{t.r(P),t.d(P,{SoloPanel:()=>x,SoloPanelPage:()=>v,default:()=>y});var s=t(74848),I=t(22803),l=t(96540),E=t(71468),T=t(54148),U=t(70713),D=t(92745),m=t(63142),A=t(34999),B=t(27963),L=t(97976),K=t(27081);const R=a=>({dashboard:a.dashboard.getModel()}),W={initDashboard:K.v},h=(0,E.connect)(R,W),v=({route:a,queryParams:e,dashboard:n,initDashboard:o})=>{const[i,f]=(0,l.useState)(null),[r,c]=(0,l.useState)(!1),{keybindings:C}=(0,B.Il)(),{slug:M,uid:O,type:g}=(0,T.g)();(0,l.useEffect)(()=>{o({urlSlug:M,urlUid:O,urlType:g,routeName:a.routeName,fixUrl:!1,keybindingSrv:C})},[M,O,g,a.routeName,o,C]);const p=(0,l.useCallback)(()=>parseInt(e.panelId??"0",10),[e.panelId]);return(0,l.useEffect)(()=>{if(n){const _=n.getPanelByUrlId(e.panelId);if(!_){c(!0);return}_&&n.exitViewPanel(_),f(_),n.initViewPanel(_)}},[n,e.panelId]),(0,s.jsx)(x,{dashboard:n,notFound:r,panel:i,panelId:p(),timezone:e.timezone})},x=({dashboard:a,notFound:e,panel:n,panelId:o,timezone:i})=>{const f=(0,m.of)(S);return e?(0,s.jsx)(A.F,{severity:"error",title:(0,D.t)("dashboard.solo-panel.title-not-found","Panel with id {{panelId}} not found",{panelId:o})}):!n||!a?(0,s.jsx)("div",{children:(0,s.jsx)(D.x6,{i18nKey:"dashboard.solo-panel.loading-initializing-dashboard",children:"Loading & initializing dashboard"})}):(0,s.jsx)("div",{className:f.container,children:(0,s.jsx)(U.Ay,{children:({width:r,height:c})=>r===0?null:(0,s.jsx)(L.L,{stateKey:n.key,width:r,height:c,dashboard:a,panel:n,isEditing:!1,isViewing:!0,lazy:!1,timezone:i,hideMenu:!0})})})},y=h(v),S=a=>({container:(0,I.css)({position:"fixed",bottom:0,right:0,margin:0,left:0,top:0,width:"100%",height:"100%"})})}}]);

//# sourceMappingURL=CSVExportPage.e8c707b85bc067f8bab3.js.map