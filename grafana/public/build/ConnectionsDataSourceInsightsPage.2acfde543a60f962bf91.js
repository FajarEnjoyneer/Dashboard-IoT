"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[847,2154],{13926:(a,s,t)=>{t.r(s),t.d(s,{DataSourceInsightsPage:()=>l,default:()=>v});var r=t(74848),g=t(54148),D=t(13791),m=t(49095),u=t(45135);const l=()=>{const{uid:c=""}=(0,g.g)(),{navId:P,pageNav:h}=(0,m.n)("insights");return(0,r.jsx)(D.Y,{navId:P,pageNav:h,children:(0,r.jsx)(D.Y.Contents,{children:(0,r.jsx)(u.A,{uid:c})})})},v=l},45135:(a,s,t)=>{t.d(s,{A:()=>y});var r=t(74848),g=t(96540),D=t(71468),m=t(70713),u=t(25229),l=t(95004),v=t(28105),c=t(92745),P=t(62061),h=t(60311),d=t(739),A=t(67522),x=t(79331),I=t(63142),R=t(2989),C=t(42939),M=t(8354),E=t(90256),O=t(74740);const L=(S,_)=>({dataSourceUid:_.uid}),T={loadDataSource:M.ak,loadDataSourceMeta:M.xI},f=(0,D.connect)(L,T);class B extends g.PureComponent{constructor(_){super(_),this.state={dailySummaries:[],from:"",to:""}}async componentDidMount(){const{dataSourceUid:_,loadDataSource:e,loadDataSourceMeta:o}=this.props;if(e(_).then(o),(0,P.a)("analytics")){let n=(0,u.KQ)().subtract(30,"days").format(E.QH),i=(0,u.KQ)().format(E.QH);const p=await(0,E.FW)(_,n,i);this.setState({dailySummaries:p,from:n,to:i})}}buildTimeRange(){const{from:_,to:e}=this.state,o=(0,u.KQ)(_),n=(0,u.KQ)(e).add(24,"hours");return{from:o,to:n,raw:{from:_,to:e}}}convertDailySummariesToDataFrame(_,e,o){const n=[],i=[];return _.forEach(p=>{n.push((0,u.KQ)(p.day,E.QH).valueOf());let U=p[e];e==="loadDuration"&&(U=p.queries?p.loadDuration/(p.queries*1e6):0),i.push(U)}),{name:e,fields:[{name:"Time",type:l.PU.time,config:{},values:n},{name:e,type:o,config:{},values:i}],length:_.length}}renderChart(_,e){const{dailySummaries:o}=this.state,{color:n,fieldType:i,showBars:p,timeRange:U,title:K,valueField:b,width:j}=_,W={series:[this.convertDailySummariesToDataFrame(o,b,i)],state:v.Gu.Done,timeRange:U},w={legend:{showLegend:!1,displayMode:d.lm.Hidden,calcs:[],placement:"bottom"},tooltip:{mode:d.$N.Multi,sort:d.xB.Descending}},N={defaults:{color:{mode:"fixed",fixedColor:n},custom:{showPoints:d.yL.Never,drawStyle:p?d.GR.Bars:d.GR.Line,fillOpacity:p?50:0}},overrides:[]};return(0,r.jsx)("div",{className:e.graphContainer,children:(0,r.jsx)(A.NR,{title:K,width:j,height:220,displayMode:"transparent",loadingState:W.state,children:(F,Q)=>(0,r.jsx)(h.m,{title:K,width:F,height:Q,pluginId:"timeseries",data:W,fieldConfig:N,options:w})})})}renderContent(){const{theme:_}=this.props,e=(0,O.k)(_),{dailySummaries:o}=this.state,n=this.buildTimeRange();return o?.length>0?(0,r.jsx)(m.Ay,{disableHeight:!0,children:({width:i})=>{const p=[{title:(0,c.t)("meta-analytics.data-source-insights.queries-last-month-title","Queries last 30 days"),valueField:"queries",fieldType:l.PU.number,width:i,timeRange:n,color:"green",showBars:!0,showLines:!1},{title:(0,c.t)("meta-analytics.data-source-insights.errors-last-month-title","Errors last 30 days"),valueField:"errors",fieldType:l.PU.number,width:i,timeRange:n,color:_.colors.error.border,showBars:!0,showLines:!1},{title:(0,c.t)("meta-analytics.data-source-insights.average-load-duration-last-month-title","Average load duration last 30 days (ms)"),valueField:"loadDuration",fieldType:l.PU.number,width:i,timeRange:n,color:_.colors.primary.border,showBars:!0,showLines:!1}];return(0,r.jsx)("main",{style:{width:i},children:p.map(U=>this.renderChart(U,e))})}}):(0,r.jsx)("span",{children:(0,r.jsx)(c.x6,{i18nKey:"meta-analytics.data-source-insights.available-source",children:"No available data for this data source."})})}render(){return(0,P.a)("analytics.writers")&&!(0,P.a)("analytics")?(0,r.jsx)(x.w,{title:(0,c.t)("meta-analytics.data-source-insights.title-feature-available-expired-license","Feature not available with an expired license"),url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:(0,c.t)("meta-analytics.data-source-insights.title-read-more-license-expiration","Read more on license expiration"),children:(0,r.jsx)("span",{children:(0,r.jsx)(c.x6,{i18nKey:"meta-analytics.data-source-insights.text-feature-not-available-expired-license",children:"Data source insights are not available with an expired license. Data will continue to be collected but you need to update your license to see this page."})})}):(0,r.jsxs)(r.Fragment,{children:[(0,C.z5)()&&(0,r.jsx)(R.Iz,{featureId:"data-source-insights",eventVariant:"trial",featureName:"data source usage insights",text:(0,c.t)("meta-analytics.data-source-insights.text-enable-source-usage-insights-during-trial","Enable data source usage insights for free during your trial of Grafana Pro.")}),this.renderContent()]})}}const y=f((0,I.cV)(B))},49095:(a,s,t)=>{t.d(s,{n:()=>P});var r=t(54148),g=t(92745),D=t(78282),m=t(84057),u=t(52045),l=t(99723),v=t(23691),c=t(52763);function P(h){const{uid:d=""}=(0,r.g)(),A=(0,r.zy)(),x=(0,u.xw)(d),I=(0,u.S4)(x.type),R=(0,v.ob)(x.type),C=new URLSearchParams(A.search),M=h||C.get("page"),{plugin:E,loadError:O,loading:L}=(0,u._e)(),T=(0,D.l)()?.getInstanceSettings(d),f=!!(T?.meta?.alerting??!1),B=T?.type==="alertmanager",y=f||B,S=(0,c.d4)(n=>n.navIndex),_=M?`datasource-${M}-${d}`:`datasource-settings-${d}`;let e={node:{text:(0,g.t)("connections.use-data-source-settings-nav.page-nav.text.data-source-nav-node","Data Source Nav Node")},main:{text:(0,g.t)("connections.use-data-source-settings-nav.page-nav.text.data-source-nav-node","Data Source Nav Node")}};if(O){const n={text:O,subTitle:(0,g.t)("connections.use-data-source-settings-nav.node.subTitle.data-source-error","Data Source Error"),icon:"exclamation-triangle"};e={node:n,main:n}}return(L||!E)&&(e=(0,m.tc)(S,_,(0,l.$m)("settings"))),E&&(e=(0,m.tc)(S,_,(0,l.Vh)((0,l.R4)(x,E),M||"settings"))),{navId:"connections-datasources",pageNav:{...e.main,dataSourcePluginName:R?.name||E?.meta.name||"",active:!0,text:x.name,subTitle:`Type: ${I.name}`,children:(e.main.children||[]).map(n=>({...n,url:n.url?.replace("datasources/edit/","/connections/datasources/edit/")}))},dataSourceHeader:{alertingSupported:y}}}},52045:(a,s,t)=>{t.d(s,{$k:()=>T,BY:()=>R,S4:()=>y,Tn:()=>B,US:()=>C,Um:()=>O,_e:()=>S,hx:()=>E,k9:()=>L,oU:()=>I,u1:()=>_,xw:()=>f});var r=t(96540),g=t(92745),D=t(20018),m=t(45229),u=t(73427),l=t(11257),v=t(87745),c=t(52763),P=t(26437),h=t(62054),d=t(8354),A=t(18548),x=t(64003);const I=e=>{const o=(0,c.wA)();(0,r.useEffect)(()=>(o((0,d.PK)(e)),function(){o((0,D.N)({cleanupAction:i=>i.dataSourceSettings=A.IJ}))}),[e,o])},R=e=>{const o=(0,c.wA)();return()=>o((0,d.Ge)(e,P.b.DataSourcesEdit))},C=()=>{const e=(0,c.wA)(),o=(0,c.d4)(i=>i.dataSources.isLoadingDataSources),n=(0,c.d4)(i=>i.dataSources.dataSources);return(0,r.useEffect)(()=>{e((0,d.bn)())},[e]),{isLoading:o,dataSources:n}},M=e=>{const o=useDispatch();useEffect(()=>{o(loadDataSource(e))},[o,e])},E=()=>{const e=(0,c.wA)();(0,r.useEffect)(()=>{e((0,d.G2)())},[e])},O=()=>{const e=(0,c.wA)();return o=>{e((0,d.du)(o,P.b.DataSourcesEdit))}},L=()=>{const e=(0,c.wA)();return async o=>e((0,d.jB)(o))},T=()=>{const e=(0,c.wA)(),{name:o}=(0,c.d4)(n=>n.dataSources.dataSource);return()=>{m.A.publish(new v.bY({title:(0,g.t)("datasources.use-delete-loaded-data-source.title.delete","Delete"),text:`Are you sure you want to delete the "${o}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,d.Qq)())}))}},f=e=>(0,c.d4)(o=>(0,x.U4)(o.dataSources,e)),B=e=>{const o=f(e);return(0,h.h)(o)},y=e=>(0,c.d4)(o=>(0,x.Fj)(o.dataSources,e)),S=()=>(0,c.d4)(e=>e.dataSourceSettings),_=e=>{const o=f(e),n=o.readOnly===!0,i=u.TP.hasPermissionInMetadata(l.w.DataSourcesWrite,o),p=u.TP.hasPermissionInMetadata(l.w.DataSourcesDelete,o);return{readOnly:n,hasWriteRights:i,hasDeleteRights:p}}},62054:(a,s,t)=>{t.d(s,{h:()=>D});var r=t(83175),g=t(92138);const D=m=>{const u=JSON.stringify({datasource:m.name,context:"explore"});return r.kM.renderUrl(g.I.assureBaseUrl("/explore"),{left:u})}},14552:(a,s,t)=>{a.exports=t.p+"static/img/adobe-analytics.4753db26.svg"},42965:(a,s,t)=>{a.exports=t.p+"static/img/appdynamics.26e3d55b.svg"},63340:(a,s,t)=>{a.exports=t.p+"static/img/atlassian-statuspage.3c87e280.svg"},19810:(a,s,t)=>{a.exports=t.p+"static/img/aurora.b26d603d.svg"},36654:(a,s,t)=>{a.exports=t.p+"static/img/azure-cosmosdb.573a2a46.svg"},15912:(a,s,t)=>{a.exports=t.p+"static/img/azure-devops.a937d73a.png"},91735:(a,s,t)=>{a.exports=t.p+"static/img/catchpoint.fa6c7933.svg"},95552:(a,s,t)=>{a.exports=t.p+"static/img/cloudflare.ea4404be.jpg"},74484:(a,s,t)=>{a.exports=t.p+"static/img/cockroachdb.c40db97d.jpg"},51147:(a,s,t)=>{a.exports=t.p+"static/img/datadog.68935496.png"},7672:(a,s,t)=>{a.exports=t.p+"static/img/drone.e55e0d85.svg"},36404:(a,s,t)=>{a.exports=t.p+"static/img/dynatrace.3510a47f.png"},70535:(a,s,t)=>{a.exports=t.p+"static/img/gitlab.a9ff2a14.svg"},23735:(a,s,t)=>{a.exports=t.p+"static/img/honeycomb.23074f0a.png"},26871:(a,s,t)=>{a.exports=t.p+"static/img/jira_logo.fc367bdf.png"},57454:(a,s,t)=>{a.exports=t.p+"static/img/logicmonitor.a0d2ddd9.svg"},10128:(a,s,t)=>{a.exports=t.p+"static/img/mongodb.cd31e197.svg"},78485:(a,s,t)=>{a.exports=t.p+"static/img/netlify.35f83f3c.svg"},59161:(a,s,t)=>{a.exports=t.p+"static/img/newrelic.4ba92509.svg"},69443:(a,s,t)=>{a.exports=t.p+"static/img/oracle.b53d3bc4.png"},94443:(a,s,t)=>{a.exports=t.p+"static/img/pagerduty.261221ea.svg"},12680:(a,s,t)=>{a.exports=t.p+"static/img/salesforce.f79d37a9.svg"},99444:(a,s,t)=>{a.exports=t.p+"static/img/sap_hana.7f369d20.png"},57925:(a,s,t)=>{a.exports=t.p+"static/img/servicenow.de3a7a6a.svg"},15584:(a,s,t)=>{a.exports=t.p+"static/img/signalfx-logo.70e37f3d.svg"},22810:(a,s,t)=>{a.exports=t.p+"static/img/snowflake.4951e616.svg"},42166:(a,s,t)=>{a.exports=t.p+"static/img/splunk_logo_128.08e4871b.png"},6758:(a,s,t)=>{a.exports=t.p+"static/img/sumo.3e01fb77.svg"},40250:(a,s,t)=>{a.exports=t.p+"static/img/wavefront.a8880e4a.svg"},16926:(a,s,t)=>{a.exports=t.p+"static/img/zendesk.9a6bf432.svg"}}]);

//# sourceMappingURL=ConnectionsDataSourceInsightsPage.2acfde543a60f962bf91.js.map