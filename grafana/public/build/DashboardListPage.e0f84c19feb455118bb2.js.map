{"version":3,"file":"DashboardListPage.e0f84c19feb455118bb2.js","mappings":"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","sources":["webpack://grafana/./public/app/features/search/tempI18nPhrases.ts","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/BrowseActions.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseFilters.tsx","webpack://grafana/./public/app/features/browse-dashboards/types.ts","webpack://grafana/./public/app/features/browse-dashboards/components/CheckboxCell.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/CheckboxHeaderCell.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/NameCell.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/TagsCell.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/DashboardsTree.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseView.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/NewFolderForm.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/NewProvisionedFolderForm.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/CreateNewButton.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/ProvisionedFolderPreviewBanner.tsx","webpack://grafana/./public/app/features/browse-dashboards/BrowseDashboardsPage.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/DeleteModal.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/MoveModal.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/DeleteProvisionedFolderForm.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/FolderActionsButton.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/SearchView.tsx","webpack://grafana/./public/app/features/browse-dashboards/hooks/useProvisionedFolderFormData.ts","webpack://grafana/./public/app/features/browse-dashboards/permissions.ts","webpack://grafana/./public/app/features/dashboard-scene/saving/provisioned/DashboardPreviewBanner.tsx","webpack://grafana/./public/app/features/dashboard-scene/saving/provisioned/PreviewBannerViewPR.tsx","webpack://grafana/./public/app/features/provisioning/hooks/usePullRequestParam.ts","webpack://grafana/./public/app/features/search/page/components/ActionRow.tsx","webpack://grafana/./public/app/features/search/state/SearchStateManager.ts"],"sourcesContent":["// Temporary place to collect phrases we reuse between new and old browse/search\n// TODO: remove this when new Browse Dashboards UI is no longer feature flagged\n\nimport { t } from '@grafana/i18n';\n\nexport function getSearchPlaceholder(includePanels = false) {\n  return includePanels\n    ? t('search.search-input.include-panels-placeholder', 'Search for dashboards, folders, and panels')\n    : t('search.search-input.placeholder', 'Search for dashboards and folders');\n}\n\nexport function getNewDashboardPhrase() {\n  return t('search.dashboard-actions.new-dashboard', 'New dashboard');\n}\n\nexport function getNewFolderPhrase() {\n  return t('search.dashboard-actions.new-folder', 'New folder');\n}\n\nexport function getImportPhrase() {\n  return t('search.dashboard-actions.import', 'Import');\n}\n\nexport function getNewPhrase() {\n  return t('search.dashboard-actions.new', 'New');\n}\n","import { useMemo } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { Button, Stack, Tooltip } from '@grafana/ui';\nimport appEvents from 'app/core/app_events';\nimport { useSearchStateManager } from 'app/features/search/state/SearchStateManager';\nimport { ShowModalReactEvent } from 'app/types/events';\nimport { useDispatch } from 'app/types/store';\n\nimport { useDeleteItemsMutation, useMoveItemsMutation } from '../../api/browseDashboardsAPI';\nimport { useActionSelectionState } from '../../state/hooks';\nimport { setAllSelection } from '../../state/slice';\nimport { DashboardTreeSelection } from '../../types';\n\nimport { DeleteModal } from './DeleteModal';\nimport { MoveModal } from './MoveModal';\n\nexport interface Props {}\n\nexport function BrowseActions() {\n  const dispatch = useDispatch();\n  const selectedItems = useActionSelectionState();\n  const [deleteItems] = useDeleteItemsMutation();\n  const [moveItems] = useMoveItemsMutation();\n  const [, stateManager] = useSearchStateManager();\n\n  // Folders can only be moved if nested folders is enabled\n  const moveIsInvalid = useMemo(\n    () => !config.featureToggles.nestedFolders && Object.values(selectedItems.folder).some((v) => v),\n    [selectedItems]\n  );\n\n  const isSearching = stateManager.hasSearchFilters();\n\n  const onActionComplete = () => {\n    dispatch(setAllSelection({ isSelected: false, folderUID: undefined }));\n\n    if (isSearching) {\n      // Redo search query\n      stateManager.doSearchWithDebounce();\n    }\n  };\n\n  const onDelete = async () => {\n    await deleteItems({ selectedItems });\n    trackAction('delete', selectedItems);\n    onActionComplete();\n  };\n\n  const onMove = async (destinationUID: string) => {\n    await moveItems({ selectedItems, destinationUID });\n    trackAction('move', selectedItems);\n    onActionComplete();\n  };\n\n  const showMoveModal = () => {\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: MoveModal,\n        props: {\n          selectedItems,\n          onConfirm: onMove,\n        },\n      })\n    );\n  };\n\n  const showDeleteModal = () => {\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: DeleteModal,\n        props: {\n          selectedItems,\n          onConfirm: onDelete,\n        },\n      })\n    );\n  };\n\n  const moveButton = (\n    <Button onClick={showMoveModal} variant=\"secondary\" disabled={moveIsInvalid}>\n      <Trans i18nKey=\"browse-dashboards.action.move-button\">Move</Trans>\n    </Button>\n  );\n\n  return (\n    <Stack gap={1} data-testid=\"manage-actions\">\n      {moveIsInvalid ? (\n        <Tooltip content={t('browse-dashboards.action.cannot-move-folders', 'Folders cannot be moved')}>\n          {moveButton}\n        </Tooltip>\n      ) : (\n        moveButton\n      )}\n\n      <Button onClick={showDeleteModal} variant=\"destructive\">\n        <Trans i18nKey=\"browse-dashboards.action.delete-button\">Delete</Trans>\n      </Button>\n    </Stack>\n  );\n}\n\nconst actionMap = {\n  move: 'grafana_manage_dashboards_item_moved',\n  delete: 'grafana_manage_dashboards_item_deleted',\n} as const;\n\nfunction trackAction(action: keyof typeof actionMap, selectedItems: Omit<DashboardTreeSelection, 'panel' | '$all'>) {\n  const selectedDashboards = Object.keys(selectedItems.dashboard).filter((uid) => selectedItems.dashboard[uid]);\n  const selectedFolders = Object.keys(selectedItems.folder).filter((uid) => selectedItems.folder[uid]);\n\n  reportInteraction(actionMap[action], {\n    item_counts: {\n      folder: selectedFolders.length,\n      dashboard: selectedDashboards.length,\n    },\n    source: 'tree_actions',\n    restore_enabled: Boolean(config.featureToggles.restoreDashboards),\n  });\n}\n","import { ActionRow } from 'app/features/search/page/components/ActionRow';\nimport { getGrafanaSearcher } from 'app/features/search/service/searcher';\nimport { useSearchStateManager } from 'app/features/search/state/SearchStateManager';\n\nexport function BrowseFilters() {\n  const [searchState, stateManager] = useSearchStateManager();\n\n  return (\n    <ActionRow\n      showStarredFilter\n      showLayout\n      state={searchState}\n      getTagOptions={stateManager.getTagOptions}\n      getSortOptions={getGrafanaSearcher().getSortOptions}\n      sortPlaceholder={getGrafanaSearcher().sortPlaceholder}\n      onLayoutChange={stateManager.onLayoutChange}\n      onStarredFilterChange={stateManager.onStarredFilterChange}\n      onSortChange={stateManager.onSortChange}\n      onTagFilterChange={stateManager.onTagFilterChange}\n      onDatasourceChange={stateManager.onDatasourceChange}\n      onPanelTypeChange={stateManager.onPanelTypeChange}\n      onSetIncludePanels={stateManager.onSetIncludePanels}\n    />\n  );\n}\n","import { CellProps, Column, HeaderProps } from 'react-table';\n\nimport { DashboardViewItem, DashboardViewItemKind } from 'app/features/search/types';\n\nexport type DashboardTreeSelection = Record<DashboardViewItemKind, Record<string, boolean | undefined>> & {\n  $all: boolean;\n};\n\n/**\n * Stores children at a particular location in the tree, and information\n * required for pagination.\n */\nexport type DashboardViewItemCollection = {\n  items: DashboardViewItem[];\n  lastFetchedKind: 'folder' | 'dashboard';\n  lastFetchedPage: number;\n  lastKindHasMoreItems: boolean;\n  isFullyLoaded: boolean;\n};\n\nexport interface BrowseDashboardsState {\n  rootItems: DashboardViewItemCollection | undefined;\n  childrenByParentUID: Record<string, DashboardViewItemCollection | undefined>;\n  selectedItems: DashboardTreeSelection;\n\n  // Only folders can ever be open or closed, so no need to seperate this by kind\n  openFolders: Record<string, boolean>;\n}\n\nexport interface UIDashboardViewItem {\n  kind: 'ui';\n  uiKind: 'empty-folder' | 'pagination-placeholder' | 'divider';\n  uid: string;\n}\n\nexport type DashboardViewItemWithUIItems = DashboardViewItem | UIDashboardViewItem;\n\nexport interface DashboardsTreeItem<T extends DashboardViewItemWithUIItems = DashboardViewItemWithUIItems> {\n  item: T;\n  level: number;\n  isOpen: boolean;\n  parentUID?: string;\n}\n\ninterface RendererUserProps {\n  // Note: userProps for cell renderers (e.g. second argument in `cell.render('Cell', foo)` )\n  // aren't typed, so we must be careful when accessing this\n  isSelected?: (kind: DashboardViewItem | '$all') => SelectionState;\n  onAllSelectionChange?: (newState: boolean) => void;\n  onItemSelectionChange?: (item: DashboardViewItem, newState: boolean) => void;\n  treeID?: string;\n}\n\nexport type DashboardsTreeColumn = Column<DashboardsTreeItem>;\nexport type DashboardsTreeCellProps = CellProps<DashboardsTreeItem, unknown> & RendererUserProps;\nexport type DashboardTreeHeaderProps = HeaderProps<DashboardsTreeItem> & RendererUserProps;\n\nexport enum SelectionState {\n  Unselected,\n  Selected,\n  Mixed,\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { Checkbox, useStyles2 } from '@grafana/ui';\n\nimport { ManagerKind } from '../../apiserver/types';\nimport { DashboardsTreeCellProps, SelectionState } from '../types';\n\nimport { isSharedWithMe } from './utils';\n\nexport default function CheckboxCell({\n  row: { original: row },\n  isSelected,\n  onItemSelectionChange,\n}: DashboardsTreeCellProps) {\n  const item = row.item;\n\n  if (!isSelected) {\n    return <CheckboxSpacer />;\n  }\n\n  if (item.kind === 'ui') {\n    if (item.uiKind === 'pagination-placeholder') {\n      return <Checkbox disabled value={false} />;\n    } else {\n      return <CheckboxSpacer />;\n    }\n  }\n\n  if (isSharedWithMe(item.uid)) {\n    return <CheckboxSpacer />;\n  }\n\n  const state = isSelected(item);\n\n  return (\n    <Checkbox\n      data-testid={selectors.pages.BrowseDashboards.table.checkbox(item.uid)}\n      aria-label={t('browse-dashboards.dashboards-tree.select-checkbox', 'Select')}\n      value={state === SelectionState.Selected}\n      indeterminate={state === SelectionState.Mixed}\n      onChange={(ev) => onItemSelectionChange?.(item, ev.currentTarget.checked)}\n      disabled={item.managedBy === ManagerKind.Repo}\n    />\n  );\n}\n\nfunction CheckboxSpacer() {\n  const styles = useStyles2(getStyles);\n  return <span className={styles.checkboxSpacer} />;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  // Should be the same size as the <IconButton /> so Dashboard name is aligned to Folder name siblings\n  checkboxSpacer: css({\n    paddingLeft: theme.spacing(2),\n  }),\n});\n","import { t } from '@grafana/i18n';\nimport { Checkbox } from '@grafana/ui';\n\nimport { DashboardTreeHeaderProps, SelectionState } from '../types';\n\nexport default function CheckboxHeaderCell({ isSelected, onAllSelectionChange }: DashboardTreeHeaderProps) {\n  const state = isSelected?.('$all') ?? SelectionState.Unselected;\n\n  return (\n    <Checkbox\n      value={state === SelectionState.Selected}\n      indeterminate={state === SelectionState.Mixed}\n      aria-label={t('browse-dashboards.dashboards-tree.select-all-header-checkbox', 'Select all')}\n      onChange={(ev) => {\n        if (state === SelectionState.Mixed) {\n          // Ensure clicking an indeterminate checkbox always clears the selection\n          onAllSelectionChange?.(false);\n        } else {\n          onAllSelectionChange?.(ev.currentTarget.checked);\n        }\n      }}\n    />\n  );\n}\n","import { css } from '@emotion/css';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Icon, IconButton, Link, Spinner, useStyles2, Text } from '@grafana/ui';\nimport { getSvgSize } from '@grafana/ui/internal';\nimport { getIconForItem } from 'app/features/search/service/utils';\n\nimport { Indent } from '../../../core/components/Indent/Indent';\nimport { FolderRepo } from '../../../core/components/NestedFolderPicker/FolderRepo';\nimport { useChildrenByParentUIDState } from '../state/hooks';\nimport { DashboardsTreeCellProps } from '../types';\n\nimport { makeRowID } from './utils';\n\nconst CHEVRON_SIZE = 'md';\nconst ICON_SIZE = 'sm';\n\ntype NameCellProps = DashboardsTreeCellProps & {\n  onFolderClick: (uid: string, newOpenState: boolean) => void;\n};\n\nexport function NameCell({ row: { original: data }, onFolderClick, treeID }: NameCellProps) {\n  const styles = useStyles2(getStyles);\n  const { item, level, isOpen } = data;\n  const childrenByParentUID = useChildrenByParentUIDState();\n\n  const isLoading = isOpen && !childrenByParentUID[item.uid];\n  const iconName = getIconForItem(data.item, isOpen);\n\n  if (item.kind === 'ui') {\n    return (\n      <>\n        <Indent\n          level={level}\n          spacing={{\n            xs: 1,\n            md: 3,\n          }}\n        />\n        <span className={styles.folderButtonSpacer} />\n        {item.uiKind === 'empty-folder' ? (\n          <em className={styles.emptyText}>\n            <Text variant=\"body\" color=\"secondary\" truncate>\n              <Trans i18nKey=\"browse-dashboards.name-cell.no-items\">No items</Trans>\n            </Text>\n          </em>\n        ) : (\n          <Skeleton width={200} />\n        )}\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Indent\n        level={level}\n        spacing={{\n          xs: 1,\n          md: 3,\n        }}\n      />\n\n      {item.kind === 'folder' ? (\n        <IconButton\n          size={CHEVRON_SIZE}\n          className={styles.chevron}\n          onClick={() => {\n            onFolderClick(item.uid, !isOpen);\n          }}\n          name={isOpen ? 'angle-down' : 'angle-right'}\n          aria-label={\n            isOpen\n              ? t('browse-dashboards.dashboards-tree.collapse-folder-button', 'Collapse folder {{title}}', {\n                  title: item.title,\n                })\n              : t('browse-dashboards.dashboards-tree.expand-folder-button', 'Expand folder {{title}}', {\n                  title: item.title,\n                })\n          }\n        />\n      ) : (\n        <span className={styles.folderButtonSpacer} />\n      )}\n\n      <div className={styles.iconNameContainer}>\n        {isLoading ? <Spinner size={ICON_SIZE} /> : <Icon size={ICON_SIZE} name={iconName} />}\n\n        <Text variant=\"body\" truncate id={treeID && makeRowID(treeID, item)}>\n          {item.url ? (\n            <Link\n              onClick={() => {\n                reportInteraction('manage_dashboards_result_clicked');\n              }}\n              href={item.url}\n              className={styles.link}\n            >\n              {item.title}\n            </Link>\n          ) : (\n            item.title\n          )}\n        </Text>\n\n        <FolderRepo folder={item} />\n      </div>\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    chevron: css({\n      marginRight: theme.spacing(1),\n      width: getSvgSize(CHEVRON_SIZE),\n    }),\n    emptyText: css({\n      // needed for text to truncate correctly\n      overflow: 'hidden',\n    }),\n    // Should be the same size as the <IconButton /> so Dashboard name is aligned to Folder name siblings\n    folderButtonSpacer: css({\n      paddingLeft: `calc(${getSvgSize(CHEVRON_SIZE)}px + ${theme.spacing(1)})`,\n    }),\n    iconNameContainer: css({\n      alignItems: 'center',\n      display: 'flex',\n      gap: theme.spacing(1),\n      overflow: 'hidden',\n    }),\n    link: css({\n      '&:hover': {\n        textDecoration: 'underline',\n      },\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { CellProps } from 'react-table';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { TagList, useStyles2 } from '@grafana/ui';\n\nimport { DashboardsTreeItem } from '../types';\n\nexport function TagsCell({ row: { original: data } }: CellProps<DashboardsTreeItem, unknown>) {\n  const styles = useStyles2(getStyles);\n  const item = data.item;\n\n  if (item.kind === 'ui') {\n    if (item.uiKind === 'pagination-placeholder') {\n      return <TagList.Skeleton />;\n    } else {\n      return null;\n    }\n  }\n\n  if (!item.tags) {\n    return null;\n  }\n\n  return <TagList className={styles.tagList} tags={item.tags} />;\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    // TagList is annoying and has weird default alignment\n    tagList: css({\n      justifyContent: 'flex-start',\n      flexWrap: 'nowrap',\n    }),\n  };\n}\n","import { css, cx } from '@emotion/css';\nimport { useCallback, useEffect, useId, useMemo, useRef } from 'react';\nimport * as React from 'react';\nimport { TableInstance, useTable } from 'react-table';\nimport { VariableSizeList as List } from 'react-window';\nimport InfiniteLoader from 'react-window-infinite-loader';\n\nimport { GrafanaTheme2, isTruthy } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans, t } from '@grafana/i18n';\nimport { useStyles2 } from '@grafana/ui';\nimport { DashboardViewItem } from 'app/features/search/types';\n\nimport { DashboardsTreeCellProps, DashboardsTreeColumn, DashboardsTreeItem, SelectionState } from '../types';\n\nimport CheckboxCell from './CheckboxCell';\nimport CheckboxHeaderCell from './CheckboxHeaderCell';\nimport { NameCell } from './NameCell';\nimport { TagsCell } from './TagsCell';\nimport { useCustomFlexLayout } from './customFlexTableLayout';\nimport { makeRowID } from './utils';\n\ninterface DashboardsTreeProps {\n  items: DashboardsTreeItem[];\n  width: number;\n  height: number;\n  canSelect: boolean;\n  isSelected: (kind: DashboardViewItem | '$all') => SelectionState;\n  onFolderClick: (uid: string, newOpenState: boolean) => void;\n  onAllSelectionChange: (newState: boolean) => void;\n  onItemSelectionChange: (item: DashboardViewItem, newState: boolean) => void;\n\n  isItemLoaded: (itemIndex: number) => boolean;\n  requestLoadMore: (folderUid: string | undefined) => void;\n}\n\nconst HEADER_HEIGHT = 36;\nconst ROW_HEIGHT = 36;\nconst DIVIDER_HEIGHT = 0; // Yes - make it appear as a border on the row rather than a row itself\n\nexport function DashboardsTree({\n  items,\n  width,\n  height,\n  isSelected,\n  onFolderClick,\n  onAllSelectionChange,\n  onItemSelectionChange,\n  isItemLoaded,\n  requestLoadMore,\n  canSelect = false,\n}: DashboardsTreeProps) {\n  const treeID = useId();\n\n  const infiniteLoaderRef = useRef<InfiniteLoader>(null);\n  const listRef = useRef<List | null>(null);\n  const styles = useStyles2(getStyles);\n\n  useEffect(() => {\n    // If the tree changed identity, then some indexes that were previously loaded may now be unloaded,\n    // especially after a refetch after a move/delete.\n    // Clear that cache, and check if we need to trigger another load\n    if (infiniteLoaderRef.current) {\n      infiniteLoaderRef.current.resetloadMoreItemsCache(true);\n    }\n\n    if (listRef.current) {\n      listRef.current.resetAfterIndex(0);\n    }\n  }, [items]);\n\n  const tableColumns = useMemo(() => {\n    const checkboxColumn: DashboardsTreeColumn = {\n      id: 'checkbox',\n      width: 0,\n      Header: CheckboxHeaderCell,\n      Cell: CheckboxCell,\n    };\n\n    const nameColumn: DashboardsTreeColumn = {\n      id: 'name',\n      width: 3,\n      Header: (\n        <span style={{ paddingLeft: 24 }}>\n          <Trans i18nKey=\"browse-dashboards.dashboards-tree.name-column\">Name</Trans>\n        </span>\n      ),\n      Cell: (props: DashboardsTreeCellProps) => <NameCell {...props} onFolderClick={onFolderClick} />,\n    };\n\n    const tagsColumns: DashboardsTreeColumn = {\n      id: 'tags',\n      width: 2,\n      Header: t('browse-dashboards.dashboards-tree.tags-column', 'Tags'),\n      Cell: TagsCell,\n    };\n    const columns = [canSelect && checkboxColumn, nameColumn, tagsColumns].filter(isTruthy);\n\n    return columns;\n  }, [onFolderClick, canSelect]);\n\n  const table = useTable({ columns: tableColumns, data: items }, useCustomFlexLayout);\n  const { getTableProps, getTableBodyProps, headerGroups } = table;\n\n  const virtualData = useMemo(\n    () => ({\n      table,\n      isSelected,\n      onAllSelectionChange,\n      onItemSelectionChange,\n      treeID,\n    }),\n    // we need this to rerender if items changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [table, isSelected, onAllSelectionChange, onItemSelectionChange, items, treeID]\n  );\n\n  const handleIsItemLoaded = useCallback(\n    (itemIndex: number) => {\n      return isItemLoaded(itemIndex);\n    },\n    [isItemLoaded]\n  );\n\n  const handleLoadMore = useCallback(\n    (startIndex: number, endIndex: number) => {\n      const { parentUID } = items[startIndex];\n      requestLoadMore(parentUID);\n    },\n    [requestLoadMore, items]\n  );\n\n  const getRowHeight = useCallback(\n    (rowIndex: number) => {\n      const row = items[rowIndex];\n      if (row.item.kind === 'ui' && row.item.uiKind === 'divider') {\n        return DIVIDER_HEIGHT;\n      }\n\n      return ROW_HEIGHT;\n    },\n    [items]\n  );\n\n  return (\n    <div {...getTableProps()} role=\"table\">\n      {headerGroups.map((headerGroup) => {\n        const { key, ...headerGroupProps } = headerGroup.getHeaderGroupProps({\n          style: { width },\n        });\n\n        return (\n          <div key={key} {...headerGroupProps} className={cx(styles.row, styles.headerRow)}>\n            {headerGroup.headers.map((column) => {\n              const { key, ...headerProps } = column.getHeaderProps();\n\n              return (\n                <div key={key} {...headerProps} role=\"columnheader\" className={styles.cell}>\n                  {column.render('Header', { isSelected, onAllSelectionChange })}\n                </div>\n              );\n            })}\n          </div>\n        );\n      })}\n\n      <div {...getTableBodyProps()} data-testid={selectors.pages.BrowseDashboards.table.body}>\n        <InfiniteLoader\n          ref={infiniteLoaderRef}\n          itemCount={items.length}\n          isItemLoaded={handleIsItemLoaded}\n          loadMoreItems={handleLoadMore}\n        >\n          {({ onItemsRendered, ref }) => (\n            <List\n              ref={(elem) => {\n                ref(elem);\n                listRef.current = elem;\n              }}\n              height={height - HEADER_HEIGHT}\n              width={width}\n              itemCount={items.length}\n              itemData={virtualData}\n              estimatedItemSize={ROW_HEIGHT}\n              itemSize={getRowHeight}\n              onItemsRendered={onItemsRendered}\n            >\n              {VirtualListRow}\n            </List>\n          )}\n        </InfiniteLoader>\n      </div>\n    </div>\n  );\n}\n\ninterface VirtualListRowProps {\n  index: number;\n  style: React.CSSProperties;\n  data: {\n    table: TableInstance<DashboardsTreeItem>;\n    isSelected: DashboardsTreeCellProps['isSelected'];\n    onAllSelectionChange: DashboardsTreeCellProps['onAllSelectionChange'];\n    onItemSelectionChange: DashboardsTreeCellProps['onItemSelectionChange'];\n    treeID: string;\n  };\n}\n\nfunction VirtualListRow({ index, style, data }: VirtualListRowProps) {\n  const styles = useStyles2(getStyles);\n  const { table, isSelected, onItemSelectionChange, treeID } = data;\n  const { rows, prepareRow } = table;\n\n  const row = rows[index];\n  prepareRow(row);\n\n  const dashboardItem = row.original.item;\n  const { key, ...rowProps } = row.getRowProps({ style });\n\n  if (dashboardItem.kind === 'ui' && dashboardItem.uiKind === 'divider') {\n    return (\n      <div key={key} {...rowProps}>\n        <hr className={styles.divider} />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      key={key}\n      {...rowProps}\n      className={cx(styles.row, styles.bodyRow)}\n      aria-labelledby={makeRowID(treeID, dashboardItem)}\n      data-testid={selectors.pages.BrowseDashboards.table.row(\n        'title' in dashboardItem ? dashboardItem.title : dashboardItem.uid\n      )}\n    >\n      {row.cells.map((cell) => {\n        const { key, ...cellProps } = cell.getCellProps();\n\n        return (\n          <div key={key} {...cellProps} className={styles.cell}>\n            {cell.render('Cell', { isSelected, onItemSelectionChange, treeID })}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    // Column flex properties (cell sizing) are set by customFlexTableLayout.ts\n\n    row: css({\n      gap: theme.spacing(1),\n    }),\n\n    divider: css({\n      borderTop: `1px solid ${theme.colors.border.weak}`,\n      width: '100%',\n      margin: 0,\n    }),\n\n    headerRow: css({\n      backgroundColor: theme.colors.background.secondary,\n      height: HEADER_HEIGHT,\n    }),\n\n    bodyRow: css({\n      height: ROW_HEIGHT,\n\n      '&:hover': {\n        backgroundColor: theme.colors.action.hover,\n      },\n    }),\n\n    cell: css({\n      padding: theme.spacing(1),\n      overflow: 'hidden', // Required so flex children can do text-overflow: ellipsis\n      display: 'flex',\n      alignItems: 'center',\n    }),\n\n    link: css({\n      '&:hover': {\n        textDecoration: 'underline',\n      },\n    }),\n  };\n};\n","import { useCallback } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { CallToActionCard, EmptyState, LinkButton, TextLink } from '@grafana/ui';\nimport { DashboardViewItem } from 'app/features/search/types';\nimport { useDispatch } from 'app/types/store';\n\nimport { PAGE_SIZE } from '../api/services';\nimport { fetchNextChildrenPage } from '../state/actions';\nimport {\n  useFlatTreeState,\n  useCheckboxSelectionState,\n  useChildrenByParentUIDState,\n  useBrowseLoadingStatus,\n  useLoadNextChildrenPage,\n} from '../state/hooks';\nimport { setFolderOpenState, setItemSelectionState, setAllSelection } from '../state/slice';\nimport { BrowseDashboardsState, DashboardTreeSelection, SelectionState } from '../types';\n\nimport { DashboardsTree } from './DashboardsTree';\n\ninterface BrowseViewProps {\n  height: number;\n  width: number;\n  folderUID: string | undefined;\n  canSelect: boolean;\n}\n\nexport function BrowseView({ folderUID, width, height, canSelect }: BrowseViewProps) {\n  const status = useBrowseLoadingStatus(folderUID);\n  const dispatch = useDispatch();\n  const flatTree = useFlatTreeState(folderUID);\n  const selectedItems = useCheckboxSelectionState();\n  const childrenByParentUID = useChildrenByParentUIDState();\n\n  const handleFolderClick = useCallback(\n    (clickedFolderUID: string, isOpen: boolean) => {\n      dispatch(setFolderOpenState({ folderUID: clickedFolderUID, isOpen }));\n\n      if (isOpen) {\n        dispatch(fetchNextChildrenPage({ parentUID: clickedFolderUID, pageSize: PAGE_SIZE }));\n      }\n    },\n    [dispatch]\n  );\n\n  const handleItemSelectionChange = useCallback(\n    (item: DashboardViewItem, isSelected: boolean) => {\n      dispatch(setItemSelectionState({ item, isSelected }));\n    },\n    [dispatch]\n  );\n\n  const isSelected = useCallback(\n    (item: DashboardViewItem | '$all'): SelectionState => {\n      if (item === '$all') {\n        // We keep the boolean $all state up to date in redux, so we can short-circut\n        // the logic if we know this has been selected\n        if (selectedItems.$all) {\n          return SelectionState.Selected;\n        }\n\n        // Otherwise, if we have any selected items, then it should be in 'mixed' state\n        for (const selection of Object.values(selectedItems)) {\n          if (typeof selection === 'boolean') {\n            continue;\n          }\n\n          for (const uid in selection) {\n            const isSelected = selection[uid];\n            if (isSelected) {\n              return SelectionState.Mixed;\n            }\n          }\n        }\n\n        // Otherwise otherwise, nothing is selected and header should be unselected\n        return SelectionState.Unselected;\n      }\n\n      const isSelected = selectedItems[item.kind][item.uid];\n      if (isSelected) {\n        return SelectionState.Selected;\n      }\n\n      // Because if _all_ children, then the parent is selected (and bailed in the previous check),\n      // this .some check will only return true if the children are partially selected\n      const isMixed = hasSelectedDescendants(item, childrenByParentUID, selectedItems);\n      if (isMixed) {\n        return SelectionState.Mixed;\n      }\n\n      return SelectionState.Unselected;\n    },\n    [selectedItems, childrenByParentUID]\n  );\n\n  const isItemLoaded = useCallback(\n    (itemIndex: number) => {\n      const treeItem = flatTree[itemIndex];\n      if (!treeItem) {\n        return false;\n      }\n      const item = treeItem.item;\n      const result = !(item.kind === 'ui' && item.uiKind === 'pagination-placeholder');\n\n      return result;\n    },\n    [flatTree]\n  );\n\n  const handleLoadMore = useLoadNextChildrenPage();\n\n  if (status === 'fulfilled' && flatTree.length === 0) {\n    return (\n      <div style={{ width }}>\n        {canSelect ? (\n          <EmptyState\n            variant=\"call-to-action\"\n            button={\n              <LinkButton\n                href={folderUID ? `dashboard/new?folderUid=${folderUID}` : 'dashboard/new'}\n                icon=\"plus\"\n                size=\"lg\"\n              >\n                <Trans i18nKey=\"browse-dashboards.empty-state.button-title\">Create dashboard</Trans>\n              </LinkButton>\n            }\n            message={\n              folderUID\n                ? t('browse-dashboards.empty-state.title-folder', \"This folder doesn't have any dashboards yet\")\n                : t('browse-dashboards.empty-state.title', \"You haven't created any dashboards yet\")\n            }\n          >\n            {folderUID && (\n              <Trans i18nKey=\"browse-dashboards.empty-state.pro-tip\">\n                Add/move dashboards to your folder at{' '}\n                <TextLink external={false} href=\"/dashboards\">\n                  Browse dashboards\n                </TextLink>\n              </Trans>\n            )}\n          </EmptyState>\n        ) : (\n          <CallToActionCard\n            callToActionElement={\n              <span>\n                <Trans i18nKey=\"browse-dashboards.browse-view.this-folder-is-empty\">This folder is empty</Trans>\n              </span>\n            }\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <DashboardsTree\n      canSelect={canSelect}\n      items={flatTree}\n      width={width}\n      height={height}\n      isSelected={isSelected}\n      onFolderClick={handleFolderClick}\n      onAllSelectionChange={(newState) => dispatch(setAllSelection({ isSelected: newState, folderUID }))}\n      onItemSelectionChange={handleItemSelectionChange}\n      isItemLoaded={isItemLoaded}\n      requestLoadMore={handleLoadMore}\n    />\n  );\n}\n\nfunction hasSelectedDescendants(\n  item: DashboardViewItem,\n  childrenByParentUID: BrowseDashboardsState['childrenByParentUID'],\n  selectedItems: DashboardTreeSelection\n): boolean {\n  const collection = childrenByParentUID[item.uid];\n  if (!collection) {\n    return false;\n  }\n\n  return collection.items.some((v) => {\n    const thisIsSelected = selectedItems[v.kind][v.uid];\n    if (thisIsSelected) {\n      return thisIsSelected;\n    }\n\n    return hasSelectedDescendants(v, childrenByParentUID, selectedItems);\n  });\n}\n","import { useForm } from 'react-hook-form';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Input, Field, Stack } from '@grafana/ui';\n\nimport { validationSrv } from '../../manage-dashboards/services/ValidationSrv';\n\ninterface Props {\n  onConfirm: (folderName: string) => void;\n  onCancel: () => void;\n}\n\ninterface FormModel {\n  folderName: string;\n}\n\nconst initialFormModel: FormModel = { folderName: '' };\n\nexport function NewFolderForm({ onCancel, onConfirm }: Props) {\n  const {\n    handleSubmit,\n    register,\n    formState: { errors },\n  } = useForm<FormModel>({ defaultValues: initialFormModel });\n\n  const translatedFolderNameRequiredPhrase = t(\n    'browse-dashboards.action.new-folder-name-required-phrase',\n    'Folder name is required.'\n  );\n  const validateFolderName = async (folderName: string) => {\n    try {\n      await validationSrv.validateNewFolderName(folderName);\n      return true;\n    } catch (e) {\n      if (e instanceof Error) {\n        return e.message;\n      } else {\n        throw e;\n      }\n    }\n  };\n\n  const fieldNameLabel = t('browse-dashboards.new-folder-form.name-label', 'Folder name');\n\n  return (\n    <form\n      name=\"addFolder\"\n      onSubmit={handleSubmit((form) => onConfirm(form.folderName))}\n      data-testid={selectors.pages.BrowseDashboards.NewFolderForm.form}\n    >\n      <Field\n        label={fieldNameLabel}\n        invalid={!!errors.folderName}\n        error={errors.folderName && errors.folderName.message}\n      >\n        <Input\n          data-testid={selectors.pages.BrowseDashboards.NewFolderForm.nameInput}\n          id=\"folder-name-input\"\n          defaultValue={initialFormModel.folderName}\n          {...register('folderName', {\n            required: translatedFolderNameRequiredPhrase,\n            validate: async (v) => await validateFolderName(v),\n          })}\n        />\n      </Field>\n      <Stack>\n        <Button variant=\"secondary\" fill=\"outline\" onClick={onCancel}>\n          <Trans i18nKey=\"browse-dashboards.new-folder-form.cancel-label\">Cancel</Trans>\n        </Button>\n        <Button type=\"submit\">\n          <Trans i18nKey=\"browse-dashboards.new-folder-form.create-label\">Create</Trans>\n        </Button>\n      </Stack>\n    </form>\n  );\n}\n","import { useEffect } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\nimport { useNavigate } from 'react-router-dom-v5-compat';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { getAppEvents } from '@grafana/runtime';\nimport { Alert, Button, Field, Input, Stack } from '@grafana/ui';\nimport { Folder } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView, useCreateRepositoryFilesWithPathMutation } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath, Resource } from 'app/features/apiserver/types';\nimport { ResourceEditFormSharedFields } from 'app/features/dashboard-scene/components/Provisioned/ResourceEditFormSharedFields';\nimport { BaseProvisionedFormData } from 'app/features/dashboard-scene/saving/shared';\nimport { validationSrv } from 'app/features/manage-dashboards/services/ValidationSrv';\nimport { PROVISIONING_URL } from 'app/features/provisioning/constants';\nimport { usePullRequestParam } from 'app/features/provisioning/hooks/usePullRequestParam';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { useProvisionedFolderFormData } from '../hooks/useProvisionedFolderFormData';\ninterface FormProps extends Props {\n  initialValues: BaseProvisionedFormData;\n  repository?: RepositoryView;\n  workflowOptions: Array<{ label: string; value: string }>;\n  folder?: Folder;\n  isGitHub: boolean;\n}\ninterface Props {\n  parentFolder?: FolderDTO;\n  onDismiss?: () => void;\n}\n\nfunction FormContent({ initialValues, repository, workflowOptions, folder, isGitHub, onDismiss }: FormProps) {\n  const { prURL } = usePullRequestParam();\n  const navigate = useNavigate();\n  const [create, request] = useCreateRepositoryFilesWithPathMutation();\n\n  const methods = useForm<BaseProvisionedFormData>({\n    defaultValues: initialValues,\n    mode: 'onBlur', // Validates when user leaves the field\n  });\n  const { handleSubmit, watch, register, formState } = methods;\n\n  const [workflow, ref] = watch(['workflow', 'ref']);\n\n  // TODO: replace with useProvisionedRequestHandler hook\n  useEffect(() => {\n    const appEvents = getAppEvents();\n    if (request.isSuccess && repository) {\n      onDismiss?.();\n\n      appEvents.publish({\n        type: AppEvents.alertSuccess.name,\n        payload: [\n          t(\n            'browse-dashboards.new-provisioned-folder-form.alert-folder-created-successfully',\n            'Folder created successfully'\n          ),\n        ],\n      });\n\n      // TODO: Update when the upsert type is fixed\n      // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n      const folder = request.data.resource?.upsert as Resource;\n      if (folder?.metadata?.name) {\n        navigate(`/dashboards/f/${folder?.metadata?.name}/`);\n        return;\n      }\n\n      let url = `${PROVISIONING_URL}/${repository.name}/file/${request.data.path}`;\n      if (request.data.ref?.length) {\n        url += '?ref=' + request.data.ref;\n      }\n      navigate(url);\n    } else if (request.isError) {\n      appEvents.publish({\n        type: AppEvents.alertError.name,\n        payload: [\n          t('browse-dashboards.new-provisioned-folder-form.alert-error-creating-folder', 'Error creating folder'),\n          request.error,\n        ],\n      });\n    }\n  }, [request.isSuccess, request.isError, request.error, ref, request.data, workflow, navigate, repository, onDismiss]);\n\n  const validateFolderName = async (folderName: string) => {\n    try {\n      await validationSrv.validateNewFolderName(folderName);\n      return true;\n    } catch (e) {\n      if (e instanceof Error) {\n        return e.message;\n      }\n      return t('browse-dashboards.new-provisioned-folder-form.error-invalid-folder-name', 'Invalid folder name');\n    }\n  };\n\n  const doSave = async ({ ref, title, workflow, comment }: BaseProvisionedFormData) => {\n    const repoName = repository?.name;\n    if (!title || !repoName) {\n      return;\n    }\n    const basePath = folder?.metadata?.annotations?.[AnnoKeySourcePath] ?? '';\n\n    // Convert folder title to filename format (lowercase, replace spaces with hyphens)\n    const titleInFilenameFormat = title\n      .toLowerCase()\n      .replace(/\\s+/g, '-')\n      .replace(/[^a-z0-9-]/g, '');\n\n    const prefix = basePath ? `${basePath}/` : '';\n    const path = `${prefix}${titleInFilenameFormat}/`;\n\n    const folderModel = {\n      title,\n      type: 'folder',\n    };\n\n    if (workflow === 'write') {\n      ref = undefined;\n    }\n\n    create({\n      ref,\n      name: repoName,\n      path,\n      message: comment || `Create folder: ${title}`,\n      body: folderModel,\n    });\n  };\n\n  return (\n    <FormProvider {...methods}>\n      <form onSubmit={handleSubmit(doSave)}>\n        <Stack direction=\"column\" gap={2}>\n          {!repository?.workflows?.length && (\n            <Alert\n              title={t(\n                'browse-dashboards.new-provisioned-folder-form.title-this-repository-is-read-only',\n                'This repository is read only'\n              )}\n            >\n              <Trans i18nKey=\"browse-dashboards.text-this-repository-is-read-only\">\n                If you have direct access to the target, copy the JSON and paste it there.\n              </Trans>\n            </Alert>\n          )}\n\n          <Field\n            noMargin\n            label={t('browse-dashboards.new-provisioned-folder-form.label-folder-name', 'Folder name')}\n            invalid={!!formState.errors.title}\n            error={formState.errors.title?.message}\n          >\n            <Input\n              {...register('title', {\n                required: t('browse-dashboards.new-provisioned-folder-form.error-required', 'Folder name is required'),\n                validate: validateFolderName,\n              })}\n              placeholder={t(\n                'browse-dashboards.new-provisioned-folder-form.folder-name-input-placeholder-enter-folder-name',\n                'Enter folder name'\n              )}\n              id=\"folder-name-input\"\n            />\n          </Field>\n\n          <ResourceEditFormSharedFields\n            resourceType=\"folder\"\n            isNew={false}\n            workflow={workflow}\n            workflowOptions={workflowOptions}\n            isGitHub={isGitHub}\n            hidePath\n          />\n\n          {prURL && (\n            <Alert\n              severity=\"info\"\n              title={t(\n                'browse-dashboards.new-provisioned-folder-form.title-pull-request-created',\n                'Pull request created'\n              )}\n            >\n              <Trans i18nKey=\"browse-dashboards.new-provisioned-folder-form.text-pull-request-created\">\n                A pull request has been created with changes to this folder:\n              </Trans>{' '}\n              <a href={prURL} target=\"_blank\" rel=\"noopener noreferrer\">\n                {prURL}\n              </a>\n            </Alert>\n          )}\n\n          <Stack gap={2}>\n            <Button variant=\"secondary\" fill=\"outline\" onClick={onDismiss}>\n              <Trans i18nKey=\"browse-dashboards.new-provisioned-folder-form.cancel\">Cancel</Trans>\n            </Button>\n            <Button type=\"submit\" disabled={request.isLoading}>\n              {request.isLoading\n                ? t('browse-dashboards.new-provisioned-folder-form.button-creating', 'Creating...')\n                : t('browse-dashboards.new-provisioned-folder-form.button-create', 'Create')}\n            </Button>\n          </Stack>\n        </Stack>\n      </form>\n    </FormProvider>\n  );\n}\n\nexport function NewProvisionedFolderForm({ parentFolder, onDismiss }: Props) {\n  const { workflowOptions, isGitHub, repository, folder, initialValues } = useProvisionedFolderFormData({\n    folderUid: parentFolder?.uid,\n    action: 'create',\n    title: '', // Empty title for new folders\n  });\n\n  if (!initialValues) {\n    return null;\n  }\n\n  return (\n    <FormContent\n      parentFolder={parentFolder}\n      onDismiss={onDismiss}\n      initialValues={initialValues}\n      repository={repository}\n      workflowOptions={workflowOptions}\n      folder={folder}\n      isGitHub={isGitHub}\n    />\n  );\n}\n","import { useState } from 'react';\nimport { useLocation } from 'react-router-dom-v5-compat';\n\nimport { locationUtil } from '@grafana/data';\nimport { config, locationService, reportInteraction } from '@grafana/runtime';\nimport { Button, Drawer, Dropdown, Icon, Menu, MenuItem } from '@grafana/ui';\nimport { useAppNotification } from 'app/core/copy/appNotification';\nimport { useIsProvisionedInstance } from 'app/features/provisioning/hooks/useIsProvisionedInstance';\nimport {\n  getImportPhrase,\n  getNewDashboardPhrase,\n  getNewFolderPhrase,\n  getNewPhrase,\n} from 'app/features/search/tempI18nPhrases';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { ManagerKind } from '../../apiserver/types';\nimport { useNewFolderMutation } from '../api/browseDashboardsAPI';\n\nimport { NewFolderForm } from './NewFolderForm';\nimport { NewProvisionedFolderForm } from './NewProvisionedFolderForm';\n\ninterface Props {\n  parentFolder?: FolderDTO;\n  canCreateFolder: boolean;\n  canCreateDashboard: boolean;\n}\n\nexport default function CreateNewButton({ parentFolder, canCreateDashboard, canCreateFolder }: Props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const location = useLocation();\n  const [newFolder] = useNewFolderMutation();\n  const [showNewFolderDrawer, setShowNewFolderDrawer] = useState(false);\n  const notifyApp = useAppNotification();\n  const isProvisionedInstance = useIsProvisionedInstance();\n\n  const onCreateFolder = async (folderName: string) => {\n    try {\n      const folder = await newFolder({\n        title: folderName,\n        parentUid: parentFolder?.uid,\n      });\n\n      const depth = parentFolder?.parents ? parentFolder.parents.length + 1 : 0;\n      reportInteraction('grafana_manage_dashboards_folder_created', {\n        is_subfolder: Boolean(parentFolder?.uid),\n        folder_depth: depth,\n      });\n\n      if (!folder.error) {\n        notifyApp.success('Folder created');\n      } else {\n        notifyApp.error('Failed to create folder');\n      }\n\n      if (folder.data) {\n        locationService.push(locationUtil.stripBaseFromUrl(folder.data.url));\n      }\n    } finally {\n      setShowNewFolderDrawer(false);\n    }\n  };\n\n  const newMenu = (\n    <Menu>\n      {canCreateDashboard && (\n        <MenuItem\n          label={getNewDashboardPhrase()}\n          onClick={() =>\n            reportInteraction('grafana_menu_item_clicked', {\n              url: buildUrl('/dashboard/new', parentFolder?.uid),\n              from: location.pathname,\n            })\n          }\n          url={buildUrl('/dashboard/new', parentFolder?.uid)}\n        />\n      )}\n      {canCreateFolder && <MenuItem onClick={() => setShowNewFolderDrawer(true)} label={getNewFolderPhrase()} />}\n      {canCreateDashboard && (\n        <MenuItem\n          label={getImportPhrase()}\n          onClick={() =>\n            reportInteraction('grafana_menu_item_clicked', {\n              url: buildUrl('/dashboard/import', parentFolder?.uid),\n              from: location.pathname,\n            })\n          }\n          url={buildUrl('/dashboard/import', parentFolder?.uid)}\n        />\n      )}\n    </Menu>\n  );\n\n  return (\n    <>\n      <Dropdown overlay={newMenu} onVisibleChange={setIsOpen}>\n        <Button>\n          {getNewPhrase()}\n          <Icon name={isOpen ? 'angle-up' : 'angle-down'} />\n        </Button>\n      </Dropdown>\n      {showNewFolderDrawer && (\n        <Drawer\n          title={getNewFolderPhrase()}\n          subtitle={parentFolder?.title ? `Location: ${parentFolder.title}` : undefined}\n          onClose={() => setShowNewFolderDrawer(false)}\n          size=\"sm\"\n        >\n          {parentFolder?.managedBy === ManagerKind.Repo || isProvisionedInstance ? (\n            <NewProvisionedFolderForm onDismiss={() => setShowNewFolderDrawer(false)} parentFolder={parentFolder} />\n          ) : (\n            <NewFolderForm onConfirm={onCreateFolder} onCancel={() => setShowNewFolderDrawer(false)} />\n          )}\n        </Drawer>\n      )}\n    </>\n  );\n}\n\n/**\n *\n * @param url without any parameters\n * @param folderUid  folder id\n * @returns url with paramter if folder is present\n */\nfunction buildUrl(url: string, folderUid: string | undefined) {\n  const baseUrl = folderUid ? url + '?folderUid=' + folderUid : url;\n  return config.appSubUrl ? config.appSubUrl + baseUrl : baseUrl;\n}\n","import { config } from '@grafana/runtime';\nimport { CommonBannerProps } from 'app/features/dashboard-scene/saving/provisioned/DashboardPreviewBanner';\nimport { PreviewBannerViewPR } from 'app/features/dashboard-scene/saving/provisioned/PreviewBannerViewPR';\nimport { usePullRequestParam } from 'app/features/provisioning/hooks/usePullRequestParam';\n\nexport function ProvisionedFolderPreviewBanner({ queryParams }: CommonBannerProps) {\n  const provisioningEnabled = config.featureToggles.provisioning;\n  const { prURL, newPrURL } = usePullRequestParam();\n\n  if (!provisioningEnabled || 'kiosk' in queryParams) {\n    return null;\n  }\n\n  if (prURL) {\n    return <PreviewBannerViewPR prParam={prURL} />;\n  }\n\n  if (newPrURL) {\n    return <PreviewBannerViewPR prParam={newPrURL} isNewPr />;\n  }\n\n  return null;\n}\n","import { css } from '@emotion/css';\nimport { skipToken } from '@reduxjs/toolkit/query';\nimport { memo, useEffect, useMemo } from 'react';\nimport { useLocation, useParams } from 'react-router-dom-v5-compat';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { LinkButton, FilterInput, useStyles2, Text, Stack } from '@grafana/ui';\nimport { Page } from 'app/core/components/Page/Page';\nimport { getConfig } from 'app/core/config';\nimport { useDispatch } from 'app/types/store';\n\nimport { FolderRepo } from '../../core/components/NestedFolderPicker/FolderRepo';\nimport { contextSrv } from '../../core/services/context_srv';\nimport { ManagerKind } from '../apiserver/types';\nimport { buildNavModel, getDashboardsTabID } from '../folders/state/navModel';\nimport { useSearchStateManager } from '../search/state/SearchStateManager';\nimport { getSearchPlaceholder } from '../search/tempI18nPhrases';\n\nimport { useGetFolderQuery, useSaveFolderMutation } from './api/browseDashboardsAPI';\nimport { BrowseActions } from './components/BrowseActions/BrowseActions';\nimport { BrowseFilters } from './components/BrowseFilters';\nimport { BrowseView } from './components/BrowseView';\nimport CreateNewButton from './components/CreateNewButton';\nimport { FolderActionsButton } from './components/FolderActionsButton';\nimport { ProvisionedFolderPreviewBanner } from './components/ProvisionedFolderPreviewBanner';\nimport { SearchView } from './components/SearchView';\nimport { getFolderPermissions } from './permissions';\nimport { useHasSelection } from './state/hooks';\nimport { setAllSelection } from './state/slice';\n\n// New Browse/Manage/Search Dashboards views for nested folders\nconst BrowseDashboardsPage = memo(({ queryParams }: { queryParams: Record<string, string> }) => {\n  const { uid: folderUID } = useParams();\n  const dispatch = useDispatch();\n\n  const styles = useStyles2(getStyles);\n  const [searchState, stateManager] = useSearchStateManager();\n  const isSearching = stateManager.hasSearchFilters();\n  const location = useLocation();\n  const search = useMemo(() => new URLSearchParams(location.search), [location.search]);\n\n  useEffect(() => {\n    stateManager.initStateFromUrl(folderUID);\n\n    // Clear selected state when folderUID changes\n    dispatch(\n      setAllSelection({\n        isSelected: false,\n        folderUID: undefined,\n      })\n    );\n  }, [dispatch, folderUID, stateManager]);\n\n  // Trigger search when \"starred\" query param changes\n  useEffect(() => {\n    stateManager.onSetStarred(search.has('starred'));\n  }, [search, stateManager]);\n\n  useEffect(() => {\n    // Clear the search results when we leave SearchView to prevent old results flashing\n    // when starting a new search\n    if (!isSearching && searchState.result) {\n      stateManager.setState({ result: undefined, includePanels: undefined });\n    }\n    if (isSearching && searchState.result?.totalRows === 0) {\n      reportInteraction('grafana_empty_state_shown', { source: 'browse_dashboards' });\n    }\n  }, [isSearching, searchState.result, stateManager]);\n\n  const { data: folderDTO } = useGetFolderQuery(folderUID ?? skipToken);\n  const [saveFolder] = useSaveFolderMutation();\n  const navModel = useMemo(() => {\n    if (!folderDTO) {\n      return undefined;\n    }\n    const model = buildNavModel(folderDTO);\n\n    // Set the \"Dashboards\" tab to active\n    const dashboardsTabID = getDashboardsTabID(folderDTO.uid);\n    const dashboardsTab = model.children?.find((child) => child.id === dashboardsTabID);\n    if (dashboardsTab) {\n      dashboardsTab.active = true;\n    }\n    return model;\n  }, [folderDTO]);\n\n  const hasSelection = useHasSelection();\n\n  // Fetch the root (aka general) folder if we're not in a specific folder\n  const { data: rootFolderDTO } = useGetFolderQuery(folderDTO ? skipToken : 'general');\n  const folder = folderDTO ?? rootFolderDTO;\n\n  const { canEditFolders, canEditDashboards, canCreateDashboards, canCreateFolders } = getFolderPermissions(folder);\n  const hasAdminRights = contextSrv.hasRole('Admin') || contextSrv.isGrafanaAdmin;\n  const isProvisionedFolder = folder?.managedBy === ManagerKind.Repo;\n  const showEditTitle = canEditFolders && folderUID && !isProvisionedFolder;\n  const canSelect = (canEditFolders || canEditDashboards) && !isProvisionedFolder;\n  const onEditTitle = async (newValue: string) => {\n    if (folderDTO) {\n      const result = await saveFolder({\n        ...folderDTO,\n        title: newValue,\n      });\n      if ('error' in result) {\n        reportInteraction('grafana_browse_dashboards_page_edit_folder_name', {\n          status: 'failed_with_error',\n        });\n        throw result.error;\n      } else {\n        reportInteraction('grafana_browse_dashboards_page_edit_folder_name', { status: 'success' });\n      }\n    } else {\n      reportInteraction('grafana_browse_dashboards_page_edit_folder_name', { status: 'failed_no_folderDTO' });\n    }\n  };\n\n  const handleButtonClickToRecentlyDeleted = () => {\n    reportInteraction('grafana_browse_dashboards_page_button_to_recently_deleted', {\n      origin: window.location.pathname === getConfig().appSubUrl + '/dashboards' ? 'Dashboards' : 'Folder view',\n    });\n  };\n\n  const renderTitle = (title: string) => {\n    return (\n      <Stack alignItems={'center'} gap={2}>\n        <Text element={'h1'}>{title}</Text> <FolderRepo folder={folder} />\n      </Stack>\n    );\n  };\n\n  return (\n    <Page\n      navId=\"dashboards/browse\"\n      pageNav={navModel}\n      onEditTitle={showEditTitle ? onEditTitle : undefined}\n      renderTitle={renderTitle}\n      actions={\n        <>\n          {config.featureToggles.restoreDashboards && hasAdminRights && (\n            <LinkButton\n              variant=\"secondary\"\n              href={getConfig().appSubUrl + '/dashboard/recently-deleted'}\n              onClick={handleButtonClickToRecentlyDeleted}\n            >\n              <Trans i18nKey=\"browse-dashboards.actions.button-to-recently-deleted\">Recently deleted</Trans>\n            </LinkButton>\n          )}\n          {folderDTO && <FolderActionsButton folder={folderDTO} />}\n          {(canCreateDashboards || canCreateFolders) && (\n            <CreateNewButton\n              parentFolder={folderDTO}\n              canCreateDashboard={canCreateDashboards}\n              canCreateFolder={canCreateFolders}\n            />\n          )}\n        </>\n      }\n    >\n      <Page.Contents className={styles.pageContents}>\n        <ProvisionedFolderPreviewBanner queryParams={queryParams} />\n        <div>\n          <FilterInput\n            placeholder={getSearchPlaceholder(searchState.includePanels)}\n            value={searchState.query}\n            escapeRegex={false}\n            onChange={(e) => stateManager.onQueryChange(e)}\n          />\n        </div>\n\n        {hasSelection ? (\n          <BrowseActions />\n        ) : (\n          <div className={styles.filters}>\n            <BrowseFilters />\n          </div>\n        )}\n\n        <div className={styles.subView}>\n          <AutoSizer>\n            {({ width, height }) =>\n              isSearching ? (\n                <SearchView\n                  canSelect={canSelect}\n                  width={width}\n                  height={height}\n                  searchState={searchState}\n                  searchStateManager={stateManager}\n                />\n              ) : (\n                <BrowseView canSelect={canSelect} width={width} height={height} folderUID={folderUID} />\n              )\n            }\n          </AutoSizer>\n        </div>\n      </Page.Contents>\n    </Page>\n  );\n});\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  pageContents: css({\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(1),\n    height: '100%',\n  }),\n\n  // AutoSizer needs an element to measure the full height available\n  subView: css({\n    height: '100%',\n  }),\n\n  filters: css({\n    display: 'none',\n\n    [theme.breakpoints.up('md')]: {\n      display: 'block',\n    },\n  }),\n});\n\nBrowseDashboardsPage.displayName = 'BrowseDashboardsPage';\nexport default BrowseDashboardsPage;\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { Alert, ConfirmModal, Text, Space } from '@grafana/ui';\n\nimport { useGetAffectedItemsQuery } from '../../api/browseDashboardsAPI';\nimport { DashboardTreeSelection } from '../../types';\n\nimport { DescendantCount } from './DescendantCount';\n\nexport interface Props {\n  isOpen: boolean;\n  onConfirm: () => Promise<void>;\n  onDismiss: () => void;\n  selectedItems: DashboardTreeSelection;\n}\n\nexport const DeleteModal = ({ onConfirm, onDismiss, selectedItems, ...props }: Props) => {\n  const { data } = useGetAffectedItemsQuery(selectedItems);\n  const deleteIsInvalid = Boolean(data && (data.alertRule || data.libraryPanel));\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const onDelete = async () => {\n    reportInteraction('grafana_manage_dashboards_delete_clicked', {\n      item_counts: {\n        dashboard: Object.keys(selectedItems.dashboard).length,\n        folder: Object.keys(selectedItems.folder).length,\n      },\n      source: 'browse_dashboards',\n      restore_enabled: false,\n    });\n    setIsDeleting(true);\n    try {\n      await onConfirm();\n      setIsDeleting(false);\n      onDismiss();\n    } catch {\n      setIsDeleting(false);\n    }\n  };\n\n  return (\n    <ConfirmModal\n      body={\n        <>\n          {config.featureToggles.restoreDashboards && (\n            <>\n              <Text element=\"p\">\n                <Trans i18nKey=\"browse-dashboards.action.delete-modal-restore-dashboards-text\">\n                  This action will delete the selected folders immediately but the selected dashboards will be marked\n                  for deletion in 30 days. Your organization administrator can restore the dashboards anytime before the\n                  30 days expire. Folders cannot be restored.\n                </Trans>\n              </Text>\n              <Space v={2} />\n            </>\n          )}\n          <Text element=\"p\">\n            <Trans i18nKey=\"browse-dashboards.action.delete-modal-text\">\n              This action will delete the following content:\n            </Trans>\n          </Text>\n          <DescendantCount selectedItems={selectedItems} />\n          <Space v={2} />\n        </>\n      }\n      description={\n        <>\n          {deleteIsInvalid ? (\n            <Alert\n              severity=\"warning\"\n              title={t('browse-dashboards.action.delete-modal-invalid-title', 'Cannot delete folder')}\n            >\n              <Trans i18nKey=\"browse-dashboards.action.delete-modal-invalid-text\">\n                One or more folders contain library panels or alert rules. Delete these first in order to proceed.\n              </Trans>\n            </Alert>\n          ) : null}\n        </>\n      }\n      confirmationText={t('browse-dashboards.action.confirmation-text', 'Delete')}\n      confirmText={\n        isDeleting\n          ? t('browse-dashboards.action.deleting', 'Deleting...')\n          : t('browse-dashboards.action.delete-button', 'Delete')\n      }\n      onDismiss={onDismiss}\n      onConfirm={onDelete}\n      title={t('browse-dashboards.action.delete-modal-title', 'Delete')}\n      {...props}\n      disabled={deleteIsInvalid}\n    />\n  );\n};\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { Alert, Button, Field, Modal, Text, Space } from '@grafana/ui';\nimport { FolderPicker } from 'app/core/components/Select/FolderPicker';\n\nimport { DashboardTreeSelection } from '../../types';\n\nimport { DescendantCount } from './DescendantCount';\n\nexport interface Props {\n  isOpen: boolean;\n  onConfirm: (targetFolderUid: string) => Promise<void>;\n  onDismiss: () => void;\n  selectedItems: DashboardTreeSelection;\n}\n\nexport const MoveModal = ({ onConfirm, onDismiss, selectedItems, ...props }: Props) => {\n  const [moveTarget, setMoveTarget] = useState<string>();\n  const [isMoving, setIsMoving] = useState(false);\n\n  const selectedFolders = Object.keys(selectedItems.folder).filter((uid) => selectedItems.folder[uid]);\n\n  const onMove = async () => {\n    if (moveTarget !== undefined) {\n      setIsMoving(true);\n      try {\n        await onConfirm(moveTarget);\n        setIsMoving(false);\n        onDismiss();\n      } catch {\n        setIsMoving(false);\n      }\n    }\n  };\n\n  return (\n    <Modal title={t('browse-dashboards.action.move-modal-title', 'Move')} onDismiss={onDismiss} {...props}>\n      {selectedFolders.length > 0 && (\n        <Alert\n          severity=\"info\"\n          title={t('browse-dashboards.action.move-modal-alert', 'Moving this item may change its permissions.')}\n        />\n      )}\n\n      <Text element=\"p\">\n        <Trans i18nKey=\"browse-dashboards.action.move-modal-text\">This action will move the following content:</Trans>\n      </Text>\n\n      <DescendantCount selectedItems={selectedItems} />\n\n      <Space v={3} />\n\n      <Field label={t('browse-dashboards.action.move-modal-field-label', 'Folder name')}>\n        <FolderPicker value={moveTarget} excludeUIDs={selectedFolders} onChange={setMoveTarget} />\n      </Field>\n\n      <Modal.ButtonRow>\n        <Button onClick={onDismiss} variant=\"secondary\" fill=\"outline\">\n          <Trans i18nKey=\"browse-dashboards.action.cancel-button\">Cancel</Trans>\n        </Button>\n        <Button disabled={moveTarget === undefined || isMoving} onClick={onMove} variant=\"primary\">\n          {isMoving\n            ? t('browse-dashboards.action.moving', 'Moving...')\n            : t('browse-dashboards.action.move-button', 'Move')}\n        </Button>\n      </Modal.ButtonRow>\n    </Modal>\n  );\n};\n","import { useEffect } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { getAppEvents } from '@grafana/runtime';\nimport { Box, Button, Stack } from '@grafana/ui';\nimport { Folder } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView, useDeleteRepositoryFilesWithPathMutation } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath } from 'app/features/apiserver/types';\nimport { ResourceEditFormSharedFields } from 'app/features/dashboard-scene/components/Provisioned/ResourceEditFormSharedFields';\nimport { BaseProvisionedFormData } from 'app/features/dashboard-scene/saving/shared';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { useProvisionedFolderFormData } from '../hooks/useProvisionedFolderFormData';\n\nimport { DescendantCount } from './BrowseActions/DescendantCount';\nimport { getFolderURL } from './utils';\n\ninterface FormProps extends DeleteProvisionedFolderFormProps {\n  initialValues: BaseProvisionedFormData;\n  repository?: RepositoryView;\n  workflowOptions: Array<{ label: string; value: string }>;\n  folder?: Folder;\n  isGitHub: boolean;\n}\n\ninterface DeleteProvisionedFolderFormProps {\n  parentFolder?: FolderDTO;\n  onDismiss?: () => void;\n}\n\nfunction FormContent({\n  initialValues,\n  parentFolder,\n  repository,\n  workflowOptions,\n  folder,\n  isGitHub,\n  onDismiss,\n}: FormProps) {\n  const resourceId = parentFolder?.uid || '';\n\n  const [deleteRepoFile, request] = useDeleteRepositoryFilesWithPathMutation();\n\n  const methods = useForm<BaseProvisionedFormData>({ defaultValues: initialValues });\n  const { handleSubmit, watch } = methods;\n  const workflow = watch('workflow');\n\n  const handleSubmitForm = async ({ repo, path, comment, ref }: BaseProvisionedFormData) => {\n    if (!repository?.name) {\n      return;\n    }\n\n    const commitMessage = comment || `Delete folder: ${folder?.metadata?.annotations?.[AnnoKeySourcePath]}`;\n    const targetRef = workflow === 'write' ? undefined : ref;\n\n    deleteRepoFile({\n      name: repo,\n      path: `${path}/`,\n      ref: targetRef,\n      message: commitMessage,\n    });\n  };\n\n  // TODO: move to a hook if this useEffect shared mostly the same logic as in NewProvisionedFolderForm\n  useEffect(() => {\n    if (request.isSuccess && repository) {\n      if (workflow === 'branch') {\n        // TODO: handle display banner https://github.com/grafana/git-ui-sync-project/issues/300\n        // TODO: implement when BE is ready\n        return;\n      }\n\n      if (workflow === 'write') {\n        getAppEvents().publish({\n          type: AppEvents.alertSuccess.name,\n          payload: [\n            t(\n              'browse-dashboards.delete-provisioned-folder-form.alert-folder-deleted-successfully',\n              'Folder deleted successfully'\n            ),\n          ],\n        });\n        // Navigate back to parent folder if it exists, otherwise go to dashboards root\n        if (parentFolder?.parentUid) {\n          window.location.href = getFolderURL(parentFolder.parentUid);\n        } else {\n          window.location.href = '/dashboards';\n        }\n      }\n    }\n\n    if (request.isError) {\n      getAppEvents().publish({\n        type: AppEvents.alertError.name,\n        payload: [\n          t('browse-dashboards.delete-provisioned-folder-form.api-error', 'Failed to delete folder'),\n          request.error,\n        ],\n      });\n      return;\n    }\n  }, [request, repository, workflow, parentFolder]);\n\n  return (\n    <FormProvider {...methods}>\n      <form onSubmit={handleSubmit(handleSubmitForm)}>\n        <Stack direction=\"column\" gap={2}>\n          <Box paddingBottom={2}>\n            <Trans i18nKey=\"browse-dashboards.delete-provisioned-folder-form.delete-warning\">\n              This will delete this folder and all its descendants. In total, this will affect:\n            </Trans>\n            <DescendantCount\n              selectedItems={{\n                folder: { [resourceId]: true },\n                dashboard: {},\n                panel: {},\n                $all: false,\n              }}\n            />\n          </Box>\n\n          <ResourceEditFormSharedFields\n            resourceType=\"folder\"\n            isNew={false}\n            workflow={workflow}\n            workflowOptions={workflowOptions}\n            isGitHub={isGitHub}\n          />\n\n          {/* Delete / Cancel button */}\n          <Stack gap={2}>\n            <Button type=\"submit\" disabled={request.isLoading} variant=\"destructive\">\n              {request.isLoading\n                ? t('browse-dashboards.delete-provisioned-folder-form.button-deleting', 'Deleting...')\n                : t('browse-dashboards.delete-provisioned-folder-form.button-delete', 'Delete')}\n            </Button>\n            <Button variant=\"secondary\" fill=\"outline\" onClick={onDismiss}>\n              <Trans i18nKey=\"browse-dashboards.delete-provisioned-folder-form.button-cancel\">Cancel</Trans>\n            </Button>\n          </Stack>\n        </Stack>\n      </form>\n    </FormProvider>\n  );\n}\n\nexport function DeleteProvisionedFolderForm({ parentFolder, onDismiss }: DeleteProvisionedFolderFormProps) {\n  const { workflowOptions, isGitHub, repository, folder, initialValues } = useProvisionedFolderFormData({\n    folderUid: parentFolder?.uid,\n    action: 'delete',\n    title: parentFolder?.title,\n  });\n\n  if (!initialValues) {\n    return null;\n  }\n\n  return (\n    <FormContent\n      parentFolder={parentFolder}\n      onDismiss={onDismiss}\n      initialValues={initialValues}\n      repository={repository}\n      workflowOptions={workflowOptions}\n      folder={folder}\n      isGitHub={isGitHub}\n    />\n  );\n}\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config, locationService, reportInteraction } from '@grafana/runtime';\nimport { Button, Drawer, Dropdown, Icon, Menu, MenuItem } from '@grafana/ui';\nimport { Permissions } from 'app/core/components/AccessControl';\nimport { appEvents } from 'app/core/core';\nimport { ShowModalReactEvent } from 'app/types/events';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { ManagerKind } from '../../apiserver/types';\nimport { useDeleteFolderMutation, useMoveFolderMutation } from '../api/browseDashboardsAPI';\nimport { getFolderPermissions } from '../permissions';\n\nimport { DeleteModal } from './BrowseActions/DeleteModal';\nimport { MoveModal } from './BrowseActions/MoveModal';\nimport { DeleteProvisionedFolderForm } from './DeleteProvisionedFolderForm';\n\ninterface Props {\n  folder: FolderDTO;\n}\n\nexport function FolderActionsButton({ folder }: Props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [showPermissionsDrawer, setShowPermissionsDrawer] = useState(false);\n  const [showDeleteProvisionedFolderDrawer, setShowDeleteProvisionedFolderDrawer] = useState(false);\n  const [moveFolder] = useMoveFolderMutation();\n  const [deleteFolder] = useDeleteFolderMutation();\n\n  const { canEditFolders, canDeleteFolders, canViewPermissions, canSetPermissions } = getFolderPermissions(folder);\n  const isProvisionedFolder = folder.managedBy === ManagerKind.Repo;\n  // Can only move folders when nestedFolders is enabled and the folder is not provisioned\n  const canMoveFolder = config.featureToggles.nestedFolders && canEditFolders && !isProvisionedFolder;\n\n  const onMove = async (destinationUID: string) => {\n    await moveFolder({ folder, destinationUID });\n    reportInteraction('grafana_manage_dashboards_item_moved', {\n      item_counts: {\n        folder: 1,\n        dashboard: 0,\n      },\n      source: 'folder_actions',\n    });\n  };\n\n  const onDelete = async () => {\n    await deleteFolder(folder);\n    reportInteraction('grafana_manage_dashboards_item_deleted', {\n      item_counts: {\n        folder: 1,\n        dashboard: 0,\n      },\n      source: 'folder_actions',\n    });\n    const { parents } = folder;\n    const parentUrl = parents && parents.length ? parents[parents.length - 1].url : '/dashboards';\n    locationService.push(parentUrl);\n  };\n\n  const showMoveModal = () => {\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: MoveModal,\n        props: {\n          selectedItems: {\n            folder: { [folder.uid]: true },\n            dashboard: {},\n            panel: {},\n            $all: false,\n          },\n          onConfirm: onMove,\n        },\n      })\n    );\n  };\n\n  const showDeleteModal = () => {\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: DeleteModal,\n        props: {\n          selectedItems: {\n            folder: { [folder.uid]: true },\n            dashboard: {},\n            panel: {},\n            $all: false,\n          },\n          onConfirm: onDelete,\n        },\n      })\n    );\n  };\n\n  const showDeleteProvisionedModal = () => {\n    setShowDeleteProvisionedFolderDrawer(true);\n  };\n\n  const managePermissionsLabel = t('browse-dashboards.folder-actions-button.manage-permissions', 'Manage permissions');\n  const moveLabel = t('browse-dashboards.folder-actions-button.move', 'Move');\n  const deleteLabel = t('browse-dashboards.folder-actions-button.delete', 'Delete');\n\n  const menu = (\n    <Menu>\n      {canViewPermissions && <MenuItem onClick={() => setShowPermissionsDrawer(true)} label={managePermissionsLabel} />}\n      {canMoveFolder && <MenuItem onClick={showMoveModal} label={moveLabel} />}\n      {/* TODO: remove isProvisionedFolder check once BE folder delete flow is complete */}\n      {canDeleteFolders && !isProvisionedFolder && (\n        <MenuItem\n          destructive\n          onClick={isProvisionedFolder ? showDeleteProvisionedModal : showDeleteModal}\n          label={deleteLabel}\n        />\n      )}\n    </Menu>\n  );\n\n  if (!canViewPermissions && !canMoveFolder && !canDeleteFolders) {\n    return null;\n  }\n\n  return (\n    <>\n      <Dropdown overlay={menu} onVisibleChange={setIsOpen}>\n        <Button variant=\"secondary\">\n          <Trans i18nKey=\"browse-dashboards.folder-actions-button.folder-actions\">Folder actions</Trans>\n          <Icon name={isOpen ? 'angle-up' : 'angle-down'} />\n        </Button>\n      </Dropdown>\n      {showPermissionsDrawer && (\n        <Drawer\n          title={t('browse-dashboards.action.manage-permissions-button', 'Manage permissions')}\n          subtitle={folder.title}\n          onClose={() => setShowPermissionsDrawer(false)}\n          size=\"md\"\n        >\n          <Permissions resource=\"folders\" resourceId={folder.uid} canSetPermissions={canSetPermissions} />\n        </Drawer>\n      )}\n      {showDeleteProvisionedFolderDrawer && (\n        <Drawer\n          title={t('browse-dashboards.action.delete-provisioned-folder', 'Delete provisioned folder')}\n          subtitle={folder.title}\n          onClose={() => setShowDeleteProvisionedFolderDrawer(false)}\n        >\n          <DeleteProvisionedFolderForm\n            parentFolder={folder}\n            onDismiss={() => setShowDeleteProvisionedFolderDrawer(false)}\n          />\n        </Drawer>\n      )}\n    </>\n  );\n}\n","import { ReactNode, useCallback } from 'react';\n\nimport { DataFrameView, toDataFrame } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, EmptyState } from '@grafana/ui';\nimport { useKeyNavigationListener } from 'app/features/search/hooks/useSearchKeyboardSelection';\nimport { SearchResultsProps, SearchResultsTable } from 'app/features/search/page/components/SearchResultsTable';\nimport { SearchStateManager } from 'app/features/search/state/SearchStateManager';\nimport { DashboardViewItemKind, SearchState } from 'app/features/search/types';\nimport { useDispatch, useSelector } from 'app/types/store';\n\nimport { useHasSelection } from '../state/hooks';\nimport { setAllSelection, setItemSelectionState } from '../state/slice';\n\ninterface SearchViewProps {\n  height: number;\n  width: number;\n  canSelect: boolean;\n  searchState: SearchState;\n  searchStateManager: SearchStateManager;\n  emptyState?: ReactNode;\n}\n\nconst NUM_PLACEHOLDER_ROWS = 25;\nconst initialLoadingView = {\n  view: new DataFrameView(\n    toDataFrame({\n      fields: [\n        { name: 'uid', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill(null) },\n        { name: 'kind', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill('dashboard') },\n        { name: 'name', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill('') },\n        { name: 'location', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill('') },\n        { name: 'tags', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill([]) },\n      ],\n      meta: {\n        custom: {\n          locationInfo: [],\n        },\n      },\n    })\n  ),\n  loadMoreItems: () => Promise.resolve(),\n  // this is key and controls whether to show the skeleton in generateColumns\n  isItemLoaded: () => false,\n  totalRows: NUM_PLACEHOLDER_ROWS,\n};\n\nexport function SearchView({\n  width,\n  height,\n  canSelect,\n  searchState,\n  searchStateManager: stateManager,\n  emptyState: emptyStateProp,\n}: SearchViewProps) {\n  const dispatch = useDispatch();\n  const selectedItems = useSelector((wholeState) => wholeState.browseDashboards.selectedItems);\n  const hasSelection = useHasSelection();\n\n  const { keyboardEvents } = useKeyNavigationListener();\n\n  const value = searchState.result ?? initialLoadingView;\n\n  const selectionChecker = useCallback(\n    (kind: string | undefined, uid: string): boolean => {\n      if (!kind) {\n        return false;\n      }\n\n      // Currently, this indicates _some_ items are selected, not nessicarily all are\n      // selected.\n      if (kind === '*' && uid === '*') {\n        return hasSelection;\n      } else if (kind === '*') {\n        // Unsure how this case can happen\n        return false;\n      }\n\n      return selectedItems[assertDashboardViewItemKind(kind)][uid] ?? false;\n    },\n    [selectedItems, hasSelection]\n  );\n\n  const clearSelection = useCallback(() => {\n    dispatch(setAllSelection({ isSelected: false, folderUID: undefined }));\n  }, [dispatch]);\n\n  const handleItemSelectionChange = useCallback(\n    (kind: string, uid: string) => {\n      const newIsSelected = !selectionChecker(kind, uid);\n\n      dispatch(\n        setItemSelectionState({ item: { kind: assertDashboardViewItemKind(kind), uid }, isSelected: newIsSelected })\n      );\n    },\n    [selectionChecker, dispatch]\n  );\n\n  if (value.totalRows === 0) {\n    const emptyState = emptyStateProp ?? (\n      <EmptyState\n        button={\n          <Button variant=\"secondary\" onClick={stateManager.onClearSearchAndFilters}>\n            <Trans i18nKey=\"browse-dashboards.no-results.clear\">Clear search and filters</Trans>\n          </Button>\n        }\n        message={t('browse-dashboards.no-results.text', 'No results found for your query')}\n        variant=\"not-found\"\n        role=\"alert\"\n      />\n    );\n\n    return <div style={{ width }}>{emptyState}</div>;\n  }\n\n  const props: SearchResultsProps = {\n    response: value,\n    selection: canSelect ? selectionChecker : undefined,\n    selectionToggle: canSelect ? handleItemSelectionChange : undefined,\n    clearSelection,\n    width: width,\n    height: height,\n    onTagSelected: stateManager.onAddTag,\n    keyboardEvents,\n    onDatasourceChange: searchState.datasource ? stateManager.onDatasourceChange : undefined,\n    onClickItem: stateManager.onSearchItemClicked,\n  };\n\n  return <SearchResultsTable {...props} />;\n}\n\nfunction assertDashboardViewItemKind(kind: string): DashboardViewItemKind {\n  switch (kind) {\n    case 'folder':\n      return 'folder';\n    case 'dashboard':\n      return 'dashboard';\n    case 'panel':\n      return 'panel';\n  }\n\n  throw new Error('Unsupported kind' + kind);\n}\n","import { useMemo } from 'react';\n\nimport { Folder } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath } from 'app/features/apiserver/types';\nimport { getDefaultWorkflow, getWorkflowOptions } from 'app/features/dashboard-scene/saving/provisioned/defaults';\nimport { generateTimestamp } from 'app/features/dashboard-scene/saving/provisioned/utils/timestamp';\nimport { useGetResourceRepositoryView } from 'app/features/provisioning/hooks/useGetResourceRepositoryView';\n\nimport { BaseProvisionedFormData } from '../../dashboard-scene/saving/shared';\n\nexport interface UseProvisionedFolderFormDataProps {\n  folderUid?: string;\n  action: 'create' | 'delete';\n  title?: string;\n}\n\nexport interface ProvisionedFolderFormDataResult {\n  repository?: RepositoryView;\n  folder?: Folder;\n  workflowOptions: Array<{ label: string; value: string }>;\n  isGitHub: boolean;\n  initialValues?: BaseProvisionedFormData;\n}\n\n/**\n * Hook for managing provisioned folder create/delete form data.\n */\nexport function useProvisionedFolderFormData({\n  folderUid,\n  action,\n  title,\n}: UseProvisionedFolderFormDataProps): ProvisionedFolderFormDataResult {\n  const { repository, folder, isLoading } = useGetResourceRepositoryView({ folderName: folderUid });\n\n  const workflowOptions = getWorkflowOptions(repository);\n  const isGitHub = repository?.type === 'github';\n  const timestamp = generateTimestamp();\n\n  const initialValues = useMemo(() => {\n    // Only create initial values when we have the data\n    if (!repository || isLoading) {\n      return undefined;\n    }\n\n    return {\n      title: title || '',\n      comment: '',\n      ref: `folder/${timestamp}`,\n      repo: repository.name || '',\n      path: folder?.metadata?.annotations?.[AnnoKeySourcePath] || '',\n      workflow: getDefaultWorkflow(repository),\n    };\n  }, [repository, folder, title, isLoading, timestamp]);\n\n  return {\n    repository,\n    folder,\n    workflowOptions,\n    isGitHub,\n    initialValues,\n  };\n}\n","import { config } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\nimport { AccessControlAction } from 'app/types/accessControl';\nimport { FolderDTO } from 'app/types/folders';\n\nfunction checkFolderPermission(action: AccessControlAction, folderDTO?: FolderDTO) {\n  return folderDTO ? contextSrv.hasPermissionInMetadata(action, folderDTO) : contextSrv.hasPermission(action);\n}\n\nfunction checkCanCreateFolders(folderDTO?: FolderDTO) {\n  // Can only create a folder if we have permissions and either we're at root or nestedFolders is enabled\n  if (folderDTO && folderDTO.uid !== 'general' && !config.featureToggles.nestedFolders) {\n    return false;\n  }\n\n  return checkFolderPermission(AccessControlAction.FoldersCreate, folderDTO);\n}\n\nexport function getFolderPermissions(folderDTO?: FolderDTO) {\n  const canCreateDashboards = checkFolderPermission(AccessControlAction.DashboardsCreate, folderDTO);\n  const canCreateFolders = checkCanCreateFolders(folderDTO);\n  const canDeleteFolders = checkFolderPermission(AccessControlAction.FoldersDelete, folderDTO);\n  const canEditDashboards = checkFolderPermission(AccessControlAction.DashboardsWrite, folderDTO);\n  const canEditFolders = checkFolderPermission(AccessControlAction.FoldersWrite, folderDTO);\n  const canSetPermissions = checkFolderPermission(AccessControlAction.FoldersPermissionsWrite, folderDTO);\n  const canViewPermissions = checkFolderPermission(AccessControlAction.FoldersPermissionsRead, folderDTO);\n\n  return {\n    canCreateDashboards,\n    canCreateFolders,\n    canDeleteFolders,\n    canEditDashboards,\n    canEditFolders,\n    canSetPermissions,\n    canViewPermissions,\n  };\n}\n","import { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { Alert } from '@grafana/ui';\nimport { useGetRepositoryFilesWithPathQuery } from 'app/api/clients/provisioning/v0alpha1';\nimport { DashboardPageRouteSearchParams } from 'app/features/dashboard/containers/types';\nimport { usePullRequestParam } from 'app/features/provisioning/hooks/usePullRequestParam';\nimport { DashboardRoutes } from 'app/types/dashboard';\n\nimport { PreviewBannerViewPR } from './PreviewBannerViewPR';\n\nexport interface CommonBannerProps {\n  queryParams: DashboardPageRouteSearchParams;\n  path?: string;\n  slug?: string;\n}\n\ninterface DashboardPreviewBannerProps extends CommonBannerProps {\n  route?: string;\n}\n\ninterface DashboardPreviewBannerContentProps extends Required<Omit<CommonBannerProps, 'route'>> {}\n\nexport const commonAlertProps = {\n  severity: 'info' as const,\n  style: { flex: 0 } as const,\n};\n\nfunction DashboardPreviewBannerContent({ queryParams, slug, path }: DashboardPreviewBannerContentProps) {\n  const { prURL } = usePullRequestParam();\n  const file = useGetRepositoryFilesWithPathQuery({ name: slug, path, ref: queryParams.ref });\n\n  if (file.data?.errors) {\n    return (\n      <Alert\n        title={t('dashboard-scene.dashboard-preview-banner.title-error-loading-dashboard', 'Error loading dashboard')}\n        severity=\"error\"\n        style={{ flex: 0 }}\n      >\n        {file.data.errors.map((error, index) => (\n          <div key={index}>{error}</div>\n        ))}\n      </Alert>\n    );\n  }\n\n  // This page was loaded with a `pull_request_url` in the URL\n  if (prURL?.length) {\n    return <PreviewBannerViewPR prParam={prURL} />;\n  }\n\n  // Check if this is a GitHub link\n  const githubURL = file.data?.urls?.newPullRequestURL ?? file.data?.urls?.compareURL;\n  if (githubURL) {\n    return <PreviewBannerViewPR prParam={githubURL} isNewPr />;\n  }\n\n  return (\n    <Alert\n      {...commonAlertProps}\n      title={t(\n        'dashboard-scene.dashboard-preview-banner.title-dashboard-loaded-external-repository',\n        'This dashboard is loaded from an external repository'\n      )}\n    >\n      <Trans i18nKey=\"dashboard-scene.dashboard-preview-banner.not-yet-saved\">\n        The value is not saved in the Grafana database\n      </Trans>\n    </Alert>\n  );\n}\n\nexport function DashboardPreviewBanner({ queryParams, route, slug, path }: DashboardPreviewBannerProps) {\n  const provisioningEnabled = config.featureToggles.provisioning;\n  if (!provisioningEnabled || 'kiosk' in queryParams || !path || route !== DashboardRoutes.Provisioning || !slug) {\n    return null;\n  }\n\n  return <DashboardPreviewBannerContent queryParams={queryParams} slug={slug} path={path} />;\n}\n","import { textUtil } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Alert, Icon, Stack } from '@grafana/ui';\n\nimport { commonAlertProps } from './DashboardPreviewBanner';\n\n// TODO: We have this https://github.com/grafana/git-ui-sync-project/issues/166 to add more details about the PR.\n\ninterface Props {\n  prParam: string;\n  isNewPr?: boolean;\n}\n\n/**\n * @description This component is used to display a banner when a provisioned dashboard/folder is created or loaded from a new branch in Github.\n */\nexport function PreviewBannerViewPR({ prParam, isNewPr }: Props) {\n  const titleText = isNewPr\n    ? t(\n        'provisioned-resource-preview-banner.title-created-branch-git-hub',\n        'A new resource has been created in a branch in GitHub.'\n      )\n    : t(\n        'provisioned-resource-preview-banner.title-loaded-pull-request-git-hub',\n        'This resource is loaded from a pull request in GitHub.'\n      );\n\n  return (\n    <Alert\n      {...commonAlertProps}\n      title={titleText}\n      buttonContent={\n        <Stack alignItems=\"center\">\n          {isNewPr\n            ? t(\n                'provisioned-resource-preview-banner.preview-banner.open-pull-request-in-git-hub',\n                'Open pull request in GitHub'\n              )\n            : t(\n                'provisioned-resource-preview-banner.preview-banner.view-pull-request-in-git-hub',\n                'View pull request in GitHub'\n              )}\n          <Icon name=\"external-link-alt\" />\n        </Stack>\n      }\n      onRemove={() => window.open(textUtil.sanitizeUrl(prParam), '_blank')}\n    >\n      <Trans i18nKey=\"provisioned-resource-preview-banner.preview-banner.not-saved\">\n        The value is not yet saved in the Grafana database\n      </Trans>\n    </Alert>\n  );\n}\n","import { textUtil } from '@grafana/data';\nimport { useUrlParams } from 'app/core/navigation/hooks';\n\nexport const usePullRequestParam = () => {\n  const [params] = useUrlParams();\n  const prParam = params.get('pull_request_url');\n  const newPrParam = params.get('new_pull_request_url');\n\n  return {\n    prURL: prParam ? textUtil.sanitizeUrl(prParam) : undefined,\n    newPrURL: newPrParam ? textUtil.sanitizeUrl(newPrParam) : undefined,\n  };\n};\n","import { css } from '@emotion/css';\nimport { FormEvent } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { Button, Checkbox, Stack, RadioButtonGroup, useStyles2 } from '@grafana/ui';\nimport { SortPicker } from 'app/core/components/Select/SortPicker';\nimport { TagFilter, TermCount } from 'app/core/components/TagFilter/TagFilter';\n\nimport { SearchLayout, SearchState } from '../../types';\n\nfunction getLayoutOptions() {\n  return [\n    {\n      value: SearchLayout.Folders,\n      icon: 'folder',\n      description: t('search.actions.view-as-folders', 'View by folders'),\n    },\n    { value: SearchLayout.List, icon: 'list-ul', description: t('search.actions.view-as-list', 'View as list') },\n  ];\n}\n\ninterface ActionRowProps {\n  state: SearchState;\n  showStarredFilter?: boolean;\n  showLayout?: boolean;\n  sortPlaceholder?: string;\n\n  onLayoutChange: (layout: SearchLayout) => void;\n  onSortChange: (value?: string) => void;\n  onStarredFilterChange?: (event: FormEvent<HTMLInputElement>) => void;\n  onTagFilterChange: (tags: string[]) => void;\n  getTagOptions: () => Promise<TermCount[]>;\n  getSortOptions: () => Promise<SelectableValue[]>;\n  onDatasourceChange: (ds?: string) => void;\n  onPanelTypeChange: (pt?: string) => void;\n  onSetIncludePanels: (v: boolean) => void;\n}\n\nexport function getValidQueryLayout(q: SearchState): SearchLayout {\n  const layout = q.layout ?? SearchLayout.Folders;\n\n  // Folders is not valid when a query exists\n  if (layout === SearchLayout.Folders) {\n    if (q.query || q.sort || q.starred || q.tag.length > 0) {\n      return SearchLayout.List;\n    }\n  }\n\n  return layout;\n}\n\nexport const ActionRow = ({\n  state,\n  showStarredFilter,\n  showLayout,\n  sortPlaceholder,\n  onLayoutChange,\n  onSortChange,\n  onStarredFilterChange = () => {},\n  onTagFilterChange,\n  getTagOptions,\n  getSortOptions,\n  onDatasourceChange,\n  onPanelTypeChange,\n  onSetIncludePanels,\n}: ActionRowProps) => {\n  const styles = useStyles2(getStyles);\n\n  const layout = getValidQueryLayout(state);\n\n  // Disabled folder layout option when query is present\n  const disabledOptions =\n    state.tag.length || state.starred || state.query || state.datasource || state.panel_type\n      ? [SearchLayout.Folders]\n      : [];\n\n  return (\n    <Stack justifyContent=\"space-between\" alignItems=\"center\">\n      <Stack gap={2} alignItems=\"center\">\n        <TagFilter isClearable={false} tags={state.tag} tagOptions={getTagOptions} onChange={onTagFilterChange} />\n        {config.featureToggles.panelTitleSearch && (\n          <Checkbox\n            data-testid=\"include-panels\"\n            disabled={layout === SearchLayout.Folders}\n            value={state.includePanels}\n            onChange={() => onSetIncludePanels(!state.includePanels)}\n            label={t('search.actions.include-panels', 'Include panels')}\n          />\n        )}\n\n        {showStarredFilter && (\n          <div className={styles.checkboxWrapper}>\n            <Checkbox\n              label={t('search.actions.starred', 'Starred')}\n              onChange={onStarredFilterChange}\n              value={state.starred}\n            />\n          </div>\n        )}\n        {state.datasource && (\n          <Button icon=\"times\" variant=\"secondary\" onClick={() => onDatasourceChange(undefined)}>\n            <Trans i18nKey=\"search.actions.remove-datasource-filter\">\n              Datasource: {{ datasource: state.datasource }}\n            </Trans>\n          </Button>\n        )}\n        {state.panel_type && (\n          <Button icon=\"times\" variant=\"secondary\" onClick={() => onPanelTypeChange(undefined)}>\n            <Trans i18nKey=\"search.action-row.panel-type\" values={{ panel: state.panel_type }}>\n              Panel: {'{{panel}}'}\n            </Trans>\n          </Button>\n        )}\n      </Stack>\n\n      <Stack gap={2}>\n        {showLayout && (\n          <RadioButtonGroup\n            options={getLayoutOptions()}\n            disabledOptions={disabledOptions}\n            onChange={onLayoutChange}\n            value={layout}\n          />\n        )}\n        <SortPicker\n          onChange={(change) => onSortChange(change?.value)}\n          value={state.sort}\n          getSortOptions={getSortOptions}\n          placeholder={sortPlaceholder || t('search.actions.sort-placeholder', 'Sort')}\n          isClearable\n        />\n      </Stack>\n    </Stack>\n  );\n};\n\nActionRow.displayName = 'ActionRow';\n\nexport const getStyles = (theme: GrafanaTheme2) => {\n  return {\n    checkboxWrapper: css({\n      label: {\n        lineHeight: '1.2',\n      },\n    }),\n  };\n};\n","import { debounce } from 'lodash';\nimport { FormEvent } from 'react';\n\nimport { locationService } from '@grafana/runtime';\nimport { TermCount } from 'app/core/components/TagFilter/TagFilter';\nimport { StateManagerBase } from 'app/core/services/StateManagerBase';\nimport store from 'app/core/store';\n\nimport { SEARCH_PANELS_LOCAL_STORAGE_KEY, SEARCH_SELECTED_LAYOUT, SEARCH_SELECTED_SORT } from '../constants';\nimport {\n  reportDashboardListViewed,\n  reportSearchFailedQueryInteraction,\n  reportSearchQueryInteraction,\n  reportSearchResultInteraction,\n} from '../page/reporting';\nimport { getGrafanaSearcher } from '../service/searcher';\nimport { SearchQuery } from '../service/types';\nimport { SearchLayout, SearchQueryParams, SearchState } from '../types';\nimport { parseRouteParams } from '../utils';\n\nexport const initialState: SearchState = {\n  query: '',\n  tag: [],\n  starred: false,\n  layout: SearchLayout.Folders,\n  sort: undefined,\n  prevSort: undefined,\n  eventTrackingNamespace: 'dashboard_search',\n  deleted: false,\n};\n\nexport const defaultQueryParams: SearchQueryParams = {\n  sort: null,\n  starred: null,\n  query: null,\n  tag: null,\n  layout: null,\n};\n\nconst getLocalStorageLayout = () => {\n  const selectedLayout = localStorage.getItem(SEARCH_SELECTED_LAYOUT);\n  if (selectedLayout === SearchLayout.List) {\n    return SearchLayout.List;\n  } else {\n    return SearchLayout.Folders;\n  }\n};\nexport class SearchStateManager extends StateManagerBase<SearchState> {\n  updateLocation = debounce((query) => locationService.partial(query, true), 300);\n  doSearchWithDebounce = debounce(() => this.doSearch(), 300);\n  lastQuery?: SearchQuery;\n\n  lastSearchTimestamp = 0;\n\n  initStateFromUrl(folderUid?: string, doInitialSearch = true) {\n    const stateFromUrl = parseRouteParams(locationService.getSearchObject());\n\n    // Force list view when conditions are specified from the URL\n    if (stateFromUrl.query || stateFromUrl.datasource || stateFromUrl.panel_type) {\n      stateFromUrl.layout = SearchLayout.List;\n    }\n\n    const layout = getLocalStorageLayout();\n    const prevSort = localStorage.getItem(SEARCH_SELECTED_SORT) ?? undefined;\n    const sort = layout === SearchLayout.List ? stateFromUrl.sort || prevSort : null;\n\n    this.setState({\n      ...initialState,\n      ...stateFromUrl,\n      layout,\n      sort: sort ?? initialState.sort,\n      prevSort,\n      folderUid: folderUid,\n      eventTrackingNamespace: folderUid ? 'manage_dashboards' : 'dashboard_search',\n      deleted: this.state.deleted,\n    });\n\n    if (doInitialSearch && this.hasSearchFilters()) {\n      this.doSearch();\n    }\n  }\n\n  /**\n   * Updates internal and url state, then triggers a new search\n   */\n  setStateAndDoSearch(state: Partial<SearchState>) {\n    const sort = state.sort || this.state.sort || localStorage.getItem(SEARCH_SELECTED_SORT) || undefined;\n\n    // Set internal state\n    this.setState({ sort, ...state });\n\n    // Update url state\n    this.updateLocation({\n      query: this.state.query.length === 0 ? null : this.state.query,\n      tag: this.state.tag,\n      datasource: this.state.datasource,\n      panel_type: this.state.panel_type,\n      starred: this.state.starred ? this.state.starred : null,\n      sort: this.state.sort,\n    });\n\n    // Prevent searching when user is only clearing the input.\n    // We don't show these results anyway\n    if (this.hasSearchFilters()) {\n      this.doSearchWithDebounce();\n    }\n  }\n\n  onCloseSearch = () => {\n    this.updateLocation({\n      search: null,\n      folder: null,\n      ...defaultQueryParams,\n    });\n  };\n\n  onClearSearchAndFilters = () => {\n    this.setStateAndDoSearch({\n      query: '',\n      datasource: undefined,\n      tag: [],\n      panel_type: undefined,\n      starred: undefined,\n      sort: undefined,\n    });\n  };\n\n  onQueryChange = (query: string) => {\n    this.setStateAndDoSearch({ query });\n  };\n\n  onRemoveTag = (tagToRemove: string) => {\n    this.setStateAndDoSearch({ tag: this.state.tag.filter((tag) => tag !== tagToRemove) });\n  };\n\n  onTagFilterChange = (tags: string[]) => {\n    this.setStateAndDoSearch({ tag: tags });\n  };\n\n  onAddTag = (newTag: string) => {\n    if (this.state.tag && this.state.tag.includes(newTag)) {\n      return;\n    }\n\n    this.setStateAndDoSearch({ tag: [...this.state.tag, newTag] });\n  };\n\n  onDatasourceChange = (datasource: string | undefined) => {\n    this.setStateAndDoSearch({ datasource });\n  };\n\n  onPanelTypeChange = (panel_type?: string) => {\n    this.setStateAndDoSearch({ panel_type });\n  };\n\n  onStarredFilterChange = (e: FormEvent<HTMLInputElement>) => {\n    const starred = e.currentTarget.checked;\n    this.setStateAndDoSearch({ starred });\n  };\n\n  onClearStarred = () => {\n    this.setStateAndDoSearch({ starred: false });\n  };\n\n  onSetStarred = (starred: boolean) => {\n    if (starred !== this.state.starred) {\n      this.setStateAndDoSearch({ starred });\n    }\n  };\n\n  onSortChange = (sort: string | undefined) => {\n    if (sort) {\n      localStorage.setItem(SEARCH_SELECTED_SORT, sort);\n      // Switch to list view if sort is set to preserve sort order when navigating back\n      localStorage.setItem(SEARCH_SELECTED_LAYOUT, SearchLayout.List);\n    } else {\n      localStorage.removeItem(SEARCH_SELECTED_SORT);\n    }\n\n    if (this.state.layout === SearchLayout.Folders) {\n      this.setStateAndDoSearch({ sort, layout: SearchLayout.List });\n    } else {\n      this.setStateAndDoSearch({ sort });\n    }\n  };\n\n  onLayoutChange = (layout: SearchLayout) => {\n    localStorage.setItem(SEARCH_SELECTED_LAYOUT, layout);\n\n    if (this.state.sort && layout === SearchLayout.Folders) {\n      this.setStateAndDoSearch({ layout, prevSort: this.state.sort, sort: undefined });\n    } else {\n      this.setStateAndDoSearch({ layout, sort: this.state.prevSort });\n    }\n  };\n\n  onSetIncludePanels = (includePanels: boolean) => {\n    this.setStateAndDoSearch({ includePanels });\n    store.set(SEARCH_PANELS_LOCAL_STORAGE_KEY, includePanels);\n  };\n\n  hasSearchFilters() {\n    return Boolean(\n      this.state.query ||\n        this.state.tag.length ||\n        this.state.starred ||\n        this.state.panel_type ||\n        this.state.sort ||\n        this.state.deleted ||\n        this.state.layout === SearchLayout.List\n    );\n  }\n\n  getSearchQuery() {\n    const q: SearchQuery = {\n      query: this.state.query,\n      tags: this.state.tag,\n      ds_uid: this.state.datasource,\n      panel_type: this.state.panel_type,\n      location: this.state.folderUid, // This will scope all results to the prefix\n      sort: this.state.sort,\n      explain: this.state.explain,\n      withAllowedActions: this.state.explain, // allowedActions are currently not used for anything on the UI and added only in `explain` mode\n      starred: this.state.starred,\n      deleted: this.state.deleted,\n    };\n\n    // Only dashboards have additional properties\n    if (q.sort?.length && !q.sort.includes('name')) {\n      q.kind = ['dashboard', 'folder']; // skip panels\n    }\n\n    if (!q.query?.length) {\n      q.query = '*';\n      if (!q.location) {\n        q.kind = ['dashboard', 'folder']; // skip panels\n      }\n    }\n\n    if (!this.state.includePanels && !q.kind) {\n      q.kind = ['dashboard', 'folder']; // skip panels\n    }\n\n    if (q.panel_type?.length) {\n      q.kind = ['panel'];\n    }\n\n    return q;\n  }\n\n  private doSearch() {\n    const trackingInfo = {\n      layout: this.state.layout,\n      starred: this.state.starred,\n      sortValue: this.state.sort,\n      query: this.state.query,\n      tagCount: this.state.tag?.length,\n      includePanels: this.state.includePanels,\n      deleted: this.state.deleted,\n    };\n\n    reportSearchQueryInteraction(this.state.eventTrackingNamespace, trackingInfo);\n\n    this.lastQuery = this.getSearchQuery();\n\n    this.setState({ loading: true });\n\n    const searcher = getGrafanaSearcher();\n\n    const searchTimestamp = Date.now();\n    const searchPromise = this.state.starred ? searcher.starred(this.lastQuery) : searcher.search(this.lastQuery);\n\n    searchPromise\n      .then((result) => {\n        // Only keep the results if it's was issued after the most recently resolved search.\n        // This prevents results showing out of order if first request is slower than later ones\n        if (searchTimestamp > this.lastSearchTimestamp) {\n          this.setState({ result, loading: false });\n          this.lastSearchTimestamp = searchTimestamp;\n        }\n      })\n      .catch((error) => {\n        reportSearchFailedQueryInteraction(this.state.eventTrackingNamespace, {\n          ...trackingInfo,\n          error: error?.message,\n        });\n        this.setState({ loading: false });\n      });\n  }\n\n  // This gets the possible tags from within the query results\n  getTagOptions = (): Promise<TermCount[]> => {\n    const query = this.lastQuery ?? {\n      kind: ['dashboard', 'folder'],\n      query: '*',\n    };\n    return getGrafanaSearcher().tags(query);\n  };\n\n  /**\n   * When item is selected clear some filters and report interaction\n   */\n  onSearchItemClicked = (e: React.MouseEvent<HTMLElement>) => {\n    reportSearchResultInteraction(this.state.eventTrackingNamespace, {\n      layout: this.state.layout,\n      starred: this.state.starred,\n      sortValue: this.state.sort,\n      query: this.state.query,\n      tagCount: this.state.tag?.length,\n      includePanels: this.state.includePanels,\n      deleted: this.state.deleted,\n    });\n  };\n\n  /**\n   * Caller should handle debounce\n   */\n  onReportSearchUsage = () => {\n    reportDashboardListViewed(this.state.eventTrackingNamespace, {\n      layout: this.state.layout,\n      starred: this.state.starred,\n      sortValue: this.state.sort,\n      query: this.state.query,\n      tagCount: this.state.tag?.length,\n      includePanels: this.state.includePanels,\n      deleted: this.state.deleted,\n    });\n  };\n}\n\nlet stateManager: SearchStateManager;\n\nexport function getSearchStateManager() {\n  if (!stateManager) {\n    const selectedLayout = localStorage.getItem(SEARCH_SELECTED_LAYOUT) as SearchLayout;\n    const layout = selectedLayout ?? initialState.layout;\n\n    let includePanels = store.getBool(SEARCH_PANELS_LOCAL_STORAGE_KEY, true);\n    if (includePanels) {\n      includePanels = false;\n    }\n\n    stateManager = new SearchStateManager({ ...initialState, layout, includePanels });\n  }\n\n  return stateManager;\n}\n\nexport function useSearchStateManager() {\n  const stateManager = getSearchStateManager();\n  const state = stateManager.useState();\n\n  return [state, stateManager] as const;\n}\n"],"names":["getSearchPlaceholder","includePanels","getNewDashboardPhrase","getNewFolderPhrase","getImportPhrase","getNewPhrase","BrowseActions","dispatch","selectedItems","deleteItems","moveItems","stateManager","moveIsInvalid","config","v","isSearching","onActionComplete","onDelete","trackAction","onMove","destinationUID","showMoveModal","MoveModal","showDeleteModal","DeleteModal","moveButton","Button","Stack","Tooltip","actionMap","action","selectedDashboards","uid","selectedFolders","BrowseFilters","searchState","ActionRow","SelectionState","CheckboxCell","row","isSelected","onItemSelectionChange","item","CheckboxSpacer","Checkbox","state","selectors","ev","styles","getStyles","theme","CheckboxHeaderCell","onAllSelectionChange","CHEVRON_SIZE","ICON_SIZE","NameCell","data","onFolderClick","treeID","level","isOpen","childrenByParentUID","isLoading","iconName","Indent","Text","IconButton","Spinner","Icon","Link","FolderRepo","TagsCell","TagList","HEADER_HEIGHT","ROW_HEIGHT","DIVIDER_HEIGHT","DashboardsTree","items","width","height","isItemLoaded","requestLoadMore","canSelect","infiniteLoaderRef","listRef","tableColumns","checkboxColumn","nameColumn","props","tagsColumns","table","getTableProps","getTableBodyProps","headerGroups","virtualData","handleIsItemLoaded","itemIndex","handleLoadMore","startIndex","endIndex","parentUID","getRowHeight","rowIndex","headerGroup","key","headerGroupProps","column","headerProps","onItemsRendered","ref","elem","VirtualListRow","index","style","rows","prepareRow","dashboardItem","rowProps","cell","cellProps","BrowseView","folderUID","status","flatTree","handleFolderClick","clickedFolderUID","handleItemSelectionChange","selection","hasSelectedDescendants","treeItem","EmptyState","TextLink","CallToActionCard","newState","collection","thisIsSelected","initialFormModel","NewFolderForm","onCancel","onConfirm","handleSubmit","register","errors","translatedFolderNameRequiredPhrase","validateFolderName","folderName","e","fieldNameLabel","form","Field","Input","FormContent","initialValues","repository","workflowOptions","folder","isGitHub","onDismiss","prURL","usePullRequestParam","navigate","create","request","methods","watch","formState","workflow","appEvents","url","doSave","title","comment","repoName","basePath","titleInFilenameFormat","path","folderModel","Alert","ResourceEditFormSharedFields","NewProvisionedFolderForm","parentFolder","useProvisionedFolderFormData","CreateNewButton","canCreateDashboard","canCreateFolder","setIsOpen","location","newFolder","showNewFolderDrawer","setShowNewFolderDrawer","notifyApp","isProvisionedInstance","useIsProvisionedInstance","onCreateFolder","depth","newMenu","Menu","MenuItem","buildUrl","Dropdown","Drawer","folderUid","baseUrl","ProvisionedFolderPreviewBanner","queryParams","provisioningEnabled","newPrURL","PreviewBannerViewPR","BrowseDashboardsPage","search","folderDTO","saveFolder","navModel","model","dashboardsTabID","dashboardsTab","child","hasSelection","rootFolderDTO","canEditFolders","canEditDashboards","canCreateDashboards","canCreateFolders","hasAdminRights","isProvisionedFolder","showEditTitle","onEditTitle","newValue","result","handleButtonClickToRecentlyDeleted","renderTitle","Page","FolderActionsButton","FilterInput","SearchView","deleteIsInvalid","isDeleting","setIsDeleting","moveTarget","setMoveTarget","isMoving","setIsMoving","resourceId","deleteRepoFile","handleSubmitForm","repo","commitMessage","targetRef","Box","DescendantCount","DeleteProvisionedFolderForm","showPermissionsDrawer","setShowPermissionsDrawer","showDeleteProvisionedFolderDrawer","setShowDeleteProvisionedFolderDrawer","moveFolder","deleteFolder","canDeleteFolders","canViewPermissions","canSetPermissions","canMoveFolder","parents","parentUrl","showDeleteProvisionedModal","managePermissionsLabel","moveLabel","deleteLabel","menu","NUM_PLACEHOLDER_ROWS","initialLoadingView","emptyStateProp","wholeState","keyboardEvents","value","selectionChecker","kind","assertDashboardViewItemKind","clearSelection","newIsSelected","emptyState","timestamp","checkFolderPermission","checkCanCreateFolders","getFolderPermissions","commonAlertProps","DashboardPreviewBannerContent","slug","file","error","githubURL","DashboardPreviewBanner","route","prParam","isNewPr","titleText","params","newPrParam","getLayoutOptions","getValidQueryLayout","q","layout","showStarredFilter","showLayout","sortPlaceholder","onLayoutChange","onSortChange","onStarredFilterChange","onTagFilterChange","getTagOptions","getSortOptions","onDatasourceChange","onPanelTypeChange","onSetIncludePanels","disabledOptions","change","initialState","defaultQueryParams","getLocalStorageLayout","SearchStateManager","query","tagToRemove","tag","tags","newTag","datasource","panel_type","starred","sort","doInitialSearch","stateFromUrl","prevSort","trackingInfo","searcher","searchTimestamp","getSearchStateManager","useSearchStateManager"],"sourceRoot":""}