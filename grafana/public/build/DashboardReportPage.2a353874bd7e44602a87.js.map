{"version":3,"file":"DashboardReportPage.2a353874bd7e44602a87.js","mappings":"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","sources":["webpack://grafana/./node_modules/@react-aria/utils/dist/useResizeObserver.mjs","webpack://grafana/./public/app/extensions/reports/dashboard/ReportFooter.tsx","webpack://grafana/./public/app/extensions/reports/dashboard/ReportHeader.tsx","webpack://grafana/./public/app/extensions/reports/dashboard/utils.tsx","webpack://grafana/./public/app/extensions/reports/dashboard/ReportGridRenderer.tsx","webpack://grafana/./public/app/extensions/reports/dashboard/DashboardReportPage.tsx","webpack://grafana/./public/app/extensions/shared/utils/content.ts","webpack://grafana/./public/app/extensions/shared/utils/data.ts"],"sourcesContent":["import {useEffect as $Vsl8o$useEffect} from \"react\";\n\n\nfunction $9daab02d461809db$var$hasResizeObserver() {\n    return typeof window.ResizeObserver !== 'undefined';\n}\nfunction $9daab02d461809db$export$683480f191c0e3ea(options) {\n    const { ref: ref, box: box, onResize: onResize } = options;\n    (0, $Vsl8o$useEffect)(()=>{\n        let element = ref === null || ref === void 0 ? void 0 : ref.current;\n        if (!element) return;\n        if (!$9daab02d461809db$var$hasResizeObserver()) {\n            window.addEventListener('resize', onResize, false);\n            return ()=>{\n                window.removeEventListener('resize', onResize, false);\n            };\n        } else {\n            const resizeObserverInstance = new window.ResizeObserver((entries)=>{\n                if (!entries.length) return;\n                onResize();\n            });\n            resizeObserverInstance.observe(element, {\n                box: box\n            });\n            return ()=>{\n                if (element) resizeObserverInstance.unobserve(element);\n            };\n        }\n    }, [\n        onResize,\n        ref,\n        box\n    ]);\n}\n\n\nexport {$9daab02d461809db$export$683480f191c0e3ea as useResizeObserver};\n//# sourceMappingURL=useResizeObserver.module.js.map\n","import { css } from '@emotion/css';\nimport { useLocation } from 'react-router-dom-v5-compat';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { useTheme2 } from '@grafana/ui';\n\nimport { defaultReportLogo } from '.././constants';\nimport { getResourceUrl } from '../../shared/utils/data';\n\ninterface FooterProps {\n  scaleFactor: number;\n  currentPage: number;\n  totalPageCount: number;\n}\n\nfunction ReportFooter({ scaleFactor, currentPage, totalPageCount }: FooterProps) {\n  const theme = useTheme2();\n  const styles = getStyles(theme, scaleFactor);\n  return (\n    <div className={styles.footer}>\n      <div className={styles.pageCount}>\n        <Trans i18nKey=\"reporting.report-footer.page-pagination\">\n          Page {{ currentPage }}/{{ totalPageCount }}\n        </Trans>\n      </div>\n      <div className={styles.logo}>\n        <img className={styles.logoImg} src={useReportLogoUrl()} alt=\"Report logo\" />\n      </div>\n    </div>\n  );\n}\n\nfunction useReportLogoUrl() {\n  const location = useLocation();\n  const urlParams = new URLSearchParams(location.search);\n  const reportLogo = urlParams.get('reportLogo');\n\n  return reportLogo ? getResourceUrl(reportLogo) : defaultReportLogo;\n}\n\nfunction getStyles(theme: GrafanaTheme2, scaleFactor: number) {\n  return {\n    footer: css({\n      bottom: 0,\n      height: theme.spacing(4 * scaleFactor),\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: theme.spacing(1 * scaleFactor),\n    }),\n    pageCount: css({\n      flex: 1,\n      textAlign: 'center',\n      fontWeight: theme.typography.fontWeightMedium,\n      fontSize: `${0.85 * scaleFactor}rem`,\n    }),\n    logo: css({\n      top: theme.spacing(0.5 * scaleFactor),\n      right: theme.spacing(2 + 0.5 * scaleFactor),\n    }),\n    logoImg: css({\n      maxWidth: theme.spacing(3 * scaleFactor),\n      maxHeight: theme.spacing(3 * scaleFactor),\n    }),\n  };\n}\n\nexport default ReportFooter;\n","import { css } from '@emotion/css';\nimport { forwardRef } from 'react';\n\nimport { dateMath, dateTime, dateTimeFormat, GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { SceneObject, SceneTimeRangeState } from '@grafana/scenes';\nimport { Stack, useTheme2 } from '@grafana/ui';\nimport { DashboardScene } from 'app/features/dashboard-scene/scene/DashboardScene';\nimport { VariableControls } from 'app/features/dashboard-scene/scene/VariableControls';\n\ninterface HeaderProps {\n  reportTitle: string;\n  dashboardTitle: string;\n  timeRange: SceneTimeRangeState;\n  scaleFactor: number;\n  showTemplateVariables: boolean;\n  variableControls?: SceneObject[];\n  dashboard: DashboardScene;\n}\n\nfunction getReadableDateTimes(timeRange: SceneTimeRangeState) {\n  const dateDisplayFormat = 'YYYY-MM-DD HH:mm:ss Z';\n  const dateFormatOpts = { timeZone: timeRange.timeZone, format: dateDisplayFormat };\n  const displayFrom = dateTimeFormat(timeRange.value.from, dateFormatOpts);\n  const displayTo = dateTimeFormat(timeRange.value.to, dateFormatOpts);\n\n  return { displayFrom, displayTo };\n}\n\nconst ReportHeader = forwardRef<HTMLDivElement, HeaderProps>(\n  ({ reportTitle, dashboardTitle, timeRange, scaleFactor, showTemplateVariables, dashboard }, ref) => {\n    const theme = useTheme2();\n\n    const styles = getStyles(theme, scaleFactor);\n    const { displayFrom, displayTo } = getReadableDateTimes(timeRange);\n    const generatedOnDate = dateMath.parse(dateTime(Date.now()))?.format('dddd, MMM DD YYYY');\n    return (\n      <div ref={ref} className={styles.header}>\n        <div className={styles.subHeader}>\n          <div>\n            <Trans i18nKey=\"report.report-header.title\">\n              {{ reportTitle }} - Generated on {{ generatedOnDate }}\n            </Trans>\n          </div>\n          <div className={styles.timeRangeBlock}>\n            <div>\n              {t('report.report-header.time-range', 'Data time range:')} {displayFrom}\n              <br />\n              {displayTo}\n            </div>\n          </div>\n        </div>\n        <div className={styles.dashboardTitle}>{dashboardTitle}</div>\n        <hr className={styles.divider} />\n        {showTemplateVariables && (\n          <div className={styles.subHeader}>\n            <Stack grow={1} wrap={'wrap'}>\n              <VariableControls dashboard={dashboard} />\n            </Stack>\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nfunction getStyles(theme: GrafanaTheme2, scaleFactor: number) {\n  return {\n    subHeader: css({\n      label: 'subheader',\n      display: 'flex',\n      fontWeight: theme.typography.fontWeightMedium,\n      // TODO: We should use value from theme\n      fontSize: `${0.85 * scaleFactor}rem`,\n      paddingTop: theme.spacing(2 * scaleFactor),\n    }),\n    timeRangeBlock: css({\n      label: 'time-range-block',\n      display: 'flex',\n      justifyContent: 'flex-end',\n      textAlign: 'right',\n      flexGrow: 1,\n    }),\n    dashboardTitle: css({\n      label: 'dashboard-title',\n      // TODO: We should use value from theme\n      fontSize: `${1.7 * scaleFactor}rem`,\n      fontWeight: theme.typography.fontWeightMedium,\n    }),\n    divider: css({\n      marginTop: 0,\n      marginBottom: 0,\n    }),\n    header: css({\n      paddingBottom: theme.spacing(2 * scaleFactor),\n    }),\n  };\n}\n\nReportHeader.displayName = 'ReportHeader';\n\nexport default ReportHeader;\n","import * as React from 'react';\n\nimport { SceneGridItemLike, SceneGridRow } from '@grafana/scenes';\nimport { GRID_CELL_VMARGIN, GRID_COLUMN_COUNT } from 'app/core/constants';\nimport { DashboardGridItem } from 'app/features/dashboard-scene/scene/layout-default/DashboardGridItem';\n\nexport interface ReportPage {\n  items: ReportGridItem[];\n  h: number;\n  pageBreakAfter?: boolean;\n}\n\nexport interface ReportGridItem {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  render: () => React.ReactNode;\n  isRow?: boolean;\n}\n\nconst REPORT_GRID_CELL_HEIGHT = 20;\n\nexport function buildSimpleLayout(\n  gridChildren: SceneGridItemLike[],\n  scaleFactor: number,\n  screenHeight: number,\n  isLandscape: boolean\n): ReportPage[] {\n  const children = gridChildren.slice();\n  const pages: ReportPage[] = [];\n  const maxRowCount = Math.floor(screenHeight / (REPORT_GRID_CELL_HEIGHT + GRID_CELL_VMARGIN));\n  let panelHeight = maxRowCount;\n  if (!isLandscape) {\n    panelHeight = maxRowCount / 3;\n  }\n  let yPos = 0;\n\n  let currentPage: ReportPage = {\n    items: [],\n    h: 0,\n  };\n  pages.push(currentPage);\n\n  let rowCount = 0;\n  let isAfterRow = false;\n\n  for (let i = 0; i < children.length; i++) {\n    const gridChild = children[i];\n    const isRow = gridChild instanceof SceneGridRow;\n    const blockItem: ReportGridItem = {\n      x: 0,\n      y: yPos,\n      w: GRID_COLUMN_COUNT,\n      h: isRow ? scaleFactor : isAfterRow ? panelHeight - scaleFactor : panelHeight,\n      render: () => <gridChild.Component model={gridChild} key={gridChild.state.key} />,\n    };\n\n    if (isRow) {\n      // Get row children\n      children.splice(i + 1, 0, ...gridChild.state.children);\n      rowCount++;\n    }\n\n    if (\n      gridChild instanceof DashboardGridItem &&\n      gridChild.state.repeatedPanels &&\n      gridChild.state.repeatedPanels.length > 0\n    ) {\n      children.splice(i + 1, 0, ...gridChild.state.repeatedPanels);\n      continue;\n    }\n\n    if (yPos >= maxRowCount) {\n      currentPage.pageBreakAfter = true;\n      yPos = 0;\n      blockItem.y = 0;\n\n      currentPage = {\n        items: [],\n        h: 0,\n      };\n\n      pages.push(currentPage);\n    }\n\n    yPos += blockItem.h;\n\n    currentPage.items.push(blockItem);\n    currentPage.h = blockItem.y + blockItem.h;\n\n    isAfterRow = isRow;\n  }\n\n  return pages;\n}\n\nexport function buildGridLayout(\n  gridChildren: SceneGridItemLike[],\n  scaleFactor: number,\n  screenHeight: number\n): ReportPage[] {\n  const children = gridChildren.slice();\n  const pages: ReportPage[] = [];\n  const maxRowCount = Math.floor(screenHeight / (REPORT_GRID_CELL_HEIGHT + GRID_CELL_VMARGIN));\n  let yShift = 0;\n  let isAfterRow = false;\n\n  let currentPage: ReportPage = {\n    items: [],\n    h: 0,\n  };\n  pages.push(currentPage);\n\n  const reportItems: ReportGridItem[] = convertToReportGridItems(children);\n  for (let i = 0; i < reportItems.length; i++) {\n    const item = reportItems[i];\n    const isRow = item.isRow || false;\n    const blockItem = getUpdatedReportItem(item, yShift, maxRowCount, scaleFactor, isAfterRow);\n    const nextBlockItem =\n      i < reportItems.length - 1\n        ? getUpdatedReportItem(reportItems[i + 1], yShift, maxRowCount, scaleFactor, isRow)\n        : null;\n\n    // Handle panel overflow (or next panel overflow if current panel is a row)\n    let newH = Math.max(currentPage.h, blockItem.y + blockItem.h);\n    let nextPanelH = 0;\n\n    if (isRow && nextBlockItem != null) {\n      nextPanelH = Math.max(currentPage.h, nextBlockItem.y - scaleFactor + 1 + nextBlockItem.h);\n    }\n\n    // Panels with the same Y should stay on the same page.\n    const remainingItems = reportItems.slice(i + 1, reportItems.length);\n    let isAnySiblingOverflowing = false;\n    for (const remainingItem of remainingItems) {\n      const siblingItem = getUpdatedReportItem(remainingItem, yShift, maxRowCount, scaleFactor, isAfterRow);\n      // We know the rest of the elements won't have the same Y position if a previous element doesn't already have it. Early cut\n      if (blockItem.y !== siblingItem.y) {\n        break;\n      }\n\n      const siblingH = Math.max(currentPage.h, siblingItem.y - scaleFactor + 1 + siblingItem.h);\n      if (siblingH > maxRowCount) {\n        isAnySiblingOverflowing = true;\n        break;\n      }\n    }\n\n    if (newH > maxRowCount || (isRow && nextPanelH > maxRowCount) || isAnySiblingOverflowing) {\n      currentPage.pageBreakAfter = true;\n      yShift = item.y! * scaleFactor;\n      blockItem.y = 0;\n\n      currentPage = {\n        items: [],\n        h: 0,\n      };\n\n      pages.push(currentPage);\n    }\n\n    currentPage.items.push(blockItem);\n    currentPage.h = Math.max(currentPage.h, blockItem.y + blockItem.h);\n\n    if (isRow) {\n      isAfterRow = true;\n      yShift += scaleFactor - 1;\n    } else if (nextBlockItem != null && nextBlockItem.y !== blockItem.y) {\n      isAfterRow = false;\n    }\n  }\n\n  return pages;\n}\n\n// convertToReportGridItems converts an array of SceneGridItemLike to an array of ReportGridItem with the same grid pos info\n// This flattens out the grid structure by putting the row children and the repeated panels at the same level as their parent\nfunction convertToReportGridItems(gridChildren: SceneGridItemLike[]): ReportGridItem[] {\n  const children = gridChildren.slice();\n  const reportItems: ReportGridItem[] = [];\n  let yOffset = 0;\n  let tmpYOffset = 0;\n  let prevY = 0;\n  for (let i = 0; i < children.length; i++) {\n    const gridChild = children[i];\n    const { y } = gridChild.state;\n    // Only apply offset for follow-up items and not siblings on the same row\n    if (y! > prevY) {\n      yOffset = tmpYOffset;\n    }\n    prevY = y!;\n\n    // Get repeated panels with their original size and position\n    if (\n      gridChild instanceof DashboardGridItem &&\n      gridChild.state.repeatedPanels &&\n      gridChild.state.repeatedPanels.length > 0\n    ) {\n      let nextGridChild = null;\n      // Get next grid child with a different y\n      const remainingItems = children.slice(i + 1, children.length);\n      for (const remainingItem of remainingItems) {\n        if (remainingItem.state.y !== gridChild.state.y) {\n          nextGridChild = remainingItem;\n          break;\n        }\n      }\n\n      const { repeatedPanels, x, y, height, width } = gridChild.state;\n      let childX, childY: number;\n      let childH = height! / repeatedPanels.length;\n      let childW = width!;\n      if (gridChild.getRepeatDirection() === 'h') {\n        const rowCount = Math.ceil(repeatedPanels.length / gridChild.getMaxPerRow());\n        childH = height! / rowCount;\n        childW = width! / Math.min(gridChild.getMaxPerRow(), repeatedPanels.length);\n      }\n\n      for (let j = 0; j < repeatedPanels.length; j++) {\n        const panel = repeatedPanels[j];\n\n        if (gridChild.getRepeatDirection() === 'h') {\n          childX = (j % gridChild.getMaxPerRow()) * childW;\n          childY = y! + Math.floor(j / gridChild.getMaxPerRow()) * childH;\n        } else {\n          childX = x!;\n          childY = y! + j * childH;\n        }\n\n        reportItems.push({\n          x: childX,\n          y: childY + yOffset,\n          w: childW,\n          h: childH,\n          render: () => <panel.Component model={panel} key={panel.state.key} />,\n        });\n      }\n\n      if (nextGridChild && nextGridChild.state.y! < y! + height!) {\n        tmpYOffset = Math.max(tmpYOffset, yOffset + height! - childH);\n      }\n    } else {\n      let isRow = false;\n\n      // Get row's children\n      if (gridChild instanceof SceneGridRow) {\n        isRow = true;\n        children.splice(i + 1, 0, ...gridChild.state.children);\n      }\n\n      reportItems.push({\n        x: gridChild.state.x!,\n        y: gridChild.state.y! + yOffset,\n        w: gridChild.state.width!,\n        h: gridChild.state.height!,\n        render: () => <gridChild.Component model={gridChild} key={gridChild.state.key} />,\n        isRow: isRow,\n      });\n    }\n  }\n\n  // Sort array by y position in ascending order - fixes issue with vertical repeated panels\n  return reportItems.sort((a, b) => a.y - b.y);\n}\n\n// getUpdatedReportItem returns a new ReportGridItem with proper grid pos information, it:\n// - applies the scale factor\n// - calculates the y position as it's reset every page break\n// - resizes the panel if it is bigger than the maximum number of rows in a page\nfunction getUpdatedReportItem(\n  item: ReportGridItem,\n  yShift: number,\n  maxRowCount: number,\n  scaleFactor: number,\n  isAfterRow: boolean\n): ReportGridItem {\n  const updatedItem: ReportGridItem = {\n    x: item.x,\n    y: item.y * scaleFactor - yShift,\n    w: item.w,\n    h: item.h * scaleFactor,\n    render: item.render,\n  };\n\n  // If the panel is a row, its height should be 1, no matter the scale factor\n  if (item.isRow) {\n    updatedItem.h = 1;\n  }\n\n  // If the panel is bigger than the maximum number of rows we can display in a page\n  if (isAfterRow && updatedItem.h + 1 > maxRowCount) {\n    updatedItem.h = maxRowCount - 1;\n  } else if (updatedItem.h > maxRowCount) {\n    updatedItem.h = maxRowCount;\n  }\n\n  return updatedItem;\n}\n\nexport type Position = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n};\n\nexport type PositionParams = {\n  margin: [number, number];\n  containerPadding: [number, number];\n  containerWidth: number;\n  cols: number;\n  rowHeight: number;\n  maxRows: number;\n};\n\nexport function getGridParams(screenWidth: number): PositionParams {\n  return {\n    margin: [GRID_CELL_VMARGIN, GRID_CELL_VMARGIN],\n    containerWidth: screenWidth,\n    containerPadding: [0, 0],\n    cols: GRID_COLUMN_COUNT,\n    rowHeight: REPORT_GRID_CELL_HEIGHT,\n    maxRows: 10000,\n  };\n}\n\n// Helper for generating column width\nexport function calcGridColWidth(positionParams: PositionParams): number {\n  const { margin, containerPadding, containerWidth, cols } = positionParams;\n  return (containerWidth - margin[0] * (cols - 1) - containerPadding[0] * 2) / cols;\n}\n\n// This can either be called:\n// calcGridItemWHPx(w, colWidth, margin[0])\n// or\n// calcGridItemWHPx(h, rowHeight, margin[1])\nexport function calcGridItemWHPx(gridUnits: number, colOrRowSize: number, marginPx: number): number {\n  // 0 * Infinity === NaN, which causes problems with resize contraints\n  if (!Number.isFinite(gridUnits)) {\n    return gridUnits;\n  }\n  return Math.round(colOrRowSize * gridUnits + Math.max(0, gridUnits - 1) * marginPx);\n}\n\n/**\n * Return position on the page given an x, y, w, h.\n * left, top, width, height are all in pixels.\n * @param  {PositionParams} positionParams  Parameters of grid needed for coordinates calculations.\n * @param  {Number}  x                      X coordinate in grid units.\n * @param  {Number}  y                      Y coordinate in grid units.\n * @param  {Number}  w                      W coordinate in grid units.\n * @param  {Number}  h                      H coordinate in grid units.\n * @return {Position}                       Object containing coords.\n */\nexport function calcGridItemPosition(\n  positionParams: PositionParams,\n  x: number,\n  y: number,\n  w: number,\n  h: number\n): Position {\n  const { margin, containerPadding, rowHeight } = positionParams;\n  const colWidth = calcGridColWidth(positionParams);\n  const out: Position = {\n    width: calcGridItemWHPx(w, colWidth, margin[0]),\n    height: calcGridItemWHPx(h, rowHeight, margin[1]),\n    top: Math.round((rowHeight + margin[1]) * y + containerPadding[1]),\n    left: Math.round((colWidth + margin[0]) * x + containerPadding[0]),\n  };\n\n  return out;\n}\n\n/**\n * Translate x and y coordinates from pixels to grid units.\n * @param  {PositionParams} positionParams  Parameters of grid needed for coordinates calculations.\n * @param  {Number} top                     Top position (relative to parent) in pixels.\n * @param  {Number} left                    Left position (relative to parent) in pixels.\n * @param  {Number} w                       W coordinate in grid units.\n * @param  {Number} h                       H coordinate in grid units.\n * @return {Object}                         x and y in grid units.\n */\nexport function calcXY(\n  positionParams: PositionParams,\n  top: number,\n  left: number,\n  w: number,\n  h: number\n): { x: number; y: number } {\n  const { margin, cols, rowHeight, maxRows } = positionParams;\n  const colWidth = calcGridColWidth(positionParams);\n\n  // left = colWidth * x + margin * (x + 1)\n  // l = cx + m(x+1)\n  // l = cx + mx + m\n  // l - m = cx + mx\n  // l - m = x(c + m)\n  // (l - m) / (c + m) = x\n  // x = (left - margin) / (coldWidth + margin)\n  let x = Math.round((left - margin[0]) / (colWidth + margin[0]));\n  let y = Math.round((top - margin[1]) / (rowHeight + margin[1]));\n\n  // Capping\n  x = clamp(x, 0, cols - w);\n  y = clamp(y, 0, maxRows - h);\n  return { x, y };\n}\n\n/**\n * Given a height and width in pixel values, calculate grid units.\n * @param  {PositionParams} positionParams  Parameters of grid needed for coordinates calcluations.\n * @param  {Number} height                  Height in pixels.\n * @param  {Number} width                   Width in pixels.\n * @param  {Number} x                       X coordinate in grid units.\n * @param  {Number} y                       Y coordinate in grid units.\n * @param {String} handle Resize Handle.\n * @return {Object}                         w, h as grid units.\n */\nexport function calcWH(\n  positionParams: PositionParams,\n  width: number,\n  height: number,\n  x: number,\n  y: number,\n  handle: string\n): { w: number; h: number } {\n  const { margin, maxRows, cols, rowHeight } = positionParams;\n  const colWidth = calcGridColWidth(positionParams);\n\n  // width = colWidth * w - (margin * (w - 1))\n  // ...\n  // w = (width + margin) / (colWidth + margin)\n  let w = Math.round((width + margin[0]) / (colWidth + margin[0]));\n  let h = Math.round((height + margin[1]) / (rowHeight + margin[1]));\n\n  // Capping\n  let _w = clamp(w, 0, cols - x);\n  let _h = clamp(h, 0, maxRows - y);\n  if (['sw', 'w', 'nw'].indexOf(handle) !== -1) {\n    _w = clamp(w, 0, cols);\n  }\n  if (['nw', 'n', 'ne'].indexOf(handle) !== -1) {\n    _h = clamp(h, 0, maxRows);\n  }\n  return { w: _w, h: _h };\n}\n\n// Similar to _.clamp\nexport function clamp(num: number, lowerBound: number, upperBound: number): number {\n  return Math.max(Math.min(num, upperBound), lowerBound);\n}\n","import { css } from '@emotion/css';\nimport { useResizeObserver } from '@react-aria/utils';\nimport { useEffect, useRef, useState } from 'react';\nimport { useLocation } from 'react-router-dom-v5-compat';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { sceneGraph, SceneGridItemLike, SceneGridLayout, SceneGridRow, SceneTimeRangeState } from '@grafana/scenes';\nimport { useTheme2 } from '@grafana/ui';\nimport { GRID_COLUMN_COUNT } from 'app/core/constants';\nimport { DashboardScene } from 'app/features/dashboard-scene/scene/DashboardScene';\nimport { DashboardGridItem } from 'app/features/dashboard-scene/scene/layout-default/DashboardGridItem';\nimport { activateSceneObjectAndParentTree } from 'app/features/dashboard-scene/utils/utils';\n\nimport ReportFooter from './ReportFooter';\nimport ReportHeader from './ReportHeader';\nimport {\n  buildGridLayout,\n  buildSimpleLayout,\n  calcGridItemPosition,\n  getGridParams,\n  PositionParams,\n  ReportGridItem,\n  ReportPage,\n} from './utils';\n\nexport const A4_WIDTH = 794;\nexport const A4_HEIGHT = 1122;\nexport const FOOTER = 40;\nconst SIDE_MARGIN = 16;\n\ninterface Props {\n  grid: SceneGridLayout;\n  dashboardTitle: string;\n  timeRange: SceneTimeRangeState;\n  dashboard: DashboardScene;\n}\n\nexport function ReportGridRenderer({ grid, dashboardTitle, timeRange, dashboard }: Props) {\n  const [isActive, setIsActive] = useState(false);\n  const { scaleFactor, isLandscape, isSimpleLayout, reportTitle, showTemplateVariables } = useUrlValues();\n  const theme = useTheme2();\n  const styles = getStyles(theme, scaleFactor);\n\n  uncollapseRows(grid.state.children);\n  const { children } = grid.useState();\n\n  const [headerHeight, setHeaderHeight] = useState<number>(0);\n  const observedDiv = useRef<HTMLDivElement | null>(null);\n  useResizeObserver({\n    ref: observedDiv,\n    onResize: () => {\n      const element = observedDiv.current;\n      if (element && element.offsetHeight !== 0) {\n        setHeaderHeight(element.offsetHeight);\n      }\n    },\n  });\n\n  useEffect(() => {\n    setIsActive(true);\n    sceneGraph.findDescendents(grid, DashboardGridItem).forEach((gridItem) => {\n      if (!gridItem.isActive) {\n        activateSceneObjectAndParentTree(gridItem);\n      }\n    });\n\n    return activateSceneObjectAndParentTree(grid);\n  }, [grid]);\n\n  if (!isActive) {\n    return null;\n  }\n\n  let pageWidth = isLandscape ? A4_HEIGHT : A4_WIDTH;\n  let pageHeight = isLandscape ? A4_WIDTH : A4_HEIGHT;\n\n  const screenWidth = pageWidth * scaleFactor - 2 * SIDE_MARGIN;\n  const screenHeight = (pageHeight - FOOTER) * scaleFactor - headerHeight;\n\n  // this object can't be memoized because there are some references inside children that are being updated\n  // when using repeating panels\n  let blocks: ReportPage[] = [];\n  if (isSimpleLayout) {\n    blocks = buildSimpleLayout(children, scaleFactor, screenHeight, isLandscape);\n  } else {\n    blocks = buildGridLayout(children, scaleFactor, screenHeight);\n  }\n\n  return (\n    <div>\n      {/*This hidden ReportHeader is used to dynamically measure the height and then build the grid using that value*/}\n      <div style={{ width: screenWidth, visibility: 'hidden', position: 'absolute', top: 0, left: 0 }}>\n        <ReportHeader\n          reportTitle={reportTitle || dashboardTitle}\n          dashboardTitle={dashboardTitle}\n          timeRange={timeRange}\n          scaleFactor={scaleFactor}\n          dashboard={dashboard}\n          showTemplateVariables={showTemplateVariables}\n          ref={observedDiv}\n        />\n      </div>\n      <>\n        {blocks.map((page, index) => (\n          <div key={index} className={styles.page}>\n            <div key={index} className={styles.content}>\n              <ReportHeader\n                reportTitle={reportTitle || dashboardTitle}\n                dashboardTitle={dashboardTitle}\n                timeRange={timeRange}\n                scaleFactor={scaleFactor}\n                dashboard={dashboard}\n                showTemplateVariables={showTemplateVariables}\n              />\n              <div style={getPageStyle(page, screenWidth)}>\n                {page.items.map((item, index) => (\n                  <div key={index} style={getItemStyle(item, screenWidth)}>\n                    {item.render()}\n                  </div>\n                ))}\n              </div>\n            </div>\n            <ReportFooter scaleFactor={scaleFactor} currentPage={index + 1} totalPageCount={blocks.length} />\n            {page.pageBreakAfter && <div style={{ pageBreakAfter: 'always' }} />}\n          </div>\n        ))}\n      </>\n    </div>\n  );\n}\n\nexport function useUrlValues() {\n  const location = useLocation();\n  const urlParams = new URLSearchParams(location.search);\n  const scaleFactor = parseFloat(urlParams.get('scale') ?? '');\n\n  return {\n    scaleFactor: isNaN(scaleFactor) ? 1 : scaleFactor,\n    isLandscape: urlParams.get('pdf.landscape') !== 'false',\n    isSimpleLayout: urlParams.get('pdf.layout') === 'simple',\n    reportTitle: urlParams.get('title'),\n    showTemplateVariables:\n      urlParams.get('pdf.showTemplateVariables') !== null && urlParams.get('pdf.showTemplateVariables') !== 'false',\n  };\n}\n\nfunction uncollapseRows(children: SceneGridItemLike[]) {\n  for (const gridChild of children) {\n    if (gridChild instanceof SceneGridRow && gridChild.state.isCollapsed) {\n      gridChild.onCollapseToggle();\n    }\n  }\n}\n\nfunction getItemStyle(item: ReportGridItem, screenWidth: number): React.CSSProperties {\n  const params: PositionParams = getGridParams(screenWidth);\n  const position = calcGridItemPosition(params, item.x, item.y, item.w, item.h);\n\n  return {\n    top: position.top,\n    left: position.left,\n    width: position.width,\n    height: position.height,\n    position: 'absolute',\n  };\n}\n\nfunction getPageStyle(block: ReportPage, screenWidth: number): React.CSSProperties {\n  const params: PositionParams = getGridParams(screenWidth);\n  const position = calcGridItemPosition(params, 0, 0, GRID_COLUMN_COUNT, block.h);\n\n  return {\n    width: position.width,\n    height: position.height,\n    position: 'relative',\n  };\n}\n\nfunction getStyles(theme: GrafanaTheme2, scaleFactor: number) {\n  return {\n    page: css({\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      width: '100%',\n      minHeight: '100vh',\n      // this is needed to avoid printing an extra empty page in the end\n      '&:last-of-type': {\n        marginBottom: theme.spacing(2 * -1),\n      },\n      padding: '0 ' + theme.spacing(2 * scaleFactor),\n    }),\n    content: css({\n      flex: 1,\n    }),\n  };\n}\n","// Libraries\nimport { css } from '@emotion/css';\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom-v5-compat';\n\nimport { t } from '@grafana/i18n';\nimport { UrlSyncContextProvider } from '@grafana/scenes';\nimport { Alert, useStyles2 } from '@grafana/ui';\nimport PageLoader from 'app/core/components/PageLoader/PageLoader';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\nimport { getMessageFromError } from 'app/core/utils/errors';\nimport { DashboardPageRouteParams } from 'app/features/dashboard/containers/types';\nimport { getDashboardScenePageStateManager } from 'app/features/dashboard-scene/pages/DashboardScenePageStateManager';\nimport { DashboardScene } from 'app/features/dashboard-scene/scene/DashboardScene';\nimport { DefaultGridLayoutManager } from 'app/features/dashboard-scene/scene/layout-default/DefaultGridLayoutManager';\nimport { DashboardRoutes } from 'app/types/dashboard';\n\nimport { ReportGridRenderer } from './ReportGridRenderer';\n\nexport interface Props extends GrafanaRouteComponentProps<DashboardPageRouteParams> {}\n\nexport function DashboardReportPage({ route }: Props) {\n  const stateManager = getDashboardScenePageStateManager();\n  const { dashboard, isLoading, loadError } = stateManager.useState();\n  const { uid = '' } = useParams();\n\n  useEffect(() => {\n    stateManager.loadDashboard({ uid, route: DashboardRoutes.Report });\n\n    return () => {\n      stateManager.clearState();\n    };\n  }, [stateManager, uid, route.routeName]);\n\n  if (!dashboard) {\n    return (\n      <div>\n        {isLoading && <PageLoader />}\n        {loadError && <h2>{getMessageFromError(loadError)}</h2>}\n      </div>\n    );\n  }\n\n  return <DashbordReportRenderer model={dashboard} />;\n}\n\ninterface RendererProps {\n  model: DashboardScene;\n}\n\nfunction DashbordReportRenderer({ model }: RendererProps) {\n  const [isActive, setIsActive] = useState(false);\n  const dashboard = model.useState();\n  const timeRange = dashboard.$timeRange!.useState();\n\n  const styles = useStyles2(getStyles);\n  useEffect(() => {\n    setIsActive(true);\n    return model.activate();\n  }, [model]);\n\n  if (!isActive) {\n    return null;\n  }\n\n  const layout = dashboard.body;\n  if (!(layout instanceof DefaultGridLayoutManager)) {\n    return (\n      <Alert\n        title={t('reports.dashbord-report-renderer.title-unsupported-dashboard-layout', 'Unsupported dashboard layout')}\n        severity=\"error\"\n      />\n    );\n  }\n\n  return (\n    <UrlSyncContextProvider scene={model}>\n      <div className={styles.canvas}>\n        <div className={styles.body}>\n          <ReportGridRenderer\n            grid={layout.state.grid}\n            dashboardTitle={dashboard.title}\n            timeRange={timeRange}\n            dashboard={model}\n          />\n        </div>\n      </div>\n    </UrlSyncContextProvider>\n  );\n}\n\nfunction getStyles() {\n  return {\n    canvas: css({\n      label: 'canvas',\n      display: 'flex',\n      flexDirection: 'column',\n      flexBasis: '100%',\n      flexGrow: 1,\n    }),\n    body: css({\n      label: 'body',\n      flexGrow: 1,\n      display: 'flex',\n      gap: '8px',\n    }),\n  };\n}\n\nexport default DashboardReportPage;\n","export const getContentType = (value: string | File) => {\n  if (!value) {\n    return 'url';\n  }\n\n  if (isFile(value)) {\n    return 'file';\n  }\n  if (value.startsWith('http') || value.startsWith('data:')) {\n    return 'url';\n  }\n  if (value.startsWith('#') || value.startsWith('rgb(') || value.startsWith('rgba(')) {\n    return 'color';\n  }\n\n  return 'file';\n};\n\nexport const isFile = (value: string | File): value is File => value instanceof File;\n","import { API_ROOT } from '../../reports/constants';\n\nimport { getContentType, isFile } from './content';\n\nexport const getResourceUrl = (resource: File | string) => {\n  if (isFile(resource)) {\n    return URL.createObjectURL(resource);\n  }\n\n  // Separate handling for the file names\n  if (getContentType(resource) === 'file') {\n    return `${API_ROOT}${resource}`;\n  }\n\n  return resource;\n};\n\nexport const isValidUrl = (value: unknown) => {\n  if (!value || value instanceof File) {\n    return true;\n  }\n  return typeof value === 'string' && value.startsWith('http');\n};\n"],"names":["$9daab02d461809db$var$hasResizeObserver","$9daab02d461809db$export$683480f191c0e3ea","options","ref","box","onResize","element","resizeObserverInstance","entries","ReportFooter","scaleFactor","currentPage","totalPageCount","theme","styles","getStyles","useReportLogoUrl","location","reportLogo","getReadableDateTimes","timeRange","dateFormatOpts","displayFrom","displayTo","ReportHeader","reportTitle","dashboardTitle","showTemplateVariables","dashboard","generatedOnDate","Stack","VariableControls","REPORT_GRID_CELL_HEIGHT","buildSimpleLayout","gridChildren","screenHeight","isLandscape","children","pages","maxRowCount","panelHeight","yPos","rowCount","isAfterRow","i","gridChild","isRow","blockItem","DashboardGridItem","buildGridLayout","yShift","reportItems","convertToReportGridItems","item","getUpdatedReportItem","nextBlockItem","newH","nextPanelH","remainingItems","isAnySiblingOverflowing","remainingItem","siblingItem","yOffset","tmpYOffset","prevY","y","nextGridChild","repeatedPanels","height","width","childX","childY","childH","childW","j","panel","a","b","updatedItem","getGridParams","screenWidth","calcGridColWidth","positionParams","margin","containerPadding","containerWidth","cols","calcGridItemWHPx","gridUnits","colOrRowSize","marginPx","calcGridItemPosition","x","w","h","rowHeight","colWidth","calcXY","top","left","maxRows","clamp","calcWH","handle","_w","_h","num","lowerBound","upperBound","A4_WIDTH","A4_HEIGHT","FOOTER","SIDE_MARGIN","ReportGridRenderer","grid","isActive","setIsActive","isSimpleLayout","useUrlValues","uncollapseRows","headerHeight","setHeaderHeight","observedDiv","gridItem","pageWidth","pageHeight","blocks","page","index","getPageStyle","getItemStyle","urlParams","params","position","block","DashboardReportPage","route","stateManager","isLoading","loadError","uid","DashbordReportRenderer","PageLoader","model","layout","DefaultGridLayoutManager","Alert","getContentType","value","isFile","getResourceUrl","resource","isValidUrl"],"sourceRoot":""}