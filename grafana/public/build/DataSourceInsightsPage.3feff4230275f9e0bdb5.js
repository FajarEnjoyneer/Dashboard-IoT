"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2154,8890],{45135:(t,e,a)=>{a.d(e,{A:()=>A});var o=a(74848),v=a(96540),x=a(71468),D=a(70713),l=a(25229),u=a(95004),f=a(28105),c=a(92745),m=a(62061),E=a(60311),p=a(739),P=a(67522),M=a(79331),O=a(63142),C=a(2989),R=a(42939),b=a(8354),h=a(90256),I=a(74740);const U=(W,s)=>({dataSourceUid:s.uid}),B={loadDataSource:b.ak,loadDataSourceMeta:b.xI},K=(0,x.connect)(U,B);class L extends v.PureComponent{constructor(s){super(s),this.state={dailySummaries:[],from:"",to:""}}async componentDidMount(){const{dataSourceUid:s,loadDataSource:r,loadDataSourceMeta:d}=this.props;if(r(s).then(d),(0,m.a)("analytics")){let n=(0,l.KQ)().subtract(30,"days").format(h.QH),i=(0,l.KQ)().format(h.QH);const _=await(0,h.FW)(s,n,i);this.setState({dailySummaries:_,from:n,to:i})}}buildTimeRange(){const{from:s,to:r}=this.state,d=(0,l.KQ)(s),n=(0,l.KQ)(r).add(24,"hours");return{from:d,to:n,raw:{from:s,to:r}}}convertDailySummariesToDataFrame(s,r,d){const n=[],i=[];return s.forEach(_=>{n.push((0,l.KQ)(_.day,h.QH).valueOf());let g=_[r];r==="loadDuration"&&(g=_.queries?_.loadDuration/(_.queries*1e6):0),i.push(g)}),{name:r,fields:[{name:"Time",type:u.PU.time,config:{},values:n},{name:r,type:d,config:{},values:i}],length:s.length}}renderChart(s,r){const{dailySummaries:d}=this.state,{color:n,fieldType:i,showBars:_,timeRange:g,title:y,valueField:w,width:j}=s,T={series:[this.convertDailySummariesToDataFrame(d,w,i)],state:f.Gu.Done,timeRange:g},S={legend:{showLegend:!1,displayMode:p.lm.Hidden,calcs:[],placement:"bottom"},tooltip:{mode:p.$N.Multi,sort:p.xB.Descending}},k={defaults:{color:{mode:"fixed",fixedColor:n},custom:{showPoints:p.yL.Never,drawStyle:_?p.GR.Bars:p.GR.Line,fillOpacity:_?50:0}},overrides:[]};return(0,o.jsx)("div",{className:r.graphContainer,children:(0,o.jsx)(P.NR,{title:y,width:j,height:220,displayMode:"transparent",loadingState:T.state,children:(F,Q)=>(0,o.jsx)(E.m,{title:y,width:F,height:Q,pluginId:"timeseries",data:T,fieldConfig:k,options:S})})})}renderContent(){const{theme:s}=this.props,r=(0,I.k)(s),{dailySummaries:d}=this.state,n=this.buildTimeRange();return d?.length>0?(0,o.jsx)(D.Ay,{disableHeight:!0,children:({width:i})=>{const _=[{title:(0,c.t)("meta-analytics.data-source-insights.queries-last-month-title","Queries last 30 days"),valueField:"queries",fieldType:u.PU.number,width:i,timeRange:n,color:"green",showBars:!0,showLines:!1},{title:(0,c.t)("meta-analytics.data-source-insights.errors-last-month-title","Errors last 30 days"),valueField:"errors",fieldType:u.PU.number,width:i,timeRange:n,color:s.colors.error.border,showBars:!0,showLines:!1},{title:(0,c.t)("meta-analytics.data-source-insights.average-load-duration-last-month-title","Average load duration last 30 days (ms)"),valueField:"loadDuration",fieldType:u.PU.number,width:i,timeRange:n,color:s.colors.primary.border,showBars:!0,showLines:!1}];return(0,o.jsx)("main",{style:{width:i},children:_.map(g=>this.renderChart(g,r))})}}):(0,o.jsx)("span",{children:(0,o.jsx)(c.x6,{i18nKey:"meta-analytics.data-source-insights.available-source",children:"No available data for this data source."})})}render(){return(0,m.a)("analytics.writers")&&!(0,m.a)("analytics")?(0,o.jsx)(M.w,{title:(0,c.t)("meta-analytics.data-source-insights.title-feature-available-expired-license","Feature not available with an expired license"),url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:(0,c.t)("meta-analytics.data-source-insights.title-read-more-license-expiration","Read more on license expiration"),children:(0,o.jsx)("span",{children:(0,o.jsx)(c.x6,{i18nKey:"meta-analytics.data-source-insights.text-feature-not-available-expired-license",children:"Data source insights are not available with an expired license. Data will continue to be collected but you need to update your license to see this page."})})}):(0,o.jsxs)(o.Fragment,{children:[(0,R.z5)()&&(0,o.jsx)(C.Iz,{featureId:"data-source-insights",eventVariant:"trial",featureName:"data source usage insights",text:(0,c.t)("meta-analytics.data-source-insights.text-enable-source-usage-insights-during-trial","Enable data source usage insights for free during your trial of Grafana Pro.")}),this.renderContent()]})}}const A=K((0,O.cV)(L))},9794:(t,e,a)=>{a.r(e),a.d(e,{DataSourceInsightsPage:()=>c,default:()=>m});var o=a(74848),v=a(54148),x=a(13791),D=a(84057),l=a(99723),u=a(52763),f=a(45135);const c=()=>{const{uid:E=""}=(0,v.g)(),p=(0,l.$m)("insights"),P=(0,u.d4)(O=>O.navIndex),M=(0,D.tc)(P,`datasource-insights-${E}`,p);return(0,o.jsx)(x.Y,{navId:"datasources",pageNav:M.main,children:(0,o.jsx)(x.Y.Contents,{children:(0,o.jsx)(f.A,{uid:E})})})},m=c},14552:(t,e,a)=>{t.exports=a.p+"static/img/adobe-analytics.4753db26.svg"},42965:(t,e,a)=>{t.exports=a.p+"static/img/appdynamics.26e3d55b.svg"},63340:(t,e,a)=>{t.exports=a.p+"static/img/atlassian-statuspage.3c87e280.svg"},19810:(t,e,a)=>{t.exports=a.p+"static/img/aurora.b26d603d.svg"},36654:(t,e,a)=>{t.exports=a.p+"static/img/azure-cosmosdb.573a2a46.svg"},15912:(t,e,a)=>{t.exports=a.p+"static/img/azure-devops.a937d73a.png"},91735:(t,e,a)=>{t.exports=a.p+"static/img/catchpoint.fa6c7933.svg"},95552:(t,e,a)=>{t.exports=a.p+"static/img/cloudflare.ea4404be.jpg"},74484:(t,e,a)=>{t.exports=a.p+"static/img/cockroachdb.c40db97d.jpg"},51147:(t,e,a)=>{t.exports=a.p+"static/img/datadog.68935496.png"},7672:(t,e,a)=>{t.exports=a.p+"static/img/drone.e55e0d85.svg"},36404:(t,e,a)=>{t.exports=a.p+"static/img/dynatrace.3510a47f.png"},70535:(t,e,a)=>{t.exports=a.p+"static/img/gitlab.a9ff2a14.svg"},23735:(t,e,a)=>{t.exports=a.p+"static/img/honeycomb.23074f0a.png"},26871:(t,e,a)=>{t.exports=a.p+"static/img/jira_logo.fc367bdf.png"},57454:(t,e,a)=>{t.exports=a.p+"static/img/logicmonitor.a0d2ddd9.svg"},10128:(t,e,a)=>{t.exports=a.p+"static/img/mongodb.cd31e197.svg"},78485:(t,e,a)=>{t.exports=a.p+"static/img/netlify.35f83f3c.svg"},59161:(t,e,a)=>{t.exports=a.p+"static/img/newrelic.4ba92509.svg"},69443:(t,e,a)=>{t.exports=a.p+"static/img/oracle.b53d3bc4.png"},94443:(t,e,a)=>{t.exports=a.p+"static/img/pagerduty.261221ea.svg"},12680:(t,e,a)=>{t.exports=a.p+"static/img/salesforce.f79d37a9.svg"},99444:(t,e,a)=>{t.exports=a.p+"static/img/sap_hana.7f369d20.png"},57925:(t,e,a)=>{t.exports=a.p+"static/img/servicenow.de3a7a6a.svg"},15584:(t,e,a)=>{t.exports=a.p+"static/img/signalfx-logo.70e37f3d.svg"},22810:(t,e,a)=>{t.exports=a.p+"static/img/snowflake.4951e616.svg"},42166:(t,e,a)=>{t.exports=a.p+"static/img/splunk_logo_128.08e4871b.png"},6758:(t,e,a)=>{t.exports=a.p+"static/img/sumo.3e01fb77.svg"},40250:(t,e,a)=>{t.exports=a.p+"static/img/wavefront.a8880e4a.svg"},16926:(t,e,a)=>{t.exports=a.p+"static/img/zendesk.9a6bf432.svg"}}]);

//# sourceMappingURL=DataSourceInsightsPage.3feff4230275f9e0bdb5.js.map