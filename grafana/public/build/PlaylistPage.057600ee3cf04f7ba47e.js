"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1168],{65064:(Q,T,s)=>{s.d(T,{A:()=>A});var t=s(74848),o=s(96540),a=s(18027),m=s(12737),b=s(45861),k=s(18552);class A extends o.PureComponent{render(){const{searchQuery:L,linkButton:h,setSearchQuery:M,target:j,placeholder:C="Search by name or type",sortPicker:x}=this.props,g={href:h?.href,disabled:h?.disabled};return j&&(g.target=j),(0,t.jsxs)("div",{className:"page-action-bar",children:[(0,t.jsx)(a.I,{grow:!0,children:(0,t.jsx)(m.Z,{value:L,onChange:M,placeholder:C})}),x&&(0,t.jsx)(k.r,{onChange:x.onChange,value:x.value,getSortOptions:x.getSortOptions}),h&&(0,t.jsx)(b.z9,{...g,children:h.title})]})}}},22129:(Q,T,s)=>{s.r(T),s.d(T,{PlaylistPage:()=>W,default:()=>rt});var t=s(74848),o=s(96540),a=s(92745),m=s(45861),b=s(50201),k=s(89640),A=s(71599),B=s(13791),L=s(65064),h=s(15130),M=s(58614),j=s(22803),C=s(63142),x=s(21348),g=s(70255),v=s(8073),Y=s(8515),z=s(41654),H=s(34339),R=s(83175),U=s(27489),O=s(22787),$=s(16780),f=s(37386),F=s(77824),D=s(32635),G=s(63527),J=s(47931),X=s(58662);const w=({playlistUid:e,onDismiss:i})=>{const[n,r]=(0,o.useState)(!1),[d,P]=(0,o.useState)(!1),y=[{label:(0,a.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,a.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],p={};n&&(p.kiosk=n),d&&(p.autofitpanels=!0);const u=R.kM.renderUrl(`${(0,X.P_)()}/play/${e}`,p);return(0,t.jsx)(O.a,{isOpen:!0,title:(0,a.t)("share-playlist.title","Share playlist"),onDismiss:i,children:(0,t.jsxs)($.n,{children:[(0,t.jsx)(f.D,{label:(0,a.t)("share-playlist.mode","Mode"),children:(0,t.jsx)(F.z,{value:n,options:y,onChange:r})}),(0,t.jsx)(f.D,{children:(0,t.jsx)(D.S,{label:(0,a.t)("share-playlist.checkbox-label","Autofit"),description:(0,a.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:d,onChange:c=>P(c.currentTarget.checked)})}),(0,t.jsx)(f.D,{label:(0,a.t)("share-playlist.link-url-label","Link URL"),children:(0,t.jsx)(G.p,{id:"link-url-input",value:u,readOnly:!0,addonAfter:(0,t.jsx)(J.b,{icon:"copy",variant:"primary",getText:()=>u,onClipboardCopy:()=>{(0,U.rR)("grafana_kiosk_mode",{action:"share_playlist",mode:n})},children:(0,t.jsx)(a.x6,{i18nKey:"share-playlist.copy-link-button",children:"Copy"})})})})]})})},q=({playlist:e,setStartPlaylist:i,setPlaylistToDelete:n})=>(0,t.jsxs)(v.Z,{children:[(0,t.jsxs)(v.Z.Heading,{children:[e.spec.title,(0,t.jsx)(Y.$s,{children:({showModal:r,hideModal:d})=>(0,t.jsx)(H._,{tooltip:(0,a.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{r(w,{playlistUid:e.metadata.name??"",onDismiss:d})}})},"button-share")]}),(0,t.jsxs)(v.Z.Actions,{children:[(0,t.jsx)(m.$n,{variant:"secondary",icon:"play",onClick:()=>i(e),children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.start",children:"Start playlist"})}),h.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.z9,{variant:"secondary",href:`/playlists/edit/${e.metadata.name}`,icon:"cog",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.edit",children:"Edit playlist"})},"edit"),(0,t.jsx)(m.$n,{disabled:!1,onClick:()=>n(e),icon:"trash-alt",variant:"destructive",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.delete",children:"Delete playlist"})})]})]})]}),_=({rootProps:e})=>{const i=(0,C.of)(tt);return(0,t.jsxs)(v.Z,{...e,children:[(0,t.jsx)(v.Z.Heading,{children:(0,t.jsx)(g.A,{width:140})}),(0,t.jsx)(v.Z.Actions,{children:(0,t.jsxs)(z.B,{direction:"row",wrap:"wrap",children:[(0,t.jsx)(g.A,{containerClassName:i.button,width:142,height:32}),h.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{containerClassName:i.button,width:135,height:32}),(0,t.jsx)(g.A,{containerClassName:i.button,width:153,height:32})]})]})})]})},E=(0,x.j)(q,_);function tt(e){return{button:(0,j.css)({lineHeight:1})}}const st=({playlists:e,setStartPlaylist:i,setPlaylistToDelete:n})=>{const r=(0,C.of)(V);return(0,t.jsx)("ul",{className:r.list,children:e.map(d=>(0,t.jsx)("li",{className:r.listItem,children:(0,t.jsx)(E,{playlist:d,setStartPlaylist:i,setPlaylistToDelete:n})},d.metadata.name))})},at=({rootProps:e})=>{const i=(0,C.of)(V);return(0,t.jsxs)("div",{"data-testid":"playlist-page-list-skeleton",className:i.list,...e,children:[(0,t.jsx)(E.Skeleton,{}),(0,t.jsx)(E.Skeleton,{}),(0,t.jsx)(E.Skeleton,{})]})},Z=(0,x.j)(st,at);function V(e){return{list:(0,j.css)({display:"grid"}),listItem:(0,j.css)({listStyle:"none"})}}var et=s(36490),lt=s(43173),it=s(31286);const nt=({playlist:e,onDismiss:i})=>{const[n,r]=(0,o.useState)(!1),[d,P]=(0,o.useState)(!1),[y,p]=(0,o.useState)(!0),[u,c]=(0,o.useState)(!0),[S,K]=(0,o.useState)(!0),I=[{label:(0,a.t)("playlist.start-modal.modes.label.normal","Normal"),value:!1},{label:(0,a.t)("playlist.start-modal.modes.label.kiosk","Kiosk"),value:!0}],N=()=>{const l={};n&&(l.kiosk=n),d&&(l.autofitpanels=!0),y||(l["_dash.hideTimePicker"]=!0),u||(l["_dash.hideVariables"]=!0),S||(l["_dash.hideLinks"]=!0),et.Ny.push(R.kM.renderUrl(`/playlists/play/${e.metadata.name}`,l)),(0,U.rR)("grafana_kiosk_mode",{action:"start_playlist",mode:n})};return(0,t.jsxs)(O.a,{isOpen:!0,icon:"play",title:(0,a.t)("playlist.start-modal.title-start-playlist","Start playlist"),onDismiss:i,children:[(0,t.jsxs)($.n,{children:[(0,t.jsx)(f.D,{label:(0,a.t)("playlist.start-modal.label-mode","Mode"),children:(0,t.jsx)(F.z,{value:n,options:I,onChange:r})}),(0,t.jsx)(f.D,{children:(0,t.jsx)(D.S,{label:(0,a.t)("playlist.start-modal.label-autofit","Autofit"),description:(0,a.t)("playlist.start-modal.description-panel-heights-adjusted-screen","Panel heights will be adjusted to fit screen size"),name:"autofix",value:d,onChange:l=>P(l.currentTarget.checked)})}),lt.$.featureToggles.dashboardScene&&(0,t.jsx)(f.D,{label:(0,a.t)("playlist.start-modal.label-display-dashboard-controls","Display dashboard controls"),description:(0,a.t)("playlist.start-modal.description-customize-dashboard-elements-visibility","Customize dashboard elements visibility"),children:(0,t.jsx)(it.a,{marginTop:2,marginBottom:2,children:(0,t.jsxs)(z.B,{direction:"column",alignItems:"start",justifyContent:"left",gap:2,children:[(0,t.jsx)(D.S,{label:(0,a.t)("playlist.start-modal.label-time-and-refresh","Time and refresh"),name:"displayTimePicker",value:y,onChange:l=>p(l.currentTarget.checked)}),(0,t.jsx)(D.S,{label:(0,a.t)("playlist.start-modal.label-variables","Variables"),name:"displayVariableControls",value:u,onChange:l=>c(l.currentTarget.checked)}),(0,t.jsx)(D.S,{label:(0,a.t)("playlist.start-modal.label-dashboard-links","Dashboard links"),name:"displayLinks",value:S,onChange:l=>K(l.currentTarget.checked)})]})})})]}),(0,t.jsx)(O.a.ButtonRow,{children:(0,t.jsx)(m.$n,{variant:"primary",onClick:N,children:(0,t.jsxs)(a.x6,{i18nKey:"playlist.start-modal.button-start",values:{title:e.spec.title},children:["Start ","{{title}}"]})})})]})};var ot=s(18984);const W=()=>{const{data:e,isLoading:i}=(0,M.o6)({}),[n]=(0,M.Iq)(),[r,d]=(0,o.useState)(""),P=(0,o.useMemo)(()=>e?.items??[],[e?.items]),y=(0,o.useMemo)(()=>(0,ot.GM)(P,r),[r,P]),[p,u]=(0,o.useState)(),[c,S]=(0,o.useState)(),K=y&&y.length>0,I=()=>S(void 0),N=()=>{c&&n({name:c.metadata.name??""}).finally(()=>{S(void 0)})},l=i||y.length>0||r.length>0;return(0,t.jsx)(B.Y,{actions:h.TP.isEditor&&l?(0,t.jsx)(m.z9,{href:"/playlists/new",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.create-button.title",children:"New playlist"})}):void 0,navId:"dashboards/playlists",children:(0,t.jsxs)(B.Y.Contents,{children:[l&&(0,t.jsx)(L.A,{searchQuery:r,setSearchQuery:d}),i?(0,t.jsx)(Z.Skeleton,{}):(0,t.jsxs)(t.Fragment,{children:[!K&&r?(0,t.jsx)(b.p,{variant:"not-found",message:(0,a.t)("playlists.empty-state.message","No playlists found")}):(0,t.jsx)(Z,{playlists:y,setStartPlaylist:u,setPlaylistToDelete:S}),!l&&(0,t.jsx)(b.p,{variant:"call-to-action",button:(0,t.jsx)(m.z9,{disabled:!h.TP.isEditor,href:"playlists/new",icon:"plus",size:"lg",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.empty.button",children:"Create playlist"})}),message:(0,a.t)("playlist-page.empty.title","There are no playlists created yet"),children:(0,t.jsxs)(a.x6,{i18nKey:"playlist-page.empty.pro-tip",children:["You can use playlists to cycle dashboards on TVs without user control."," ",(0,t.jsx)(k.Y,{external:!0,href:"https://docs.grafana.org/reference/playlist/",children:"Learn more"})]})}),c&&(0,t.jsx)(A.u,{title:c.spec.title,confirmText:(0,a.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,a.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:c.spec.title}),onConfirm:N,isOpen:!!c,onDismiss:I}),p&&(0,t.jsx)(nt,{playlist:p,onDismiss:()=>u(void 0)})]})]})})},rt=W}}]);

//# sourceMappingURL=PlaylistPage.057600ee3cf04f7ba47e.js.map