"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7523],{47466:(yr,Le,z)=>{z.d(Le,{o:()=>b});var At=z(74848),kt=z(22803),k=z(63142),ce=z(77239);const b=({items:I,children:Se,isPinned:pt,scrollable:V=!1,maxHeight:It})=>{const $t=(0,k.of)(Zt),ue=V?{maxHeight:It,overflowY:"auto"}:{};return(0,At.jsxs)("div",{className:$t.wrapper,style:ue,children:[I.map(({label:mn,value:Xe,color:jt,colorIndicator:qt,colorPlacement:ne,isActive:Bt,lineStyle:mt},Z)=>(0,At.jsx)(ce.B,{label:mn,value:Xe,color:jt,colorIndicator:qt,colorPlacement:ne,isActive:Bt,justify:"space-between",isPinned:pt,lineStyle:mt,showValueScroll:!V},Z)),Se]})},Zt=I=>({wrapper:(0,kt.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${I.colors.border.weak}`,padding:I.spacing(1)})})},41530:(yr,Le,z)=>{z.d(Le,{A:()=>b});var At=z(74848),kt=z(22803),k=z(63142),ce=z(77239);const b=({item:I,isPinned:Se})=>{const pt=(0,k.of)(Zt),{label:V,value:It,color:$t,colorIndicator:ue}=I;return(0,At.jsx)("div",{className:pt.wrapper,children:(0,At.jsx)(ce.B,{label:V,value:It,color:$t,colorIndicator:ue,marginRight:"22px",isPinned:Se})})},Zt=I=>({wrapper:(0,kt.css)({display:"flex",flexDirection:"column",flex:1,padding:I.spacing(1),lineHeight:1})})},77239:(yr,Le,z)=>{z.d(Le,{B:()=>ne});var At=z(74848),kt=z(22803),k=z(96540),ce=z(63142),b=z(53371),Zt=z(45967),I=z(64394),Se=z(71479),pt=z(55978),V=z(55302),It=(mt=>(mt[mt.Leading=0]="Leading",mt[mt.Trailing=1]="Trailing",mt))(It||{});const $t=({color:mt=I.F,colorIndicator:Z=pt.Ev,position:Xt=0,lineStyle:yt})=>{const de=(0,ce.of)(ue);return Z===pt.fX.series?(0,At.jsx)(Se.p,{color:mt,lineStyle:yt,className:Xt===0?de.leading:de.trailing}):(0,At.jsx)("span",{style:{backgroundColor:mt},className:(0,kt.cx)(Xt===0?de.leading:de.trailing,(0,V.L$)(Z,de))})},ue=mt=>({leading:(0,kt.css)({marginRight:mt.spacing(.5)}),trailing:(0,kt.css)({marginLeft:mt.spacing(.5)}),value:(0,kt.css)({width:"12px",height:"12px",borderRadius:mt.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,kt.css)({}),pie_1_4:(0,kt.css)({}),pie_2_4:(0,kt.css)({}),pie_3_4:(0,kt.css)({}),marker_sm:(0,kt.css)({width:"4px",height:"4px",borderRadius:mt.shape.radius.circle,minWidth:"4px"}),marker_md:(0,kt.css)({width:"8px",height:"8px",borderRadius:mt.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,kt.css)({width:"12px",height:"12px",borderRadius:mt.shape.radius.circle,minWidth:"12px"})});var mn=(mt=>(mt.label="label",mt.value="value",mt))(mn||{});const Xe="Copied to clipboard",jt=2*1e3,qt=7,ne=({label:mt,value:Z,color:Xt,colorIndicator:yt,colorPlacement:de=pt.lJ.first,justify:xr="flex-start",isActive:re=!1,marginRight:ln="0px",isPinned:Dn,lineStyle:je,showValueScroll:He})=>{const Ce=(0,ce.of)(Bt,xr,ln),cn=He?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"pre-line",wordBreak:"break-word",lineHeight:1.2},[zn,br]=(0,k.useState)(!1),[Ge,Tn]=(0,k.useState)(null),[Ee,Cr]=(0,k.useState)(!1),Ur=(0,k.useRef)(null),zi=(0,k.useRef)(null);(0,k.useEffect)(()=>{let Me;return Ee&&(Me=setTimeout(()=>{Cr(!1)},jt)),()=>{window.clearTimeout(Me)}},[Ee]);const Ii=async(Me,$e)=>{if(!(navigator?.clipboard&&window.isSecureContext)){Zr(Me,$e);return}try{await navigator.clipboard.writeText(Me),Tn({[`${$e}`]:Me}),Cr(!0)}catch{Tn(null)}},Zr=(Me,$e)=>{const In=document.createElement("textarea");Ur.current?.appendChild(In),In.value=Me,In.focus(),In.select();try{document.execCommand("copy")&&(Tn({[`${$e}`]:Me}),Cr(!0))}catch(ji){console.error("Unable to copy to clipboard",ji)}In.remove()},so=Me=>{Me.currentTarget.offsetWidth<Me.currentTarget.scrollWidth&&br(!0)},Bi=()=>br(!1);return mt.length*qt>window.innerWidth/2&&(mt=mt.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,At.jsxs)("div",{className:Ce.contentWrapper,children:[(Xt||mt)&&(0,At.jsxs)("div",{className:Ce.valueWrapper,children:[Xt&&de===pt.lJ.first&&(0,At.jsx)($t,{color:Xt,colorIndicator:yt,lineStyle:je}),Dn?(0,At.jsx)(At.Fragment,{children:(0,At.jsx)(Zt.m,{content:mt,interactive:!1,show:zn,children:(0,At.jsxs)(At.Fragment,{children:[Ee&&Ge?.label&&(0,At.jsx)(b.r,{placement:"top",referenceElement:Ur.current,children:Xe}),(0,At.jsx)("div",{className:(0,kt.cx)(Ce.label,re&&Ce.activeSeries,navigator?.clipboard&&Ce.copy),onMouseEnter:so,onMouseLeave:Bi,onClick:()=>Ii(mt,"label"),ref:Ur,children:mt})]})})}):(0,At.jsx)("div",{className:(0,kt.cx)(Ce.label,re&&Ce.activeSeries),children:mt})]}),(0,At.jsxs)("div",{className:Ce.valueWrapper,children:[Xt&&de===pt.lJ.leading&&(0,At.jsx)($t,{color:Xt,colorIndicator:yt,position:It.Leading,lineStyle:je}),Dn?(0,At.jsxs)(At.Fragment,{children:[Ee&&Ge?.value&&(0,At.jsx)(b.r,{placement:"top",referenceElement:zi.current,children:Xe}),(0,At.jsx)("div",{className:(0,kt.cx)(Ce.value,re,navigator?.clipboard&&Ce.copy),style:cn,onClick:()=>Ii(Z?Z.toString():"","value"),ref:zi,children:Z})]}):(0,At.jsx)("div",{className:(0,kt.cx)(Ce.value,re),style:cn,children:Z}),Xt&&de===pt.lJ.trailing&&(0,At.jsx)($t,{color:Xt,colorIndicator:yt,position:It.Trailing,lineStyle:je})]})]})},Bt=(mt,Z,Xt)=>({contentWrapper:(0,kt.css)({display:"flex",alignItems:"start",justifyContent:Z,marginRight:Xt}),label:(0,kt.css)({color:mt.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:mt.spacing(2)}),value:(0,kt.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,kt.css)({display:"flex",alignItems:"center"}),activeSeries:(0,kt.css)({fontWeight:mt.typography.fontWeightBold,color:mt.colors.text.maxContrast}),copy:(0,kt.css)({cursor:"pointer"})})},73163:(yr,Le,z)=>{z.d(Le,{Xx:()=>ue,ko:()=>It});var At=z(60519),kt=z(32899),k=z(95004),ce=z(63704),b=z(68143),Zt=z(43173),I=z(73427),Se=z(86967),pt=z(92367);const V=(jt,qt,ne)=>(Bt,mt,Z)=>(qt.variables&&ne&&(Bt=Bt.replace(/\$\w+/g,Xt=>{const yt=Xt.slice(1);return qt.variables.some(de=>de.key===yt)&&ne[yt]!=null?ne[yt]:Xt})),jt(Bt,mt,Z)),It=(jt,qt,ne,Bt,mt,Z)=>!mt||mt.length===0?[]:mt.map(yt=>{const de=(0,At.vd)(jt,qt,ne),xr={...ne,__dataContext:de},re=(Dn,je,He)=>Bt(Dn,{...xr,...je},He);return Z.valueRowIndex!==void 0&&!isNaN(Z.valueRowIndex)?de.value.rowIndex=Z.valueRowIndex:de.value.calculatedValue=Z.calculatedValue,{title:Bt(yt.title,xr),confirmation:Dn=>V(re,yt,Dn)(yt.confirmation||`Are you sure you want to ${yt.title}?`),onClick:(Dn,je,He)=>{let Ce=$t(yt,V(re,yt,He));try{(0,b.AI)().fetch(Ce).subscribe({error:cn=>{I.lE.emit(kt.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(cn)},complete:()=>{I.lE.emit(kt.r1.alertSuccess,["API call was successful"])}})}catch(cn){I.lE.emit(kt.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(cn);return}},oneClick:yt.oneClick??!1,style:{backgroundColor:yt.style?.backgroundColor??Zt.$.theme2.colors.secondary.main},variables:yt.variables}}).filter(yt=>!!yt),$t=(jt,qt)=>{const ne=new URL(mn(qt(jt.fetch.url))),Bt={};let mt={url:ne.toString(),method:jt.fetch.method,data:Xe(jt,qt),headers:Bt};return jt.fetch.headers&&jt.fetch.headers.forEach(([Z,Xt])=>{Bt[qt(Z)]=qt(Xt)}),jt.fetch.queryParams&&(jt.fetch.queryParams?.forEach(([Z,Xt])=>{ne.searchParams.append(qt(Z),qt(Xt))}),mt.url=ne.toString()),Bt["X-Grafana-Action"]="1",mt.headers=Bt,mt},ue=(jt=[],qt=[])=>({name:"Default field",type:k.PU.string,config:{links:jt,actions:qt},values:[]}),mn=jt=>{if(jt.startsWith("/")){const ne=ce.sQ.sanitizeUrl(jt);jt=(0,pt.z)(ne,[])}return jt},Xe=(jt,qt)=>{let ne=jt.fetch.body?qt(jt.fetch.body):"{}";return jt.fetch.method===Se.DO.GET&&(ne=void 0),ne}},51273:(yr,Le,z)=>{z.r(Le),z.d(Le,{addStandardCanvasEditorOptions:()=>Tl,plugin:()=>wb});var At=z(16207),kt=z(83340),k=z(92745),ce=z(43173),b=z(74848),Zt=z(2543),I=z(96540);class Se extends I.PureComponent{render(){const{config:e}=this.props;return(0,b.jsx)("div",{children:(0,b.jsxs)(k.x6,{i18nKey:"canvas.not-found-display.not-found",components:{config:(0,b.jsx)("pre",{children:JSON.stringify(e,null,2)})},children:[(0,b.jsx)("h3",{children:"Not found: "}),"<config />"]})})}}const pt={id:"not-found",name:"Not found",description:"Display when element type is not found in the registry",display:Se,defaultSize:{width:100,height:100},getNewOptions:()=>({config:{}})};var V=z(86967),It=(t=>(t.Delete="delete",t.Duplicate="duplicate",t.MoveTop="move-top",t.MoveBottom="move-bottom",t))(It||{}),$t=(t=>(t.ElementManagement="element-management",t.SelectedElement="selected-element",t.SelectedConnection="selected-connection",t))($t||{}),ue=(t=>(t.Solid="solid",t.Dashed="dashed",t.Dotted="dotted",t))(ue||{}),mn=(t=>(t.Solid="0",t.Dashed="8 8",t.Dotted="3",t))(mn||{}),Xe=z(32899),jt=z(11594),qt=z(16515),ne=z(45229),Bt=z(65642),mt=z(42954),Z=z(22803),Xt=z(739),yt=z(63142),de=z(45861),xr=z(68079),re=z(87405),ln=z(22001),Dn=z(50275),je=z(97095),He=z(18027),Ce=z(77824),cn=z(18857),zn=z(37386),br=z(41185),Ge=z(41654),Tn=z(63527),Ee=z(76319);const Cr=({value:t,onChange:e})=>{const[n,r]=(0,I.useState)(""),[i,a]=(0,I.useState)(""),o=({currentTarget:d})=>{a(d.value)},s=({currentTarget:d})=>{r(d.value)},l=d=>()=>{const f=t.filter(v=>v[0]!==d);e(f)},c=()=>{const d=n;let f;t?f=t.filter(v=>v[0]!==d):f=[],f.push([d,i]),f.sort((v,p)=>v[0].localeCompare(p[0])),r(""),a(""),e(f)},u=!n&&!i;return(0,b.jsxs)("div",{children:[(0,b.jsxs)(Ge.B,{direction:"row",children:[(0,b.jsx)(Tn.p,{placeholder:(0,k.t)("canvas.params-editor.placeholder-key","Key"),value:n,onChange:s}),(0,b.jsx)(Tn.p,{placeholder:(0,k.t)("canvas.params-editor.placeholder-value","Value"),value:i,onChange:o}),(0,b.jsx)(Ee.K,{"aria-label":(0,k.t)("canvas.params-editor.aria-label-add","Add"),name:"plus-circle",onClick:c,disabled:u})]}),(0,b.jsx)(Ge.B,{direction:"column",children:Array.from(t||[]).map(d=>(0,b.jsxs)(Ge.B,{direction:"row",children:[(0,b.jsx)(Tn.p,{disabled:!0,value:d[0]}),(0,b.jsx)(Tn.p,{disabled:!0,value:d[1]}),(0,b.jsx)(Ee.K,{"aria-label":(0,k.t)("canvas.params-editor.aria-label-delete","Delete"),onClick:l(d[0]),name:"trash-alt"})]},d[0]))})]})};var Ur=z(63704),zi=z(68143),Ii=z(2863),Zr=z(73427),so=z(92367),Bi=z(22429);const Me=(t,e)=>{if(!t.endpoint){Zr.lE.emit(Xe.r1.alertError,["API endpoint is not defined."]);return}const n=In(t);(0,zi.AI)().fetch(n).subscribe({error:r=>{Zr.lE.emit(Xe.r1.alertError,["An error has occurred. Check console output for more details."]),console.error("API call error: ",r),e&&e(!1)},complete:()=>{Zr.lE.emit(Xe.r1.alertSuccess,["API call was successful"]),e&&e(!1)}})},$e=t=>{const e=(0,Bi.UA)().getCurrent()?.panelInEdit;return(0,Ii.w)().replace(t,e?.scopedVars)},In=t=>{const e=av($e(t.endpoint)),n=new URL(e),r={};let i={url:n.toString(),method:t.method,data:ji(t),headers:r};return t.headerParams&&t.headerParams.forEach(([a,o])=>{r[$e(a)]=$e(o)}),t.queryParams&&(t.queryParams?.forEach(([a,o])=>{n.searchParams.append($e(a),$e(o))}),i.url=n.toString()),t.method===V.DO.POST&&(r["Content-Type"]=t.contentType),r["X-Grafana-Action"]="1",i.headers=r,i},ji=t=>{let e=t.data?$e(t.data):"{}";return t.method===V.DO.GET&&(e=void 0),e},av=t=>{if(t.startsWith("/")){const n=Ur.sQ.sanitizeUrl(t);t=(0,so.z)(n,[])}return t},Ml={id:"",name:"",description:"",editor:br.g,settings:{}},ov=[{label:V.DO.GET,value:V.DO.GET},{label:V.DO.POST,value:V.DO.POST},{label:V.DO.PUT,value:V.DO.PUT}],sv=[{label:"JSON",value:"application/json"},{label:"Text",value:"text/plain"},{label:"JavaScript",value:"application/javascript"},{label:"HTML",value:"text/html"},{label:"XML",value:"application/XML"},{label:"x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}];function lv({value:t,context:e,onChange:n}){t||(t=Qr);const i=(0,I.useCallback)((v="")=>{n({...t,endpoint:v})},[n,t]),a=(0,I.useCallback)(v=>{n({...t,data:v})},[n,t]),o=(0,I.useCallback)(v=>{n({...t,method:v})},[n,t]),s=(0,I.useCallback)(v=>{n({...t,contentType:v?.value})},[n,t]),l=v=>v,c=(0,I.useCallback)(v=>{n({...t,queryParams:v})},[n,t]),u=(0,I.useCallback)(v=>{n({...t,headerParams:v})},[n,t]),d=v=>{try{const p=JSON.parse($e(v));return(0,b.jsx)(Dn.B,{json:p})}catch(p){return p instanceof Error?`Invalid JSON provided: ${p.message}`:"Invalid JSON provided"}},f=v=>{if(v&&v.endpoint)return(0,b.jsx)(de.$n,{onClick:()=>Me(v),title:(0,k.t)("canvas.apieditor.render-test-apibutton.title-test-api","Test API"),children:(0,b.jsx)(k.x6,{i18nKey:"canvas.apieditor.render-test-apibutton.test-api",children:"Test API"})})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(je.C,{children:(0,b.jsx)(He.I,{label:(0,k.t)("canvas.apieditor.label-endpoint","Endpoint"),labelWidth:13,grow:!0,children:(0,b.jsx)(br.g,{context:e,value:t?.endpoint,onChange:i,item:Ml})})}),(0,b.jsx)(je.C,{children:(0,b.jsx)(He.I,{label:(0,k.t)("canvas.apieditor.label-method","Method"),labelWidth:13,grow:!0,children:(0,b.jsx)(Ce.z,{value:t?.method,options:ov,onChange:o,fullWidth:!0})})}),t?.method!==V.DO.GET&&(0,b.jsx)(je.C,{children:(0,b.jsx)(He.I,{label:"Content-Type",labelWidth:13,grow:!0,children:(0,b.jsx)(cn.l6,{options:sv,allowCustomValue:!0,formatCreateLabel:l,value:t?.contentType,onChange:s})})}),(0,b.jsx)("br",{}),(0,b.jsx)(zn.D,{label:(0,k.t)("canvas.apieditor.label-query-parameters","Query parameters"),children:(0,b.jsx)(Cr,{value:t?.queryParams??[],onChange:c})}),(0,b.jsx)(zn.D,{label:(0,k.t)("canvas.apieditor.label-header-parameters","Header parameters"),children:(0,b.jsx)(Cr,{value:t?.headerParams??[],onChange:u})}),t?.method!==V.DO.GET&&t?.contentType&&(0,b.jsx)(zn.D,{label:(0,k.t)("canvas.apieditor.label-payload","Payload"),children:(0,b.jsx)(br.g,{context:e,value:t?.data??"{}",onChange:a,item:{...Ml,settings:{useTextarea:!0}}})}),f(t),(0,b.jsx)("br",{}),t?.method!==V.DO.GET&&t?.contentType===Qr.contentType&&d(t?.data??"{}")]})}const cv=[{label:"primary",value:"primary"},{label:"secondary",value:"secondary"},{label:"success",value:"success"},{label:"destructive",value:"destructive"}],uv=({value:t,onChange:e})=>{t||(t=Gi);const n=(0,I.useCallback)(r=>{e({...t,variant:r?.value??Gi.variant})},[e,t]);return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(je.C,{children:(0,b.jsx)(He.I,{label:(0,k.t)("canvas.button-style-editor.label-variant","Variant"),grow:!0,children:(0,b.jsx)(cn.l6,{options:cv,value:t?.variant,onChange:n})})})})};var kl=(t=>(t.Straight="straight",t))(kl||{}),un=(t=>(t.Forward="forward",t.Reverse="reverse",t.Both="both",t.None="none",t))(un||{});const Gt="#D9D9D9",Sr="#000000",dv="#F0F4FD",fv=Bt.$W.theme2.colors.text.primary;var Fe=(t=>(t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t.HorizontalCenter="hcenter",t.VerticalCenter="vcenter",t))(Fe||{}),at=(t=>(t.Left="left",t.Center="center",t.Right="right",t))(at||{}),st=(t=>(t.Top="top",t.Middle="middle",t.Bottom="bottom",t))(st||{});const Qr={endpoint:"",method:V.DO.POST,data:"{}",contentType:"application/json",queryParams:[],headerParams:[]},Gi={variant:"primary"},vv=({data:t})=>{const e=(0,yt.of)(pv,t),[n,r]=(0,I.useState)(!1),i=o=>{r(o)},a=()=>{t?.api&&t?.api?.endpoint&&(r(!0),Me(t.api,i))};return(0,b.jsx)(de.$n,{type:"submit",variant:t?.style?.variant,onClick:a,className:e.button,children:(0,b.jsxs)("span",{children:[n&&(0,b.jsx)(xr.y,{inline:!0,className:e.buttonSpinner}),t?.text]})})},pv=(t,e)=>({button:(0,Z.css)({height:"100%",width:"100%",display:"grid","> span":{display:"inline-grid",gridAutoFlow:"column",textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color}}),buttonSpinner:(0,Z.css)({marginRight:t.spacing(.5)})}),hv={id:"button",name:"Button",description:"Button",state:jt.pn.beta,standardEditorConfig:{background:!1},display:vv,defaultSize:{width:150,height:45},getNewOptions:t=>({...t,config:{text:{mode:Xt.RU.Fixed,fixed:"Button"},align:at.Center,color:{fixed:dv},size:14,api:Qr,style:Gi},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??32,height:t?.placement?.height??78,top:t?.placement?.top??100,left:t?.placement?.left??100,rotation:t?.placement?.rotation??0}}),prepareData:(t,e)=>{const n=e.config,r=()=>{if(n?.api)return n.api={...n.api,method:n.api.method??Qr.method,contentType:n.api.contentType??Qr.contentType},n.api},i={text:n?.text?t.getText(n.text).value():"",align:n?.align??at.Center,size:n?.size??14,api:r(),style:n?.style??Gi};return n?.color&&(i.color=t.getColor(n.color).value()),i},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.button-item.category-button","Button")];t.addCustomEditor({category:e,id:"styleSelector",path:"config.style",name:(0,k.t)("canvas.button-item.name-style","Style"),editor:uv}).addCustomEditor({category:e,id:"textSelector",path:"config.text",name:(0,k.t)("canvas.button-item.name-text","Text"),editor:ln.h}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:(0,k.t)("canvas.button-item.name-text-color","Text color"),editor:re.N,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:(0,k.t)("canvas.button-item.name-align-text","Align text"),settings:{options:[{value:at.Left,label:(0,k.t)("canvas.button-item.label.left","Left")},{value:at.Center,label:(0,k.t)("canvas.button-item.label.center","Center")},{value:at.Right,label:(0,k.t)("canvas.button-item.label.right","Right")}]},defaultValue:at.Left}).addNumberInput({category:e,path:"config.size",name:(0,k.t)("canvas.button-item.name-text-size","Text size"),settings:{placeholder:(0,k.t)("canvas.button-item.placeholder.auto","Auto")}}).addCustomEditor({category:e,id:"apiSelector",path:"config.api",name:(0,k.t)("canvas.button-item.name-api","API"),editor:lv})}};var Fi=z(24726);const gv={id:"cloud",name:"Cloud",description:"Cloud",display:t=>{const{data:e}=t,n=mv(Bt.$W.theme2,e),r=(0,Fi.A)();return(0,b.jsxs)("div",{className:n.container,children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 110 70",width:"100%",height:"100%",preserveAspectRatio:"none",children:[(0,b.jsxs)("defs",{children:[(0,b.jsx)("pattern",{id:`image-${r}`,patternUnits:"userSpaceOnUse",width:"110",height:"70",children:(0,b.jsx)("image",{xlinkHref:e?.backgroundImage,x:"-50",y:"-50",width:"300",height:"300"})}),(0,b.jsx)("clipPath",{id:`cloudClip-${r}`,children:(0,b.jsx)("path",{d:"M 23 13 C -1 13 -7 33 12.2 37 C -7 45.8 14.6 65 30.2 57 C 41 73 77 73 89 57 C 113 57 113 41 98 33 C 113 17 89 1 68 9 C 53 -3 29 -3 23 13 Z"})})]}),(0,b.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",clipPath:`url(#cloudClip-${r})`,style:{fill:"none"}}),(0,b.jsx)("path",{d:"M 23 13 C -1 13 -7 33 12.2 37 C -7 45.8 14.6 65 30.2 57 C 41 73 77 73 89 57 C 113 57 113 41 98 33 C 113 17 89 1 68 9 C 53 -3 29 -3 23 13 Z",style:{fill:e?.backgroundImage?`url(#image-${r})`:e?.backgroundColor}}),(0,b.jsx)("path",{d:"M 23 13 C -1 13 -7 33 12.2 37 C -7 45.8 14.6 65 30.2 57 C 41 73 77 73 89 57 C 113 57 113 41 98 33 C 113 17 89 1 68 9 C 53 -3 29 -3 23 13 Z",clipPath:`url(#cloudClip-${r})`,className:n.elementBorder})]}),(0,b.jsx)("span",{className:n.text,children:e?.text})]})},defaultSize:{width:110,height:70},getNewOptions:t=>({...t,background:{color:{fixed:Gt}},config:{align:at.Center,valign:st.Middle,color:{fixed:Sr}},placement:{width:t?.placement?.width??110,height:t?.placement?.height??70,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config,r={text:n?.text?t.getText(n.text).value():"",field:n?.text?.field,align:n?.align??at.Center,valign:n?.valign??st.Middle,size:n?.size};n?.color&&(r.color=t.getColor(n.color).value());const{background:i,border:a}=e;return r.backgroundColor=i?.color?t.getColor(i.color).value():Gt,r.borderColor=a?.color?t.getColor(a.color).value():Gt,r.borderWidth=a?.width??0,r.backgroundImage=i?.image?t.getResource(i.image).value():void 0,r},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.cloud-item.category-cloud","Cloud")];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:(0,k.t)("canvas.cloud-item.name-text","Text"),editor:ln.h}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:(0,k.t)("canvas.cloud-item.name-text-color","Text color"),editor:re.N,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:(0,k.t)("canvas.cloud-item.name-align-text","Align text"),settings:{options:[{value:at.Left,label:(0,k.t)("canvas.cloud-item.label.left","Left")},{value:at.Center,label:(0,k.t)("canvas.cloud-item.label.center","Center")},{value:at.Right,label:(0,k.t)("canvas.cloud-item.label.right","Right")}]},defaultValue:at.Left}).addRadio({category:e,path:"config.valign",name:(0,k.t)("canvas.cloud-item.name-vertical-align","Vertical align"),settings:{options:[{value:st.Top,label:(0,k.t)("canvas.cloud-item.label.top","Top")},{value:st.Middle,label:(0,k.t)("canvas.cloud-item.label.middle","Middle")},{value:st.Bottom,label:(0,k.t)("canvas.cloud-item.label.bottom","Bottom")}]},defaultValue:st.Middle}).addNumberInput({category:e,path:"config.size",name:(0,k.t)("canvas.cloud-item.name-text-size","Text size"),settings:{placeholder:(0,k.t)("canvas.cloud-item.placeholder.auto","Auto")}})},customConnectionAnchors:[{x:-.58,y:.63},{x:-.22,y:.99},{x:.235,y:.75},{x:.8,y:.6},{x:.785,y:.06},{x:.91,y:-.51},{x:.62,y:-.635},{x:.05,y:-.98},{x:-.45,y:-.635},{x:-.8,y:-.58},{x:-.78,y:-.06},{x:-.9,y:.48}]},mv=(t,e)=>{const n=e?.valign===st.Middle?"50%":e?.valign===st.Top?"10%":"90%",r=e?.align===at.Center?"50%":e?.align===at.Left?"10%":"90%",i=`translate(${e?.align===at.Center?"-50%":e?.align===at.Left?"10%":"-90%"}, ${e?.valign===st.Middle?"-50%":e?.valign===st.Top?"10%":"-90%"})`;return{container:(0,Z.css)({height:"100%",width:"100%"}),text:(0,Z.css)({position:"absolute",top:n,left:r,transform:i,fontSize:`${e?.size}px`,color:e?.color}),elementBorder:(0,Z.css)({fill:"none",stroke:e?.borderColor??"none",strokeWidth:e?.borderWidth??0,strokeLinejoin:"round"})}};var Mn=z(68694);const yv={id:"droneFront",name:"Drone Front",description:"Drone front",display:({data:t})=>{const e=(0,yt.of)(xv),n=`rotate(${t?.rollAngle?t.rollAngle:0}deg)`;return(0,b.jsxs)("svg",{className:e.droneFront,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:Gt},children:[(0,b.jsxs)("g",{className:"arms",stroke:Gt,strokeWidth:"28px",children:[(0,b.jsx)("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),(0,b.jsx)("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),(0,b.jsx)("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),(0,b.jsx)("line",{x1:"790",x2:"980",y1:"100",y2:"150"})]}),(0,b.jsxs)("g",{className:"body",stroke:Gt,strokeWidth:"28px",children:[(0,b.jsx)("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "}),(0,b.jsx)("circle",{cx:"650",cy:"160",r:"40",fill:"none"})]}),(0,b.jsxs)("g",{className:"motors",stroke:Gt,strokeWidth:"28px",children:[(0,b.jsx)("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),(0,b.jsx)("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})]}),(0,b.jsxs)("g",{className:"propellers",fill:Gt,children:[(0,b.jsx)("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),(0,b.jsx)("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})]})]})},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config;return{rollAngle:n?.rollAngle?t.getScalar(n.rollAngle).value():0}},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.drone-front-item.category-drone-front","Drone Front")];t.addCustomEditor({category:e,id:"rollAngle",path:"config.rollAngle",name:(0,k.t)("canvas.drone-front-item.name-roll-angle","Roll Angle"),editor:Mn.A})}},xv=t=>({droneFront:(0,Z.css)({transition:"transform 0.4s"})}),bv={id:"droneSide",name:"Drone Side",description:"Drone Side",display:({data:t})=>{const e=(0,yt.of)(Cv),n=`rotate(${t?.pitchAngle?t.pitchAngle:0}deg)`;return(0,b.jsxs)("svg",{className:e.droneSide,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:Gt},children:[(0,b.jsxs)("g",{className:"arms",stroke:Gt,strokeWidth:"28px",children:[(0,b.jsx)("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),(0,b.jsx)("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),(0,b.jsx)("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),(0,b.jsx)("line",{x1:"790",x2:"980",y1:"100",y2:"150"})]}),(0,b.jsx)("g",{className:"body",stroke:Gt,strokeWidth:"28px",children:(0,b.jsx)("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "})}),(0,b.jsxs)("g",{className:"motors",stroke:Gt,strokeWidth:"28px",children:[(0,b.jsx)("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),(0,b.jsx)("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})]}),(0,b.jsxs)("g",{className:"propellers",fill:Gt,children:[(0,b.jsx)("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),(0,b.jsx)("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})]})]})},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config;return{pitchAngle:n?.pitchAngle?t.getScalar(n.pitchAngle).value():0}},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.drone-side-item.category-drone-side","Drone Side")];t.addCustomEditor({category:e,id:"pitchAngle",path:"config.pitchAngle",name:(0,k.t)("canvas.drone-side-item.name-pitch-angle","Pitch Angle"),editor:Mn.A})}},Cv=t=>({droneSide:(0,Z.css)({transition:"transform 0.4s"})}),Sv={id:"droneTop",name:"Drone Top",description:"Drone top",display:({data:t})=>{const e=(0,yt.of)(Ev),n=`spin ${t?.fRightRotorRPM?60/Math.abs(t.fRightRotorRPM):0}s linear infinite`,r=`spin ${t?.fLeftRotorRPM?60/Math.abs(t.fLeftRotorRPM):0}s linear infinite`,i=`spin ${t?.bRightRotorRPM?60/Math.abs(t.bRightRotorRPM):0}s linear infinite`,a=`spin ${t?.bLeftRotorRPM?60/Math.abs(t.bLeftRotorRPM):0}s linear infinite`,o=`rotate(${t?.yawAngle?t.yawAngle:0}deg)`;return(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"-43 -43 640 640",xmlSpace:"preserve",style:{transform:o,fill:Gt},children:[(0,b.jsx)("path",{fillRule:"evenodd",d:" M 137.95 127.967 C 137.14 127.157 136.189 126.58 135.178 126.218 C 138.173 121.545 139.967 116.036 140.125 110.123 L 217.64 151.862 C 214.049 157.411 211.8 163.922 211.386 170.95 L 209.694 199.712 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 Z  M 134.268 426.981 C 130.211 421.314 124.328 417.045 117.482 415.041 L 201.999 330.523 L 201.385 340.955 C 200.67 353.107 202.829 364.914 207.563 375.673 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 Z  M 324.765 373.673 L 228.527 373.673 Q 215.374 358.611 216.361 341.835 L 226.361 171.832 C 226.825 163.94 231.012 157.096 237.146 152.957 L 316.146 152.957 C 322.28 157.096 326.466 163.94 326.931 171.832 L 336.931 341.835 Q 337.918 358.611 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 Z  M 435.81 415.041 C 428.964 417.045 423.081 421.314 419.024 426.981 L 345.727 375.673 C 350.461 364.914 352.62 353.107 351.905 340.955 L 351.291 330.523 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 Z  M 343.596 199.713 L 341.904 170.951 C 341.49 163.923 339.242 157.411 335.651 151.863 L 413.167 110.124 C 413.325 116.037 415.119 121.546 418.114 126.219 C 417.103 126.581 416.152 127.158 415.342 127.968 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 Z  M 444.646 92.771 C 453.744 92.771 461.146 100.172 461.146 109.271 C 461.146 118.369 453.744 125.771 444.646 125.771 C 435.548 125.771 428.146 118.369 428.146 109.271 C 428.146 100.172 435.548 92.771 444.646 92.771 L 444.646 92.771 L 444.646 92.771 L 444.646 92.771 Z  M 108.647 92.771 C 117.745 92.771 125.147 100.172 125.147 109.271 C 125.147 118.369 117.745 125.771 108.647 125.771 C 99.549 125.771 92.147 118.369 92.147 109.271 C 92.147 100.172 99.549 92.771 108.647 92.771 L 108.647 92.771 L 108.647 92.771 Z  M 108.647 461.771 C 99.549 461.771 92.147 454.369 92.147 445.271 C 92.147 436.172 99.549 428.771 108.647 428.771 C 117.745 428.771 125.147 436.172 125.147 445.271 C 125.147 454.369 117.745 461.771 108.647 461.771 L 108.647 461.771 Z  M 92.322 136.202 C 97.086 139.1 102.675 140.771 108.647 140.771 C 114.883 140.771 120.697 138.941 125.594 135.802 C 125.956 136.813 126.534 137.764 127.343 138.573 L 207.342 218.573 C 207.711 218.942 208.109 219.264 208.528 219.54 L 203.212 309.908 C 201.794 310.182 200.44 310.869 199.342 311.967 L 95.343 415.967 C 94.954 416.356 94.62 416.779 94.335 417.224 C 93.651 417.575 92.976 417.942 92.322 418.34 Q 84.615 424.182 81.716 428.946 C 78.817 433.71 77.147 439.299 77.147 445.271 C 77.147 462.64 91.278 476.771 108.647 476.771 C 114.619 476.771 120.208 475.1 124.972 472.202 C 129.736 469.304 132.678 466.36 135.577 461.596 C 138.476 456.832 140.147 451.243 140.147 445.271 C 140.147 443.943 140.055 442.637 139.895 441.352 L 214.997 388.78 C 217.05 391.677 336.242 391.678 338.295 388.78 L 413.398 441.352 C 413.238 442.637 413.146 443.943 413.146 445.271 C 413.146 451.243 414.817 456.832 417.715 461.596 C 420.613 466.36 423.557 469.304 428.321 472.202 C 433.085 475.1 438.674 476.771 444.646 476.771 C 462.015 476.771 476.146 462.64 476.146 445.271 C 476.146 439.299 474.475 433.71 471.577 428.946 C 468.679 424.182 459.642 417.575 458.958 417.224 C 458.672 416.779 458.339 416.356 457.95 415.967 L 353.95 311.967 C 352.852 310.869 351.498 310.182 350.08 309.908 L 344.764 219.54 C 345.183 219.264 345.581 218.942 345.95 218.573 L 425.95 138.573 C 426.76 137.763 427.337 136.812 427.699 135.802 C 432.596 138.941 438.409 140.771 444.646 140.771 C 450.618 140.771 456.207 139.1 460.971 136.202 C 465.735 133.304 468.679 130.36 471.577 125.596 C 474.475 120.832 476.146 115.243 476.146 109.271 C 476.146 91.903 462.015 77.772 444.646 77.772 C 438.674 77.772 433.085 79.442 428.321 82.34 L 416.215 91.446 L 324.765 140.688 C 318.402 136.324 310.718 133.771 302.473 133.771 L 250.819 133.771 C 242.574 133.771 234.89 136.324 228.527 140.688 L 137.078 91.446 L 124.972 82.34 C 120.208 79.442 114.619 77.772 108.647 77.772 C 91.278 77.772 77.147 91.903 77.147 109.271 C 77.147 115.243 78.818 120.832 81.716 125.595 C 84.614 130.358 87.558 133.304 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 Z  M 444.646 461.771 C 435.548 461.771 428.146 454.369 428.146 445.271 C 428.146 436.172 435.548 428.771 444.646 428.771 C 453.744 428.771 461.146 436.172 461.146 445.271 C 461.146 454.369 453.744 461.771 444.646 461.771 Z "}),(0,b.jsx)("path",{fillRule:"evenodd",d:" M 259.458 334.235 L 259.458 337.211 L 254.514 337.211 L 254.514 350.795 L 250.842 350.795 L 250.842 337.211 L 245.898 337.211 L 245.898 334.235 L 259.458 334.235 Z  M 266.226 347.939 L 272.586 347.939 L 272.754 350.627 L 272.754 350.627 Q 270.498 350.867 265.074 350.867 L 265.074 350.867 L 265.074 350.867 Q 263.418 350.867 262.434 349.967 L 262.434 349.967 L 262.434 349.967 Q 261.45 349.067 261.426 347.531 L 261.426 347.531 L 261.426 337.499 L 261.426 337.499 Q 261.45 335.963 262.434 335.063 L 262.434 335.063 L 262.434 335.063 Q 263.418 334.163 265.074 334.163 L 265.074 334.163 L 265.074 334.163 Q 270.498 334.163 272.754 334.403 L 272.754 334.403 L 272.586 337.115 L 266.226 337.115 L 266.226 337.115 Q 265.626 337.115 265.362 337.403 L 265.362 337.403 L 265.362 337.403 Q 265.098 337.691 265.098 338.339 L 265.098 338.339 L 265.098 340.859 L 271.698 340.859 L 271.698 343.499 L 265.098 343.499 L 265.098 346.691 L 265.098 346.691 Q 265.098 347.363 265.362 347.651 L 265.362 347.651 L 265.362 347.651 Q 265.626 347.939 266.226 347.939 L 266.226 347.939 Z  M 275.202 333.995 L 278.73 333.995 L 278.73 346.931 L 278.73 346.931 Q 278.73 348.131 280.074 348.131 L 280.074 348.131 L 281.034 348.131 L 281.442 350.603 L 281.442 350.603 Q 280.53 351.083 278.61 351.083 L 278.61 351.083 L 278.61 351.083 Q 277.026 351.083 276.114 350.231 L 276.114 350.231 L 276.114 350.231 Q 275.202 349.379 275.202 347.819 L 275.202 347.819 L 275.202 333.995 Z  M 283.05 333.995 L 286.578 333.995 L 286.578 346.931 L 286.578 346.931 Q 286.578 348.131 287.922 348.131 L 287.922 348.131 L 288.882 348.131 L 289.29 350.603 L 289.29 350.603 Q 288.378 351.083 286.458 351.083 L 286.458 351.083 L 286.458 351.083 Q 284.874 351.083 283.962 350.231 L 283.962 350.231 L 283.962 350.231 Q 283.05 349.379 283.05 347.819 L 283.05 347.819 L 283.05 333.995 Z  M 292.086 335.759 L 292.086 335.759 L 292.086 335.759 Q 293.634 333.923 297.618 333.923 L 297.618 333.923 L 297.618 333.923 Q 301.602 333.923 303.162 335.759 L 303.162 335.759 L 303.162 335.759 Q 304.722 337.595 304.722 342.515 L 304.722 342.515 L 304.722 342.515 Q 304.722 347.435 303.162 349.271 L 303.162 349.271 L 303.162 349.271 Q 301.602 351.107 297.618 351.107 L 297.618 351.107 L 297.618 351.107 Q 293.634 351.107 292.086 349.271 L 292.086 349.271 L 292.086 349.271 Q 290.538 347.435 290.538 342.515 L 290.538 342.515 L 290.538 342.515 Q 290.538 337.595 292.086 335.759 Z  M 300.174 338.051 L 300.174 338.051 L 300.174 338.051 Q 299.49 336.875 297.618 336.875 L 297.618 336.875 L 297.618 336.875 Q 295.746 336.875 295.062 338.051 L 295.062 338.051 L 295.062 338.051 Q 294.378 339.227 294.378 342.515 L 294.378 342.515 L 294.378 342.515 Q 294.378 345.803 295.062 346.979 L 295.062 346.979 L 295.062 346.979 Q 295.746 348.155 297.618 348.155 L 297.618 348.155 L 297.618 348.155 Q 299.49 348.155 300.174 346.979 L 300.174 346.979 L 300.174 346.979 Q 300.858 345.803 300.858 342.515 L 300.858 342.515 L 300.858 342.515 Q 300.858 339.227 300.174 338.051 Z "}),(0,b.jsxs)("g",{className:"propeller-group",children:[(0,b.jsx)("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:i},d:" M 461.563 418.77 L 463.992 416.34 Q 465.495 407.116 466.461 400.395 C 467.426 393.675 469.363 388.087 474.731 383.284 Q 533.862 341.514 538.196 338.859 C 542.529 336.203 548.345 334.299 551.492 338.29 C 554.639 342.282 553.481 346.02 549.419 350.082 L 471.147 428.354 L 461.563 418.77 Z  M 427.729 471.772 L 425.299 474.202 Q 423.797 483.426 422.831 490.146 C 421.866 496.867 419.929 502.454 414.561 507.257 Q 355.43 549.028 351.096 551.683 C 346.763 554.338 340.947 556.243 337.8 552.251 C 334.653 548.26 335.811 544.522 339.873 540.46 L 418.145 462.187 L 427.729 471.772 Z "}),(0,b.jsx)("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:n},d:" M 461.563 135.773 L 463.992 138.203 Q 465.495 147.426 466.461 154.147 C 467.426 160.868 469.363 166.455 474.731 171.258 Q 533.862 213.028 538.196 215.684 C 542.529 218.339 548.345 220.244 551.492 216.252 C 554.639 212.26 553.481 208.523 549.419 204.46 L 471.147 126.188 L 461.563 135.773 Z  M 427.729 82.77 L 425.299 80.34 Q 423.797 71.117 422.831 64.396 C 421.866 57.675 419.929 52.088 414.561 47.285 Q 355.43 5.515 351.096 2.859 C 346.763 0.204 340.947 -1.701 337.8 2.291 C 334.653 6.282 335.811 10.02 339.873 14.082 L 418.145 92.355 L 427.729 82.77 Z "}),(0,b.jsx)("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:a},d:" M 125.563 471.772 L 127.993 474.202 Q 129.496 483.426 130.461 490.146 C 131.427 496.867 133.363 502.454 138.731 507.257 Q 197.863 549.028 202.196 551.683 C 206.53 554.338 212.345 556.243 215.492 552.251 C 218.639 548.26 217.482 544.522 213.419 540.46 L 135.148 462.187 L 125.563 471.772 Z  M 91.73 418.77 L 89.3 416.34 Q 87.797 407.116 86.832 400.395 C 85.866 393.675 83.93 388.087 78.562 383.284 Q 19.431 341.514 15.097 338.859 C 10.763 336.203 4.948 334.299 1.801 338.29 C -1.346 342.282 -0.189 346.02 3.874 350.082 L 82.146 428.354 L 91.73 418.77 Z "}),(0,b.jsx)("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:r},d:" M 125.563 82.77 L 127.993 80.34 Q 129.496 71.117 130.461 64.396 C 131.427 57.675 133.363 52.088 138.731 47.285 Q 197.863 5.515 202.196 2.859 C 206.53 0.204 212.345 -1.701 215.492 2.291 C 218.639 6.282 217.482 10.02 213.419 14.083 L 135.147 92.355 L 125.563 82.77 Z  M 91.73 135.773 L 89.3 138.203 Q 87.797 147.426 86.832 154.147 C 85.866 160.868 83.93 166.455 78.562 171.258 Q 19.431 213.028 15.097 215.684 C 10.763 218.339 4.948 220.243 1.801 216.252 C -1.346 212.26 -0.189 208.523 3.874 204.46 L 82.146 126.188 L 91.73 135.773 Z "})]})]})},defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config;return{bRightRotorRPM:n?.bRightRotorRPM?t.getScalar(n.bRightRotorRPM).value():0,bLeftRotorRPM:n?.bLeftRotorRPM?t.getScalar(n.bLeftRotorRPM).value():0,fRightRotorRPM:n?.fRightRotorRPM?t.getScalar(n.fRightRotorRPM).value():0,fLeftRotorRPM:n?.fLeftRotorRPM?t.getScalar(n.fLeftRotorRPM).value():0,yawAngle:n?.yawAngle?t.getScalar(n.yawAngle).value():0}},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.drone-top-item.category-drone-top","Drone Top")];t.addCustomEditor({category:e,id:"yawAngle",path:"config.yawAngle",name:(0,k.t)("canvas.drone-top-item.name-yaw-angle","Yaw Angle"),editor:Mn.A}).addCustomEditor({category:e,id:"fRightRotorRPM",path:"config.fRightRotorRPM",name:(0,k.t)("canvas.drone-top-item.name-front-right-rotor-rpm","Front Right Rotor RPM"),editor:Mn.A}).addCustomEditor({category:e,id:"fLeftRotorRPM",path:"config.fLeftRotorRPM",name:(0,k.t)("canvas.drone-top-item.name-front-left-rotor-rpm","Front Left Rotor RPM"),editor:Mn.A}).addCustomEditor({category:e,id:"bRightRotorRPM",path:"config.bRightRotorRPM",name:(0,k.t)("canvas.drone-top-item.name-back-right-rotor-rpm","Back Right Rotor RPM"),editor:Mn.A}).addCustomEditor({category:e,id:"bLeftRotorRPM",path:"config.bLeftRotorRPM",name:(0,k.t)("canvas.drone-top-item.name-back-left-rotor-rpm","Back Left Rotor RPM"),editor:Mn.A})}},Ev=t=>({propeller:(0,Z.css)({transformOrigin:"50% 50%",transformBox:"fill-box",display:"block","@keyframes spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}}),propellerCW:(0,Z.css)({animationDirection:"normal"}),propellerCCW:(0,Z.css)({animationDirection:"reverse"})}),wv={id:"ellipse",name:"Ellipse",description:"Ellipse",display:t=>{const{data:e}=t,n=Dv(Bt.$W.theme2,e),r=(0,Fi.A)();return(0,b.jsxs)("div",{className:n.container,children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"100%",height:"100%",preserveAspectRatio:"none",children:[(0,b.jsxs)("defs",{children:[(0,b.jsx)("pattern",{id:`image-${r}`,patternUnits:"userSpaceOnUse",width:"200",height:"200",children:(0,b.jsx)("image",{xlinkHref:e?.backgroundImage,x:"-50",y:"-50",width:"300",height:"300"})}),(0,b.jsx)("clipPath",{id:`ellipseClip-${r}`,children:(0,b.jsx)("ellipse",{cx:"50%",cy:"50%",rx:"50%",ry:"50%"})})]}),(0,b.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",clipPath:`url(#ellipseClip-${r})`,style:{fill:"none"}}),(0,b.jsx)("ellipse",{cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:{fill:e?.backgroundImage?`url(#image-${r})`:e?.backgroundColor}}),(0,b.jsx)("ellipse",{cx:"50%",cy:"50%",rx:"50%",ry:"50%",clipPath:`url(#ellipseClip-${r})`,className:n.elementBorder})]}),(0,b.jsx)("span",{className:n.text,children:e?.text})]})},defaultSize:{width:160,height:160},getNewOptions:t=>({...t,background:{color:{fixed:Gt}},config:{align:at.Center,valign:st.Middle,color:{fixed:Sr}},placement:{width:t?.placement?.width??160,height:t?.placement?.height??138,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config,r={text:n?.text?t.getText(n.text).value():"",field:n?.text?.field,align:n?.align??at.Center,valign:n?.valign??st.Middle,size:n?.size};n?.color&&(r.color=t.getColor(n.color).value());const{background:i,border:a}=e;return r.backgroundColor=i?.color?t.getColor(i.color).value():Gt,r.borderColor=a?.color?t.getColor(a.color).value():Gt,r.borderWidth=a?.width??0,r.backgroundImage=i?.image?t.getResource(i.image).value():void 0,r},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.ellipse-item.category-ellipse","Ellipse")];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:(0,k.t)("canvas.ellipse-item.name-text","Text"),editor:ln.h}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:(0,k.t)("canvas.ellipse-item.name-text-color","Text color"),editor:re.N,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:(0,k.t)("canvas.ellipse-item.name-align-text","Align text"),settings:{options:[{value:at.Left,label:(0,k.t)("canvas.ellipse-item.label.left","Left")},{value:at.Center,label:(0,k.t)("canvas.ellipse-item.label.center","Center")},{value:at.Right,label:(0,k.t)("canvas.ellipse-item.label.right","Right")}]},defaultValue:at.Left}).addRadio({category:e,path:"config.valign",name:(0,k.t)("canvas.ellipse-item.name-vertical-align","Vertical align"),settings:{options:[{value:st.Top,label:(0,k.t)("canvas.ellipse-item.label.top","Top")},{value:st.Middle,label:(0,k.t)("canvas.ellipse-item.label.middle","Middle")},{value:st.Bottom,label:(0,k.t)("canvas.ellipse-item.label.bottom","Bottom")}]},defaultValue:st.Middle}).addNumberInput({category:e,path:"config.size",name:(0,k.t)("canvas.ellipse-item.name-text-size","Text size"),settings:{placeholder:(0,k.t)("canvas.ellipse-item.placeholder.auto","Auto")}})},customConnectionAnchors:[{x:-1,y:0},{x:-.7,y:.7},{x:0,y:1},{x:.7,y:.7},{x:1,y:0},{x:.7,y:-.7},{x:0,y:-1},{x:-.7,y:-.7}]},Dv=(t,e)=>{const n=e?.valign===st.Middle?"50%":e?.valign===st.Top?"10%":"90%",r=e?.align===at.Center?"50%":e?.align===at.Left?"10%":"90%",i=`translate(${e?.align===at.Center?"-50%":e?.align===at.Left?"10%":"-90%"}, ${e?.valign===st.Middle?"-50%":e?.valign===st.Top?"10%":"-90%"})`;return{container:(0,Z.css)({height:"100%",width:"100%"}),text:(0,Z.css)({position:"absolute",top:n,left:r,transform:i,fontSize:`${e?.size}px`,color:e?.color}),elementBorder:(0,Z.css)({fill:"none",stroke:e?.borderColor??"none",strokeWidth:e?.borderWidth??0,strokeLinejoin:"round"})}};var Tv=z(30868),Rl=z(44798),Mv=z(20012);const kv=(0,Z.css)({path:{vectorEffect:"non-scaling-stroke"}});function Rv(t){const{data:e}=t;if(!e?.path)return null;const n={fill:e?.fill,stroke:e?.strokeColor,strokeWidth:e?.stroke,height:"100%",width:"100%"};return(0,b.jsx)(Tv.y,{src:e.path,style:n,className:n.strokeWidth?kv:void 0})}const Pv={id:"icon",name:"Icon",description:"SVG Icon display",display:Rv,getNewOptions:t=>({...t,config:{path:{mode:Xt.q_.Fixed,fixed:"img/icons/unicons/question-circle.svg"},fill:{fixed:Gt}},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top??100,left:t?.placement?.left??100,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config;let r;n?.path&&(r=t.getResource(n.path).value()),(!r||!(0,Zt.isString)(r))&&(r=(0,Mv.D)("img/icons/unicons/question-circle.svg"));const i={path:r,fill:n?.fill?t.getColor(n.fill).value():Gt};return n?.stroke?.width&&n?.stroke.color&&n.stroke.width>0&&(i.stroke=n.stroke?.width,i.strokeColor=t.getColor(n.stroke.color).value()),i},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.icon-item.category-icon","Icon")];t.addCustomEditor({category:e,id:"iconSelector",path:"config.path",name:(0,k.t)("canvas.icon-item.name-svg-path","SVG Path"),editor:Rl.m,settings:{resourceType:"icon",maxFiles:2e3}}).addCustomEditor({category:e,id:"config.fill",path:"config.fill",name:(0,k.t)("canvas.icon-item.name-fill-color","Fill color"),editor:re.N,settings:{},defaultValue:{fixed:"grey"}})}};var Wi=z(24120),Pl=z(62467),qr=z(64400),Al=z(56755),Av=z(48457);const Ov={settings:{}},_v=t=>{const{data:e,isSelected:n,config:r}=t,i=(0,yt.of)(Ol(e)),a=(0,qr.d2)(),o=a.instanceState?.scene;let s;s=a.instanceState?.scene?.data.series;const l=(0,Wi.A)(o?.editModeEnabled??(0,Pl.of)(!1)),c=()=>s&&r.text?.field&&u()?"Field not found":s&&r.text?.field&&!e?.text?"No data":e?.text?e.text:"Double click to set field",u=()=>{const d=(0,Al.BP)(s);return!(0,Al.v3)(r.text?.field,d)};return l&&n?(0,b.jsx)(Lv,{...t}):(0,b.jsx)("div",{className:i.container,children:(0,b.jsx)("span",{className:i.span,children:c()})})},Lv=t=>{let{data:e,config:n}=t;const r=(0,qr.d2)();let i;i=r.instanceState?.scene?.data.series;const a=(0,I.useCallback)(s=>{let l;if(l=r.instanceState?.selected[0],l){const c=l.options;l.onChange({...c,config:{...c.config,text:{fixed:"",field:s,mode:Xt.RU.Field}},background:{color:{field:s,fixed:c.background?.color?.fixed??""}}});const u=r.instanceState?.scene;u&&(u.editModeEnabled.next(!1),u.updateData(u.data))}},[r.instanceState?.scene,r.instanceState?.selected]),o=(0,yt.of)(Ol(e));return(0,b.jsx)("div",{className:o.inlineEditorContainer,children:i&&(0,b.jsx)(Av.O,{context:{data:i},value:n.text?.field??"",onChange:a,item:Ov})})},Ol=t=>e=>({container:(0,Z.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),inlineEditorContainer:(0,Z.css)({height:"100%",width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1)}),span:(0,Z.css)({display:"table-cell",verticalAlign:t?.valign,textAlign:t?.align,fontSize:`${t?.size}px`,color:t?.color})}),Jr={id:"metric-value",name:"Metric Value",description:"Display a field value",display:_v,hasEditMode:!0,defaultSize:{width:260,height:50},getNewOptions:t=>({...t,config:{align:at.Center,valign:st.Middle,color:{fixed:Sr},text:{mode:Xt.RU.Field,fixed:"",field:""},size:20},background:{color:{fixed:Gt}},placement:{width:t?.placement?.width,height:t?.placement?.height,top:t?.placement?.top??100,left:t?.placement?.left??100,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config,r={text:n?.text?t.getText(n.text).value():"",field:n?.text?.field,align:n?.align??at.Center,valign:n?.valign??st.Middle,size:n?.size};return n?.color&&(r.color=t.getColor(n.color).value()),r},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.category-metric-value","Metric value")];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:(0,k.t)("canvas.name-text","Text"),editor:ln.h}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:(0,k.t)("canvas.name-color","Text color"),editor:re.N,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:(0,k.t)("canvas.name-align-text","Align text"),settings:{options:[{value:at.Left,label:(0,k.t)("canvas.metric-value-item.label.left","Left")},{value:at.Center,label:(0,k.t)("canvas.metric-value-item.label.center","Center")},{value:at.Right,label:(0,k.t)("canvas.metric-value-item.label.right","Right")}]},defaultValue:at.Left}).addRadio({category:e,path:"config.valign",name:(0,k.t)("canvas.name-vertical-align","Vertical align"),settings:{options:[{value:st.Top,label:(0,k.t)("canvas.metric-value-item.label.top","Top")},{value:st.Middle,label:(0,k.t)("canvas.metric-value-item.label.middle","Middle")},{value:st.Bottom,label:(0,k.t)("canvas.metric-value-item.label.bottom","Bottom")}]},defaultValue:st.Middle}).addNumberInput({category:e,path:"config.size",name:(0,k.t)("canvas.name-text-size","Text size"),settings:{placeholder:(0,k.t)("canvas.metric-value-item.placeholder.auto","Auto")}})}},Nv={id:"parallelogram",name:"Parallelogram",description:"Parallelogram",display:t=>{const{data:e}=t,n=zv(Bt.$W.theme2,e),r=(0,Fi.A)();return(0,b.jsxs)("div",{className:n.container,children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 250 150",width:"100%",height:"100%",preserveAspectRatio:"none",children:[(0,b.jsxs)("defs",{children:[(0,b.jsx)("pattern",{id:`image-${r}`,patternUnits:"userSpaceOnUse",width:"250",height:"150",children:(0,b.jsx)("image",{xlinkHref:e?.backgroundImage,x:"-50",y:"-50",width:"350",height:"200"})}),(0,b.jsx)("clipPath",{id:`parallelogramClip-${r}`,children:(0,b.jsx)("polygon",{points:"0,150 50,0 250,0 200,150"})})]}),(0,b.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",clipPath:`url(#parallelogramClip-${r})`,style:{fill:"none"}}),(0,b.jsx)("polygon",{points:"0,150 50,0 250,0 200,150",style:{fill:e?.backgroundImage?`url(#image-${r})`:e?.backgroundColor}}),(0,b.jsx)("polygon",{points:"0,150 50,0 250,0 200,150",clipPath:`url(#parallelogramClip-${r})`,className:n.elementBorder})]}),(0,b.jsx)("span",{className:n.text,children:e?.text})]})},defaultSize:{width:250,height:150},getNewOptions:t=>({...t,background:{color:{fixed:Gt}},config:{align:at.Center,valign:st.Middle,color:{fixed:Sr}},placement:{width:t?.placement?.width??250,height:t?.placement?.height??150,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config,r={text:n?.text?t.getText(n.text).value():"",field:n?.text?.field,align:n?.align??at.Center,valign:n?.valign??st.Middle,size:n?.size};n?.color&&(r.color=t.getColor(n.color).value());const{background:i,border:a}=e;return r.backgroundColor=i?.color?t.getColor(i.color).value():Gt,r.borderColor=a?.color?t.getColor(a.color).value():Gt,r.borderWidth=a?.width??0,r.backgroundImage=i?.image?t.getResource(i.image).value():void 0,r},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.parallelogram-item.category-parallelogram","Parallelogram")];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:(0,k.t)("canvas.parallelogram-item.name-text","Text"),editor:ln.h}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:(0,k.t)("canvas.parallelogram-item.name-text-color","Text color"),editor:re.N,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:(0,k.t)("canvas.parallelogram-item.name-align-text","Align text"),settings:{options:[{value:at.Left,label:(0,k.t)("canvas.parallelogram-item.label.left","Left")},{value:at.Center,label:(0,k.t)("canvas.parallelogram-item.label.center","Center")},{value:at.Right,label:(0,k.t)("canvas.parallelogram-item.label.right","Right")}]},defaultValue:at.Left}).addRadio({category:e,path:"config.valign",name:(0,k.t)("canvas.parallelogram-item.name-vertical-align","Vertical align"),settings:{options:[{value:st.Top,label:(0,k.t)("canvas.parallelogram-item.label.top","Top")},{value:st.Middle,label:(0,k.t)("canvas.parallelogram-item.label.middle","Middle")},{value:st.Bottom,label:(0,k.t)("canvas.parallelogram-item.label.bottom","Bottom")}]},defaultValue:st.Middle}).addNumberInput({category:e,path:"config.size",name:(0,k.t)("canvas.parallelogram-item.name-text-size","Text size"),settings:{placeholder:(0,k.t)("canvas.parallelogram-item.placeholder.auto","Auto")}})},customConnectionAnchors:[{x:-.6,y:1},{x:-.1,y:1},{x:.5,y:1},{x:1,y:1},{x:.925,y:.6},{x:.84,y:.2},{x:.76,y:-.2},{x:.675,y:-.6},{x:-.5,y:-1},{x:.1,y:-1},{x:.6,y:-1},{x:-1,y:-1},{x:-.925,y:-.6},{x:-.84,y:-.2},{x:-.76,y:.2},{x:-.675,y:.6}]},zv=(t,e)=>{const n=e?.valign===st.Middle?"50%":e?.valign===st.Top?"10%":"90%",r=e?.align===at.Center?"50%":e?.align===at.Left?"10%":"90%",i=`translate(${e?.align===at.Center?"-50%":e?.align===at.Left?"10%":"-90%"}, ${e?.valign===st.Middle?"-50%":e?.valign===st.Top?"10%":"-90%"})`;return{container:(0,Z.css)({height:"100%",width:"100%"}),text:(0,Z.css)({position:"absolute",top:n,left:r,transform:i,fontSize:`${e?.size}px`,color:e?.color}),elementBorder:(0,Z.css)({fill:"none",stroke:e?.borderColor??"none",strokeWidth:e?.borderWidth??0,strokeLinejoin:"round"})}};var Iv=z(65240);class Bv extends I.PureComponent{render(){const{data:e}=this.props,n=jv(Bt.$W.theme2,e);return(0,b.jsx)("div",{className:n.container,children:(0,b.jsx)("span",{className:n.span,children:e?.text})})}}const jv=(0,Iv.N)((t,e)=>({container:(0,Z.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),span:(0,Z.css)({display:"table-cell",verticalAlign:e?.valign,textAlign:e?.align,fontSize:`${e?.size}px`,color:e?.color})})),Gv={id:"rectangle",name:"Rectangle",description:"Rectangle",display:Bv,defaultSize:{width:240,height:160},getNewOptions:t=>({...t,config:{align:at.Center,valign:st.Middle,color:{fixed:Sr}},background:{color:{fixed:Gt}},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config,r={text:n?.text?t.getText(n.text).value():"",field:n?.text?.field,align:n?.align??at.Center,valign:n?.valign??st.Middle,size:n?.size};return n?.color&&(r.color=t.getColor(n.color).value()),r},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.rectangle-item.category-rectangle","Rectangle")];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:(0,k.t)("canvas.rectangle-item.name-text","Text"),editor:ln.h}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:(0,k.t)("canvas.rectangle-item.name-text-color","Text color"),editor:re.N,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:(0,k.t)("canvas.rectangle-item.name-align-text","Align text"),settings:{options:[{value:at.Left,label:(0,k.t)("canvas.rectangle-item.label.left","Left")},{value:at.Center,label:(0,k.t)("canvas.rectangle-item.label.center","Center")},{value:at.Right,label:(0,k.t)("canvas.rectangle-item.label.right","Right")}]},defaultValue:at.Left}).addRadio({category:e,path:"config.valign",name:(0,k.t)("canvas.rectangle-item.name-vertical-align","Vertical align"),settings:{options:[{value:st.Top,label:(0,k.t)("canvas.rectangle-item.label.top","Top")},{value:st.Middle,label:(0,k.t)("canvas.rectangle-item.label.middle","Middle")},{value:st.Bottom,label:(0,k.t)("canvas.rectangle-item.label.bottom","Bottom")}]},defaultValue:st.Middle}).addNumberInput({category:e,path:"config.size",name:(0,k.t)("canvas.rectangle-item.name-text-size","Text size"),settings:{placeholder:(0,k.t)("canvas.rectangle-item.placeholder.auto","Auto")}})}},Fv=t=>{const e=(0,yt.of)(Ki(t));return(0,b.jsxs)("g",{className:e.outline,children:[(0,b.jsxs)("g",{className:e.server,children:[(0,b.jsx)("path",{d:"m2.6953 37.5v20.883c0 7.6725 15.592 13.922 34.805 13.922s34.805-6.2493 34.805-13.922v-20.883"}),(0,b.jsx)("path",{d:"m2.6953 16.617v20.883c0 7.7035 15.592 13.922 34.805 13.922s34.805-6.2184 34.805-13.922v-20.883"}),(0,b.jsx)("path",{d:"m37.5 30.539c19.212 0 34.805-6.2185 34.805-13.922 0-7.7034-15.592-13.922-34.805-13.922s-34.805 6.2184-34.805 13.922c0 7.7035 15.592 13.922 34.805 13.922z"})]}),(0,b.jsxs)("g",{className:e.circleBack,children:[(0,b.jsx)("path",{transform:"matrix(2.7868 0 0 2.7868 -132.86 -110.58)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{transform:"matrix(2.7868 0 0 2.7868 -122.04 -111.7)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{transform:"matrix(2.7868 0 0 2.7868 -111.21 -114.77)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})]}),(0,b.jsxs)("g",{className:e.circle,children:[(0,b.jsx)("path",{transform:"matrix(1.4922 0 0 1.4922 -52.337 -30.65)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{transform:"matrix(1.4922 0 0 1.4922 -41.518 -31.769)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{transform:"matrix(1.4922 0 0 1.4922 -30.688 -34.842)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})]})]})},Wv=t=>{const e=(0,yt.of)(Ki(t));return(0,b.jsx)("g",{children:(0,b.jsxs)("g",{className:e.outline,transform:"matrix(1.01 0 0 1.01 -.375 -.375)",children:[(0,b.jsxs)("g",{className:e.server,children:[(0,b.jsx)("path",{d:"m3.2812 55.659 9.125-52.377h50.188l9.125 52.377"}),(0,b.jsx)("path",{d:"m3.2812 56.328c0-2.5246 2.0379-4.5625 4.5625-4.5625h59.313c2.5245 0 4.5625 2.0379 4.5625 4.5625v10.828c0 2.5245-2.038 4.5625-4.5625 4.5625h-59.313c-2.5246 0-4.5625-2.038-4.5625-4.5625z"})]}),(0,b.jsx)("path",{d:"m12.406 61.742h30.69"}),(0,b.jsx)("path",{d:"m52.8 51.765v19.953"}),(0,b.jsx)("path",{className:e.circleBack,transform:"matrix(2.7592 0 0 2.7592 -109.42 -108.61)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{className:e.circle,transform:"matrix(1.4775 0 0 1.4775 -29.697 -29.479)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})]})})},Kv=t=>{const e=(0,yt.of)(Ki(t));return(0,b.jsxs)("g",{className:e.outline,transform:"translate(.5 .49865)",children:[(0,b.jsxs)("g",{className:e.server,children:[(0,b.jsx)("path",{d:"m3.4834 21.768 8.0783-19.456h50.875l8.0784 19.456"}),(0,b.jsx)("path",{d:"m2.3125 24.852c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),(0,b.jsx)("path",{d:"m2.3125 42.031c0-2.5592 2.0658-4.6251 4.625-4.6251h60.125c2.5592 0 4.625 2.0659 4.625 4.6251v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),(0,b.jsx)("path",{d:"m2.3125 59.172c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})]}),(0,b.jsx)("path",{d:"m11.562 28.797h31.111"}),(0,b.jsx)("path",{d:"m52.508 20.227v17.143"}),(0,b.jsx)("path",{d:"m11.562 63.117h31.111"}),(0,b.jsx)("path",{d:"m52.508 54.547v17.143"}),(0,b.jsx)("path",{d:"m11.562 45.977h31.111"}),(0,b.jsx)("path",{d:"m52.508 37.406v17.143"}),(0,b.jsxs)("g",{className:e.circleBack,children:[(0,b.jsx)("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -143.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -126.14)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -108.86)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})]}),(0,b.jsxs)("g",{className:e.circle,children:[(0,b.jsx)("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -63.277)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -46.209)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -28.93)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})]})]})},Vv=t=>{const e=(0,yt.of)(Ki(t));return(0,b.jsxs)("g",{className:e.outline,children:[(0,b.jsxs)("g",{className:e.server,children:[(0,b.jsx)("path",{d:"m5.3125 9.6562c0-3.5621 2.8754-6.4375 6.4375-6.4375h51.5c3.5621 0 6.4375 2.8754 6.4375 6.4375v28.625c0 3.5621-2.8754 6.4375-6.4375 6.4375h-51.5c-3.5621 0-6.4375-2.8754-6.4375-6.4375z"}),(0,b.jsx)("path",{d:"m2.8125 59.859c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})]}),(0,b.jsx)("path",{d:"m37.5 46.719v2.875"}),(0,b.jsx)("path",{d:"m24.625 51.343h25.75"}),(0,b.jsx)("path",{d:"m12.062 63.804h31.111"}),(0,b.jsx)("path",{d:"m53.008 55.234v17.143"}),(0,b.jsx)("path",{className:e.circleBack,transform:"matrix(2.7868 0 0 2.7868 -110.81 -108.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),(0,b.jsx)("path",{className:e.circle,transform:"matrix(1.4922 0 0 1.4922 -30.294 -28.27)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})]})};var Yv=(t=>(t.Single="Single",t.Stack="Stack",t.Database="Database",t.Terminal="Terminal",t))(Yv||{});const _l=Bt.Ay.theme2.colors.text.primary,Xv={id:"server",name:"Server",description:"Basic server with status",display:({data:t})=>t?(0,b.jsx)("svg",{viewBox:"0 0 75 75",children:t.type==="Single"?(0,b.jsx)(Wv,{...t}):t.type==="Stack"?(0,b.jsx)(Kv,{...t}):t.type==="Database"?(0,b.jsx)(Fv,{...t}):t.type==="Terminal"?(0,b.jsx)(Vv,{...t}):null}):null,defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},config:{type:"Single"},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config;return{blinkRate:n?.blinkRate?t.getScalar(n.blinkRate).value():0,statusColor:n?.statusColor?t.getColor(n.statusColor).value():"transparent",bulbColor:n?.bulbColor?t.getColor(n.bulbColor).value():"green",type:n?.type??"Single"}},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.server-item.category-server","Server")];t.addSelect({category:e,path:"config.type",name:(0,k.t)("canvas.server-item.name-type","Type"),settings:{options:[{value:"Single",label:(0,k.t)("canvas.server-item.type-options.label-single","Single")},{value:"Stack",label:(0,k.t)("canvas.server-item.type-options.label-stack","Stack")},{value:"Database",label:(0,k.t)("canvas.server-item.type-options.label-database","Database")},{value:"Terminal",label:(0,k.t)("canvas.server-item.type-options.label-terminal","Terminal")}]},defaultValue:"Single"}).addCustomEditor({category:e,id:"statusColor",path:"config.statusColor",name:(0,k.t)("canvas.server-item.name-status-color","Status color"),editor:re.N,settings:{},defaultValue:{fixed:"transparent"}}).addCustomEditor({category:e,id:"bulbColor",path:"config.bulbColor",name:(0,k.t)("canvas.server-item.name-bulb-color","Bulb color"),editor:re.N,settings:{},defaultValue:{fixed:"green"}}).addCustomEditor({category:e,id:"blinkRate",path:"config.blinkRate",name:(0,k.t)("canvas.server-item.name-blink-rate","Blink rate [hz] (0 = off)"),editor:Mn.A,settings:{min:0,max:100}})}},Ki=t=>e=>({bulb:(0,Z.css)({"@keyframes blink":{"0%":{fillOpacity:0},"50%":{fillOpacity:1},"100%":{fillOpacity:0}}}),server:(0,Z.css)({fill:t?.statusColor??"transparent"}),circle:(0,Z.css)({[e.transitions.handleMotion("no-preference","reduce")]:{animation:`blink ${t?.blinkRate?1/t.blinkRate:0}s infinite step-end`},fill:t?.bulbColor,stroke:"none"}),circleBack:(0,Z.css)({fill:_l,stroke:"none",opacity:1}),outline:(0,Z.css)({stroke:_l,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4px"})}),Hv=t=>{const{data:e,isSelected:n}=t,r=(0,yt.of)(Ll(e)),a=(0,qr.d2)().instanceState?.scene;return(0,Wi.A)(a?.editModeEnabled??(0,Pl.of)(!1))&&n?(0,b.jsx)($v,{...t}):(0,b.jsx)("div",{className:r.container,children:(0,b.jsx)("span",{className:r.span,children:e?.text?e.text:(0,k.t)("canvas.text-display.double-click-to-set","Double click to set text")})})},$v=t=>{let{data:e,config:n}=t;const r=(0,qr.d2)();let i;i=r.instanceState?.scene?.data.series;const a=(0,I.useRef)(n.text?.fixed??"");(0,I.useEffect)(()=>()=>{l(a.current)});const o=u=>{if(u.key==="Enter"){u.preventDefault();const d=r.instanceState?.scene;d&&d.editModeEnabled.next(!1)}},s=u=>{a.current=u.currentTarget.value},l=(0,I.useCallback)(u=>{let d;if(d=r.instanceState?.selected[0],d){const f=d.options;d.onChange({...f,config:{...f.config,text:{...d.options.config.text,fixed:u}}});const v=r.instanceState?.scene;v&&v.updateData(v.data)}},[r.instanceState?.scene,r.instanceState?.selected]),c=(0,yt.of)(Ll(e));return(0,b.jsx)("div",{className:c.inlineEditorContainer,children:i&&(0,b.jsx)(Tn.p,{defaultValue:n.text?.fixed??"",onKeyDown:o,onKeyUp:s,autoFocus:!0})})},Ll=t=>e=>({container:(0,Z.css)({position:"absolute",height:"100%",width:"100%",display:"table"}),inlineEditorContainer:(0,Z.css)({height:"100%",width:"100%",display:"flex",alignItems:"center",padding:e.spacing(1)}),span:(0,Z.css)({display:"table-cell",verticalAlign:t?.valign,textAlign:t?.align,fontSize:`${t?.size}px`,color:t?.color})}),Uv={id:"text",name:"Text",description:"Display text",display:Hv,hasEditMode:!0,defaultSize:{width:100,height:50},getNewOptions:t=>({...t,config:{align:at.Center,valign:st.Middle,color:{fixed:fv},size:16},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config,r={text:n?.text?t.getText(n.text).value():"",field:n?.text?.field,align:n?.align??at.Center,valign:n?.valign??st.Middle,size:n?.size};return n?.color&&(r.color=t.getColor(n.color).value()),r},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.text-item.category-text","Text")];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:(0,k.t)("canvas.text-item.name-text","Text"),editor:ln.h}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:(0,k.t)("canvas.text-item.name-text-color","Text color"),editor:re.N,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:(0,k.t)("canvas.text-item.name-align-text","Align text"),settings:{options:[{value:at.Left,label:(0,k.t)("canvas.text-item.label.left","Left")},{value:at.Center,label:(0,k.t)("canvas.text-item.label.center","Center")},{value:at.Right,label:(0,k.t)("canvas.text-item.label.right","Right")}]},defaultValue:at.Left}).addRadio({category:e,path:"config.valign",name:(0,k.t)("canvas.text-item.name-vertical-align","Vertical align"),settings:{options:[{value:st.Top,label:(0,k.t)("canvas.text-item.label.top","Top")},{value:st.Middle,label:(0,k.t)("canvas.text-item.label.middle","Middle")},{value:st.Bottom,label:(0,k.t)("canvas.text-item.label.bottom","Bottom")}]},defaultValue:st.Middle}).addNumberInput({category:e,path:"config.size",name:(0,k.t)("canvas.text-item.name-text-size","Text size"),settings:{placeholder:(0,k.t)("canvas.text-item.placeholder.auto","Auto")}})}},Zv={id:"triangle",name:"Triangle",description:"Triangle",display:t=>{const{data:e}=t,n=Qv(Bt.$W.theme2,e),r=(0,Fi.A)();return(0,b.jsxs)("div",{className:n.container,children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"100%",height:"100%",preserveAspectRatio:"none",children:[(0,b.jsxs)("defs",{children:[(0,b.jsx)("pattern",{id:`image-${r}`,patternUnits:"userSpaceOnUse",width:"200",height:"200",children:(0,b.jsx)("image",{xlinkHref:e?.backgroundImage,x:"-50",y:"-50",width:"300",height:"300"})}),(0,b.jsx)("clipPath",{id:`triangleClip-${r}`,children:(0,b.jsx)("polygon",{points:"100,0 200,200 0,200"})})]}),(0,b.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",clipPath:`url(#triangleClip-${r})`,style:{fill:"none"}}),(0,b.jsx)("polygon",{points:"100,0 200,200 0,200",style:{fill:e?.backgroundImage?`url(#image-${r})`:e?.backgroundColor}}),(0,b.jsx)("polygon",{points:"100,0 200,200 0,200",clipPath:`url(#triangleClip-${r})`,className:n.elementBorder})]}),(0,b.jsx)("span",{className:n.text,children:e?.text})]})},defaultSize:{width:160,height:138},getNewOptions:t=>({...t,background:{color:{fixed:Gt}},config:{align:at.Center,valign:st.Middle,color:{fixed:Sr}},placement:{width:t?.placement?.width??160,height:t?.placement?.height??138,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config,r={text:n?.text?t.getText(n.text).value():"",field:n?.text?.field,align:n?.align??at.Center,valign:n?.valign??st.Middle,size:n?.size};n?.color&&(r.color=t.getColor(n.color).value());const{background:i,border:a}=e;return r.backgroundColor=i?.color?t.getColor(i.color).value():Gt,r.borderColor=a?.color?t.getColor(a.color).value():Gt,r.borderWidth=a?.width??0,r.backgroundImage=i?.image?t.getResource(i.image).value():void 0,r},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.triangle-item.category-triangle","Triangle")];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:(0,k.t)("canvas.triangle-item.name-text","Text"),editor:ln.h}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:(0,k.t)("canvas.triangle-item.name-text-color","Text color"),editor:re.N,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:(0,k.t)("canvas.triangle-item.name-align-text","Align text"),settings:{options:[{value:at.Left,label:(0,k.t)("canvas.triangle-item.label.left","Left")},{value:at.Center,label:(0,k.t)("canvas.triangle-item.label.center","Center")},{value:at.Right,label:(0,k.t)("canvas.triangle-item.label.right","Right")}]},defaultValue:at.Left}).addRadio({category:e,path:"config.valign",name:(0,k.t)("canvas.triangle-item.name-vertical-align","Vertical align"),settings:{options:[{value:st.Top,label:(0,k.t)("canvas.triangle-item.label.top","Top")},{value:st.Middle,label:(0,k.t)("canvas.triangle-item.label.middle","Middle")},{value:st.Bottom,label:(0,k.t)("canvas.triangle-item.label.bottom","Bottom")}]},defaultValue:st.Middle}).addNumberInput({category:e,path:"config.size",name:(0,k.t)("canvas.triangle-item.name-text-size","Text size"),settings:{placeholder:(0,k.t)("canvas.triangle-item.placeholder.auto","Auto")}})},customConnectionAnchors:[{x:-1,y:-1},{x:-.8,y:-.6},{x:-.6,y:-.2},{x:-.4,y:.2},{x:-.2,y:.6},{x:0,y:1},{x:.2,y:.6},{x:.4,y:.2},{x:.6,y:-.2},{x:.8,y:-.6},{x:1,y:-1},{x:.6,y:-1},{x:.2,y:-1},{x:-.2,y:-1},{x:-.6,y:-1}]},Qv=(t,e)=>{const n=e?.valign===st.Middle?"50%":e?.valign===st.Top?"10%":"90%",r=e?.align===at.Center?"50%":e?.align===at.Left?"10%":"90%",i=`translate(${e?.align===at.Center?"-50%":e?.align===at.Left?"10%":"-90%"}, ${e?.valign===st.Middle?"-50%":e?.valign===st.Top?"10%":"-90%"})`;return{container:(0,Z.css)({height:"100%",width:"100%"}),text:(0,Z.css)({position:"absolute",top:n,left:r,transform:i,fontSize:`${e?.size}px`,color:e?.color}),elementBorder:(0,Z.css)({fill:"none",stroke:e?.borderColor??"none",strokeWidth:e?.borderWidth??0,strokeLinejoin:"round"})}},qv={id:"windTurbine",name:"Wind Turbine",description:"Spinny spinny",display:({data:t})=>{const e=(0,yt.of)(Jv),n=`spin ${t?.rpm?60/Math.abs(t.rpm):0}s linear infinite`;return(0,b.jsxs)("svg",{viewBox:"0 0 189.326 283.989",preserveAspectRatio:"xMidYMid meet",style:{fill:Gt},children:[(0,b.jsxs)("symbol",{id:"blade",children:[(0,b.jsx)("path",{fill:"#e6e6e6",id:"blade-front",d:"M14.6491879,1.85011601 C14.2684455,-0.0535962877 10.7150812,-0.815081206 9.06473318,3.37308585 L0.434338747,70.7658933 L8.93805104,91.9607889 L15.4106729,90.437819 L17.5684455,78.3807425 L14.5218097,1.97679814 L14.6491879,1.85011601 Z"}),(0,b.jsx)("path",{fill:"#d0d6d7",id:"blade-side",d:"M11.0951276,0.581206497 C10.3336427,0.961948956 9.57215777,1.85011601 8.93735499,3.24640371 L0.306960557,70.6392111 L8.81067285,91.8341067 L3.35359629,70.0044084 L11.0951276,0.581206497 Z"})]}),(0,b.jsxs)("g",{children:[(0,b.jsxs)("g",{id:"structure",transform:"translate(58.123, 82.664)",fillRule:"nonzero",children:[(0,b.jsx)("polygon",{id:"tower",fill:"#e6e6e6",points:"33.111,10.984 39.965,10.984 44.28,196.176 28.796,196.176"}),(0,b.jsx)("path",{id:"yaw",fill:"rgba(0,0,0,0.25)",d:"M40.3454756,23.2948956 L40.7262181,34.8445476 C38.8225058,35.0986079 35.7765661,35.0986079 32.349884,34.337123 L32.7306265,23.2955916 L40.3454756,23.2955916 L40.3454756,23.2948956 Z"}),(0,b.jsx)("path",{id:"base",fill:"#d0d6d7",transform:"translate(0 42)",d:"M26.3846868,150.591647 L46.5640371,150.591647 C48.8484919,150.591647 50.7522042,152.49536 50.7522042,154.779814 L50.7522042,158.967981 L22.0691415,158.967981 L22.0691415,154.779814 C22.0691415,152.49536 23.9728538,150.591647 26.2573086,150.591647 L26.3846868,150.591647 Z"}),(0,b.jsx)("circle",{id:"nacelle",fill:"#e6e6e6",cx:"36.54",cy:"12",r:"11.93"}),(0,b.jsx)("circle",{id:"gearbox",fill:"none",stroke:"#d0d6d7",strokeWidth:"2.75",cx:"36.538",cy:"11.999",r:"5.8"})]}),(0,b.jsxs)("g",{className:e.blade,style:{animation:n},children:[(0,b.jsx)("use",{id:"blade1",href:"#blade",x:"83.24",y:"0"}),(0,b.jsx)("use",{id:"blade2",href:"#blade",x:"83.24",y:"0",transform:"rotate(120 94.663 94.663)"}),(0,b.jsx)("use",{id:"blade3",href:"#blade",x:"83.24",y:"0",transform:"rotate(-120 94.663 94.663)"})]})]})]})},defaultSize:{width:100,height:155},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??155,top:t?.placement?.top,left:t?.placement?.left,rotation:t?.placement?.rotation??0},links:t?.links??[]}),prepareData:(t,e)=>{const n=e.config;return{rpm:n?.rpm?t.getScalar(n.rpm).value():0}},registerOptionsUI:t=>{const e=[(0,k.t)("canvas.wind-turbine-item.category-wind-turbine","Wind Turbine")];t.addCustomEditor({category:e,id:"rpm",path:"config.rpm",name:(0,k.t)("canvas.wind-turbine-item.name-rpm","RPM"),editor:Mn.A})}},Jv=t=>({blade:(0,Z.css)({transformOrigin:"94.663px 94.663px",transform:"rotate(15deg)","@keyframes spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}})}),lo={...Jr.getNewOptions(),placement:{...Jr.getNewOptions().placement,...Jr.defaultSize},type:Jr.id,name:"Element 1"},Vi=[Jr,Uv,wv,Gv,Pv,Xv,Zv,gv,Nv],Nl=[hv,qv,Sv,yv,bv],ti=new mt.O(()=>[...Vi,...Nl]);var Ue=z(79609),co=z(95004),tp=z(60519),ep=z(71599),Yi=z(73163);let np=0;const zl=new Set(["parallelogram","triangle","cloud","ellipse"]);class Xi{constructor(e,n,r){this.item=e,this.options=n,this.parent=r,this.UID=np++,this.revId=0,this.sizeStyle={},this.dataStyle={},this.oneClickMode=Ue.yd.Off,this.showConfirmation=!1,this.initElement=o=>{this.div=o,this.applyLayoutStylesToDiv()},this.applyDrag=o=>{const s=this.options.constraint?.horizontal===V.en.Center,l=this.options.constraint?.vertical===V.gR.Center;if((s||l)&&!((this.getScene()?.selecto?.getSelectedTargets().length??0)>1)){const f=this.div?.getBoundingClientRect()?.height??100,v=l?f/4:0;o.target.style.transform=`translate(${o.translate[0]}px, ${o.translate[1]-v}px)`;return}o.target.style.transform=o.transform},this.applyRotate=o=>{const s=o.delta,l=this.options.placement,u=(l.rotation??0)+s;l.rotation=u-Math.floor(u/360)*360,o.target.style.transform=o.transform},this.applyResize=(o,s=1)=>{const l=this.options.placement,c=o.target.style;let u=o.delta[0]/s,d=o.delta[1]/s,f=o.direction[0],v=o.direction[1];if(l.rotation){const h=(l.rotation??0)*Math.PI/180,g=f,m=v;f=Math.sign(g*Math.cos(h)-m*Math.sin(h)),v=Math.sign(g*Math.sin(h)+m*Math.cos(h))}f===1?(l.width=o.width,c.width=`${l.width}px`):f===-1&&(l.left-=u,l.width=o.width,c.left=`${l.left}px`,c.width=`${l.width}px`),v===-1?(l.top-=d,l.height=o.height,c.top=`${l.top}px`,c.height=`${l.height}px`):v===1&&(l.height=o.height,c.height=`${l.height}px`)},this.handleMouseEnter=(o,s)=>{const l=this.getScene();if(!l?.isEditingEnabled&&!l?.tooltip?.isOpen?this.handleTooltip(o):s||l?.connections.handleMouseEnter(o),this.div!=null){if(this.oneClickMode===Ue.yd.Link){const u=this.getPrimaryDataLink();u&&(this.div.style.cursor="pointer",this.div.title=`Navigate to ${u.title===""?"data link":u.title}`)}else if(this.oneClickMode===Ue.yd.Action){const u=this.getPrimaryAction();u&&(this.div.style.cursor="pointer",this.div.title=u.title)}}},this.getPrimaryDataLink=()=>{if(this.getLinks)return this.getLinks({valueRowIndex:Er(this.data.field,this.getScene())}).find(s=>s.oneClick===!0)},this.getPrimaryAction=()=>{const o={valueRowIndex:Er(this.data.field,this.getScene())},s={links:this.options.links??[],actions:this.options.actions??[]},l=this.getScene()?.data?.series;if(l){const c=(0,Yi.Xx)(s.links,s.actions),u={__dataContext:{value:{data:l,field:c,frame:l[0],frameIndex:0}}};return(0,Yi.ko)(l[0],c,u,this.getScene()?.panel.props.replaceVariables,s.actions,o).find(f=>f.oneClick===!0)}},this.handleTooltip=o=>{const s=this.getScene();if(s?.tooltipCallback){const l=this.div?.getBoundingClientRect();s.tooltipCallback({anchorPoint:{x:l?.right??o.pageX,y:l?.top??o.pageY},element:this,isOpen:!1})}},this.handleMouseLeave=o=>{const s=this.getScene();s?.tooltipCallback&&!s?.tooltip?.isOpen&&s.tooltipCallback(void 0),this.oneClickMode!==Ue.yd.Off&&this.div&&(this.div.style.cursor="auto",this.div.title="")},this.onElementClick=o=>{if(this.oneClickMode===Ue.yd.Link){let s=this.getPrimaryDataLink();s&&window.open(s.href,s.target??"_self")}else this.oneClickMode===Ue.yd.Action?(this.showConfirmation=!0,this.forceUpdate()):(this.handleTooltip(o),this.onTooltipCallback())},this.onElementKeyDown=o=>{o.key==="Enter"&&(o.currentTarget instanceof HTMLElement||o.currentTarget instanceof SVGElement)&&this.getScene()?.select({targets:[o.currentTarget]})},this.onTooltipCallback=()=>{const o=this.getScene();o?.tooltipCallback&&o.tooltip?.anchorPoint&&o.tooltipCallback({anchorPoint:{x:o.tooltip.anchorPoint.x,y:o.tooltip.anchorPoint.y},element:this,isOpen:!0})},this.forceUpdate=()=>{const o=this.getScene();o?.actionConfirmationCallback&&o.actionConfirmationCallback()},this.renderActionsConfirmModal=o=>{if(o)return(0,b.jsx)(b.Fragment,{children:this.showConfirmation&&o&&(0,b.jsx)(ep.u,{isOpen:!0,title:(0,k.t)("grafana-ui.action-editor.button.confirm-action","Confirm action"),body:o.confirmation(),confirmText:(0,k.t)("grafana-ui.action-editor.button.confirm","Confirm"),confirmButtonVariant:"primary",onConfirm:()=>{this.showConfirmation=!1,o.onClick(new MouseEvent("click")),this.forceUpdate()},onDismiss:()=>{this.showConfirmation=!1,this.forceUpdate()}})})};const i=`Element ${Date.now()}`;n||(this.options={type:e.id,name:i}),n.constraint=n.constraint??{vertical:V.gR.Top,horizontal:V.en.Left},n.placement=n.placement??{width:100,height:100,top:0,left:0,rotation:0},n.background=n.background??{color:{fixed:"transparent"}},n.border=n.border??{color:{fixed:"dark-green"}};const a=this.getScene();if(!n.name){const o=a?.getNextElementName();n.name=o??i}a?.byName.set(n.name,this)}getScene(){let e=this.parent;for(;e;){if(e.isRoot())return e.scene;e=e.parent}}getName(){return this.options.name}applyLayoutStylesToDiv(e){if(this.isRoot())return;const{constraint:n}=this.options,{vertical:r,horizontal:i}=n??{},a=this.options.placement??{},s={cursor:this.getScene()?.isEditingEnabled?"grab":"auto",pointerEvents:e?"none":"auto",position:"absolute",minWidth:"10px",minHeight:"10px",rotate:`${a.rotation??0}deg`},l=["0px","0px"];switch(r){case V.gR.Top:a.top=a.top??0,a.height=a.height??100,s.top=`${a.top}px`,s.height=`${a.height}px`,delete a.bottom;break;case V.gR.Bottom:a.bottom=a.bottom??0,a.height=a.height??100,s.bottom=`${a.bottom}px`,s.height=`${a.height}px`,delete a.top;break;case V.gR.TopBottom:a.top=a.top??0,a.bottom=a.bottom??0,s.top=`${a.top}px`,s.bottom=`${a.bottom}px`,delete a.height,s.height="";break;case V.gR.Center:a.top=a.top??0,a.height=a.height??100,l[1]="-50%",s.top=`calc(50% - ${a.top}px)`,s.height=`${a.height}px`,delete a.bottom;break;case V.gR.Scale:a.top=a.top??0,a.bottom=a.bottom??0,s.top=`${a.top}%`,s.bottom=`${a.bottom}%`,delete a.height,s.height="";break}switch(i){case V.en.Left:a.left=a.left??0,a.width=a.width??100,s.left=`${a.left}px`,s.width=`${a.width}px`,delete a.right;break;case V.en.Right:a.right=a.right??0,a.width=a.width??100,s.right=`${a.right}px`,s.width=`${a.width}px`,delete a.left;break;case V.en.LeftRight:a.left=a.left??0,a.right=a.right??0,s.left=`${a.left}px`,s.right=`${a.right}px`,delete a.width,s.width="";break;case V.en.Center:a.left=a.left??0,a.width=a.width??100,l[0]="-50%",s.left=`calc(50% - ${a.left}px)`,s.width=`${a.width}px`,delete a.right;break;case V.en.Scale:a.left=a.left??0,a.right=a.right??0,s.left=`${a.left}%`,s.right=`${a.right}%`,delete a.width,s.width="";break}if(s.transform=`translate(${l[0]}, ${l[1]})`,this.options.placement=a,this.sizeStyle=s,this.div){for(const u in this.sizeStyle)this.div.style[u]=this.sizeStyle[u];const c=this.options.type;if(zl.has(c))for(const u in this.dataStyle)this.div.style[u]="";else for(const u in this.dataStyle)this.div.style[u]=this.dataStyle[u]}}setPlacementFromConstraint(e,n,r=1){const{constraint:i}=this.options,{vertical:a,horizontal:o}=i??{};e||(e=this.div&&this.div.getBoundingClientRect());let s=0;n||(n=this.div&&this.div.parentElement?.getBoundingClientRect(),s=this.parent?.isRoot()?0:parseFloat(getComputedStyle(this.div?.parentElement).borderWidth));let l=0,c=0;if(this.options.placement?.rotation&&this.options.placement?.width&&this.options.placement?.height){const m=this.options.placement.rotation,y=Math.PI/180*m;let x=y;switch(!0){case(m>=0&&m<90):break;case(m>=90&&m<180):x=Math.PI-y;break;case(m>=180&&m<270):x=Math.PI+y;break;case m>=270:x=-y;break}const S=(w,E)=>w/2*Math.sin(x)+E/2*(Math.cos(x)-1);l=S(this.options.placement.width,this.options.placement.height),c=S(this.options.placement.height,this.options.placement.width)}const u=e&&n?Math.round(e.top-n.top-s+l)/r:0,d=e&&n?Math.round(n.bottom-s-e.bottom+l)/r:0,f=e&&n?Math.round(e.left-n.left-s+c)/r:0,v=e&&n?Math.round(n.right-s-e.right+c)/r:0,p={},h=(e?.width??100)/r,g=(e?.height??100)/r;switch(a){case V.gR.Top:p.top=u,p.height=g;break;case V.gR.Bottom:p.bottom=d,p.height=g;break;case V.gR.TopBottom:p.top=u,p.bottom=d;break;case V.gR.Center:const m=e?u+g/2:0,x=(n?n.height/2:0)-m;p.top=x,p.height=g;break;case V.gR.Scale:p.top=u/(n?.height??g)*100*r,p.bottom=d/(n?.height??g)*100*r;break}switch(o){case V.en.Left:p.left=f,p.width=h;break;case V.en.Right:p.right=v,p.width=h;break;case V.en.LeftRight:p.left=f,p.right=v;break;case V.en.Center:const m=e?f+h/2:0,x=(n?n.width/2:0)-m;p.left=x,p.width=h;break;case V.en.Scale:p.left=f/(n?.width??h)*100*r,p.right=v/(n?.width??h)*100*r;break}this.options.placement?.rotation&&(p.rotation=this.options.placement.rotation,p.width=this.options.placement.width,p.height=this.options.placement.height),this.options.placement=p,this.applyLayoutStylesToDiv(),this.revId++,this.getScene()?.save()}updateData(e){this.item.prepareData&&(this.data=this.item.prepareData(e,this.options),this.revId++);const n=this.getScene(),r=n?.data?.series;if(this.options.links=this.options.links?.filter(s=>s!==null),this.options.links?.some(s=>s.oneClick===!0)?this.oneClickMode=Ue.yd.Link:this.options.actions?.some(s=>s.oneClick===!0)&&(this.oneClickMode=Ue.yd.Action),r){const s={name:"Default field",type:co.PU.string,config:{links:this.options.links??[],actions:this.options.actions??[]},values:[]};this.getLinks=(0,tp._M)(r[0],s,{__dataContext:{value:{data:r,field:s,frame:r[0],frameIndex:0}}},n?.panel.props.replaceVariables)}const{background:i,border:a}=this.options,o={};if(i){if(i.color){const s=e.getColor(i.color);o.backgroundColor=s.value()}if(i.image){const s=e.getResource(i.image);if(s){const l=s.value();if(l)switch(o.backgroundImage=`url("${l}")`,i.size??V.xp.Contain){case V.xp.Contain:o.backgroundSize="contain",o.backgroundRepeat="no-repeat";break;case V.xp.Cover:o.backgroundSize="cover",o.backgroundRepeat="no-repeat";break;case V.xp.Original:o.backgroundRepeat="no-repeat";break;case V.xp.Tile:o.backgroundRepeat="repeat";break;case V.xp.Fill:o.backgroundSize="100% 100%";break}else o.backgroundImage=""}}}if(a&&a.color&&a.width!==void 0){const s=e.getColor(a.color);o.borderWidth=`${a.width}px`,o.borderStyle="solid",o.borderColor=s.value(),o.backgroundImage&&(o.backgroundOrigin="padding-box")}a&&a.radius!==void 0&&(o.borderRadius=`${a.radius}px`),this.dataStyle=o,this.applyLayoutStylesToDiv()}isRoot(){return!1}visit(e){e(this)}onChange(e){this.item.id!==e.type&&(this.item=ti.getIfExists(e.type)??pt);const n=this.options.name,r=e.name;this.revId++,this.options={...e};let i=this.parent;for(;i;){if(i.isRoot()){i.scene.save();break}i.revId++,i=i.parent}const a=this.getScene();n!==r&&a&&(jl(this,a.byName)&&Fl(this,a).forEach(o=>{o.info.targetName=r}),a.byName.delete(n),a.byName.set(r,this))}getSaveModel(){return{...this.options}}render(){const{item:e,div:n}=this,r=this.getScene(),i=n&&r&&r.selecto&&r.selecto.getSelectedTargets().includes(n);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{ref:this.initElement,onMouseEnter:a=>this.handleMouseEnter(a,i),onMouseLeave:r?.isEditingEnabled?void 0:this.handleMouseLeave,onClick:r?.isEditingEnabled?void 0:this.onElementClick,onKeyDown:r?.isEditingEnabled?void 0:this.onElementKeyDown,role:"button",tabIndex:0,children:(0,b.jsx)(e.display,{config:this.options.config,data:this.data,isSelected:i},`${this.UID}/${this.revId}`)},this.UID),this.showConfirmation&&this.renderActionsConfirmModal(this.getPrimaryAction())]})}}function Il(t,e){try{let n={targets:[]};if(e instanceof Be){const r=[];r.push(e?.div),n.targets=r,n.frame=e,t.select(n)}else t.currentLayer=e.parent,n.targets=[e?.div],t.select(n)}catch{ne.A.emit(Xe.r1.alertError,["Unable to select element, try selecting element in panel instead"])}}function Hi(t,e){return Bl(t?[...Vi,...Nl]:[...Vi],e)}function Bl(t,e){const n={options:[],current:[]},r=[];for(const i of t){const a={label:i.name,value:i.id,description:i.description};if(i.state===jt.pn.alpha){if(!Bt.yn)continue;a.label=`${i.name} (Alpha)`,r.push(a)}else n.options.push(a);i.id===e&&n.current.push(a)}for(const i of r)n.options.push(i);return n}function uo(t,e,n){const r=ti.getIfExists(t.value)??pt,i={...r.getNewOptions(),type:r.id,name:""};if(n&&(i.placement={...i.placement,top:n.y,left:n.x}),r.defaultSize&&(i.placement={...i.placement,...r.defaultSize}),e){const a=new Xi(r,i,e);a.updateData(e.scene.context),e.elements.push(a),e.scene.save(),e.reinitializeMoveable(),setTimeout(()=>Il(e.scene,a))}}function rp(t){return t.options.connections&&t.options.connections.length>0}function jl(t,e){return Gl(e).some(r=>r.target===t)}function Gl(t){const e=[];for(let n of t.values())n.options.connections&&n.options.connections.forEach((r,i)=>{(0,Zt.isString)(r.color)&&(r.color={fixed:r.color}),(0,Zt.isNumber)(r.size)&&(r.size={fixed:2,min:1,max:10});const a=r.targetName?t.get(r.targetName):n.parent;a&&e.push({index:i,source:n,target:a,info:r,vertices:r.vertices??void 0,sourceOriginal:r.sourceOriginal??void 0,targetOriginal:r.targetOriginal??void 0})});return e}function Fl(t,e){return e.connections.state.filter(n=>n.target===t)}function ip(t,e){Fl(t,e).forEach(r=>{const a=(r.source.options.connections?.splice(0)??[]).filter(o=>o.targetName!==t.getName());r.source.onChange({...r.source.options,connections:a})}),e.connections.updateState()}const fo=(t,e,n,r,i)=>{const a=t.left-e.left+t.width/2,o=t.top-e.top+t.height/2,s=(a+n.source.x*t.width/2)/i,l=(o-n.source.y*t.height/2)/i;let c,u;const d=r.div?.getBoundingClientRect();if(n.targetName&&d){const f=d.left-e.left+d.width/2,v=d.top-e.top+d.height/2;c=f+n.target.x*d.width/2,u=v-n.target.y*d.height/2}else{const f=e.width/2,v=e.height/2;c=f+n.target.x*e.width/2,u=v-n.target.y*e.height/2}return c/=i,u/=i,c-s===0&&(c+=1),u-l===0&&(u+=1),{x1:s,y1:l,x2:c,y2:u}},$i=(t,e,n,r)=>({x:(t+n)/2,y:(e+r)/2}),Lb=(t,e,n,r,i,a,o,s)=>({x:i*o+t,y:a*s+e}),kn=(t,e,n,r)=>Math.atan2(r-e,n-t),Ui=(t,e,n,r)=>Math.sqrt((n-t)**2+(r-e)**2),Er=(t,e)=>{if(t){const i=e.data?.series[0]?.fields.find(a=>a.name===t)?.values;return i?i.length-1:0}return 0},ap=(t,e,n,r)=>{const i=Bt.$W.theme2.colors.text.primary,a=Er(t.size?.field,e),o=t.color?e.context.getColor(t.color).value():i,s=t.size?e.context.getScale(t.size).get(a):n,l=t.radius?e.context.getScale(t.radius).get(a):0,c=t.direction?t.direction:r,u=op(t.lineStyle?.style),d=t.lineStyle?.animate;return{strokeColor:o,strokeWidth:s,strokeRadius:l,arrowDirection:c,lineStyle:u,shouldAnimate:d}},op=t=>{switch(t){case ue.Dashed:return mn.Dashed;case ue.Dotted:return mn.Dotted;default:return mn.Solid}},qn=t=>Bt.$W.featureToggles.canvasPanelPanZoom?t.transformComponentRef?.current?.instance.contentComponent?.getBoundingClientRect():t.div?.getBoundingClientRect(),sp=t=>{if(Bt.$W.featureToggles.canvasPanelPanZoom)return t.transformComponentRef?.current?.instance},lp=t=>Bt.$W.featureToggles.canvasPanelPanZoom?t.transformComponentRef?.current?.instance.contentComponent:t.div;function cp(t,e){const n=new Set,r=e.config??{};return t.forEach(i=>{i.fields.forEach(a=>{switch((0,qt.Ct)(a,i,t)){case e.background?.color?.field:case e.background?.image?.field:case e.border?.color?.field:case r.text?.field:case r.color?.field:case r.path?.field:case r.fill?.field:case r.blinkRate?.field:case r.statusColor?.field:case r.bulbColor?.field:case r.rpm?.field:n.add(a)}})}),[...n]}function up(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function dp(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function Rn(t,e){return function(n){n&&(t[e]=n)}}function Wl(t,e,n){return function(r){r&&(t[e][n]=r)}}function vo(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function fp(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var o,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var c=(o=this[r])[i].apply(o,s);return c===this[r]?this:c})})}}var Kl="rgb",Vl="rgba",Yl="hsl",Xl="hsla",Nb=[Kl,Vl,Yl,Xl],vp="function",zb="property",Ib="array",pp="object",hp="string",gp="number",ei="undefined",Hl=typeof window!==ei,Jn=typeof document!==ei&&document,$l=null,Bb=function(t){if(!Jn)return"";var e=(Jn.body||Jn.documentElement).style,n=$l.length;if(typeof e[t]!==ei)return t;for(var r=0;r<n;++r){var i="-"+$l[r]+"-"+t;if(typeof e[i]!==ei)return i}return""},jb=null,Gb=null,Fb=null,Wb=null,mp=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],oe=1e-7,Kb=1/oe,Zi={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function yp(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Qi(t,e,n,r){return(t*r+e*n)/(n+r)}function qi(t){return typeof t===ei}function We(t){return t&&typeof t===pp}function ie(t){return Array.isArray(t)}function we(t){return typeof t===hp}function wr(t){return typeof t===gp}function Ji(t){return typeof t===vp}function xp(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function Ul(t,e,n,r,i){var a=po(t,e,n);return a?n:bp(t,e,n+1,r,i)}function po(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function bp(t,e,n,r,i){for(var a=function(c){var u=e[c].trim();if(u===t.close&&!po(t,e,c))return{value:c};var d=c,f=Ne(i,function(v){var p=v.open;return p===u});if(f&&(d=Ul(f,e,c,r,i)),d===-1)return o=c,"break";c=d,o=c},o,s=n;s<r;++s){var l=a(s);if(s=o,typeof l=="object")return l.value;if(l==="break")break}return-1}function ho(t,e){var n=we(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,s=n.isSeparateOpenClose,l=s===void 0?o:s,c=n.openCloseCharacters,u=c===void 0?mp:c,d=u.map(function(D){var T=D.open,C=D.close;return T===C?T:T+"|"+C}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),p=t.split(v).filter(function(D){return D&&D!=="undefined"}),h=p.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var x=function(D){var T=p[D].trim(),C=D,M=Ne(u,function(P){var L=P.open;return L===T}),R=Ne(u,function(P){var L=P.close;return L===T});if(M){if(C=Ul(M,p,D,h,u),C!==-1&&l)return y()&&a||(g.push(p.slice(D,C+1).join("")),D=C,a)?(S=D,"break"):(S=D,"continue")}else if(R&&!po(R,p,D)){var A=yp(u);return A.splice(u.indexOf(R),1),{value:ho(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:l,openCloseCharacters:A})}}else if(xp(T,i)&&!o)return y(),a?(S=D,"break"):(S=D,"continue");C===-1&&(C=h-1),m.push(p.slice(D,C+1).join("")),D=C,S=D},S,w=0;w<h;++w){var E=x(w);if(w=S,typeof E=="object")return E.value;if(E==="break")break}return m.length&&g.push(m.join("")),g}function Bn(t){return ho(t,"")}function jn(t){return ho(t,",")}function go(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function tr(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function mo(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function ta(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Vb(t){return[].slice.call(t)}function ni(){return Date.now?Date.now():new Date().getTime()}function Pn(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Cp(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function Yb(t,e,n){var r=Cp(t,e);return r>-1?t[r]:n}function Ne(t,e,n){var r=Pn(t,e);return r>-1?t[r]:n}var Zl=function(){var t=ni(),e=Hl&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=ni(),i=setTimeout(function(){n(r-t)},1e3/60);return i}}(),Sp=function(){var t=Hl&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function yn(t){return Object.keys(t)}function Ep(t){var e=yn(t);return e.map(function(n){return t[n]})}function Xb(t){var e=yn(t);return e.map(function(n){return[n,t[n]]})}function Hb(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function Ft(t,e){var n=tr(t),r=n.value,i=n.unit;if(We(e)){var a=e[i];if(a){if(Ji(a))return a(r);if(Zi[i])return Zi[i](r,a)}}else if(i==="%")return r*e/100;return Zi[i]?Zi[i](r):r}function ea(t,e,n){return Math.max(e,Math.min(t,n))}function Ql(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[bt(e[0],oe),bt(e[0]/r,oe)],[bt(e[1]*r,oe),bt(e[1],oe)]].filter(function(i){return i.every(function(a,o){var s=e[o],l=bt(s,oe);return n?a<=s||a<=l:a>=s||a>=l})})[0]||t}function yo(t,e,n,r){if(!r)return t.map(function(v,p){return ea(v,e[p],n[p])});var i=t[0],a=t[1],o=r===!0?i/a:r,s=Ql(t,e,!1,o),l=s[0],c=s[1],u=Ql(t,n,!0,o),d=u[0],f=u[1];return i<l||a<c?(i=l,a=c):(i>d||a>f)&&(i=d,a=f),[i,a]}function wp(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function xo(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function se(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Dp(t){return[0,1].map(function(e){return xo(t.map(function(n){return n[e]}))})}function ql(t){var e=Dp(t),n=se(e,t[0]),r=se(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function xn(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function bt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Jl(t,e){return t.forEach(function(n,r){t[r]=bt(t[r],e)}),t}function Tp(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function $b(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,we(n)?n:n.apply(void 0,i))})}function tc(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Mp(t){return t.reduce(function(e,n){return ie(n)?e.push.apply(e,Mp(n)):e.push(n),e},[])}function ec(t,e){t.indexOf(e)===-1&&t.push(e)}function kp(t){return t.replace("#","")}function nc(t){var e=kp(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function Rp(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function Pp(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,o=a*(1-Math.abs(n/60%2-1)),s=i-a/2,l;return n<60?l=[a,o,0]:n<120?l=[o,a,0]:n<180?l=[0,a,o]:n<240?l=[0,o,a]:n<300?l=[o,0,a]:n<360?l=[a,0,o]:l=[0,0,0],[Math.round((l[0]+s)*255),Math.round((l[1]+s)*255),Math.round((l[2]+s)*255),(e=t[3])!==null&&e!==void 0?e:1]}function Ub(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?nc(Rp(t)):nc(t);if(t.indexOf("(")!==-1){var e=go(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=jn(r),a=[0,0,0,1],o=i.length;switch(n){case Kl:case Vl:for(var s=0;s<o;++s)a[s]=parseFloat(i[s]);return a;case Yl:case Xl:for(var s=0;s<o;++s)i[s].indexOf("%")!==-1?a[s]=parseFloat(i[s])/100:a[s]=parseFloat(i[s]);return Pp(a)}}}function Zb(t,e){return Jn?e?Jn.querySelectorAll(t):Jn.querySelector(t):e?[]:null}function fe(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function bo(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function rc(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Qb(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=Ke(n).getComputedStyle(n),a=e.length,o=0;o<a;++o)r[e[o]]=i[e[o]];return r}function xe(t,e,n,r){t.addEventListener(e,n,r)}function ve(t,e,n,r){t.removeEventListener(e,n,r)}function ze(t){return t?.ownerDocument||Jn}function Co(t){return ze(t).documentElement}function Gn(t){return ze(t).body}function Ke(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function ic(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Fn(t){return We(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Ap=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,o=i.indexOf(n),s=o===-1?i.length:o;i[s]=n,a[s]=r},t}(),Op=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),_p=typeof Map=="function",Lp=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function Np(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],o=i[1],s=new Lp;n[a]=s,r[o]=s}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],s=i[1];if(o===s)return[0,0];var l=n[o],c=r[s-1],u=l.getIndex();l.disconnect(),c?l.connect(c,c.next):l.connect(void 0,n[0]);var d=l.getIndex();return[u,d]})}var zp=function(){function t(n,r,i,a,o,s,l,c){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=s,this.changedBeforeAdded=l,this.fixed=c}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=Np(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,o){var s=a[0],l=a[1],c=r[o],u=c[0],d=c[1];if(s!==l)return i.push([u,d]),!0}),this.cachePureChanged=i},t}();function ri(t,e,n){var r=_p?Map:n?Op:Ap,i=n||function(y){return y},a=[],o=[],s=[],l=t.map(i),c=e.map(i),u=new r,d=new r,f=[],v=[],p={},h=[],g=0,m=0;return l.forEach(function(y,x){u.set(y,x)}),c.forEach(function(y,x){d.set(y,x)}),l.forEach(function(y,x){var S=d.get(y);typeof S>"u"?(++m,o.push(x)):p[S]=m}),c.forEach(function(y,x){var S=u.get(y);typeof S>"u"?(a.push(x),++g):(s.push([S,x]),m=p[x]||0,f.push([S-m,x-g]),v.push(x===S),S!==x&&h.push([S,x]))}),o.reverse(),new zp(t,e,a,o,h,s,f,v)}var Ip=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=ri(this.list,r,this.findKeyCallback);return this.list=r,i},t}();const Bp=Ip;var So=function(t,e){return So=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},So(t,e)};function ii(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");So(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ze=function(){return Ze=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ze.apply(this,arguments)};function ac(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Eo(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function oc(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function sc(t){var e=[];return t.forEach(function(n){e=e.concat(ie(n)?sc(n):n)}),e}function wo(t,e){if(!e)return t;for(var n in e)qi(t[n])&&(t[n]=e[n]);return t}function na(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function lc(t){var e=t.className,n=ac(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function cc(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function ra(t){if(!t)return null;var e=t.b;return Fn(e)?e:ra(t.c)}function uc(t){var e=t.parentNode;e&&e.removeChild(t)}function dc(t){t.forEach(function(e){e()})}function jp(){return this.constructor(this.props,this.context)}var Do=0,ia=function(){function t(n,r,i,a,o,s,l){l===void 0&&(l={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=s,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,o){var s=this,l=s.d,c=Ep(r).filter(function(p){return p.$_req}),u=sc(c.map(function(p){return p.$_subs})),d=Ne(u,function(p){return p.d===l});if(s.b&&!we(i)&&!o&&!s.s(i.props,a)&&!d){var f=u.reduce(function(p,h){var g=h.d;return p[0]?p[0].d===g&&p.push(h):g>l&&p.push(h),p},[]);return f.forEach(function(p){oi(p,p._ps,[p.o],n,r,!0)}),!1}s.o=i,s.ss(a);var v=s.ps;return we(i)||(s.ps=i.props,s.ref=i.ref),oa(this),s.r(n,r,s.b?v:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t}();function aa(){return Object.__CROACT_CURRENT_INSTNACE__}function fc(){return Do}function Gp(t){Do=t}function oa(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Do=0,t}var To=function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=Ze(Ze({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,o=oi(a.c,[a],[a.o],i,a._cs,Ze(Ze({},this.state),this.$_state),r);o&&(n&&i.push(n),dc(i),oa(null))},t}(),vc=function(t){ii(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return na(this.props,r)||na(this.state,i)},e}(To);function pc(t){var e=function(n){e.current=n};return e.current=t,e}function Fp(t){return t._fr=!0,t}function hc(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new To(e,n),a.constructor=t,t._fr?(r.fr=pc(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=jp),a.$_p=r,a}var Wp=function(t){ii(e,t);function e(r,i,a,o,s,l,c){c===void 0&&(c={});var u=t.call(this,r,i,a,o,s,l,wo(c,r.defaultProps))||this;return u.typ="comp",u._usefs=[],u._uefs=[],u._defs=[],u}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(wo(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var o,s,l=this,c=l.t;l.ps=wo(l.ps,l.t.defaultProps);var u=l.ps,d=!l.b,f=c.contextType,v=l.b,p=f?.get(l);l._cs=i,d?(v=hc(c,u,p,l),l.b=v):(v.props=u,v.context=p);var h=v.state;l._usefs=[],l._uefs=[];var g=v.render();((s=(o=g?.props)===null||o===void 0?void 0:o.children)===null||s===void 0?void 0:s.length)===0&&(g.props.children=l.ps.children);var m=Ze(Ze({},i),v.$_cs);oi(l,l._ps,g?[g]:[],r,m),d?l._uefs.push(function(){f?.register(l),v.componentDidMount()}):l._uefs.push(function(){v.componentDidUpdate(a,h)}),r.push(function(){l._usefs.forEach(function(y){y()}),d?l.md():l.ud(),l._defs=l._uefs.map(function(y){return y()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e}(ia);function Kp(t,e,n){var r=Mo(lc(t),lc(e)),i=r.added,a=r.removed,o=r.changed;for(var s in i)n.setAttribute(s,i[s]);for(var l in o)n.setAttribute(l,o[l][1]);for(var c in a)n.removeAttribute(c)}function Vp(t,e,n){var r=Mo(t,e),i=r.added,a=r.removed;for(var o in a)n.e(o,!0);for(var s in i)n.e(s)}function Mo(t,e){var n=yn(t),r=yn(e),i=ri(n,r,function(l){return l}),a={},o={},s={};return i.added.forEach(function(l){var c=r[l];a[c]=e[c]}),i.removed.forEach(function(l){var c=n[l];o[c]=t[c]}),i.maintained.forEach(function(l){var c=l[0],u=n[c],d=[t[u],e[u]];t[u]!==e[u]&&(s[u]=d)}),{added:a,removed:o,changed:s}}function Yp(t,e,n){var r=n.style,i=Mo(t,e),a=i.added,o=i.removed,s=i.changed;for(var l in a){var c=ta(l,"-");r.setProperty(c,a[l])}for(var l in s){var u=ta(l,"-");r.setProperty(u,s[l][1])}for(var l in o){var d=ta(l,"-");r.removeProperty(d)}}function Xp(t){return t.replace(/^on/g,"").toLowerCase()}var Hp=function(t){ii(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,o=a._es,s=a.b,l=Xp(r);i?(ve(s,l,o[r]),delete o[r]):(o[r]=function(c){var u,d;(d=(u=a.ps)[r])===null||d===void 0||d.call(u,c)},xe(s,l,o[r]))},n.s=function(r){return na(this.ps,r)},n.r=function(r,i,a){var o,s=this,l=!s.b,c=s.ps;if(l){var u=ra(s.c),d=!1;s._svg||s.t==="svg"?d=!0:d=u&&u.ownerSVGElement,s._svg=d;var f=(o=s._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],v=s.t;if(f)s._hyd=[].slice.call(f.children||[]);else{var p=ze(u);d?f=p.createElementNS("http://www.w3.org/2000/svg",v):f=p.createElement(v)}s.b=f}oi(s,s._ps,c.children,r,i);var h=s.b,g=cc(a),m=g[0],y=g[1],x=cc(c),S=x[0],w=x[1];return Kp(m,S,h),Vp(y,w,s),Yp(a.style||{},c.style||{},h),r.push(function(){l?s.md():s.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)ve(a,o,i[o]);r._ps.forEach(function(s){s.un()}),r._es={},r._sel||uc(a)},e}(ia);function ai(t){if(!t||Fn(t))return t;var e=t.$_p._ps;return e.length?ai(e[0].b):null}function gc(t){if(t){if(t.b&&Fn(t.b))return t;var e=t._ps;return e.length?gc(e[0]):null}}function Qe(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,s=ac(i,["key","ref"]);return{type:t,key:a,ref:o,props:Ze(Ze({},s),{children:tc(n).filter(function(l){return l!=null&&l!==!1})})}}var mc=function(t){ii(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e}(ia),$p=function(t){ii(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,o=!a.b;if(o){var s=ra(a.c),l=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=l||ze(s).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},n.un=function(){uc(this.b)},e}(ia);function Up(t,e,n){var r=n.map(function(l){return we(l)?null:l.key}),i=oc(e.map(function(l){return l.k})),a=oc(r),o=ri(i,a,function(l){return l});o.removed.forEach(function(l){e.splice(l,1)[0].un()}),o.ordered.forEach(function(l){var c=l[0],u=l[1],d=e.splice(c,1)[0];e.splice(u,0,d);var f=ai(d.b),v=ai(e[u+1]&&e[u+1].b);f&&f.parentNode.insertBefore(f,v)}),o.added.forEach(function(l){e.splice(l,0,yc(n[l],r[l],l,t))});var s=o.maintained.filter(function(l){l[0];var c=l[1],u=n[c],d=e[c],f=we(u)?"text_".concat(u):u.type;return f!==d.t?(d.un(),e.splice(c,1,yc(u,r[c],c,t)),!0):(d.i=c,!1)});return Eo(Eo([],o.added,!0),s.map(function(l){l[0];var c=l[1];return c}),!0)}function Zp(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=ai(n[i].b);if(a)return a}return null}function yc(t,e,n,r){var i=r.d+1;if(we(t)||wr(t))return new $p("text_".concat(t),i,e,n,r,null,{});var a=t.type,o=typeof a=="string"?Hp:Wp;return new o(a,i,e,n,r,t.ref,t.props)}function oi(t,e,n,r,i,a,o){var s=Up(t,e,n),l=t._hyd,c=e.filter(function(d,f){return d._hyd=l,d.u(r,i,n[f],a,o)});t.typ==="container"&&t._sel&&e.forEach(function(d){var f=gc(d);f&&(f._sel=!0)}),t._hyd=null;var u=ra(t);return u&&s.reverse().forEach(function(d){var f=e[d],v=ai(f.b);if(v&&u!==v&&!v.parentNode){var p=Zp(t,f);u.insertBefore(v,p)}}),c.length>0}function xc(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new mc(e));var a=[];return oi(n,n._ps,t?[t]:[],a,r,void 0,void 0),dc(a),oa(null),i||(e.__CROACT__=n),n}function qb(t,e,n){var r=e.__CROACT__;t&&!r&&(e.innerHTML=""),xc(t,e,r),n&&n()}function bc(t,e,n){return!n&&t&&(n=new mc(e.parentElement),n._hyd=[e],n._sel=!0),xc(t,e,n),n}var Qp=0;function Jb(t){var e="c".concat(++Qp);function n(o){var s=this;if(!s.$_cs[e]){s.$_cs[e]=s;var l=[];s.shouldComponentUpdate=function(c){c.value!==s.props.value&&(s.$_req=!0)},s.render=function(){return s.props.children[0]},s.$_subs=l}return o.children[0]}function r(o,s){return o.children(s)}function i(o){return o._cs[e]}var a={$_id:e,$_dv:t,Consumer:r,Provider:n,get:function(o){var s,l;return(l=(s=i(o))===null||s===void 0?void 0:s.props.value)!==null&&l!==void 0?l:t},register:function(o){var s=i(o);s&&pushSet(s.$_subs,o)},unregister:function(o){var s=i(o);if(s){var l=s.$_subs,c=l.indexOf(o);c>-1&&l.splice(c,1)}}};return r.contextType=a,a}var qp=null;function tC(t,e){return Qe(qp,{element:t,container:e})}function sa(t,e,n){if(t==null)return"";if(isString(t)||isNumber(t)||isFunction(t))return t;var r=t.type,i=t.props;if(isString(r)){var a={};getEntries(i).forEach(function(v){var p=v[0],h=v[1];if(p==="style")a[p]=getEntries(h).map(function(g){var m=g[0],y=g[1];return"".concat(decamelize(m),": ").concat(y,";")}).join("");else{if(p==="children")return;p.match(/^on[^a-z]/g)||(a[p]="".concat(h))}});var o=i.children.map(function(v){return sa(v,e)}).join("");if(n)return{tagName:r,props:a,children:o};var s=Eo([r],getEntries(a).map(function(v){var p=v[0],h=v[1];return"".concat(p,'="').concat(h.replace(/"/g,'\\"'),'"')}),!0);return"<".concat(s.join(" "),">").concat(o,"</").concat(r,">")}else if(isFunction(r)){var l=r.contextType,c={b:null,_hs:[],_usefs:[],_uefs:[],_defs:[],_cs:e};oa(c);var u=l?.get(c),d=hc(r,i,u,{}),f=Ze(Ze({},e),d.$_cs);return c.b=d,sa(d.render(),f,n)}return""}function eC(t){return sa(t,{})}function nC(t){return sa(t,{},!0)}function ko(t){var e=aa(),n=e._hs||(e._hs=[]),r=fc(),i=n[r];if(Gp(r+1),i){if(!na(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function Jp(t,e){var n=ko({func:t,deps:e});return n.value}function th(t){return Jp(function(){return pc(t)},[])}function rC(t){var e=aa(),n=t.$_id,r=e._cs,i;return n in r?(i=r[n],i.props.value):t.$_dv,Ro(function(){return t.register(e),function(){t.unregister(e)}},[]),t.get(e)}function iC(t){var e=aa(),n=fc(),r=e.b;return ko({func:function(){r.state[n]=isFunction(t)?t():t},deps:[]}),[r.state[n],function(i){var a;return r.setState((a={},a[n]=i,a))}]}function Ro(t,e,n){var r=aa(),i=ko({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function eh(t,e,n){Ro(function(){t?.(e())},n,!0)}var aC="simple-1.0.0";function Po(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Cc(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function nh(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Ao(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Sc(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function rh(t,e){var n=Ao("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Oo(t){return t.replace(/_/g,".")}function si(t,e){var n=null,r="-1";return Po(t,function(i){var a=Ao("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=rh(i.versionTest.toLowerCase(),e)||r),r=Oo(r),!0)}),{preset:n,version:r}}function la(t,e){var n={brand:"",version:"-1"};return Po(t,function(r){var i=Ec(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function Ec(t,e){return Cc(t,function(n){var r=n.brand;return Ao(""+e.test,r.toLowerCase())})}var wc=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Dc=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],_o=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Tc=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Mc=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function kc(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!la(Tc,n).brand},o={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&Po(_o,function(f){return Ec(n,f)});var s=la(Dc,n);if(a.chromium=!!s.brand,a.chromiumVersion=s.version,!a.chromium){var l=la(_o,n);a.webkit=!!l.brand,a.webkitVersion=l.version}if(t){var c=t.platform.toLowerCase(),u=Cc(Mc,function(f){return new RegExp(""+f.test,"g").exec(c)});o.name=u?u.id:c,o.version=t.platformVersion}var d=la(wc,n);return d.brand&&(a.name=d.brand,a.version=t?t.uaFullVersion:d.version),navigator.platform==="Linux armv8l"?o.name="android":a.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&a.webview&&(a.version="-1"),o.version=Oo(o.version),a.version=Oo(a.version),o.majorVersion=parseInt(o.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:o,isMobile:r,isHints:!0}}function ih(t){var e=nh(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!si(Tc,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=si(wc,e),o=a.preset,s=a.version,l=si(Mc,e),c=l.preset,u=l.version,d=si(Dc,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=si(_o,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return c&&(i.name=c.id,i.version=u,i.majorVersion=parseInt(u,10)),o&&(r.name=o.id,r.version=s,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function oC(t){return Sc()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then(function(e){var n=kc(e);return t&&t(n),n}):(t&&t(Lo()),typeof Promise>"u"||!Promise?null:Promise.resolve(Lo()))}function Lo(t){return typeof t>"u"&&Sc()?kc():ih(t)}const ah=Lo;function oh(t,e,n,r,i,a){for(var o=0;o<i;++o){var s=n+o*i,l=r+o*i;t[s]+=t[l]*a,e[s]+=e[l]*a}}function sh(t,e,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,s=r+a*i,l=t[o],c=e[o];t[o]=t[s],t[s]=l,e[o]=e[s],e[s]=c}}function lh(t,e,n,r,i){for(var a=0;a<r;++a){var o=n+a*r;t[o]/=i,e[o]/=i}}function Rc(t,e,n){n===void 0&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function dn(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Ut(e),i=0;i<e;++i){var a=e*i+i;if(!bt(n[a],oe)){for(var o=i+1;o<e;++o)if(n[e*i+o]){sh(n,r,i,o,e);break}}if(!bt(n[a],oe))return[];lh(n,r,i,e,n[a]);for(var o=0;o<e;++o){var s=o,l=o+i*e,c=n[l];!bt(c,oe)||i===o||oh(n,r,s,i,e,-c)}}return r}function ch(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function Pc(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function uh(t,e){for(var n=Ut(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function er(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function fn(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Ut(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=t[a*e+o];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function ca(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Ut(t);return e.forEach(function(i){r=Wt(r,i,t)}),r}function Wt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var o=0;o<n;++o)for(var s=0;s<a;++s){r[s*n+o]=0;for(var l=0;l<i;++l)r[s*n+o]+=t[l*n+o]*e[s*i+l]}return r}function Lt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function dt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function dh(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Ac(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function De(t,e,n){n===void 0&&(n=e.length);var r=Wt(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function fh(t,e){return Wt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function vh(t,e){return Wt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function ph(t,e){return Wt(t,ci(e,4))}function ua(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,o=e[2],s=o===void 0?1:o;return Wt(t,[r,0,0,0,0,a,0,0,0,0,s,0,0,0,0,1],4)}function li(t,e){return De(ci(e,3),er(t,3))}function No(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,o=e[2],s=o===void 0?0:o;return Wt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,s,1],4)}function zo(t,e){return Wt(t,e,4)}function ci(t,e){var n=Math.cos(t),r=Math.sin(t),i=Ut(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Ut(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Io(t,e){for(var n=Ut(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function nr(t,e){for(var n=Ut(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Bo(t,e,n,r,i,a,o,s){var l=t[0],c=t[1],u=e[0],d=e[1],f=n[0],v=n[1],p=r[0],h=r[1],g=i[0],m=i[1],y=a[0],x=a[1],S=o[0],w=o[1],E=s[0],D=s[1],T=[l,0,u,0,f,0,p,0,c,0,d,0,v,0,h,0,1,0,1,0,1,0,1,0,0,l,0,u,0,f,0,p,0,c,0,d,0,v,0,h,0,1,0,1,0,1,0,1,-g*l,-m*l,-y*u,-x*u,-S*f,-w*f,-E*p,-D*p,-g*c,-m*c,-y*d,-x*d,-S*v,-w*v,-E*h,-D*h],C=dn(T,8);if(!C.length)return[];var M=Wt(C,[g,m,y,x,S,w,E,D],8);return M[8]=1,fn(ch(M),3,4)}function sC(t){return[0,1].map(function(e){return average(t.map(function(n){return n[e]}))})}var ui=function(){return ui=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ui.apply(this,arguments)};function jo(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function rr(t,e){return e===void 0&&(e=0),Dr(Tr(t,e))}function lC(t){return rr(getComputedStyle(t).transform)}function da(t,e){var n=De(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function hh(t,e){e===void 0&&(e=document.body);for(var n=t,r=jo();n;){var i=getComputedStyle(n).transform;if(r=zo(rr(i),r),n===e)break;n=n.parentElement}return r=dn(r,4),r[12]=0,r[13]=0,r[14]=0,r}function Dr(t){var e=jo();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function Tr(t,e){e===void 0&&(e=0);var n=ie(t)?t:Bn(t);return n.map(function(r){var i=go(r),a=i.prefix,o=i.value,s=null,l=a,c="";if(a==="translate"||a==="translateX"||a==="translate3d"){var u=We(e)?ui(ui({},e),{"o%":e["%"]}):{"%":e,"o%":e},d=jn(o).map(function(P,L){return L===0&&"x%"in u?u["%"]=e["x%"]:L===1&&"y%"in u?u["%"]=e["y%"]:u["%"]=e["o%"],Ft(P,u)}),f=d[0],v=d[1],p=v===void 0?0:v,h=d[2],g=h===void 0?0:h;s=No,c=[f,p,g]}else if(a==="translateY"){var m=We(e)?ui({"%":e["y%"]},e):{"%":e},p=Ft(o,m);s=No,c=[0,p,0]}else if(a==="translateZ"){var g=parseFloat(o);s=No,c=[0,0,g]}else if(a==="scale"||a==="scale3d"){var y=jn(o).map(function(P){return parseFloat(P)}),x=y[0],S=y[1],w=S===void 0?x:S,E=y[2],D=E===void 0?1:E;s=ua,c=[x,w,D]}else if(a==="scaleX"){var x=parseFloat(o);s=ua,c=[x,1,1]}else if(a==="scaleY"){var w=parseFloat(o);s=ua,c=[1,w,1]}else if(a==="scaleZ"){var D=parseFloat(o);s=ua,c=[1,1,D]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var T=tr(o),C=T.unit,M=T.value,R=C==="rad"?M:M*Math.PI/180;a==="rotate"||a==="rotateZ"?(l="rotateZ",s=ph):a==="rotateX"?s=fh:a==="rotateY"&&(s=vh),c=R}else if(a==="matrix3d")s=zo,c=jn(o).map(function(P){return parseFloat(P)});else if(a==="matrix"){var A=jn(o).map(function(P){return parseFloat(P)});s=zo,c=[A[0],A[1],0,0,A[2],A[3],0,0,0,0,1,0,A[4],A[5],0,1]}else l="";return{name:a,functionName:l,value:o,matrixFunction:s,functionValue:c}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Go=function(t,e){return Go=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Go(t,e)};function gh(t,e){Go(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Oc=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),mh=function(t){gh(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,Oc)||this}return e}(Bp);function Mr(t,e){return ri(t,e,Oc)}const _c=mh;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fo=function(){return Fo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fo.apply(this,arguments)};function yh(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var xh=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(We(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(We(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=Pn(a,function(s){return s.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,yh(a).forEach(function(s){s.listener(r),s.once&&i.off(n,s.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(Fo({listener:r},i))},t}();const di=xh;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wo=function(t,e){return Wo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Wo(t,e)};function bh(t,e){Wo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var kr=function(){return kr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kr.apply(this,arguments)};function Ch(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Lc(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function fa(t){if(t){if(we(t))return document.querySelector(t)}else return null;if(Ji(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Sh=function(t){bh(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=fa(i.container);if(!a){this._flag=!1;return}var o=0,s=0,l=0,c=0;if(a===document.body)l=window.innerWidth,c=window.innerHeight;else{var u=a.getBoundingClientRect();o=u.top,s=u.left,l=u.width,c=u.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:s,width:l,height:c},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,s=i.threshold,l=s===void 0?0:s,c=this,u=c._startRect,d=c._startPos;this._currentOptions=i;var f=[0,0];return u.top>o-l?(d[1]>u.top||o<d[1])&&(f[1]=-1):u.top+u.height<o+l&&(d[1]<u.top+u.height||o>d[1])&&(f[1]=1),u.left>a-l?(d[0]>u.left||a<d[0])&&(f[0]=-1):u.left+u.width<a+l&&(d[0]<u.left+u.width||a>d[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(kr(kr({},i),{direction:f,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,s=r.direction,l=r.throttleTime,c=l===void 0?0:l,u=r.inputEvent,d=r.isDrag,f=this._getScrollPosition(s||[0,0],r),v=f[0]-o[0],p=f[1]-o[1],h=s||[v?Math.abs(v)/v:0,p?Math.abs(p)/p:0];return this._prevScrollPos=f,this._lock=!1,!v&&!p?!1:(this.emit("move",{offsetX:h[0]?v:0,offsetY:h[1]?p:0,inputEvent:u}),c&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},c)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,s=o===void 0?Ch:o;return s({container:fa(a),direction:r})},n._continueDrag=function(r){var i=this,a,o=r.container,s=r.direction,l=r.throttleTime,c=r.useScroll,u=r.isDrag,d=r.inputEvent;if(!(!this._flag||u&&this._isWait)){var f=ni(),v=Math.max(l+this._prevTime-f,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=f;var p=this._getScrollPosition(s,r);this._prevScrollPos=p,u&&(this._isWait=!0),c||(this._lock=!0);var h={container:fa(o),direction:s,inputEvent:d};return(a=r.requestScroll)===null||a===void 0||a.call(r,h),this.emit("scroll",h),this._isWait=!1,c||this.checkScroll(kr(kr({},r),{prevScrollPos:p,direction:s,inputEvent:d}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?Lc:i,o=fa(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=Lc(window,this._onScroll):this._unregister=a(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(di);const Nc=Sh;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ir(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function ke(t){return bt(t,oe)}function Eh(t,e){return t.every(function(n,r){return ke(n-e[r])===0})}function wh(t,e){return!ke(t[0]-e[0])&&!ke(t[1]-e[1])}function Dh(t){return t.reduce(function(e,n){return e.push.apply(e,n),e},[])}function fi(t){return t.length<3?0:Math.abs(wp(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function Ko(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,o=ar(t),s=o.minX,l=o.minY,c=o.maxX,u=o.maxY,d=n/(c-s),f=r/(u-l);return t.map(function(v){return[i+(v[0]-s)*d,a+(v[1]-l)*f]})}function ar(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function va(t,e,n){var r=t[0],i=t[1],a=ar(e),o=a.minX,s=a.maxX,l=[[o,i],[s,i]],c=or(l[0],l[1]),u=Yo(e),d=[];if(u.forEach(function(p){var h=or(p[0],p[1]),g=p[0];if(Eh(c,h))d.push({pos:t,line:p,type:"line"});else{var m=Vo(pa(c,h),[l,p]);m.forEach(function(y){p.some(function(x){return wh(x,y)})?d.push({pos:y,line:p,type:"point"}):ke(g[1]-i)!==0&&d.push({pos:y,line:p,type:"intersection"})})}}),!n&&Ne(d,function(p){return p[0]===r}))return!0;var f=0,v={};return d.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>r))if(g==="intersection")++f;else{if(g==="line")return;if(g==="point"){var y=Ne(m,function(w){return w[1]!==i}),x=v[h[0]],S=y[1]>i?1:-1;x?x!==S&&++f:v[h[0]]=S}}}),f%2===1}function Th(t,e){var n=t[0],r=t[1],i=t[2];return(n*e[0]+r*e[1]+i)/(n*n+r*r)}function or(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=i-n,s=a-r;Math.abs(o)<oe&&(o=0),Math.abs(s)<oe&&(s=0);var l=0,c=0,u=0;return o?s?(l=-s/o,c=1,u=-l*n-r):(c=1,u=-r):s&&(l=-1,u=n),[l,c,u]}function pa(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2],l=n===0&&a===0,c=r===0&&o===0,u=[];if(l&&c)return[];if(l){var d=-i/r,f=-s/o;return d!==f?[]:[[-1/0,d],[1/0,d]]}else if(c){var v=-i/n,p=-s/a;return v!==p?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var h=-i/r,g=-(o*h+s)/a;u=[[g,h]]}else if(a===0){var h=-s/o,g=-(r*h+i)/n;u=[[g,h]]}else if(r===0){var g=-i/n,h=-(a*g+s)/o;u=[[g,h]]}else if(o===0){var g=-s/a,h=-(n*g+i)/r;u=[[g,h]]}else{var g=(r*s-o*i)/(o*n-r*a),h=-(n*g+i)/r;u=[[g,h]]}return u.map(function(m){return[m[0],m[1]]})}function cC(t,e,n){var r=pa(or(t[0],t[1]),or(e[0],e[1]));return n?Vo(r,[t,e]):r}function Mh(t,e){var n=or(e[0],e[1]);return ke(Th(n,t))===0}function Vo(t,e){var n=e.map(function(d){return[0,1].map(function(f){return[Math.min(d[0][f],d[1][f]),Math.max(d[0][f],d[1][f])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if(ke(a-t[1][0])){if(!ke(o-t[1][1])){var c=Math.max.apply(Math,n.map(function(d){return d[0][0]})),u=Math.min.apply(Math,n.map(function(d){return d[0][1]}));if(ke(c-u)>0)return[];r=[[c,o],[u,o]]}}else{var s=Math.max.apply(Math,n.map(function(d){return d[1][0]})),l=Math.min.apply(Math,n.map(function(d){return d[1][1]}));if(ke(s-l)>0)return[];r=[[a,s],[a,l]]}}return r.length||(r=t.filter(function(d){var f=d[0],v=d[1];return n.every(function(p){return 0<=ke(f-p[0][0])&&0<=ke(p[0][1]-f)&&0<=ke(v-p[1][0])&&0<=ke(p[1][1]-v)})})),r.map(function(d){return[ke(d[0]),ke(d[1])]})}function Yo(t){return ir(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Xo(t,e){var n=t.slice(),r=e.slice();ql(n)===-1&&n.reverse(),ql(r)===-1&&r.reverse();var i=Yo(n),a=Yo(r),o=i.map(function(u){return or(u[0],u[1])}),s=a.map(function(u){return or(u[0],u[1])}),l=[];o.forEach(function(u,d){var f=i[d],v=[];s.forEach(function(p,h){var g=pa(u,p),m=Vo(g,[f,a[h]]);v.push.apply(v,m.map(function(y){return{index1:d,index2:h,pos:y,type:"intersection"}}))}),v.sort(function(p,h){return xn(f[0],p.pos)-xn(f[0],h.pos)}),l.push.apply(l,v),va(f[1],r)&&l.push({index1:d,index2:-1,pos:f[1],type:"inside"})}),a.forEach(function(u,d){if(va(u[1],n)){var f=!1,v=Pn(l,function(p){var h=p.index2;return h===d?(f=!0,!1):!!f});v===-1&&(f=!1,v=Pn(l,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===d?(f=!0,!1):!!f})),v===-1?l.push({index1:-1,index2:d,pos:u[1],type:"inside"}):l.splice(v,0,{index1:-1,index2:d,pos:u[1],type:"inside"})}});var c={};return l.filter(function(u){var d=u.pos,f=d[0]+"x"+d[1];return c[f]?!1:(c[f]=!0,!0)})}function Ho(t,e){var n=Xo(t,e);return n.map(function(r){var i=r.pos;return i})}function kh(t){var e=t[0],n=e.index1,r=e.index2,i=t[1],a=i.index1,o=i.index2;return n!==-1&&(n===a||n+1===a)||r!==-1&&(r===o||r+1===o)}function Rh(t,e){var n=Xo(t,e),r=[],i;return Xo(t,e).forEach(function(a,o,s){o===0||!kh([s[o-1],a])?(i=[a],r.push(i)):i.push(a)}),r.map(function(a){return a.map(function(o){var s=o.pos;return s})})}function ha(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=[]);for(var i=r.length===0,a=t.length,o=t[n]?n:0,s=ir(t.slice(o),t.slice(0,o)),l=function(d){var f=s[d];if(find(e,function(m){return m[0]===f[0]&&m[1]===f[1]}))return"continue";if(r.some(function(m){return find(m,function(y){return y[0]===f[0]&&y[1]===f[1]})}))return i?"continue":"break";var v=void 0;i?(v=[],r.push(v)):v=r[r.length-1],v.push(f);var p=[f,t[n+1]||t[0]],h=e.filter(function(m){return Mh(m,p)}).sort(function(m,y){return getDist(f,m)-getDist(f,y)})[0];if(h){var g=e.indexOf(h);if(ha(e,t,g,r),!i)return"break"}else return ha(s,e,d+1,r),"break"},c=0;c<a;++c){var u=l(c);if(u==="break")break}return r}function uC(t,e){return ha(t,ir(e).reverse())}function dC(t,e){if(!e.length)return[ir(t)];var n=Rh(t,e),r=[t];return n.forEach(function(i){var a=ir(i).reverse();r=Dh(r.map(function(o){var s=ha(o,a),l=s[0];if(s.length===1&&a.every(function(f){return l.indexOf(f)===-1})){var c=l[l.length-1],u=ir(a).sort(function(f,v){return getDist(c,f)-getDist(c,v)})[0],d=a.indexOf(u);l.push.apply(l,ir(a.slice(d),a.slice(0,d),[a[d],c]))}return s}))}),r}function Ph(t,e){var n=Ho(t,e);return fi(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $o=function(t,e){return $o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},$o(t,e)};function Ah(t,e){$o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pe=function(){return pe=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pe.apply(this,arguments)};function Oh(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Uo(t){return Oh([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function _h(t){return t.touches&&t.touches.length>=2}function ga(t){return t?t.touches?Nh(t.touches):[Ic(t)]:[]}function Lh(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function zc(t,e,n){var r=n.length,i=vi(t,r),a=i.clientX,o=i.clientY,s=i.originalClientX,l=i.originalClientY,c=vi(e,r),u=c.clientX,d=c.clientY,f=vi(n,r),v=f.clientX,p=f.clientY,h=a-u,g=o-d,m=a-v,y=o-p;return{clientX:s,clientY:l,deltaX:h,deltaY:g,distX:m,distY:y}}function Zo(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Nh(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Ic(t[r]));return n}function Ic(t){return{clientX:t.clientX,clientY:t.clientY}}function vi(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var Qo=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),Uo(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),Uo(e)-Uo(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=zc(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],o=0;o<i;++o)a[o]=zc([e[o]],[n[o]],[r[o]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=vi(e,this.length),i=vi(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),Zo(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),Zo(e)/Zo(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),Bc=["textarea","input"],jc=function(t){Ah(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(f,v){if(v===void 0&&(v=!0),!(!i.flag&&f.cancelable===!1)){var p=f.type.indexOf("drag")>=-1;if(!(i.flag&&p)){i._isDragAPI=!0;var h=i.options,g=h.container,m=h.pinchOutside,y=h.preventWheelClick,x=h.preventRightClick,S=h.preventDefault,w=h.checkInput,E=h.dragFocusedInput,D=h.preventClickEventOnDragStart,T=h.preventClickEventOnDrag,C=h.preventClickEventByCondition,M=i._useTouch,R=!i.flag;if(i._isSecondaryButton=f.which===3||f.button===2,y&&(f.which===2||f.button===1)||x&&(f.which===3||f.button===2))return i.stop(),!1;if(R){var A=i._window.document.activeElement,P=f.target;if(P){var L=P.tagName.toLowerCase(),N=Bc.indexOf(L)>-1,j=P.isContentEditable;if(N||j){if(w||!E&&A===P)return!1;if(A&&(A===P||j&&A.isContentEditable&&A.contains(P)))if(E)P.blur();else return!1}else if((S||f.type==="touchstart")&&A){var F=A.tagName.toLowerCase();(A.isContentEditable||Bc.indexOf(F)>-1)&&A.blur()}(D||T||C)&&xe(i._window,"click",i._onClick,!0)}i.clientStores=[new Qo(ga(f))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=f,i.data={},i.doubleFlag=ni()-i.prevTime<200,i._isMouseEvent=Lh(f),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var G=i._preventMouseEvent||i.emit("dragStart",pe(pe({data:i.data,datas:i.data,inputEvent:f,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));G===!1&&i.stop(),i._isMouseEvent&&i.flag&&S&&f.preventDefault()}if(!i.flag)return!1;var W=0;if(R?(i._attchDragEvent(),M&&m&&(W=setTimeout(function(){xe(g,"touchstart",i.onDragStart,{passive:!1})}))):M&&m&&ve(g,"touchstart",i.onDragStart),i.flag&&_h(f)){if(clearTimeout(W),R&&f.touches.length!==f.changedTouches.length)return;i.pinchFlag||i.onPinchStart(f)}}}},i.onDrag=function(f,v){if(i.flag){var p=i.options.preventDefault;!i._isMouseEvent&&p&&f.preventDefault(),i._prevInputEvent=f;var h=ga(f),g=i.moveClients(h,f,!1);if(i._dragFlag){if(i.pinchFlag||g.deltaX||g.deltaY){var m=i._preventMouseEvent||i.emit("drag",pe(pe({},g),{isScroll:!!v,inputEvent:f}));if(m===!1){i.stop();return}}i.pinchFlag&&i.onPinch(f,h)}i.getCurrentStore().getPosition(h,!0)}},i.onDragEnd=function(f){if(i.flag){var v=i.options,p=v.pinchOutside,h=v.container,g=v.preventClickEventOnDrag,m=v.preventClickEventOnDragStart,y=v.preventClickEventByCondition,x=i.isDrag;(g||m||y)&&requestAnimationFrame(function(){i._allowClickEvent()}),!y&&!m&&g&&!x&&i._allowClickEvent(),i._useTouch&&p&&ve(h,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(f);var S=f?.touches?ga(f):[],w=S.length;w===0||!i.options.keepDragging?i.flag=!1:i._addStore(new Qo(S));var E=i._getPosition(),D=ni(),T=!x&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=x||T?0:D,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",pe({data:i.data,datas:i.data,isDouble:T,isDrag:x,isClick:!x,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:f,isTrusted:i._isTrusted},E)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){ve(i._window,"click",i._onClick,!0)},i._onClick=function(f){i._allowClickEvent(),i._allowMouseEvent();var v=i.options.preventClickEventByCondition;v?.(f)||(f.stopPropagation(),f.preventDefault())},i._onContextMenu=function(f){var v=i.options;v.preventRightClick?i.onDragEnd(f):f.preventDefault()},i._passCallback=function(){};var a=[].concat(n),o=a[0];i._window=ic(o)?o:Ke(o),i.options=pe({checkInput:!1,container:o&&!("document"in o)?Ke(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var s=i.options,l=s.container,c=s.events,u=s.checkWindowBlur;if(i._useDrag=c.indexOf("drag")>-1,i._useTouch=c.indexOf("touch")>-1,i._useMouse=c.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(f){xe(f,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(f){xe(f,"mousedown",i.onDragStart),xe(f,"mousemove",i._passCallback)}),xe(l,"contextmenu",i._onContextMenu)),u&&xe(Ke(),"blur",i.onBlur),i._useTouch){var d={passive:!1};a.forEach(function(f){xe(f,"touchstart",i.onDragStart,d),xe(f,"touchmove",i._passCallback,d)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(l){var c=l.clientX,u=l.clientY;return{clientX:c+i,clientY:u+a,originalClientX:c,originalClientY:u}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),pe(pe({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),ve(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){ve(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){ve(a,"mousedown",n.onDragStart)}),ve(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){ve(a,"touchstart",n.onDragStart)}),ve(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new Qo(ga(n));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",pe(pe({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",pe(pe({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",pe(pe({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),pe(pe({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:s})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(c,u){var d=u.getPosition();return c.distX+=d.distX,c.distY+=d.distY,c},a),s=o.distX,l=o.distY;return pe(pe({},a),{distX:s,distY:l})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(xe(r,"dragover",this.onDrag,i),xe(n,"dragend",this.onDragEnd)),this._useMouse&&(xe(r,"mousemove",this.onDrag),xe(n,"mouseup",this.onDragEnd)),this._useTouch&&(xe(r,"touchmove",this.onDrag,i),xe(n,"touchend",this.onDragEnd,i),xe(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(ve(r,"dragover",this.onDrag),ve(n,"dragend",this.onDragEnd)),this._useMouse&&(ve(r,"mousemove",this.onDrag),ve(n,"mouseup",this.onDragEnd)),this._useTouch&&(ve(r,"touchstart",this.onDragStart),ve(r,"touchmove",this.onDrag),ve(n,"touchend",this.onDragEnd),ve(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(di);function zh(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Ih=zh;function Bh(t){return Ih(t).toString(36)}function jh(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Gh(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?jn(a):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(t))):s?".".concat(t," ").concat(s):".".concat(t)}).join(", ")+" {"})}function Fh(t,e,n,r,i){var a=ze(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=Gh(t,e,n),(i||a.head||a.body).appendChild(o),o}function Wh(t){var e="rCS"+Bh(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=jh(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=Fh(e,t,r,n,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,l=parseFloat(a.getAttribute("data-styled-count"))||0;l<=1?(a.remove?a.remove():(s=a.parentNode)===null||s===void 0||s.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(l-1))}}}}}const Gc=Wh;var qo=function(t,e){return qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},qo(t,e)};function Kh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Jo=function(){return Jo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jo.apply(this,arguments)};function Vh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}var Yh=null;function fC(t,e){var n=cssStyled(e);return function(r){Kh(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.injector=n,a.tag=t,a}return i}(Yh)}function Fc(t,e){var n=Gc(e),r=n.className;return Fp(function(i,a){var o=i.className,s=o===void 0?"":o,l=i.cspNonce,c=Vh(i,["className","cspNonce"]),u=th();return eh(a,function(){return u.current},[]),Ro(function(){var d=n.inject(u.current,{nonce:i.cspNonce});return function(){d.destroy()}},[]),Qe(t,Jo({ref:u,"data-styled-id":r,className:"".concat(s," ").concat(r)},c))})}const vC=null;var ts=function(t,e){return ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ts(t,e)};function Rr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ts(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var O=function(){return O=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},O.apply(this,arguments)};function Xh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Hh(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function $h(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function J(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function pi(t,e){return O({events:[],props:[],name:t},e)}var Uh=["n","w","s","e"],es=["n","w","s","e","nw","ne","sw","se"];function Zh(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Qh(t){var e=Zh(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Pr=ah(),Wc=Pr.browser.webkit,Kc=Wc&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),Vc=Pr.browser.name,Yc=parseInt(Pr.browser.version,10),qh=Vc==="chrome",Jh=Pr.browser.chromium,tg=parseInt(Pr.browser.chromiumVersion,10)||0,eg=qh&&Yc>=109||Jh&&tg>=109,ng=Vc==="firefox",rg=parseInt(Pr.browser.webkitVersion,10)>=612||Yc>=15,ns="moveable-",ig=es.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),ag=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(ig,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Qh(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Kc?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),og=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],rs=1e-4,Re=1e-7,ma=1e-9,is=Math.pow(10,10),Xc=-is,sg={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},as={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Hc={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},$c=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function hi(t,e,n,r,i,a){var o,s;a===void 0&&(a="draggable");var l=(s=(o=e.gestos[a])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&s!==void 0?s:{},c=l.originalDatas||l.datas,u=c[a]||(c[a]={});return O(O({},i?td(e,l):l),{isPinch:!!r,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var Ar=function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),O(O({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Or(t,e,n,r){var i=t.length===16,a=i?4:3,o=ur(t,n,r,a),s=_(o,4),l=_(s[0],2),c=l[0],u=l[1],d=_(s[1],2),f=d[0],v=d[1],p=_(s[2],2),h=p[0],g=p[1],m=_(s[3],2),y=m[0],x=m[1],S=_(Jt(t,e,a),2),w=S[0],E=S[1],D=Math.min(c,f,h,y),T=Math.min(u,v,g,x),C=Math.max(c,f,h,y),M=Math.max(u,v,g,x);c=c-D||0,f=f-D||0,h=h-D||0,y=y-D||0,u=u-T||0,v=v-T||0,g=g-T||0,x=x-T||0,w=w-D||0,E=E-T||0;var R=t[0],A=t[a+1],P=Oe(R*A);return{left:D,top:T,right:C,bottom:M,origin:[w,E],pos1:[c,u],pos2:[f,v],pos3:[h,g],pos4:[y,x],direction:P}}function Uc(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,o=a.moveableClientRect,s=a.rootMatrix,l=a.is3d,c=a.pos1,u=o.left,d=o.top,f=l?4:3,v=_(dt(Gr(s,[n-u,r-d],f),c),2),p=v[0],h=v[1],g=_(bn({datas:i,distX:p,distY:h}),2),m=g[0],y=g[1];return[m,y]}function sr(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,s=r.left,l=r.top,c=r.origin,u=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,v=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=d,n.beforeMatrix=a,n.offsetMatrix=u,n.transformOrigin=f,n.inverseMatrix=dn(i,v),n.inverseBeforeMatrix=dn(a,v),n.absoluteOrigin=er(Lt([s,l],c),v),n.startDragBeforeDist=De(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=De(n.inverseMatrix,n.absoluteOrigin,v)}function lg(t){return Or(t.datas.beforeTransform,[50,50],100,100).direction}function ya(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,s=o.length,l=i.nextTransformAppendedIndexes,c=-1;a===-1?(n==="translate"?c=0:n==="rotate"&&(c=Pn(o,function(v){return v.match(/scale\(/g)})),c===-1&&(c=o.length),r.transformIndex=c):Ne(l,function(v){return v.index===a&&v.functionName===n})?c=a:c=a+l.filter(function(v){return v.index<a}).length;var u=_0(o,t.state,c),d=u.targetFunction,f=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=u.beforeFunctionTexts,r.afterFunctionTexts=u.afterFunctionTexts,r.beforeTransform=u.beforeFunctionMatrix,r.beforeTransform2=u.beforeFunctionMatrix2,r.targetTansform=u.targetFunctionMatrix,r.afterTransform=u.afterFunctionMatrix,r.afterTransform2=u.afterFunctionMatrix2,r.targetAllTransform=u.allFunctionMatrix,d.functionName===f?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):s>c&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=J(J([],_(l),!1),[{functionName:n,index:c,isAppend:!0}],!1))}function xa(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function cg(t){var e=t.datas,n=t.distX,r=t.distY,i=_(Qc({datas:e,distX:n,distY:r}),2),a=i[0],o=i[1],s=Zc(e,uh([a,o],4));return De(s,er([0,0,0],4),4)}function Zc(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,l=n?Wt(s,e,4):Wt(e,s,4),c=Wt(dn(n?a:r,4),l,4),u=Wt(c,dn(n?o:i,4),4);return u}function Qc(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,s=e.absoluteOrigin,l=a?4:3;return dt(De(i,Lt(s,[n,r]),l),o)}function bn(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,s=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=s?4:3;return dt(De(e?a:o,Lt(u,[r,i]),d),e?l:c)}function ug(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.beforeMatrix,o=n.matrix,s=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=s?4:3;return dt(De(e?a:o,Lt(e?l:c,[r,i]),d),u)}function dg(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(o,s){var l=tr(o),c=l.value,u=l.unit,d=s?i:r,f=s?n:e;if(o==="%"||isNaN(c)){var v=d?a[s]/d:0;return f*v}else if(u!=="%")return c;return f*c/100}):a}function qc(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function fg(t,e){return qc(e).map(function(n){return t[n]})}function os(t,e){var n=(e+1)/2;return[Qi(t[0][0],t[1][0],n,1-n),Qi(t[0][1],t[1][1],n,1-n)]}function me(t,e){var n=os([t[0],t[1]],e[0]),r=os([t[2],t[3]],e[0]);return os([n,r],e[1])}function vg(t,e,n,r,i,a){var o=ur(e,n,r,i),s=me(o,a),l=t[0]-s[0],c=t[1]-s[1];return[l,c]}function gi(t,e,n,r){return Wt(t,bi(e,r,n),r)}function pg(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,s=o?4:3,l;if(we(n)){var c=e.beforeTransform,u=e.afterTransform;r?l=fn(rr(n),4,s):l=fn(Wt(Wt(c,rr([n]),4),u,4),4,s)}else l=n;return gi(a,l,i,s)}function hg(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,s=i?4:3;return gi(r,Wt(o||a,Io(e,s),s),n,s)}function ba(t,e){var n=_r(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=ie(r)?r:Bn(r),ss(t,e,i)},setTransformIndex:function(r){ss(t,e,r)}}}function Ca(t,e,n){var r=_r(e),i=r.startTransforms;ss(t,e,Pn(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function ss(t,e,n){var r=_r(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var o=t.state,s=Tr([a],{"x%":function(l){return l/100*o.offsetWidth},"y%":function(l){return l/100*o.offsetHeight}});i.startValue=s[0].functionValue}}}function ls(t,e){var n=_r(t);n.nextTransforms=Bn(e)}function _r(t){return t.originalDatas.beforeRenderable}function Sa(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Ea(t){return(Sa(t)||[]).join(" ")}function wa(t){return _r(t).nextStyle}function Jc(t,e,n,r,i){ls(i,e);var a=Pe.drag(t,hi(i,t.state,n,r,!1)),o=a?a.transform:e;return O(O({transform:e,drag:a},Ae({transform:o},i)),{afterTransform:o})}function cs(t,e,n,r,i,a){var o=pg(t.state,i,e,a),s=yg(t,n,r,o);return s}function tu(t,e,n,r,i,a,o){var s=cs(t,e,n,i,a,o),l=t.state,c=l.left,u=l.top,d=t.props.groupable,f=d?c:0,v=d?u:0,p=dt(r,s);return dt(p,[f,v])}function gg(t,e,n,r,i,a,o){var s=tu(t,e,n,r,i,a,o);return s}function mg(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function yg(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,s=i.is3d,l=s?4:3,c=[a/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return Jt(r,c,l)}function xg(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return tu(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function bg(t,e,n,r,i,a){var o=t.props.groupable,s=t.state,l=s.transformOrigin,c=s.offsetMatrix,u=s.is3d,d=s.width,f=s.height,v=s.left,p=s.top,h=a.fixedDirection,g=a.nextTargetMatrix||s.targetMatrix,m=u?4:3,y=dg(i,e,n,d,f,l),x=o?v:0,S=o?p:0,w=gi(c,g,y,m),E=vg(r,w,e,n,m,h);return dt(E,[x,S])}function Cg(t,e){return me(tn(t.state),e)}function Sg(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function Eg(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function wg(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function eu(t,e,n){for(var r=t,i=[],a=Co(t)||Gn(t),o=!n&&t===e||t===a,s=o,l=!1,c=3,u,d,f,v=!1,p=Ci(e,e,!0).offsetParent,h=1;r&&!s;){s=o;var g=Ie(r),m=g("position"),y=Fu(r),x=m==="fixed",S=wg(g),w=dh(C0(y)),E=void 0,D=!1,T=!1,C=0,M=0,R=0,A=0,P={hasTransform:!1,fixedContainer:null};x&&(v=!0,P=T0(r),p=P.fixedContainer);var L=w.length;!l&&(L===16||S.length)&&(l=!0,c=4,Ts(i),f&&(f=fn(f,3,4))),l&&L===9&&(w=fn(w,3,4));var N=D0(r,t),j=N.tagName,F=N.hasOffset,G=N.isSVG,W=N.origin,K=N.targetOrigin,B=N.offset,Q=_(B,2),q=Q[0],H=Q[1];j==="svg"&&!r.ownerSVGElement&&f&&(i.push({type:"target",target:r,matrix:M0(r,c)}),i.push({type:"offset",target:r,matrix:Ut(c)}));var U=parseFloat(g("zoom"))||1;if(x)E=P.fixedContainer,D=!0;else{var Y=Ci(r,e,!1,!0,g),tt=Y.offsetZoom;if(E=Y.offsetParent,D=Y.isEnd,T=Y.isStatic,h*=tt,(Y.isCustomElement||tt!==1)&&T)q-=E.offsetLeft,H-=E.offsetTop;else if(ng||eg){var nt=Y.parentSlotElement;if(nt){for(var vt=E,ct=0,$=0;vt&&Eg(vt);)ct+=vt.offsetLeft,$+=vt.offsetTop,vt=vt.offsetParent;q-=ct,H-=$}}}if(Wc&&!rg&&F&&!G&&T&&(m==="relative"||m==="static")&&(q-=E.offsetLeft,H-=E.offsetTop,o=o||D),x)F&&P.hasTransform&&(R=E.clientLeft,A=E.clientTop);else if(F&&p!==E&&(C=E.clientLeft,M=E.clientTop),F&&E===a){var et=Wu(r,!1);q+=et[0],H+=et[1]}if(i.push({type:"target",target:r,matrix:bi(w,c,W)}),S.length&&(i.push({type:"offset",target:r,matrix:Ut(c)}),i.push({type:"target",target:r,matrix:bi(rr(S),c,W)})),F){var Tt=r===t,ut=Tt?0:r.scrollLeft,ft=Tt?0:r.scrollTop;i.push({type:"offset",target:r,matrix:nr([q-ut+C-R,H-ft+M-A],c)})}else i.push({type:"offset",target:r,origin:W});if(U!==1&&i.push({type:"zoom",target:r,matrix:bi(Io([U,U],c),c,[0,0])}),f||(f=w),u||(u=W),d||(d=K),s||x)break;r=E,o=D,(!n||r===a)&&(s=o)}return f||(f=Ut(c)),u||(u=[0,0]),d||(d=[0,0]),{zoom:h,offsetContainer:p,matrixes:i,targetMatrix:f,transformOrigin:u,targetOrigin:d,is3d:l,hasFixed:v}}var lr=null,cr=null,Lr=null;function Nr(t){t?(window.Map&&(lr=new Map,cr=new Map),Lr=[]):(lr=null,Lr=null,cr=null)}function Dg(t){var e=cr?.get(t);if(e)return e;var n=Ei(t,!0);return cr&&cr.set(t,n),n}function Tg(t,e){if(Lr){var n=Ne(Lr,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=eu(t,e,!0);return Lr&&Lr.push([[t,e],r]),r}function Ie(t){var e=lr?.get(t);if(!e){var n=Ke(t).getComputedStyle(t);if(!lr)return function(a){return n[a]};e={style:n,cached:{}},lr.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function vn(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,s){return a[s]=a[s]||{},a[s][e]=a[s][e]||{},O(O({},n),{isRequestChild:!0,datas:a[s][e],originalDatas:a[s]})})}function us(t,e,n,r,i,a,o){var s=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=i.isPinch,u=i.datas,d=vn(t,e.name,i),f=t.moveables,v=[],p=d.map(function(h,g){var m=f[g],y=m.state,x=y.gestos,S=h;if(s)S=new Ar(o).dragStart(r,h),v.push(S);else{if(x[o]||(x[o]=u.childGestos[g]),!x[o])return;S=hi(h,y,r,c,a,o),v.push(S)}var w=e[n](m,O(O({},S),{parentFlag:!0}));return l&&(x[o]=null),w});return s&&(u.childGestos=f.map(function(h){return h.state.gestos[o]})),{eventParams:p,childEvents:v}}function An(t,e,n,r,i,a){i===void 0&&(i=function(u,d){return d});var o=!!n.match(/End$/g),s=vn(t,e.name,r),l=t.moveables,c=s.map(function(u,d){var f=l[d],v=u;v=i(f,u);var p=e[n](f,O(O({},v),{parentFlag:!0}));return p&&a&&a(f,u,p,d),o&&(f.state.gestos={}),p});return c}function Da(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,o=r.datas.startPositions||tn(e.state),s=me(o,i),l=_(De(ci(-t.rotation/180*Math.PI,3),[s[0]-a[0],s[1]-a[1],1],3),2),c=l[0],u=l[1];return r.datas.originalX=c,r.datas.originalY=u,r}function nu(t,e,n,r){var i=t.getState(),a=i.renderPoses,o=i.rotation,s=i.direction,l=dr(t.props,e).zoom,c=xi(o/Math.PI*180),u={},d=t.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var f=d.renderDirectionMap;n.forEach(function(p){var h=p.dir;u[h]=!0});var v=Oe(s);return n.map(function(p){var h=p.data,g=p.classNames,m=p.dir,y=as[m];if(!y||!u[m])return null;f[m]=!0;var x=(bt(c,15)+v*Hc[m]+720)%180,S={};return yn(h).forEach(function(w){S["data-".concat(w)]=h[w]}),r.createElement("div",O({className:lt.apply(void 0,J(["control","direction",m,e],_(g),!1)),"data-rotation":x,"data-direction":m},S,{key:"direction-".concat(m),style:Na.apply(void 0,J([o,l],_(y.map(function(w){return a[w]})),!1))}))})}function ru(t,e,n,r){var i=dr(t.props,n),a=i.renderDirections,o=a===void 0?e:a,s=i.displayAroundControls;if(!o)return[];var l=o===!0?es:o;return J(J([],_(s?su(t,r,n,l):[]),!1),_(nu(t,n,l.map(function(c){return{data:{},classNames:[],dir:c}}),r)),!1)}function mi(t,e,n,r,i,a){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var l=se(n,r),c=e?bt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:lt.apply(void 0,J(["line","direction",e?"edge":"",e],_(o),!1)),"data-rotation":c,"data-line-key":a,"data-direction":e,style:Si(n,r,i,l)})}function iu(t,e,n,r,i){var a=n===!0?Uh:n;return a.map(function(o,s){var l=_(as[o],2),c=l[0],u=l[1];if(u!=null)return mi(t,o,r[c],r[u],i,"".concat(e,"Edge").concat(s),e)}).filter(Boolean)}function au(t){return function(e,n){var r=dr(e.props,t).edge;return r&&(r===!0||r.length)?J(J([],_(iu(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),_(Mg(e,t,n)),!1):ou(e,t,n)}}function ou(t,e,n){return ru(t,es,e,n)}function Mg(t,e,n){return ru(t,["nw","ne","sw","se"],e,n)}function su(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,s=a.rotation,l=a.direction,c=i.renderDirectionMap,u=t.props.zoom,d=Oe(l),f=s/Math.PI*180;return(r||yn(c)).map(function(v){var p=as[v];if(!p)return null;var h=(bt(f,15)+d*Hc[v]+720)%180,g=["around-control"];return n&&g.push("direction",n),e.createElement("div",{className:lt.apply(void 0,J([],_(g),!1)),"data-rotation":h,"data-direction":v,key:"direction-around-".concat(v),style:Na.apply(void 0,J([s,u],_(p.map(function(m){return o[m]})),!1))})})}function ds(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,o=r.left,s=o===void 0?-1/0:o,l=r.top,c=l===void 0?-1/0:l,u=r.right,d=u===void 0?1/0:u,f=r.bottom,v=f===void 0?1/0:f,p={position:a,left:s,top:c,right:d,bottom:v};return{vertical:lu(p,e,!0),horizontal:lu(p,n,!1)}}function Ta(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,s=r.clientTop,l=n.snapOffset,c=l.left,u=l.top,d=l.right,f=l.bottom,v=e||t.props.bounds||{},p=v.position||"client",h=p==="css",g=v.left,m=g===void 0?-1/0:g,y=v.top,x=y===void 0?-1/0:y,S=v.right,w=S===void 0?h?-1/0:1/0:S,E=v.bottom,D=E===void 0?h?-1/0:1/0:E;return h&&(w=a+d-c-w,D=i+f-u-D),{left:m+c-o,right:w+c-o,top:x+u-s,bottom:D+u-s}}function kg(t,e,n){var r=Ta(t),i=r.left,a=r.top,o=r.right,s=r.bottom,l=_(n,2),c=l[0],u=l[1],d=_(dt(n,e),2),f=d[0],v=d[1];X(f)<Re&&(f=0),X(v)<Re&&(v=0);var p=v>0,h=f>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(f===0&&v===0)return{vertical:g,horizontal:m};if(f===0)p?s<u&&(m.pos=s,m.offset=u-s):a>u&&(m.pos=a,m.offset=u-a);else if(v===0)h?o<c&&(g.pos=o,g.offset=c-o):i>c&&(g.pos=i,g.offset=c-i);else{var y=v/f,x=n[1]-y*c,S=0,w=0,E=!1;h&&o<=c?(S=y*o+x,w=o,E=!0):!h&&c<=i&&(S=y*i+x,w=i,E=!0),E&&(S<a||S>s)&&(E=!1),E||(p&&s<=u?(S=s,w=(S-x)/y,E=!0):!p&&u<=a&&(S=a,w=(S-x)/y,E=!0)),E&&(g.isBound=!0,g.pos=w,g.offset=c-w,m.isBound=!0,m.pos=S,m.offset=u-S)}return{vertical:g,horizontal:m}}function lu(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,J([],_(e),!1)),o=Math.max.apply(Math,J([],_(e),!1)),s=[];return r+1>a&&s.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&s.push({direction:"end",isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(l,c){return X(c.offset)-X(l.offset)})}function cu(t,e,n){var r=n?t.map(function(i){return li(i,n)}):t;return r.some(function(i){return i[0]<e.left&&X(i[0]-e.left)>.1||i[0]>e.right&&X(i[0]-e.right)>.1||i[1]<e.top&&X(i[1]-e.top)>.1||i[1]>e.bottom&&X(i[1]-e.bottom)>.1})}function Rg(t,e,n){var r=Je(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return X(a-t[n?0:1])-X(o-t[n?0:1])}).map(function(a){return se([0,0],n?[a,e]:[e,a])})}function Pg(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=Ta(t),s=o.left,l=o.top,c=o.right,u=o.bottom,d=s-r[0],f=c-r[0],v=l-r[1],p=u-r[1],h={left:d,top:v,right:f,bottom:p};if(!cu(n,h,0))return[];var g=[];return[[d,0],[f,0],[v,1],[p,1]].forEach(function(m){var y=_(m,2),x=y[0],S=y[1];n.forEach(function(w){var E=se([0,0],w);g.push.apply(g,J([],_(Rg(w,x,S).map(function(D){return a+D-E}).filter(function(D){return!cu(e,h,D)}).map(function(D){return bt(D*180/Math.PI,Re)})),!1))})}),g}var Ag=["left","right","center"],Og=["top","bottom","middle"],uu={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Wn={start:"left",end:"right",center:"center"},Kn={start:"top",end:"bottom",center:"middle"};function zr(){return{left:!1,top:!1,right:!1,bottom:!1}}function Ir(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,s=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=t.state,d=u.guidelines,f=u.enableSnap;return!r||!f||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||c||i||a||d&&d.length||o&&o.length||s&&s.length)}function fs(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function _g(t,e){var n=fs(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function vs(t,e){var n=_g(t,e),r=Og.filter(function(a){return a in n}),i=Ag.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function Lg(t,e,n){var r=Jt(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Ng(t){var e=_(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<oe&&(i=0),Math.abs(a)<oe&&(a=0);var o=0,s=0,l=0;return i?a?(o=-a/i,s=1,l=o*n[0]-n[1]):(s=1,l=-n[1]):(o=-1,l=n[0]),[o,s,l].map(function(c){return bt(c,oe)})}var du="snapRotationThreshold",fu="snapRotationDegrees",vu="snapHorizontalThreshold",pu="snapVerticalThreshold";function Ma(t,e,n,r,i,a,o){var s;r===void 0&&(r=[]),i===void 0&&(i=[]);var l=t.props,c=((s=t.state.snapThresholdInfo)===null||s===void 0?void 0:s.multiples)||[1,1],u=Qu(o,l[vu],5),d=Qu(a,l[pu],5);return hu(t.state.guidelines,e,n,r,i,u,d,c)}function hu(t,e,n,r,i,a,o,s){return{vertical:mu(t,"vertical",e,o*s[0],r),horizontal:mu(t,"horizontal",n,a*s[1],i)}}function zg(t,e,n){var r=_(n,2),i=r[0],a=r[1],o=_(e,2),s=o[0],l=o[1],c=_(dt(n,e),2),u=c[0],d=c[1],f=d>0,v=u>0;u=ja(u),d=ja(d);var p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(u===0&&d===0)return{vertical:p,horizontal:h};var g=Ma(t,u?[i]:[],d?[a]:[],[],[],void 0,void 0),m=g.vertical,y=g.horizontal;m.posInfos.filter(function(j){var F=j.pos;return v?F>=s:F<=s}),y.posInfos.filter(function(j){var F=j.pos;return f?F>=l:F<=l}),m.isSnap=m.posInfos.length>0,y.isSnap=y.posInfos.length>0;var x=ps(m),S=x.isSnap,w=x.guideline,E=ps(y),D=E.isSnap,T=E.guideline,C=D?T.pos[1]:0,M=S?w.pos[0]:0;if(u===0)D&&(h.isSnap=!0,h.pos=T.pos[1],h.offset=a-h.pos);else if(d===0)S&&(p.isSnap=!0,p.pos=M,p.offset=i-M);else{var R=d/u,A=n[1]-R*i,P=0,L=0,N=!1;S?(L=M,P=R*L+A,N=!0):D&&(P=C,L=(P-A)/R,N=!0),N&&(p.isSnap=!0,p.pos=L,p.offset=i-L,h.isSnap=!0,h.pos=P,h.offset=a-P)}return{vertical:p,horizontal:h}}function Vn(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function gu(t,e,n,r){var i=vs(t.props.snapDirections,e),a=Ma(t,i.vertical,i.horizontal,i.verticalNames.map(function(l){return Vn(l)}),i.horizontalNames.map(function(l){return Vn(l)}),n,r),o=Vn(i.horizontalNames[a.horizontal.index]),s=Vn(i.verticalNames[a.vertical.index]);return{vertical:O(O({},a.vertical),{direction:s}),horizontal:O(O({},a.horizontal),{direction:o})}}function ps(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:o}}function mu(t,e,n,r,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=e==="vertical",l=s?0:1,c=n.map(function(d,f){var v=i[f]||"",p=t.map(function(h){var g=h.pos,m=d-g[l];return{offset:m,dist:X(m),guideline:h,direction:v}}).filter(function(h){var g=h.guideline,m=h.dist,y=g.type;return!(y!==e||m>r)}).sort(function(h,g){return h.dist-g.dist});return{pos:d,index:f,guidelineInfos:p,direction:v}}).filter(function(d){return d.guidelineInfos.length>0}).sort(function(d,f){return d.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),u=c.length>0;return{isSnap:u,index:u?c[0].index:-1,direction:(o=(a=c[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:c}}function Ig(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(f,v,p){var h=p[v+1]||p[0];a.push(f),a.push([(f[0]+h[0])/2,(f[1]+h[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,J([],_(fg([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(f){return me(e,f)}),s=o.map(function(f){return f[0]}),l=o.map(function(f){return f[1]}),c=Ma(t,s,l,a.map(function(f){return Vn(f[0])}),a.map(function(f){return Vn(f[1])}),r,i),u=Vn(a.map(function(f){return f[0]})[c.vertical.index]),d=Vn(a.map(function(f){return f[1]})[c.horizontal.index]);return{vertical:O(O({},c.vertical),{direction:u}),horizontal:O(O({},c.horizontal),{direction:d})}}function yu(t,e){var n=X(t.offset),r=X(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Re?1:r<Re?-1:n-r}function ka(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],o=n.offset[e],s=r.offset[e];if(i){if(!a)return-1}else return 1;return yu({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:s})})[0]}function Bg(t,e,n){var r=[];if(n)X(e[0])!==1||X(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var l=[o*i[0],s*i[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var a=X(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var a=X(e[1])===1?[1]:[1,-1];a.forEach(function(s){r.push([[-1,e[1]],[-1,s*t[1]]],[[0,e[1]],[0,s*t[1]]],[[1,e[1]],[1,s*t[1]]])})}return r}function xu(t,e){var n=xo([e[0][0],e[1][0]]),r=xo([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function hs(t,e){var n=_(e,2),r=n[0],i=n[1],a=i[0]-r[0],o=i[1]-r[1];X(a)<Re&&(a=0),X(o)<Re&&(o=0);var s,l;if(!a)s=r[0],l=t[0];else if(!o)s=r[1],l=t[1];else{var c=o/a;s=c*(t[0]-r[0])+r[1],l=t[1]}return s-l}function bu(t,e,n,r){return r===void 0&&(r=Re),t.every(function(i){var a=hs(i,e),o=a<=0;return o===n||X(a)<=r})}function Cu(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function jg(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=s.left,c=s.top,u=s.width,d=s.height,f=[[l,c],[l,c+d]],v=[[l,c],[l+u,c]],p=[[l+u,c],[l+u,c+d]],h=[[l,c+d],[l+u,c+d]];if(bu([[l,c],[l+u,c],[l,c+d],[l+u,c+d]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Yn(n,o,v,i),m=Yn(n,o,h,i),y=Yn(n,o,f,a),x=Yn(n,o,p,a),S=g.isBound&&m.isBound,w=g.isBound||m.isBound,E=y.isBound&&x.isBound,D=y.isBound||x.isBound,T=jr(g.offset,m.offset),C=jr(y.offset,x.offset),M=[0,0],R=!1,A=!1;return X(C)<X(T)?(M=[T,0],R=w,A=S):(M=[0,C],R=D,A=E),{isAllBound:A,isVerticalBound:w,isHorizontalBound:D,isBound:R,offset:M}}function Yn(t,e,n,r,i,a){var o=_(e,2),s=o[0],l=o[1],c=t[0],u=n[0],d=n[1],f=ja(d[1]-u[1]),v=ja(d[0]-u[0]),p=l,h=s,g=-s/l;if(v){if(!f){if(a&&!p)return{isBound:!1,offset:0};if(h){var S=(u[1]-c[1])/g+c[0];return Cu(S,u[0],d[0],r,i)}else{var y=u[1]-c[1],x=X(y)<=(i||0);return{isBound:x,offset:x?y:0}}}}else{if(a&&!h)return{isBound:!1,offset:0};if(p){var m=g*(u[0]-c[0])+c[1];return Cu(m,u[1],d[1],r,i)}else{var y=u[0]-c[0],x=X(y)<=(i||0);return{isBound:x,offset:x?y:0}}}return{isBound:!1,offset:0}}function Su(t,e,n){return e.map(function(r){var i=jg(t,r),a=i.isBound,o=i.offset,s=i.isVerticalBound,l=i.isHorizontalBound,c=r.multiple,u=bn({datas:n,distX:o[0],distY:o[1]}).map(function(d,f){return d*(c[f]?2/c[f]:0)});return{sign:c,isBound:a,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:u}})}function Gg(t,e,n){var r,i=gs(t,e,[0,0],!1).map(function(f){return O(O({},f),{multiple:f.multiple.map(function(v){return X(v)*2})})}),a=Su(t,i,n),o=ka(a,0),s=ka(a,1),l=0,c=0,u=o.isVerticalBound||s.isVerticalBound,d=o.isHorizontalBound||s.isHorizontalBound;return(u||d)&&(r=_(ug({datas:n,distX:-o.offset[0],distY:-s.offset[1]}),2),l=r[0],c=r[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:d,offset:c}}}function Fg(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function gs(t,e,n,r){var i=t.state,a=i.allMatrix,o=i.is3d,s=ur(a,100,100,o?4:3),l=me(s,[0,0]);return Fg(n,r).map(function(c){var u=_(c,3),d=u[0],f=u[1],v=u[2],p=[me(s,f),me(s,v)],h=Ng(p),g=xu(l,p),m=g.vertical,y=g.horizontal,x=hs(l,p)<=0;return{multiple:d,centerSign:x,verticalSign:m,horizontalSign:y,lineConstants:h,line:[me(e,f),me(e,v)]}})}function Eu(t,e,n,r){var i=r?t.map(function(a){return li(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=hs(n,a)<=0;return!bu(e,a,o)})}function Wg(t){var e=_(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return X(n[0]);if(!a)return X(n[1]);var o=a/i;return X((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function Kg(t){var e=_(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var o=a/i,s=-o*n[0]+n[1];return[-s/(o+1/o),s/(o*o+1)]}function Vg(t,e,n,r,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var s=a.left,l=a.top,c=a.width,u=a.height,d=s-r[0],f=s+c-r[0],v=l-r[1],p=l+u-r[1],h=[[d,v],[f,v],[d,p],[f,p]],g=me(n,[0,0]);if(!Eu(n,h,g,0))return[];var m=[],y=h.map(function(x){return[Je(x),se([0,0],x)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(x){var S=se([0,0],Kg(x)),w=Wg(x);m.push.apply(m,J([],_(y.filter(function(E){var D=_(E,1),T=D[0];return T&&w<=T}).map(function(E){var D=_(E,2),T=D[0],C=D[1],M=Math.acos(T?w/T:0),R=C+M,A=C-M;return[o+R-S,o+A-S]}).reduce(function(E,D){return E.push.apply(E,J([],_(D),!1)),E},[]).filter(function(E){return!Eu(e,h,g,E)}).map(function(E){return bt(E*180/Math.PI,Re)})),!1))}),m}function Yg(t){var e=t.props.innerBounds,n=zr();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,s=r.pos4,l=[i,a,o,s],c=me(l,[0,0]),u=e.left,d=e.top,f=e.width,v=e.height,p=[[u,d],[u,d+v]],h=[[u,d],[u+f,d]],g=[[u+f,d],[u+f,d+v]],m=[[u,d+v],[u+f,d+v]],y=gs(t,l,[0,0],!1),x=[],S=[];return y.forEach(function(w){var E=w.line,D=w.lineConstants,T=xu(c,E),C=T.horizontal,M=T.vertical,R=Yn(E,D,h,M,1,!0),A=Yn(E,D,m,M,1,!0),P=Yn(E,D,p,C,1,!0),L=Yn(E,D,g,C,1,!0);R.isBound&&!n.top&&(x.push(d),n.top=!0),A.isBound&&!n.bottom&&(x.push(d+v),n.bottom=!0),P.isBound&&!n.left&&(S.push(u),n.left=!0),L.isBound&&!n.right&&(S.push(u+f),n.right=!0)}),{boundMap:n,horizontal:x,vertical:S}}function Xg(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(X(i)<oe&&(i=0),X(a)<oe&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,s=t[1]-o*t[0];if(r){var l=o*(e[0]+n)+s;return[n,l-e[1]]}else{var c=(e[1]+n-s)/o;return[c-e[0],n]}}function ms(t,e,n,r,i){var a=Xg(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=xn(t,e),s=xn(a,t),l=xn(a,e),c=s>o||l>o,u=_(bn({datas:i,distX:a[0],distY:a[1]}),2),d=u[0],f=u[1];return{offset:[d,f],isOutside:c}}function Ra(t,e){return t.isBound?t.offset:e.isSnap?ps(e).offset:0}function Hg(t,e,n,r,i){var a=_(e,2),o=a[0],s=a[1],l=_(n,2),c=l[0],u=l[1],d=_(r,2),f=d[0],v=d[1],p=_(i,2),h=p[0],g=p[1],m=-h,y=-g;if(t&&o&&s){m=0,y=0;var x=[];if(c&&u?x.push([0,g],[h,0]):c?x.push([h,0]):u?x.push([0,g]):f&&v?x.push([0,g],[h,0]):f?x.push([h,0]):v&&x.push([0,g]),x.length){x.sort(function(D,T){return Je(dt([o,s],D))-Je(dt([o,s],T))});var S=x[0];if(S[0]&&X(o)>oe)m=-S[0],y=s*X(o+m)/X(o)-s;else if(S[1]&&X(s)>oe){var w=s;y=-S[1],m=o*X(s+y)/X(w)-o}if(t&&u&&c)if(X(m)>oe&&X(m)<X(h)){var E=X(h)/X(m);m*=E,y*=E}else if(X(y)>oe&&X(y)<X(g)){var E=X(g)/X(y);m*=E,y*=E}else m=jr(-h,m),y=jr(-g,y)}}else m=o||c?-h:0,y=s||u?-g:0;return[m,y]}function $g(t,e,n,r,i,a){if(!Ir(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Rs(a.absolutePoses,[e,n]),s=qe(o),l=s.left,c=s.right,u=s.top,d=s.bottom,f={horizontal:o.map(function(L){return L[1]}),vertical:o.map(function(L){return L[0]})},v=fs(t.props.snapDirections),p=vs(v,{left:l,right:c,top:u,bottom:d,center:(l+c)/2,middle:(u+d)/2}),h=Pa(t,i,p,f),g=h.vertical,m=h.horizontal,y=Gg(t,o,a),x=y.vertical,S=y.horizontal,w=g.isSnap,E=m.isSnap,D=g.isBound||x.isBound,T=m.isBound||S.isBound,C=jr(g.offset,x.offset),M=jr(m.offset,S.offset),R=_(Hg(r,[e,n],[D,T],[w,E],[C,M]),2),A=R[0],P=R[1];return[{isBound:D,isSnap:w,offset:A},{isBound:T,isSnap:E,offset:P}]}function Pa(t,e,n,r){r===void 0&&(r=n);var i=ds(Ta(t),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Ma(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),l=s.horizontal,c=s.vertical,u=Ra(a[0],l),d=Ra(o[0],c),f=X(u),v=X(d);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:f,bounds:a,snap:l},vertical:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:v,bounds:o,snap:c}}}function wu(t,e,n,r,i,a,o){o===void 0&&(o=[1,1]);var s=ds(e,n,r),l=s.horizontal,c=s.vertical,u=hu(t,n,r,[],[],i,a,o),d=u.horizontal,f=u.vertical,v=Ra(l[0],d),p=Ra(c[0],f),h=X(v),g=X(p);return{horizontal:{isBound:l[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:v,dist:h,bounds:l,snap:d},vertical:{isBound:c[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:p,dist:g,bounds:c,snap:f}}}function Ug(t,e,n,r){var i=se(t,e)/Math.PI*180,a=n.vertical,o=a.isBound,s=a.isSnap,l=a.dist,c=n.horizontal,u=c.isBound,d=c.isSnap,f=c.dist,v=i%180,p=v<3||v>177,h=v>87&&v<93;return f<l&&(o||s&&!h&&(!r||!p))?"vertical":u||d&&!p&&(!r||!h)?"horizontal":""}function Zg(t,e,n,r,i,a){return n.map(function(o){var s=_(o,2),l=s[0],c=s[1],u=me(e,l),d=me(e,c),f=r?Qg(t,u,d,i):Pa(t,i,{vertical:[d[0]],horizontal:[d[1]]}),v=f.horizontal,p=v.offset,h=v.isBound,g=v.isSnap,m=f.vertical,y=m.offset,x=m.isBound,S=m.isSnap,w=dt(c,l);if(!y&&!p)return{isBound:x||h,isSnap:S||g,sign:w,offset:[0,0]};var E=Ug(u,d,f,r);if(!E)return{sign:w,isBound:!1,isSnap:!1,offset:[0,0]};var D=E==="vertical",T=[0,0];return!r&&X(c[0])===1&&X(c[1])===1&&l[0]!==c[0]&&l[1]!==c[1]?T=bn({datas:a,distX:-y,distY:-p}):T=ms(u,d,-(D?y:p),D,a).offset,T=T.map(function(C,M){return C*(w[M]?2/w[M]:0)}),{sign:w,isBound:D?x:h,isSnap:D?S:g,offset:T}})}function Du(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Qg(t,e,n,r){var i=kg(t,e,n),a=i.horizontal,o=i.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:zg(t,e,n),l=s.horizontal,c=s.vertical,u=Du(a,l),d=Du(o,c),f=X(u),v=X(d);return{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:u,dist:f},vertical:{isBound:o.isBound,isSnap:c.isSnap,offset:d,dist:v}}}function qg(t,e,n,r,i){var a=[-n[0],-n[1]],o=t.state,s=o.width,l=o.height,c=t.props.bounds,u=1/0,d=1/0;if(c){var f=[[n[0],-n[1]],[-n[0],n[1]]],v=c.left,p=v===void 0?-1/0:v,h=c.top,g=h===void 0?-1/0:h,m=c.right,y=m===void 0?1/0:m,x=c.bottom,S=x===void 0?1/0:x;f.forEach(function(w){var E=w[0]!==a[0],D=w[1]!==a[1],T=me(e,w),C=se(r,T)*360/Math.PI;if(D){var M=T.slice();(X(C-360)<2||X(C-180)<2)&&(M[1]=r[1]);var R=ms(r,M,(r[1]<T[1]?S:g)-T[1],!1,i),A=_(R.offset,2),P=A[1],L=R.isOutside;isNaN(P)||(d=l+(L?1:-1)*X(P))}if(E){var M=T.slice();(X(C-90)<2||X(C-270)<2)&&(M[0]=r[0]);var N=ms(r,M,(r[0]<T[0]?y:p)-T[0],!0,i),j=_(N.offset,1),F=j[0],G=N.isOutside;isNaN(F)||(u=s+(G?1:-1)*X(F))}})}return{maxWidth:u,maxHeight:d}}var Pe={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,o=t.getState(),s=o.dragInfo,l=o.beforeOrigin;if(r||!i||!s)return[];var c=s.dist;if(!c[0]&&!c[1])return[];var u=Je(c),d=se(c,[0,0]);return[e.createElement("div",{className:lt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(u,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(d,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,o=a.gestos,s=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(s.left||"")||0,n.top=parseFloat(s.top||"")||0,n.bottom=parseFloat(s.bottom||"")||0,n.right=parseFloat(s.right||"")||0,n.startValue=[0,0],sr(t,e),Ca(t,e,"translate"),m0(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=Dt(t,e,O({set:function(u){n.startValue=u}},ba(t,e))),c=r||rt(t,"onDragStart",l);return c!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){ya(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,s=e.useSnap,l=e.isRequest,c=e.isGroup,u=e.parentThrottleDrag,d=e.distX,f=e.distY,v=n.isDrag,p=n.prevDist,h=n.prevBeforeDist,g=n.startValue;if(v){o&&(d+=o[0],f+=o[1]);var m=t.props,y=m.parentMoveable,x=c?0:m.throttleDrag||u||0,S=r?0:m.throttleDragRotate||0,w=0,E=!1,D=!1,T=!1,C=!1;if(!r&&S>0&&(d||f)){var M=m.startDragRotate||0,R=bt(M+se([0,0],[d,f])*180/Math.PI,S)-M,A=f*Math.abs(Math.cos((R-90)/180*Math.PI)),P=d*Math.abs(Math.cos(R/180*Math.PI)),L=Je([P,A]);w=R*Math.PI/180,d=L*Math.cos(w),f=L*Math.sin(w)}if(!a&&!r&&!i){var N=_($g(t,d,f,S,!s&&l||o,n),2),j=N[0],F=N[1];E=j.isSnap,D=j.isBound,T=F.isSnap,C=F.isBound;var G=j.offset,W=F.offset;d+=G,f+=W}var K=Lt(Qc({datas:n,distX:d,distY:f}),g),B=Lt(cg({datas:n,distX:d,distY:f}),g);Jl(B,Re),Jl(K,Re),S||(!E&&!D&&(B[0]=bt(B[0],x),K[0]=bt(K[0],x)),!T&&!C&&(B[1]=bt(B[1],x),K[1]=bt(K[1],x)));var Q=dt(K,g),q=dt(B,g),H=dt(q,p),U=dt(Q,h);n.prevDist=q,n.prevBeforeDist=Q,n.passDelta=H,n.passDist=q;var Y=n.left+Q[0],tt=n.top+Q[1],nt=n.right-Q[0],vt=n.bottom-Q[1],ct=xa(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(q[0],"px, ").concat(q[1],"px)"));if(ls(e,ct),t.state.dragInfo.dist=r?[0,0]:q,!(!r&&!y&&H.every(function(ft){return!ft})&&U.some(function(ft){return!ft}))){var $=t.state,et=$.width,Tt=$.height,ut=Dt(t,e,O({transform:ct,dist:q,delta:H,translate:B,beforeDist:Q,beforeDelta:U,beforeTranslate:K,left:Y,top:tt,right:nt,bottom:vt,width:et,height:Tt,isPinch:a},Ae({transform:ct},e)));return!r&&rt(t,"onDrag",ut),ut}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,O(O({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=Ve(t,e,{});return!n&&rt(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,s=this.dragStart(t,e);if(!s)return!1;var l=us(t,this,"dragStart",[a||0,o||0],e,!1,"draggable"),c=l.childEvents,u=l.eventParams,d=O(O({},s),{targets:t.props.targets,events:u}),f=rt(t,"onDragGroupStart",d);i.isDrag=f!==!1;var v=(r=(n=c[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[v[0]%1,v[1]%1],i.isDrag?s:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,O(O({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=us(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=O({targets:t.props.targets,events:a},r);return rt(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=us(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return rt(t,"onDragGroupEnd",Ve(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Tu(t,e){var n=me(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Jg(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,s=[i/2*(1+e[0]),a/2*(1+e[1])],l=Jt(n,s,o),c=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:c}}function Mu(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,s=mg(e,i,a),l=Jt(n,e,o),c=[i?0:e[0],a?0:e[1]];return{fixedPosition:l,fixedDirection:s,fixedOffset:c}}var ku=Ls("resizable"),ys={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:au("resizable"),dragControlCondition:ku,viewClassName:_s("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,s=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,d=$u(o,i,r,l),f=t.state,v=f.target,p=f.width,h=f.height,g=f.gestos;if(!d||!v||g.resizable)return!1;g.resizable=s||t.controlGesto,!i&&sr(t,e),l.datas={},l.direction=d,l.startOffsetWidth=p,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],a||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&we(m)?m.split(" "):m,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!d[0]&&!d[1]||d[0]||!d[1];function y(C){l.ratio=C&&isFinite(C)?C:0}l.startPositions=tn(t.state);function x(C){var M=Tu(l.startPositions,C);l.fixedDirection=M.fixedDirection,l.fixedPosition=M.fixedPosition,l.fixedOffset=M.fixedOffset}function S(C){var M=Mu(t.state,C);l.fixedDirection=M.fixedDirection,l.fixedPosition=M.fixedPosition,l.fixedOffset=M.fixedOffset}function w(C){l.minSize=[Ft("".concat(C[0]),0)||0,Ft("".concat(C[1]),0)||0]}function E(C){var M=[C[0]||1/0,C[1]||1/0];(!wr(M[0])||isFinite(M[0]))&&(M[0]=Ft("".concat(M[0]),0)||1/0),(!wr(M[1])||isFinite(M[1]))&&(M[1]=Ft("".concat(M[1]),0)||1/0),l.maxSize=M}y(p/h),x(c||[-d[0],-d[1]]),l.setFixedDirection=x,l.setFixedPosition=S,l.setMin=w,l.setMax=E;var D=Dt(t,e,{direction:d,startRatio:l.ratio,set:function(C){var M=_(C,2),R=M[0],A=M[1];l.startWidth=R,l.startHeight=A},setMin:w,setMax:E,setRatio:y,setFixedDirection:x,setFixedPosition:S,setOrigin:function(C){l.transformOrigin=C},dragStart:Pe.dragStart(t,new Ar().dragStart([0,0],e))}),T=u||rt(t,"onResizeStart",D);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,T!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),l.isResize?D:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,s=e.dragClient,l=e.parentDist,c=e.useSnap,u=e.isRequest,d=e.isGroup,f=e.parentEvent,v=e.resolveMatrix,p=r.isResize,h=r.transformOrigin,g=r.startWidth,m=r.startHeight,y=r.prevWidth,x=r.prevHeight,S=r.minSize,w=r.maxSize,E=r.ratio,D=r.startOffsetWidth,T=r.startOffsetHeight,C=r.isWidth;if(!p)return;if(v){var M=t.state.is3d,R=r.startOffsetMatrix,A=r.startTransformOrigin,P=M?4:3,L=rr(Sa(e)),N=Math.sqrt(L.length);P!==N&&(L=fn(L,N,P));var j=gi(R,L,A,P),F=ur(j,D,T,P);r.startPositions=F,r.nextTargetMatrix=L,r.nextAllMatrix=j}var G=dr(t.props,"resizable"),W=G.resizeFormat,K=G.throttleResize,B=K===void 0?i?0:1:K,Q=G.parentMoveable,q=G.keepRatioFinally,H=r.direction,U=H,Y=0,tt=0;!H[0]&&!H[1]&&(U=[1,1]);var nt=E&&(o??G.keepRatio)||!1;function vt(){var wt=r.fixedDirection,ht=rd(U,nt,r,e);Y=ht.distWidth,tt=ht.distHeight;var ge=U[0]-wt[0]||nt?Math.max(D+Y,Re):D,le=U[1]-wt[1]||nt?Math.max(T+tt,Re):T;return nt&&D&&T&&(C?le=ge/E:ge=le*E),[ge,le]}var ct=_(vt(),2),$=ct[0],et=ct[1];f||(r.setFixedDirection(r.fixedDirection),rt(t,"onBeforeResize",Dt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(wt){var ht;return r.setFixedDirection(wt),ht=_(vt(),2),$=ht[0],et=ht[1],[$,et]},setFixedPosition:function(wt){var ht;return r.setFixedPosition(wt),ht=_(vt(),2),$=ht[0],et=ht[1],[$,et]},boundingWidth:$,boundingHeight:et,setSize:function(wt){var ht;ht=_(wt,2),$=ht[0],et=ht[1]}},!0)));var Tt=s;s||(!i&&a?Tt=Cg(t,[0,0]):Tt=r.fixedPosition);var ut=[0,0];a||(ut=h0(t,$,et,H,Tt,!c&&u,r)),l&&(!l[0]&&(ut[0]=0),!l[1]&&(ut[1]=0));function ft(){var wt;W&&(wt=_(W([$,et]),2),$=wt[0],et=wt[1]),$=bt($,B),et=bt(et,B)}if(nt){U[0]&&U[1]&&ut[0]&&ut[1]&&(X(ut[0])>X(ut[1])?ut[1]=0:ut[0]=0);var xt=!ut[0]&&!ut[1];xt&&ft(),U[0]&&!U[1]||ut[0]&&!ut[1]||xt&&C?($+=ut[0],et=$/E):(!U[0]&&U[1]||!ut[0]&&ut[1]||xt&&!C)&&(et+=ut[1],$=et*E)}else $+=ut[0],et+=ut[1],$=Math.max(0,$),et=Math.max(0,et);n=_(yo([$,et],S,w,nt?E:!1),2),$=n[0],et=n[1],ft(),nt&&(d||q)&&(C?et=$/E:$=et*E),Y=$-D,tt=et-T;var Ot=[Y-y,tt-x];r.prevWidth=Y,r.prevHeight=tt;var Rt=bg(t,$,et,Tt,h,r);if(!(!Q&&Ot.every(function(wt){return!wt})&&Rt.every(function(wt){return!wt}))){var gt=Pe.drag(t,hi(e,t.state,Rt,!!a,!1,"draggable")),Ct=gt.transform,Yt=g+Y,te=m+tt,Et=Dt(t,e,O({width:Yt,height:te,offsetWidth:Math.round($),offsetHeight:Math.round(et),startRatio:E,boundingWidth:$,boundingHeight:et,direction:H,dist:[Y,tt],delta:Ot,isPinch:!!a,drag:gt},Zu({style:{width:"".concat(Yt,"px"),height:"".concat(te,"px")},transform:Ct},gt,e)));return!f&&rt(t,"onResize",Et),Et}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,s=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,c=l.width,u=l.height,d=c-(i+o),f=u-(a+s),v=X(d)>3,p=X(f)>3;if(v&&(n.startWidth+=d,n.startOffsetWidth+=d,n.prevWidth+=d),p&&(n.startHeight+=f,n.startOffsetHeight+=f,n.prevHeight+=f),v||p)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=Ve(t,e,{});return!r&&rt(t,"onResizeEnd",i),i}},dragGroupControlCondition:ku,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,O(O({},e),{isGroup:!0}));if(!r)return!1;var i=vn(t,"resizable",e),a=n.startOffsetWidth,o=n.startOffsetHeight;function s(){var v=n.minSize;i.forEach(function(p){var h=p.datas,g=h.minSize,m=h.startOffsetWidth,y=h.startOffsetHeight,x=a*(m?g[0]/m:0),S=o*(y?g[1]/y:0);v[0]=Math.max(v[0],x),v[1]=Math.max(v[1],S)})}function l(){var v=n.maxSize;i.forEach(function(p){var h=p.datas,g=h.maxSize,m=h.startOffsetWidth,y=h.startOffsetHeight,x=a*(m?g[0]/m:0),S=o*(y?g[1]/y:0);v[0]=Math.min(v[0],x),v[1]=Math.min(v[1],S)})}var c=An(t,this,"dragControlStart",e,function(v,p){return Da(t,v,n,p)});s(),l();var u=function(v){r.setFixedDirection(v),c.forEach(function(p,h){p.setFixedDirection(v),Da(t,p.moveable,n,i[h])})};n.setFixedDirection=u;var d=O(O({},r),{targets:t.props.targets,events:c.map(function(v){return O(O({},v),{setMin:function(p){v.setMin(p),s()},setMax:function(p){v.setMax(p),l()}})}),setFixedDirection:u,setMin:function(v){r.setMin(v),s()},setMax:function(v){r.setMax(v),l()}}),f=rt(t,"onResizeGroupStart",d);return n.isResize=f!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=dr(t.props,"resizable");Ia(t,"onBeforeResize",function(v){rt(t,"onBeforeResizeGroup",Dt(t,e,O(O({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,O(O({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,s=i.dist,l=r.keepRatio,c=[a/(a-s[0]),o/(o-s[1])],u=n.fixedPosition,d=An(t,this,"dragControl",e,function(v,p){var h=_(De(ci(t.rotation/180*Math.PI,3),[p.datas.originalX*c[0],p.datas.originalY*c[1],1],3),2),g=h[0],m=h[1];return O(O({},p),{parentDist:null,parentScale:c,dragClient:Lt(u,[g,m]),parentKeepRatio:l})}),f=O({targets:r.targets,events:d},i);return rt(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=An(t,this,"dragControlEnd",e),a=Ve(t,e,{targets:t.props.targets,events:i});return rt(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var s;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(s=o?.horizontal)!==null&&s!==void 0?s:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function xs(t,e,n,r,i){var a=t.props.groupable,o=t.state,s=o.is3d?4:3,l=e.origin,c=Jt(t.state.rootMatrix,dt([l[0],l[1]],a?[0,0]:[o.left,o.top]),s),u=Lt([i.left,i.top],c);e.startAbsoluteOrigin=u,e.prevDeg=se(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=xn(u,[n,r])}function Aa(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var s=e*(o*360+t-r);return n.prevDeg=r+s,s}function bs(t,e,n,r){return Aa(se(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Cs(t,e,n,r,i,a){var o=t.props.throttleRotate,s=o===void 0?0:o,l=n.prevSnapDeg,c=0,u=!1;if(a){var d=p0(t,e,r,i+r);u=d.isSnap,c=i+d.dist}u||(c=bt(i+r,s));var f=c-i;return n.prevSnapDeg=f,[f-l,f,c]}function Ru(t,e,n){var r=_(e,4),i=r[0],a=r[1],o=r[2],s=r[3];if(t==="none")return[];if(ie(t))return t.map(function(g){return Ru(g,[i,a,o,s],n)[0]});var l=_((t||"top").split("-"),2),c=l[0],u=l[1],d=[i,a];c==="left"?d=[o,i]:c==="right"?d=[a,s]:c==="bottom"&&(d=[s,o]);var f=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2],v=Xu(d,n);if(u){var p=u==="top"||u==="left",h=c==="bottom"||c==="left";f=d[p&&!h||!p&&h?0:1]}return[[f,v]]}function Ss(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(fe(n,lt("rotation-control"))||t.props.rotateAroundControls&&fe(n,lt("around-control"))||fe(n,lt("control"))&&fe(n,lt("rotatable")))return!0;var r=t.props.rotationTarget;return r?Ns(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var t0=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,e0={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[t0],viewClassName:function(t){return t.isDragging("rotatable")?lt("view-rotation-dragging"):""},render:function(t,e){var n=dr(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,s=n.rotateAroundControls,l=n.resolveAblesWithRotatable,c=t.getState(),u=c.renderPoses,d=c.direction;if(!r)return null;var f=Ru(i,u,d),v=[];if(f.forEach(function(m,y){var x=_(m,2),S=x[0],w=x[1];v.push(e.createElement("div",{key:"rotation".concat(y),className:lt("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(w,"rad)")}},e.createElement("div",{className:lt("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:lt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var p=yn(l||{}),h={};p.forEach(function(m){l[m].forEach(function(y){h[y]=m})});var g=[];ie(o)&&(g=o.map(function(m){var y=h[m];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:m}})),v.push.apply(v,J([],_(nu(t,"rotatable",g,e)),!1))}return s&&v.push.apply(v,J([],_(su(t,e)),!1)),v},dragControlCondition:Ss,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,s=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,d=t.state,f=d.target,v=d.left,p=d.top,h=d.direction,g=d.beforeDirection,m=d.targetTransform,y=d.moveableClientRect,x=d.offsetMatrix,S=d.targetMatrix,w=d.allMatrix,E=d.width,D=d.height;if(!u&&!f)return!1;var T=t.getRect();i.rect=T,i.transform=m,i.left=v,i.top=p;var C=function(U){var Y=Mu(t.state,U);i.fixedDirection=Y.fixedDirection,i.fixedOffset=Y.fixedOffset,i.fixedPosition=Y.fixedPosition,B&&B.setFixedPosition(U)},M=function(U){var Y=Jg(t.state,U);i.fixedDirection=Y.fixedDirection,i.fixedOffset=Y.fixedOffset,i.fixedPosition=Y.fixedPosition,B&&B.setFixedDirection(U)},R=a,A=o;if(u||c||l){var P=s||0;i.beforeInfo={origin:T.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},i.afterInfo=O(O({},i.beforeInfo),{origin:T.origin}),i.absoluteInfo=O(O({},i.beforeInfo),{origin:T.origin,startValue:P})}else{var L=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(L){var N=L.getAttribute("data-direction")||"",j=sg[N];if(j){i.isControl=!0,i.isAroundControl=fe(L,lt("around-control")),i.controlDirection=j;var F=L.getAttribute("data-resolve");F&&(i.resolveAble=F);var G=P0(d.rootMatrix,d.renderPoses,y);n=_(me(G,j),2),R=n[0],A=n[1]}}i.beforeInfo={origin:T.beforeOrigin},i.afterInfo={origin:T.origin},i.absoluteInfo={origin:T.origin,startValue:T.rotation};var W=C;C=function(U){var Y=d.is3d?4:3,tt=_(Lt(Pc(S,Y),U),2),nt=tt[0],vt=tt[1],ct=De(x,er([nt,vt],Y)),$=De(w,er([U[0],U[1]],Y));W(U);var et=d.posDelta;i.beforeInfo.origin=dt(ct,et),i.afterInfo.origin=dt($,et),i.absoluteInfo.origin=dt($,et),xs(t,i.beforeInfo,R,A,y),xs(t,i.afterInfo,R,A,y),xs(t,i.absoluteInfo,R,A,y)},M=function(U){var Y=me([[0,0],[E,0],[0,D],[E,D]],U);C(Y)}}i.startClientX=R,i.startClientY=A,i.direction=h,i.beforeDirection=g,i.startValue=0,i.datas={},Ca(t,e,"rotate");var K=!1,B=!1;if(i.isControl&&i.resolveAble){var Q=i.resolveAble;Q==="resizable"&&(B=ys.dragControlStart(t,O(O({},new Ar("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}B||(K=Pe.dragStart(t,new Ar().dragStart([0,0],e))),C(A0(t));var q=Dt(t,e,O(O({set:function(U){i.startValue=U*Math.PI/180},setFixedDirection:M,setFixedPosition:C},ba(t,e)),{dragStart:K,resizeStart:B})),H=rt(t,"onRotateStart",q);return i.isRotate=H!==!1,d.snapRenderInfo={request:e.isRequest},i.isRotate?q:!1},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.clientDistX,s=e.clientDistY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,d=e.groupDelta,f=e.resolveMatrix,v=a.beforeDirection,p=a.beforeInfo,h=a.afterInfo,g=a.absoluteInfo,m=a.isRotate,y=a.startValue,x=a.rect,S=a.startClientX,w=a.startClientY;if(m){ya(t,e,"rotate");var E=lg(e),D=v*E,T=t.props.parentMoveable,C=0,M,R,A=0,P,L,N=0,j,F,G=180/Math.PI*y,W=g.startValue,K=!1,B=S+o,Q=w+s;if(!c&&"parentDist"in e){var q=e.parentDist;M=q,P=q,j=q}else u||c?(M=Aa(l,v,p),P=Aa(l,D,h),j=Aa(l,D,g)):(M=bs(B,Q,v,p),P=bs(B,Q,D,h),j=bs(B,Q,D,g),K=!0);if(R=G+M,L=G+P,F=W+j,rt(t,"onBeforeRotate",Dt(t,e,{beforeRotation:R,rotation:L,absoluteRotation:F,setRotation:function(Tt){P=Tt-G,M=P,j=P}},!0)),n=_(Cs(t,x,p,M,G,K),3),C=n[0],M=n[1],R=n[2],r=_(Cs(t,x,h,P,G,K),3),A=r[0],P=r[1],L=r[2],i=_(Cs(t,x,g,j,W,K),3),N=i[0],j=i[1],F=i[2],!(!N&&!A&&!C&&!T&&!f)){var H=xa(a,"rotate(".concat(L,"deg)"),"rotate(".concat(P,"deg)"));f&&(a.fixedPosition=cs(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var U=xg(t,P,a),Y=dt(Lt(d||[0,0],U),a.prevInverseDist||[0,0]);a.prevInverseDist=U,a.requestValue=null;var tt=Jc(t,H,Y,u,e),nt=tt,vt=xn([B,Q],g.startAbsoluteOrigin)-g.startDist,ct=void 0;if(a.resolveAble==="resizable"){var $=ys.dragControl(t,O(O({},hi(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:vt}));$&&(ct=$,nt=Zu(nt,$,e))}var et=Dt(t,e,O(O({delta:A,dist:P,rotate:L,rotation:L,beforeDist:M,beforeDelta:C,beforeRotate:R,beforeRotation:R,absoluteDist:j,absoluteDelta:N,absoluteRotate:F,absoluteRotation:F,isPinch:!!u,resize:ct},tt),nt));return rt(t,"onRotate",et),et}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=Ve(t,e,{});return rt(t,"onRotateEnd",r),r}},dragGroupControlCondition:Ss,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,o=r.beforeOrigin,s=this.dragControlStart(t,e);if(!s)return!1;s.set(n.beforeDirection*t.rotation);var l=An(t,this,"dragControlStart",e,function(d,f){var v=d.state,p=v.left,h=v.top,g=v.beforeOrigin,m=Lt(dt([p,h],[i,a]),dt(g,o));return f.datas.startGroupClient=m,f.datas.groupClient=m,O(O({},f),{parentRotate:0})}),c=O(O({},s),{targets:t.props.targets,events:l}),u=rt(t,"onRotateGroupStart",c);return n.isRotate=u!==!1,n.isRotate?s:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){Ia(t,"onBeforeRotate",function(c){rt(t,"onBeforeRotateGroup",Dt(t,e,O(O({},c),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,s=An(t,this,"dragControl",e,function(c,u){var d=u.datas.startGroupClient,f=_(u.datas.groupClient,2),v=f[0],p=f[1],h=_(li(d,o*i),2),g=h[0],m=h[1],y=[g-v,m-p];return u.datas.groupClient=[g,m],O(O({},u),{parentRotate:a,groupDelta:y})});t.rotation=i*r.beforeRotation;var l=O({targets:t.props.targets,events:s,set:function(c){t.rotation=c},setGroupRotation:function(c){t.rotation=c}},r);return rt(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=An(t,this,"dragControlEnd",e),a=Ve(t,e,{targets:t.props.targets,events:i});return rt(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function n0(t,e){var n,r=t.direction,i=t.classNames,a=t.size,o=t.pos,s=t.zoom,l=t.key,c=r==="horizontal",u=c?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(n={},n[c?"width":"height"]="".concat(a),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(s,")"),n)})}function Es(t,e){return n0(O(O({},t),{classNames:J([lt("line","guideline",t.direction)],_(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(bt(n,.1),"px")})}),e)}function Pu(t,e,n,r,i,a,o,s){var l=t.props.zoom;return n.map(function(c,u){var d=c.type,f=c.pos,v=[0,0];return v[o]=r,v[o?0:1]=-i+f,Es({key:"".concat(e,"TargetGuideline").concat(u),classNames:[lt("target","bold",d)],posValue:v,sizeValue:a,zoom:l,direction:e},s)})}function Au(t,e,n,r,i,a){var o=t.props,s=o.zoom,l=o.isDisplayInnerSnapDigit,c=e==="horizontal"?Wn:Kn,u=i[c.start],d=i[c.end];return n.filter(function(f){var v=f.hide,p=f.elementRect;if(v)return!1;if(l&&p){var h=p.rect;if(h[c.start]<=u&&d<=h[c.end])return!1}return!0}).map(function(f,v){var p=f.pos,h=f.size,g=f.element,m=f.className,y=[-r[0]+p[0],-r[1]+p[1]];return Es({key:"".concat(e,"-default-guideline-").concat(v),classNames:g?[lt("bold"),m]:[lt("normal"),m],direction:e,posValue:y,sizeValue:h,zoom:s},a)})}function yi(t,e,n,r,i,a,o,s){var l,c=t.props,u=c.snapDigit,d=u===void 0?0:u,f=c.isDisplaySnapDigit,v=f===void 0?!0:f,p=c.snapDistFormat,h=p===void 0?function(w,E){return w}:p,g=c.zoom,m=e==="horizontal"?"X":"Y",y=e==="vertical"?"height":"width",x=Math.abs(i),S=v?parseFloat(x.toFixed(d)):0;return s.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:lt("guideline-group",e),style:(l={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},l[y]="".concat(x,"px"),l)},Es({direction:e,classNames:[lt(n),o],size:"100%",posValue:[0,0],sizeValue:x,zoom:g},s),s.createElement("div",{className:lt("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},S>0?h(S,e):""))}function r0(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?Wn:Kn,s=n[o.start],l=n[o.end];return qu(e,function(c){return c.pos[i]}).map(function(c){var u=[],d=[],f=[];return c.forEach(function(v){var p,h,g=v.element,m=v.elementRect.rect;if(m[o.end]<s)u.push(v);else if(l<m[o.start])d.push(v);else if(m[o.start]<=s&&l<=m[o.end]&&r){var y=v.pos,x={element:g,rect:O(O({},m),(p={},p[o.end]=m[o.start],p))},S={element:g,rect:O(O({},m),(h={},h[o.start]=m[o.end],h))},w=[0,0],E=[0,0];w[i]=y[i],w[a]=y[a],E[i]=y[i],E[a]=y[a]+v.size,u.push({type:t,pos:w,size:0,elementRect:x,direction:"",elementDirection:"end"}),d.push({type:t,pos:E,size:0,elementRect:S,direction:"",elementDirection:"start"})}}),u.sort(function(v,p){return p.pos[a]-v.pos[a]}),d.sort(function(v,p){return v.pos[a]-p.pos[a]}),{total:c,start:u,end:d,inner:f}})}function i0(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var l=e.filter(function(g){return g.type===s}),c=s==="vertical"?1:0,u=c?0:1,d=r0(s,l,r,a),f=c?Kn:Wn,v=c?Wn:Kn,p=r[f.start],h=r[f.end];d.forEach(function(g){var m=g.total,y=g.start,x=g.end,S=g.inner,w=n[u]+m[0].pos[u]-r[v.start],E=r;y.forEach(function(D){var T=D.elementRect.rect,C=E[f.start]-T[f.end];if(C>0){var M=[0,0];M[c]=n[c]+E[f.start]-p-C,M[u]=w,o.push(yi(t,s,"dashed",o.length,C,M,D.className,i))}E=T}),E=r,x.forEach(function(D){var T=D.elementRect.rect,C=T[f.start]-E[f.end];if(C>0){var M=[0,0];M[c]=n[c]+E[f.end]-p,M[u]=w,o.push(yi(t,s,"dashed",o.length,C,M,D.className,i))}E=T}),S.forEach(function(D){var T=D.elementRect.rect,C=p-T[f.start],M=T[f.end]-h,R=[0,0],A=[0,0];R[c]=n[c]-C,R[u]=w,A[c]=n[c]+h-p,A[u]=w,o.push(yi(t,s,"dashed",o.length,C,R,D.className,i)),o.push(yi(t,s,"dashed",o.length,M,A,D.className,i))})})}),o}function a0(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var s=e.filter(function(g){return g.type===o}).slice(0,1),l=o==="vertical"?0:1,c=l?0:1,u=l?Kn:Wn,d=l?Wn:Kn,f=r[u.start],v=r[u.end],p=r[d.start],h=r[d.end];s.forEach(function(g){var m=g.gap,y=g.gapRects,x=Math.max.apply(Math,J([p],_(y.map(function(E){var D=E.rect;return D[d.start]})),!1)),S=Math.min.apply(Math,J([h],_(y.map(function(E){var D=E.rect;return D[d.end]})),!1)),w=(x+S)/2;x===S||w===(p+h)/2||y.forEach(function(E){var D=E.rect,T=E.className,C=[n[0],n[1]];if(D[u.end]<f)C[l]+=D[u.end]-f;else if(v<D[u.start])C[l]+=D[u.start]-f-m;else return;C[c]+=w-p,a.push(yi(t,l?"vertical":"horizontal","gap",a.length,m,C,T,i))})})}),a}function ws(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,s=i.scrollHeight,l=i.scrollWidth,c=i.clientHeight,u=i.clientWidth,d=i.clientLeft,f=i.clientTop,v=t.props,p=v.snapGap,h=p===void 0?!0:p,g=v.verticalGuidelines,m=v.horizontalGuidelines,y=v.snapThreshold,x=y===void 0?5:y,S=v.maxSnapElementGuidelineDistance,w=S===void 0?1/0:S,E=v.isDisplayGridGuidelines,D=qe(tn(t.state)),T=D.top,C=D.left,M=D.bottom,R=D.right,A={top:T,left:C,bottom:M,right:R,center:(C+R)/2,middle:(T+M)/2},P=c0(t),L=J([],_(P),!1),N=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(W){return W*x});h&&L.push.apply(L,J([],_(o0(t,A,N)),!1));var j=O({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(L.push.apply(L,J([],_(l0(t,o?l:u,o?s:c,d,f,j,E)),!1)),a){var F=i.left,G=i.top;j.left+=F,j.top+=G,j.right+=F,j.bottom+=G}return L.push.apply(L,J([],_(Lu(m||!1,g||!1,o?l:u,o?s:c,d,f,j)),!1)),L=L.filter(function(W){var K=W.element,B=W.elementRect,Q=W.type;if(!K||!B)return!0;var q=B.rect;return Ou(A,q,Q,w)}),L}function o0(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,s=o===void 0?1/0:o,l=t.state.elementRects,c=[];return[["vertical",Wn,Kn],["horizontal",Kn,Wn]].forEach(function(u){var d=_(u,3),f=d[0],v=d[1],p=d[2],h=e[v.start],g=e[v.end],m=e[v.center],y=e[p.start],x=e[p.end],S={left:n[0],top:n[1]};function w(T){var C=T.rect,M=S[v.start];return C[v.end]<h+M?h-C[v.end]:g-M<C[v.start]?C[v.start]-g:-1}var E=l.filter(function(T){var C=T.rect;return C[p.start]>x||C[p.end]<y?!1:w(T)>0}).sort(function(T,C){return w(T)-w(C)}),D=[];E.forEach(function(T){E.forEach(function(C){if(T!==C){var M=T.rect,R=C.rect,A=M[p.start],P=M[p.end],L=R[p.start],N=R[p.end];A>N||L>P||D.push([T,C])}})}),D.forEach(function(T){var C=_(T,2),M=C[0],R=C[1],A=M.rect,P=R.rect,L=A[v.start],N=A[v.end],j=P[v.start],F=P[v.end],G=S[v.start],W=0,K=0,B=!1,Q=!1,q=!1;if(N<=h&&g<=j){if(Q=!0,W=(j-N-(g-h))/2,K=N+W+(g-h)/2,X(K-m)>G)return}else if(N<j&&F<h+G){if(B=!0,W=j-N,K=F+W,X(K-h)>G)return}else if(N<j&&g-G<L){if(q=!0,W=j-N,K=L-W,X(K-g)>G)return}else return;W&&Ou(e,P,f,a)&&(W>s||c.push({type:f,pos:f==="vertical"?[K,0]:[0,K],element:R.element,size:0,className:R.className,isStart:B,isCenter:Q,isEnd:q,gap:W,hide:!0,gapRects:[M,R],direction:"",elementDirection:""}))})}),c}function s0(t,e,n,r){var i,a,o=t.props,s=t.state,l=o.snapGridAll,c=o.snapGridWidth,u=c===void 0?0:c,d=o.snapGridHeight,f=d===void 0?0:d,v=s.snapRenderInfo,p=v&&(((i=v.direction)===null||i===void 0?void 0:i[0])||((a=v.direction)===null||a===void 0?void 0:a[1])),h=t.moveables;if(l&&h&&p&&(u||f)){if(s.snapThresholdInfo)return;s.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=t.getRect(),m=g.children,y=v.direction;if(m){var x=y.map(function(w,E){var D=E===0?{snapSize:u,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:f,posName:"top",sizeName:"height",clientOffset:r.top-n},T=D.snapSize,C=D.posName,M=D.sizeName,R=D.clientOffset;if(!T)return{dir:w,multiple:1,snapSize:T,snapOffset:0};var A=g[M],P=g[C],L=tc(m.map(function(B){return[B[C]-P,B[M],A-B[M]-B[C]+P]})).filter(function(B){return B}).sort(function(B,Q){return B-Q}),N=L[0],j=L.map(function(B){return bt(B/N,.1)*T}),F=1,G=bt(A/N,.1);for(F=1;F<=10&&!j.every(function(B){return B*F%1===0});++F);var W=(-w+1)/2,K=Qi(P-R,P-R+A,W,1-W);return{multiple:G*F,dir:w,snapSize:T,snapOffset:Math.round(K/T)}}),S=x.map(function(w){return w.multiple||1});s.snapThresholdInfo.multiples=S,s.snapThresholdInfo.offset=x.map(function(w){return w.snapOffset}),x.forEach(function(w,E){w.snapSize})}}else s.snapThresholdInfo=null}function l0(t,e,n,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var s=t.props,l=t.state,c=s.snapGridWidth,u=c===void 0?0:c,d=s.snapGridHeight,f=d===void 0?0:d,v=[],p=a.left,h=a.top,g=[0,0];s0(t,r,i,a);var m=l.snapThresholdInfo,y=u,x=f;if(m&&(u*=m.multiples[0]||1,f*=m.multiples[1]||1,g=m.offset),f){for(var S=function(E){v.push({type:"horizontal",pos:[p,bt(g[1]*x+E-i+h,.1)],className:lt("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},w=0;w<=n*2;w+=f)S(w);for(var w=-f;w>=-n;w-=f)S(w)}if(u){for(var S=function(D){v.push({type:"vertical",pos:[bt(g[0]*y+D-r+p,.1),h],className:lt("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},w=0;w<=e*2;w+=u)S(w);for(var w=-u;w>=-e;w-=u)S(w)}return v}function Ou(t,e,n,r){return n==="horizontal"?X(t.right-e.left)<=r||X(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?X(t.bottom-e.top)<=r||X(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function c0(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(f){return!f.refresh}),a=r.map(function(f){return We(f)&&"element"in f?O(O({},f),{element:Cn(f.element,!0)}):{element:Cn(f,!0)}}).filter(function(f){return f.element}),o=Mr(i.map(function(f){return f.element}),a.map(function(f){return f.element})),s=o.maintained,l=o.added,c=[];s.forEach(function(f){var v=_(f,2),p=v[0],h=v[1];c[h]=i[p]}),u0(t,l.map(function(f){return a[f]})).map(function(f,v){c[l[v]]=f}),e.elementRects=c;var u=fs(t.props.elementSnapDirections),d=[];return c.forEach(function(f){var v=f.element,p=f.top,h=p===void 0?u.top:p,g=f.left,m=g===void 0?u.left:g,y=f.right,x=y===void 0?u.right:y,S=f.bottom,w=S===void 0?u.bottom:S,E=f.center,D=E===void 0?u.center:E,T=f.middle,C=T===void 0?u.middle:T,M=f.className,R=f.rect,A=vs({top:h,right:x,left:m,bottom:w,center:D,middle:C},R),P=A.horizontal,L=A.vertical,N=A.horizontalNames,j=A.verticalNames,F=R.top,G=R.left,W=R.right-G,K=R.bottom-F,B=[W,K];L.forEach(function(Q,q){d.push({type:"vertical",element:v,pos:[bt(Q,.1),F],size:K,sizes:B,className:M,elementRect:f,elementDirection:uu[j[q]]||j[q],direction:""})}),P.forEach(function(Q,q){d.push({type:"horizontal",element:v,pos:[G,bt(Q,.1)],size:W,sizes:B,className:M,elementRect:f,elementDirection:uu[N[q]]||N[q],direction:""})})}),d}function _u(t,e){return t?t.map(function(n){var r=We(n)?n:{pos:n},i=r.pos;return wr(i)?r:O(O({},r),{pos:Ft(i,e)})}):[]}function Lu(t,e,n,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],l=o.left,c=o.top,u=o.bottom,d=o.right,f=n+d-l,v=r+u-c;return _u(t,v).forEach(function(p){s.push({type:"horizontal",pos:[l,bt(p.pos-a+c,.1)],size:f,className:p.className,direction:""})}),_u(e,f).forEach(function(p){s.push({type:"vertical",pos:[bt(p.pos-i+l,.1),c],size:v,className:p.className,direction:""})}),s}function u0(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,s=r.offsetDelta,l=o?4:3,c=_(Lg(a,i,l),2),u=c[0],d=c[1],f=n?0:s[0],v=n?0:s[1];return e.map(function(p){var h=p.element.getBoundingClientRect(),g=h.left-u-f,m=h.top-d-v,y=m+h.height,x=g+h.width,S=_(Gr(a,[g,m],l),2),w=S[0],E=S[1],D=_(Gr(a,[x,y],l),2),T=D[0],C=D[1];return O(O({},p),{rect:{left:w,right:T,top:E,bottom:C,center:(w+T)/2,middle:(E+C)/2}})})}function Oa(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=Cn(r,!0);if(o){var s=Ei(o),l=ed(e,[s.left-i.left,s.top-i.top]),c=ed(e,[s.right-i.right,s.bottom-i.bottom]);a.left=bt(l[0],1e-5),a.top=bt(l[1],1e-5),a.right=bt(c[0],1e-5),a.bottom=bt(c[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=ws(t),e.enableSnap=!0,!0}function Nu(t,e,n,r,i,a){var o=ur(t,e,n,a?4:3),s=me(o,r);return Rs(o,dt(i,s))}function zu(t){return t?t/X(t):0}function d0(t,e,n,r,i,a){var o=a.fixedDirection,s=Bg(n,o,r),l=gs(t,e,n,r),c=J(J([],_(Zg(t,e,s,r,i,a)),!1),_(Su(t,l,a)),!1),u=ka(c,0),d=ka(c,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function f0(t,e,n,r,i,a,o,s,l){var c=me(e,o),u=Pa(t,s,{vertical:[c[0]],horizontal:[c[1]]}),d=u.horizontal.offset,f=u.vertical.offset;if(bt(f,rs)||bt(d,rs)){var v=_(bn({datas:l,distX:-f,distY:-d}),2),p=v[0],h=v[1],g=Math.min(i||1/0,n+o[0]*p),m=Math.min(a||1/0,r+o[1]*h);return[g-n,m-r]}return[0,0]}function Iu(t,e,n,r,i,a,o,s){for(var l=tn(t.state),c=t.props.keepRatio,u=0,d=0,f=0;f<2;++f){var v=e(u,d),p=d0(t,v,i,c,o,s),h=p.width,g=p.height,m=h.isBound,y=g.isBound,x=h.offset,S=g.offset;if(f===1&&(m||(x=0),y||(S=0)),f===0&&o&&!m&&!y)return[0,0];if(c){var w=X(x)*(n?1/n:1),E=X(S)*(r?1/r:1),D=m&&y?w<E:y||!m&&w<E;D?x=n*S/r:S=r*x/n}u+=x,d+=S}if(!c&&i[0]&&i[1]){var T=qg(t,l,i,a,s),C=T.maxWidth,M=T.maxHeight,R=_(f0(t,e(u,d).map(function(L){return L.map(function(N){return bt(N,rs)})}),n+u,r+d,C,M,i,o,s),2),x=R[0],S=R[1];u+=x,d+=S}return[u,d]}function xi(t){return t<0&&(t=t%360+360),t%=360,t}function v0(t,e){e=xi(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return X(t-r)<X(t-i)?r:i}function Ds(t,e){t=xi(t),e=xi(e);var n=xi(t-e);return Math.min(n,360-n)}function p0(t,e,n,r){var i,a=t.props,o=(i=a[du])!==null&&i!==void 0?i:5,s=a[fu];if(Ir(t,"rotatable")){var l=e.pos1,c=e.pos2,u=e.pos3,d=e.pos4,f=e.origin,v=n*Math.PI/180,p=[l,c,u,d].map(function(S){return dt(S,f)}),h=p.map(function(S){return li(S,v)}),g=J(J([],_(Pg(t,p,h,f,n)),!1),_(Vg(t,p,h,f,n)),!1);g.sort(function(S,w){return X(S-n)-X(w-n)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:n}}if(s?.length&&o){var y=s.slice().sort(function(S,w){return Ds(S,r)-Ds(w,r)}),x=y[0];if(Ds(x,r)<=o)return{isSnap:!0,dist:n+v0(r,x)-r}}return{isSnap:!1,dist:n}}function h0(t,e,n,r,i,a,o){if(!Ir(t,"resizable"))return[0,0];var s=o.fixedDirection,l=o.nextAllMatrix,c=t.state,u=c.allMatrix,d=c.is3d;return Iu(t,function(f,v){return Nu(l||u,e+f,n+v,s,i,d)},e,n,r,i,a,o)}function g0(t,e,n,r,i){if(!Ir(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,s=i.fixedPosition,l=i.fixedDirection,c=i.is3d,u=Iu(t,function(d,f){return Nu(hg(i,Lt(e,[d/a,f/o])),a,o,l,s,c)},a,o,n,s,r,i);return[u[0]/a,u[1]/o]}function m0(t,e){e.absolutePoses=tn(t.state)}function Bu(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Ne(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return O(O({},r),{direction:i.direction})})}function ju(t,e,n,r,i,a){var o=ds(Ta(t,a),e,n),s=o.vertical,l=o.horizontal,c=zr();s.forEach(function(p){p.isBound&&(p.direction==="start"&&(c.left=!0),p.direction==="end"&&(c.right=!0),r.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(c.top=!0),p.direction==="end"&&(c.bottom=!0),i.push({type:"bounds",pos:p.pos}))});var u=Yg(t),d=u.boundMap,f=u.vertical,v=u.horizontal;return f.forEach(function(p){Pn(r,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||r.push({type:"bounds",pos:p})}),v.forEach(function(p){Pn(i,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),{boundMap:c,innerBoundMap:d}}var y0=Ls("",["resizable","scalable"]),x0={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",du,fu,vu,pu,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,o=n.pos2,s=n.pos3,l=n.pos4,c=n.snapRenderInfo,u=t.props.snapRenderThreshold,d=u===void 0?1:u;if(!c||!c.render||!Ir(t,""))return Fr(t,"boundMap",zr(),function(H){return JSON.stringify(H)}),Fr(t,"innerBoundMap",zr(),function(H){return JSON.stringify(H)}),[];n.guidelines=ws(t);var f=Math.min(a[0],o[0],s[0],l[0]),v=Math.min(a[1],o[1],s[1],l[1]),p=c.externalPoses||[],h=tn(t.state),g=[],m=[],y=[],x=[],S=[],w=qe(h),E=w.width,D=w.height,T=w.top,C=w.left,M=w.bottom,R=w.right,A={left:C,right:R,top:T,bottom:M,center:(C+R)/2,middle:(T+M)/2},P=p.length>0,L=P?qe(p):{};if(!c.request){if(c.direction&&S.push(Ig(t,h,c.direction,d,d)),c.snap){var N=qe(h);c.center&&(N.middle=(N.top+N.bottom)/2,N.center=(N.left+N.right)/2),S.push(gu(t,N,d,d))}P&&(c.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),S.push(gu(t,L,d,d))),S.forEach(function(H){var U=H.vertical.posInfos,Y=H.horizontal.posInfos;g.push.apply(g,J([],_(U.filter(function(tt){var nt=tt.guidelineInfos;return nt.some(function(vt){var ct=vt.guideline;return!ct.hide})}).map(function(tt){return{type:"snap",pos:tt.pos}})),!1)),m.push.apply(m,J([],_(Y.filter(function(tt){var nt=tt.guidelineInfos;return nt.some(function(vt){var ct=vt.guideline;return!ct.hide})}).map(function(tt){return{type:"snap",pos:tt.pos}})),!1)),y.push.apply(y,J([],_(Bu(U)),!1)),x.push.apply(x,J([],_(Bu(Y)),!1))})}var j=ju(t,[C,R],[T,M],g,m),F=j.boundMap,G=j.innerBoundMap;P&&ju(t,[L.left,L.right],[L.top,L.bottom],g,m,c.externalBounds);var W=J(J([],_(y),!1),_(x),!1),K=W.filter(function(H){return H.element&&!H.gapRects}),B=W.filter(function(H){return H.gapRects}).sort(function(H,U){return H.gap-U.gap});rt(t,"onSnap",{guidelines:W.filter(function(H){var U=H.element;return!U}),elements:K,gaps:B},!0);var Q=Fr(t,"boundMap",F,function(H){return JSON.stringify(H)},zr()),q=Fr(t,"innerBoundMap",G,function(H){return JSON.stringify(H)},zr());return(F===Q||G===q)&&rt(t,"onBound",{bounds:F,innerBounds:G},!0),J(J(J(J(J(J([],_(i0(t,K,[f,v],A,e)),!1),_(a0(t,B,[f,v],A,e)),!1),_(Au(t,"horizontal",x,[i,r],A,e)),!1),_(Au(t,"vertical",y,[i,r],A,e)),!1),_(Pu(t,"horizontal",m,f,r,E,0,e)),!1),_(Pu(t,"vertical",g,v,i,D,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Oa(t)},drag:function(t){var e=t.state;Oa(t)||(e.guidelines=ws(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(y0(t,e)||Ss(t,e))return!0;if(!e.isRequest&&e.inputEvent)return fe(e.inputEvent.target,lt("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Oa(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Oa(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function b0(t,e){return[t[0]*e[0],t[1]*e[1]]}function lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return up.apply(void 0,J([ns],_(t),!1))}function Gu(t){t()}function C0(t){return!t||t==="none"?[1,0,0,1,0,0]:We(t)?t:rr(t)}function bi(t,e,n){return ca(e,nr(n,e),t,nr(n.map(function(r){return-r}),e))}function S0(t,e,n){if(e==="%"){var r=Ms(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function E0(t){var e=w0(As(t,":before"));return e.map(function(n,r){var i=tr(n),a=i.value,o=i.unit;return a*S0(t,o,r===0)})}function _a(t){return t?t.split(" "):["0","0"]}function w0(t){return _a(t.transformOrigin)}function Fu(t){var e=Ie(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],s=function(c){var u=i[c].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return u[d]}).join(", "),")"))},l=0;l<a;++l)s(l);return o.join(" ")}return""}function Ci(t,e,n,r,i){var a,o,s=Co(t)||Gn(t),l=!1,c,u;if(!t||n)c=t;else{var d=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,f=t.parentElement;d?(l=!0,u=f,c=d):c=f}for(var v=!1,p=t===e||c===e,h="relative",g=1,m=parseFloat(i?.("zoom"))||1,y=i?.("position");c&&c!==s;){e===c&&(p=!0);var x=Ie(c),S=c.tagName.toLowerCase(),w=Fu(c),E=x("willChange"),D=parseFloat(x("zoom"))||1;if(h=x("position"),r&&D!==1){g=D;break}if(!n&&r&&m!==1&&y&&y!=="absolute"||S==="svg"||S==="foreignobject"||h!=="static"||w&&w!=="none"||E==="transform")break;var T=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,C=c.parentNode;T&&(l=!0,u=C);var M=C;if(M&&M.nodeType===11){c=M.host,v=!0,h=Ie(c)("position");break}c=M,h="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:u,isCustomElement:v,isStatic:h==="static",isEnd:p||!c||c===s,offsetParent:c||s}}function D0(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=Ie(t),s=qi(i),l=!s,c,u;return!l&&(r!=="svg"||t.ownerSVGElement)?(c=Kc?E0(t):_a(o("transformOrigin")).map(function(d){return parseFloat(d)}),u=c.slice(),l=!0,r==="svg"?(i=0,a=0):(n=_(k0(t,c,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],c[0]=n[2],c[1]=n[3])):(c=_a(o("transformOrigin")).map(function(d){return parseFloat(d)}),u=c.slice()),{tagName:r,isSVG:s,hasOffset:l,offset:[i||0,a||0],origin:c,targetOrigin:u}}function Wu(t,e){var n=Ie(t),r=Ie(Gn(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,o]}function Ts(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=fn(n,3,4))})}function T0(t){for(var e=t.parentElement,n=!1,r=Gn(t);e;){var i=As(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function La(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Ac(t,!e).join(","),")")}function Ms(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function M0(t,e){var n,r=Ms(t),i=r.width,a=r.height,o=r.clientWidth,s=r.clientHeight,l=o/i,c=s/a,u=t.preserveAspectRatio.baseVal,d=u.align,f=u.meetOrSlice,v=[0,0],p=[l,c],h=[0,0];if(d!==1){var g=(d-2)%3,m=Math.floor((d-2)/3);v[0]=i*g/2,v[1]=a*m/2;var y=f===2?Math.max(c,l):Math.min(l,c);p[0]=y,p[1]=y,h[0]=(o-i)/2*g,h[1]=(s-a)/2*m}var x=Io(p,e);return n=_(h,2),x[e*(e-1)]=n[0],x[e*(e-1)+1]=n[1],bi(x,e,v)}function k0(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Ie(t),a=i("transform-box")==="fill-box",o=t.getBBox(),s=Ms(t.ownerSVGElement),l=o.x,c=o.y;r==="foreignobject"&&!l&&!c&&(l=parseFloat(t.getAttribute("x"))||0,c=parseFloat(t.getAttribute("y"))||0);var u=l-s.x,d=c-s.y,f=a?e[0]:e[0]-u,v=a?e[1]:e[1]-d;return[u,d,f,v]}function Jt(t,e,n){return De(t,er(e,n),n)}function ur(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Jt(t,i,r)})}function qe(t){var e=t.map(function(c){return c[0]}),n=t.map(function(c){return c[1]}),r=Math.min.apply(Math,J([],_(e),!1)),i=Math.min.apply(Math,J([],_(n),!1)),a=Math.max.apply(Math,J([],_(e),!1)),o=Math.max.apply(Math,J([],_(n),!1)),s=a-r,l=o-i;return{left:r,top:i,right:a,bottom:o,width:s,height:l}}function Ku(t,e,n,r){var i=ur(t,e,n,r);return qe(i)}function R0(t,e,n,r,i){var a,o=t.target,s=t.origin,l=e.matrix,c=Yu(o),u=c.offsetWidth,d=c.offsetHeight,f=n.getBoundingClientRect(),v=[0,0];n===Gn(n)&&(v=Wu(o,!0));for(var p=o.getBoundingClientRect(),h=p.left-f.left+n.scrollLeft-(n.clientLeft||0)+v[0],g=p.top-f.top+n.scrollTop-(n.clientTop||0)+v[1],m=p.width,y=p.height,x=ca(r,i,l),S=Ku(x,u,d,r),w=S.left,E=S.top,D=S.width,T=S.height,C=Jt(x,s,r),M=dt(C,[w,E]),R=[h+M[0]*m/D,g+M[1]*y/T],A=[0,0],P=0;++P<10;){var L=dn(i,r);a=_(dt(Jt(L,R,r),Jt(L,C,r)),2),A[0]=a[0],A[1]=a[1];var N=ca(r,i,nr(A,r),l),j=Ku(N,u,d,r),F=j.left,G=j.top,W=F-h,K=G-g;if(X(W)<2&&X(K)<2)break;R[0]-=W,R[1]-=K}return A.map(function(B){return Math.round(B)})}function P0(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(l){return Jt(t,l,i)}),o=n.left,s=n.top;return a.map(function(l){return[l[0]+o,l[1]+s]})}function Je(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Vu(t,e){return Je([e[0]-t[0],e[1]-t[1]])}function Si(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=se(t,e));var i=Vu(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function Na(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(s,l){return s+l[0]},0)/i,o=n.reduce(function(s,l){return s+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function dr(t,e){var n=t[e];return We(n)?O(O({},t),n):t}function Yu(t){var e=t&&!qi(t.offsetWidth),n=0,r=0,i=0,a=0,o=0,s=0,l=0,c=0,u=0,d=0,f=0,v=0,p=1/0,h=1/0,g=1/0,m=1/0,y=0,x=0,S=!1;if(t)if(!e&&t.ownerSVGElement){var w=t.getBBox();S=!0,n=w.width,r=w.height,o=n,s=r,l=n,c=r,i=n,a=r}else{var E=Ie(t),D=t.style,T=E("boxSizing")==="border-box",C=parseFloat(E("borderLeftWidth"))||0,M=parseFloat(E("borderRightWidth"))||0,R=parseFloat(E("borderTopWidth"))||0,A=parseFloat(E("borderBottomWidth"))||0,P=parseFloat(E("paddingLeft"))||0,L=parseFloat(E("paddingRight"))||0,N=parseFloat(E("paddingTop"))||0,j=parseFloat(E("paddingBottom"))||0,F=P+L,G=N+j,W=C+M,K=R+A,B=F+W,Q=G+K,q=E("position"),H=0,U=0;if("clientLeft"in t){var Y=null;if(q==="absolute"){var tt=Ci(t,Gn(t));Y=tt.offsetParent}else Y=t.parentElement;if(Y){var nt=Ie(Y);H=parseFloat(nt("width")),U=parseFloat(nt("height"))}}u=Math.max(F,Ft(E("minWidth"),H)||0),d=Math.max(G,Ft(E("minHeight"),U)||0),p=Ft(E("maxWidth"),H),h=Ft(E("maxHeight"),U),isNaN(p)&&(p=1/0),isNaN(h)&&(h=1/0),y=Ft(D.width,0)||0,x=Ft(D.height,0)||0,o=parseFloat(E("width"))||0,s=parseFloat(E("height"))||0,l=X(o-y)<1?ea(u,y||o,p):o,c=X(s-x)<1?ea(d,x||s,h):s,n=l,r=c,i=l,a=c,T?(g=p,m=h,f=u,v=d,l=n-B,c=r-Q):(g=p+B,m=h+Q,f=u+B,v=d+Q,n=l+B,r=c+Q),i=l+F,a=c+G}return{svg:S,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:l,contentHeight:c,inlineCSSWidth:y,inlineCSSHeight:x,cssWidth:o,cssHeight:s,minWidth:u,minHeight:d,maxWidth:p,maxHeight:h,minOffsetWidth:f,minOffsetHeight:v,maxOffsetWidth:g,maxOffsetHeight:m}}function Xu(t,e){return se(e>0?t[0]:t[1],e>0?t[1]:t[0])}function za(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Hu(t,e){var n=t===Gn(t)||t===Co(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Ie(t)("overflow")!=="visible",O(O({},e),r)}function ks(t,e,n,r){var i=t.left,a=t.right,o=t.top,s=t.bottom,l=e.top,c=e.left,u={left:c+i,top:l+o,right:c+a,bottom:l+s,width:a-i,height:s-o};return n&&r?Hu(n,u):u}function Ei(t,e){var n=0,r=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var s={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?Hu(t,s):s}function A0(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,s=i.svg,l=i.transformOrigin;return!n&&s&&r?Is(r,a,o):l}function $u(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=Uu(a,r)}return i}function Uu(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function Rs(t,e){return[Lt(e,t[0]),Lt(e,t[1]),Lt(e,t[2]),Lt(e,t[3])]}function tn(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return Rs([r,i,a,o],[e,n])}function Ps(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Br(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&Ps(t,e),r?.unset(),t[n]=null}function Ae(t,e){if(e){var n=_r(e);n.nextStyle=O(O({},n.nextStyle),t)}return{style:t,cssText:yn(t).map(function(r){return"".concat(ta(r,"-"),": ").concat(t[r],";")}).join("")}}function Zu(t,e,n){var r=e.afterTransform||e.transform;return O(O({},Ae(O(O(O({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function Dt(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=O(O({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function Ve(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),O(O({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Ia(t,e,n){t._emitter.on(e,n)}function rt(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function As(t,e){return Ke(t).getComputedStyle(t,e)}function Ba(t,e,n){var r={},i={};return t.filter(function(a){var o=a.name;if(r[o]||!e.some(function(s){return a[s]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function Os(t,e){return t===e||t==null&&e==null}function Qu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!qi(i))return i}return t[n]}function qu(t,e){var n=[],r=[];return t.forEach(function(i,a){var o=e(i,a,t),s=r.indexOf(o),l=n[s]||[];s===-1&&(r.push(o),n.push(l)),l.push(i)}),n}function O0(t,e){var n=[],r={};return t.forEach(function(i,a){var o=e(i,a,t),s=r[o];s||(s=[],r[o]=s,n.push(s)),s.push(i)}),n}function Ju(t){return t.reduce(function(e,n){return e.concat(n)},[])}function jr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return X(r)-X(n)}),t[0]}function Gr(t,e,n){return De(dn(t,n),er(e,n),n)}function td(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=_(Gr(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function en(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Jt(t,[zu(n[0]||1),0],r),a=Jt(t,[0,zu(n[1]||1)],r),o=Jt(t,[n[0]/Je(i),n[1]/Je(a)],r);return Lt(e,o)}function pn(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function ja(t){return X(t)<=Re?0:t}function _s(t){return function(e){if(!e.isDragging(t))return"";var n=Sg(e,t),r=n.deg;return r?lt("view-control-rotation".concat(r)):""}}function Ls(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return fe(i,lt("direction"))&&(!t||fe(i,lt(t)))}}function _0(t,e,n){var r,i=Tr(t,{"x%":function(w){return w/100*e.offsetWidth},"y%":function(w){return w/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),s=t[n]||"",l=n<0?[]:t.slice(n),c=n<0?[]:t.slice(n+1),u=i.slice(0,n<0?void 0:n),d=i.slice(0,n<0?void 0:n+1),f=(r=i[n])!==null&&r!==void 0?r:Tr([""])[0],v=n<0?[]:i.slice(n),p=n<0?[]:i.slice(n+1),h=f?[f]:[],g=Dr(u),m=Dr(d),y=Dr(v),x=Dr(p),S=Wt(g,y,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:Dr(h),afterFunctionMatrix:y,afterFunctionMatrix2:x,allFunctionMatrix:S,beforeFunctions:u,beforeFunctions2:d,targetFunction:h[0],afterFunctions:v,afterFunctions2:p,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:l,afterFunctionTexts2:c}}function L0(t){return!t||!We(t)||Fn(t)?!1:ie(t)||"length"in t}function Cn(t,e){return t?Fn(t)?t:we(t)?e?document.querySelector(t):t:Ji(t)?t():ic(t)?t:"current"in t?t.current:t:null}function Ns(t,e){if(!t)return[];var n=L0(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return we(i)&&e?J(J([],_(r),!1),_([].slice.call(document.querySelectorAll(i))),!1):(ie(i)?r.push(Ns(i,e)):r.push(Cn(i,e)),r)},[])}function N0(t,e,n){var r=se(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function ed(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=dn(n,i);return r||(a=fn(a,3,4)),a[12]=0,a[13]=0,a[14]=0,da(a,e)}function nd(t,e,n,r,i){var a=_(t,2),o=a[0],s=a[1],l=0,c=0;if(i&&o&&s){var u=se([0,0],e),d=se([0,0],r),f=Je(e),v=Math.cos(u-d)*f;if(!r[0])c=v,l=c*n;else if(!r[1])l=v,c=l/n;else{var p=r[0]*o,h=r[1]*s,g=Math.atan2(p+e[0],h+e[1]),m=Math.atan2(p,h);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var y=0;X(g-m)<Math.PI/2||X(g-m)>Math.PI/2*3||(m+=Math.PI),y=g-m,y>Math.PI*2?y-=Math.PI*2:y>Math.PI?y=2*Math.PI-y:y<-Math.PI&&(y=-2*Math.PI-y);var x=Je([p+e[0],h+e[1]])*Math.cos(y);l=x*Math.sin(m)-p,c=x*Math.cos(m)-h,r[0]<0&&(l*=-1),r[1]<0&&(c*=-1)}}else l=r[0]*e[0],c=r[1]*e[1];return[l,c]}function rd(t,e,n,r){var i,a=n.ratio,o=n.startOffsetWidth,s=n.startOffsetHeight,l=0,c=0,u=r.distX,d=r.distY,f=r.pinchScale,v=r.parentDistance,p=r.parentDist,h=r.parentScale,g=n.fixedDirection,m=[0,1].map(function(D){return X(t[D]-g[D])}),y=[0,1].map(function(D){var T=m[D];return T!==0&&(T=2/T),T});if(p)l=p[0],c=p[1],e&&(l?c||(c=l/a):l=c*a);else if(wr(f))l=(f-1)*o,c=(f-1)*s;else if(h)l=(h[0]-1)*o,c=(h[1]-1)*s;else if(v){var x=o*m[0],S=s*m[1],w=Je([x,S]);l=v/w*x*y[0],c=v/w*S*y[1]}else{var E=bn({datas:n,distX:u,distY:d});E=y.map(function(D,T){return E[T]*D}),i=_(nd([o,s],E,a,t,e),2),l=i[0],c=i[1]}return{distWidth:l,distHeight:c}}function zs(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=_(t.split(" "),2),r=n[0],i=n[1],a=zs(r||""),o=zs(i||""),s=O(O({},a),o),l={x:"50%",y:"50%"};return s.x&&(l.x=s.x),s.y&&(l.y=s.y),s.value&&(s.x&&!s.y&&(l.y=s.value),!s.x&&s.y&&(l.x=s.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Is(t,e,n){var r=zs(t,!0),i=r.x,a=r.y;return[Ft(i,e)||0,Ft(a,n)||0]}function z0(t,e,n){var r=t.map(function(a){return dt(a,e)}),i=r.map(function(a){return li(a,n)});return{prev:r,next:i,result:i.map(function(a){return Lt(a,e)})}}function id(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=ie(n),o=ie(i);return a&&o?id(n,i):!a&&!o?n===i:!1})}function Fr(t,e,n,r,i){var a=t._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=n,n;return o===n||r(o)===r(n)?o:(a[e]=n,n)}function Oe(t){return t>=0?1:-1}function X(t){return Math.abs(t)}function Bs(t,e){return Tp(t).map(function(n){return e(n)})}function ad(t){return wr(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var I0=pi("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=t.props,s=o.pinchable,l=o.ables;if(!s)return!1;var c="onPinch".concat(r?"Group":"","Start"),u="drag".concat(r?"Group":"","ControlStart"),d=(s===!0?t.controlAbles:l.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[u]}),f=Dt(t,e,{});r&&(f.targets=r);var v=rt(t,c,f);n.isPinch=v!==!1,n.ables=d;var p=n.isPinch;return p?(d.forEach(function(h){if(a[h.name]=a[h.name]||{},!!h[u]){var g=O(O({},e),{datas:a[h.name],parentRotate:i,isPinch:!0});h[u](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,s=e.targets,l=e.angle;if(n.isPinch){var c=i*(1-1/r),u=Dt(t,e,{});s&&(u.targets=s);var d="onPinch".concat(s?"Group":"");rt(t,d,u);var f=n.ables,v="drag".concat(s?"Group":"","Control");return f.forEach(function(p){p[v]&&p[v](t,O(O({},e),{datas:a[p.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(n.isPinch){var s="onPinch".concat(a?"Group":"","End"),l=Ve(t,e,{isDrag:r});a&&(l.targets=a),rt(t,s,l);var c=n.ables,u="drag".concat(a?"Group":"","ControlEnd");return c.forEach(function(d){d[u]&&d[u](t,O(O({},e),{isDrag:r,datas:o[d.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,O(O({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,O(O({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,O(O({},e),{targets:t.props.targets}))}}),od=Ls("scalable"),B0={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:au("scalable"),dragControlCondition:od,viewClassName:_s("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=$u(a,r,i,n),s=t.state,l=s.width,c=s.height,u=s.targetTransform,d=s.target,f=s.pos1,v=s.pos2,p=s.pos4;if(!o||!d)return!1;r||sr(t,e),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=l,n.startOffsetHeight=c,n.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];Ca(t,e,"scale"),n.isWidth=h;function g(E){n.ratio=E&&isFinite(E)?E:0}n.startPositions=tn(t.state);function m(E){var D=Tu(n.startPositions,E);n.fixedDirection=D.fixedDirection,n.fixedPosition=D.fixedPosition,n.fixedOffset=D.fixedOffset}n.setFixedDirection=m,g(xn(f,v)/xn(v,p)),m([-o[0],-o[1]]);var y=function(E){n.minScaleSize=E},x=function(E){n.maxScaleSize=E};y([-1/0,-1/0]),x([1/0,1/0]);var S=Dt(t,e,O(O({direction:o,set:function(E){n.startValue=E},setRatio:g,setFixedDirection:m,setMinScaleSize:y,setMaxScaleSize:x},ba(t,e)),{dragStart:Pe.dragStart(t,new Ar().dragStart([0,0],e))})),w=rt(t,"onScaleStart",S);return n.startFixedDirection=n.fixedDirection,w!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?S:!1},dragControl:function(t,e){ya(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,s=e.isRequest,l=e.useSnap,c=e.resolveMatrix,u=n.prevDist,d=n.direction,f=n.startOffsetWidth,v=n.startOffsetHeight,p=n.isScale,h=n.startValue,g=n.isWidth,m=n.ratio;if(!p)return!1;var y=t.props,x=y.throttleScale,S=y.parentMoveable,w=d;!d[0]&&!d[1]&&(w=[1,1]);var E=m&&(r??y.keepRatio)||!1,D=t.state,T=[h[0],h[1]];function C(){var $=rd(w,E,n,e),et=$.distWidth,Tt=$.distHeight,ut=f?(f+et)/f:1,ft=v?(v+Tt)/v:1;h[0]||(T[0]=et/f),h[1]||(T[1]=Tt/v);var xt=(w[0]||E?ut:1)*T[0],Ot=(w[1]||E?ft:1)*T[1];return xt===0&&(xt=Oe(u[0])*ma),Ot===0&&(Ot=Oe(u[1])*ma),[xt,Ot]}var M=C();if(!a&&t.props.groupable){var R=D.snapRenderInfo||{},A=R.direction;ie(A)&&(A[0]||A[1])&&(D.snapRenderInfo={direction:d,request:e.isRequest})}rt(t,"onBeforeScale",Dt(t,e,{scale:M,setFixedDirection:function($){return n.setFixedDirection($),M=C(),M},startFixedDirection:n.startFixedDirection,setScale:function($){M=$}},!0));var P=[M[0]/T[0],M[1]/T[1]],L=o,N=[0,0],j=Oe(P[0]*P[1]),F=!o&&!i&&a;if(F||c?L=cs(t,n.targetAllTransform,[0,0],[0,0],n):o||(L=n.fixedPosition),a||(N=g0(t,P,d,!l&&s,n)),E){w[0]&&w[1]&&N[0]&&N[1]&&(Math.abs(N[0]*f)>Math.abs(N[1]*v)?N[1]=0:N[0]=0);var G=!N[0]&&!N[1];if(G&&(g?P[0]=bt(P[0]*T[0],x)/T[0]:P[1]=bt(P[1]*T[1],x)/T[1]),w[0]&&!w[1]||N[0]&&!N[1]||G&&g){P[0]+=N[0];var W=f*P[0]*T[0]/m;P[1]=Oe(j*P[0])*X(W/v/T[1])}else if(!w[0]&&w[1]||!N[0]&&N[1]||G&&!g){P[1]+=N[1];var K=v*P[1]*T[1]*m;P[0]=Oe(j*P[1])*X(K/f/T[0])}}else P[0]+=N[0],P[1]+=N[1],N[0]||(P[0]=bt(P[0]*T[0],x)/T[0]),N[1]||(P[1]=bt(P[1]*T[1],x)/T[1]);P[0]===0&&(P[0]=Oe(u[0])*ma),P[1]===0&&(P[1]=Oe(u[1])*ma),M=b0(P,[T[0],T[1]]);var B=[f,v],Q=[f*M[0],v*M[1]];Q=yo(Q,n.minScaleSize,n.maxScaleSize,E?m:!1),M=Bs(2,function($){return B[$]?Q[$]/B[$]:Q[$]}),P=Bs(2,function($){return M[$]/T[$]});var q=Bs(2,function($){return u[$]?P[$]/u[$]:P[$]}),H="scale(".concat(P.join(", "),")"),U="scale(".concat(M.join(", "),")"),Y=xa(n,U,H),tt=!h[0]||!h[1],nt=gg(t,tt?U:H,n.fixedDirection,L,n.fixedOffset,n,tt),vt=F?nt:dt(nt,n.prevInverseDist||[0,0]);if(n.prevDist=P,n.prevInverseDist=nt,M[0]===u[0]&&M[1]===u[1]&&vt.every(function($){return!$})&&!S&&!F)return!1;var ct=Dt(t,e,O({offsetWidth:f,offsetHeight:v,direction:d,scale:M,dist:P,delta:q,isPinch:!!a},Jc(t,Y,vt,a,e)));return rt(t,"onScale",ct),ct},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=Ve(t,e,{});return rt(t,"onScaleEnd",r),r},dragGroupControlCondition:od,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=vn(t,"resizable",e);n.moveableScale=t.scale;var a=An(t,this,"dragControlStart",e,function(c,u){return Da(t,c,n,u)}),o=function(c){r.setFixedDirection(c),a.forEach(function(u,d){u.setFixedDirection(c),Da(t,u.moveable,n,i[d])})};n.setFixedDirection=o;var s=O(O({},r),{targets:t.props.targets,events:a,setFixedDirection:o}),l=rt(t,"onScaleGroupStart",s);return n.isScale=l!==!1,n.isScale?s:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){Ia(t,"onBeforeScale",function(u){rt(t,"onBeforeScaleGroup",Dt(t,e,O(O({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,s=n.fixedPosition,l=An(t,this,"dragControl",e,function(u,d){var f=_(De(ci(t.rotation/180*Math.PI,3),[d.datas.originalX*i[0],d.datas.originalY*i[1],1],3),2),v=f[0],p=f[1];return O(O({},d),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:Lt(s,[v,p])})}),c=O({targets:t.props.targets,events:l},r);return rt(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=An(t,this,"dragControlEnd",e),a=Ve(t,e,{targets:t.props.targets,events:i});return rt(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Xn(t,e){return t.map(function(n,r){return Qi(n,e[r],1,2)})}function sd(t,e,n){var r=se(t,e),i=se(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function j0(t,e){var n=sd(t[0],t[1],t[2]),r=sd(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var G0={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:_s("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var s=t.state,l=s.pos1,c=s.pos2,u=s.pos3,d=s.pos4,f=Xn(l,c),v=Xn(c,l),p=Xn(l,u),h=Xn(u,l),g=Xn(u,d),m=Xn(d,u),y=Xn(c,d),x=Xn(d,c);return J([e.createElement("div",{className:lt("line"),key:"middeLine1",style:Si(f,g,o)}),e.createElement("div",{className:lt("line"),key:"middeLine2",style:Si(v,m,o)}),e.createElement("div",{className:lt("line"),key:"middeLine3",style:Si(p,y,o)}),e.createElement("div",{className:lt("line"),key:"middeLine4",style:Si(h,x,o)})],_(ou(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return fe(n,lt("direction"))&&fe(n,lt("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,o=Uu(a,n);if(!o||!i)return!1;var s=t.state,l=s.transformOrigin,c=s.is3d,u=s.targetTransform,d=s.targetMatrix,f=s.width,v=s.height,p=s.left,h=s.top;n.datas={},n.targetTransform=u,n.warpTargetMatrix=c?d:fn(d,3,4),n.targetInverseMatrix=Rc(dn(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=p,n.top=h,n.poses=[[0,0],[f,0],[0,v],[f,v]].map(function(y){return dt(y,l)}),n.nextPoses=n.poses.map(function(y){var x=_(y,2),S=x[0],w=x[1];return De(n.warpTargetMatrix,[S,w,0,1],4)}),n.startValue=Ut(4),n.prevMatrix=Ut(4),n.absolutePoses=tn(s),n.posIndexes=qc(o),sr(t,e),Ca(t,e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:o};var g=Dt(t,e,O({set:function(y){n.startValue=y}},ba(t,e))),m=rt(t,"onWarpStart",g);return m!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=n.targetInverseMatrix,s=n.prevMatrix,l=n.isWarp,c=n.startValue,u=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(ya(t,e,"matrix3d"),Ir(t,"warpable")){var v=d.map(function(C){return f[C]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var p=Pa(t,r,{horizontal:v.map(function(C){return C[1]+a}),vertical:v.map(function(C){return C[0]+i})}),h=p.horizontal,g=p.vertical;a-=h.offset,i-=g.offset}var m=bn({datas:n,distX:i,distY:a},!0),y=n.nextPoses.slice();if(d.forEach(function(C){y[C]=Lt(y[C],m)}),!og.every(function(C){return j0(C.map(function(M){return u[M]}),C.map(function(M){return y[M]}))}))return!1;var x=Bo(u[0],u[2],u[1],u[3],y[0],y[2],y[1],y[3]);if(!x.length)return!1;var S=Wt(o,x,4),w=Zc(n,S,!0),E=Wt(dn(s,4),w,4);n.prevMatrix=w;var D=Wt(c,w,4),T=xa(n,"matrix3d(".concat(D.join(", "),")"),"matrix3d(".concat(w.join(", "),")"));return ls(e,T),rt(t,"onWarp",Dt(t,e,O({delta:E,matrix:D,dist:w,multiply:Wt,transform:T},Ae({transform:T},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,rt(t,"onWarpEnd",Ve(t,e,{})),r):!1}},F0=lt("area-pieces"),Ga=lt("area-piece"),ld=lt("avoid"),W0=lt("view-dragging");function js(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;rc(e,ld),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function cd(t){return t.createElement("div",{key:"area_pieces",className:F0},t.createElement("div",{className:Ga}),t.createElement("div",{className:Ga}),t.createElement("div",{className:Ga}),t.createElement("div",{className:Ga}))}var ud={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,s=t.getState(),l=s.width,c=s.height,u=s.renderPoses,d=o?lt("area","pass"):lt("area");if(a)return[e.createElement("div",{key:"area",ref:Rn(t,"areaElement"),className:d}),cd(e)];if(!r||!i)return[];var f=Bo([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),v=f.length?La(f,!0):"none";return[e.createElement("div",{key:"area",ref:Rn(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:v}}),cd(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var o=t.areaElement,s=t.state,l=s.moveableClientRect,c=s.renderPoses,u=s.rootMatrix,d=s.is3d,f=l.left,v=l.top,p=qe(c),h=p.left,g=p.top,m=p.width,y=p.height,x=d?4:3,S=_(Gr(u,[r-f,i-v],x),2),w=S[0],E=S[1];w-=h,E-=g;var D=[{left:h,top:g,width:m,height:E-10},{left:h,top:g,width:w-10,height:y},{left:h,top:g+E+10,width:m,height:y-E-10},{left:h+w+10,top:g,width:m-w-10,height:y}],T=[].slice.call(o.nextElementSibling.children);D.forEach(function(C,M){T[M].style.cssText="left: ".concat(C.left,"px;top: ").concat(C.top,"px; width: ").concat(C.width,"px; height: ").concat(C.height,"px;")}),bo(o,ld),s.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,js(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||js(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){js(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Zl(function(){e.disableNativeEvent=!1})}},K0=pi("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,o=t.getState(),s=o.beforeOrigin,l=o.rotation,c=o.svg,u=o.allMatrix,d=o.is3d,f=o.left,v=o.top,p=o.offsetWidth,h=o.offsetHeight,g;if(!a&&c&&i){var m=_(Is(i,p,h),2),y=m[0],x=m[1],S=d?4:3,w=Jt(u,[y,x],S);g=Na(l,r,dt(w,[f,v]))}else g=Na(l,r,s);return[e.createElement("div",{className:lt("control","origin"),style:g,key:"beforeOrigin"})]}});function V0(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Y0={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,o=new Nc,s=Cn(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var l=e.isControl?"controlGesto":"targetGesto",c=e.targets;o.on("scroll",function(u){var d=u.container,f=u.direction,v=Dt(t,e,{scrollContainer:d,direction:f}),p=c?"onScrollGroup":"onScroll";c&&(v.targets=c),rt(t,p,v)}).on("move",function(u){var d=u.offsetX,f=u.offsetY,v=u.inputEvent;t[l].scrollBy(d,f,v.inputEvent,!1)}).on("scrollDrag",function(u){var d=u.next;d(t[l].getCurrentEvent())}),o.dragStart(e,O({container:s},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,o=r.scrollThreshold,s=o===void 0?0:o,l=r.scrollThrottleTime,c=l===void 0?0:l,u=r.getScrollPosition,d=u===void 0?V0:u,f=r.scrollOptions;return n.drag(e,O({container:a,threshold:s,throttleTime:c,getScrollPosition:function(v){return d({scrollContainer:v.container,direction:v.direction})}},f)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,O(O({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},dd={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},X0=pi("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=ad(n.padding||{}),i=r.left,a=r.top,o=r.right,s=r.bottom,l=t.getState(),c=l.renderPoses,u=l.pos1,d=l.pos2,f=l.pos3,v=l.pos4,p=[u,d,f,v],h=[];return i>0&&h.push([0,2]),a>0&&h.push([0,1]),o>0&&h.push([1,3]),s>0&&h.push([2,3]),h.map(function(g,m){var y=_(g,2),x=y[0],S=y[1],w=p[x],E=p[S],D=c[x],T=c[S],C=Bo([0,0],[100,0],[0,100],[100,100],w,E,D,T);if(C.length)return e.createElement("div",{key:"padding".concat(m),className:lt("padding"),style:{transform:La(C,!0)}})})}}),fd=["nw","ne","se","sw"];function Fa(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var H0=[1,2,5,6],$0=[0,3,4,7],fr=[1,-1,-1,1],vr=[1,1,-1,-1];function Gs(t,e,n,r,i,a,o,s){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=n),s===void 0&&(s=r);var l=[],c=!1,u=t.filter(function(f){return!f.virtual}),d=u.map(function(f){var v=f.horizontal,p=f.vertical,h=f.pos;if(p&&!c&&(c=!0,l.push("/")),c){var g=Math.max(0,p===1?h[1]-a:s-h[1]);return l.push(pn(g,r,e)),g}else{var g=Math.max(0,v===1?h[0]-i:o-h[0]);return l.push(pn(g,n,e)),g}});return{radiusPoses:u,styles:l,raws:d}}function vd(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function pd(t,e,n,r,i,a,o){var s,l,c,u;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,v=t.slice(0,f),p=t.slice(f+1),h=v.length,g=p.length,m=g>0,y=_(v,4),x=y[0],S=x===void 0?"0px":x,w=y[1],E=w===void 0?S:w,D=y[2],T=D===void 0?S:D,C=y[3],M=C===void 0?E:C,R=_(p,4),A=R[0],P=A===void 0?S:A,L=R[1],N=L===void 0?m?P:E:L,j=R[2],F=j===void 0?m?P:T:j,G=R[3],W=G===void 0?m?N:M:G,K=[S,E,T,M].map(function(Y){return Ft(Y,e)}),B=[P,N,F,W].map(function(Y){return Ft(Y,n)}),Q=K.slice(),q=B.slice();s=_(Fa([Q[0],Q[1]],e),2),Q[0]=s[0],Q[1]=s[1],l=_(Fa([Q[3],Q[2]],e),2),Q[3]=l[0],Q[2]=l[1],c=_(Fa([q[0],q[3]],n),2),q[0]=c[0],q[3]=c[1],u=_(Fa([q[1],q[2]],n),2),q[1]=u[0],q[2]=u[1];var H=o?Q:Q.slice(0,Math.max(a[0],h)),U=o?q:q.slice(0,Math.max(a[1],g));return J(J([],_(H.map(function(Y,tt){var nt=fd[tt];return{virtual:tt>=h,horizontal:fr[tt],vertical:0,pos:[r+Y,i+(vr[tt]===-1?n:0)],sub:!0,raw:K[tt],direction:nt}})),!1),_(U.map(function(Y,tt){var nt=fd[tt];return{virtual:tt>=g,horizontal:0,vertical:vr[tt],pos:[r+(fr[tt]===-1?e:0),i+Y],sub:!0,raw:B[tt],direction:nt}})),!1)}function U0(t,e,n,r,i){i===void 0&&(i=e.length);var a=vd(t.slice(r)),o=a.horizontalRange,s=a.verticalRange,l=n-r,c=0;if(l===0)c=i;else if(l>0&&l<o[1])c=o[1]-l;else if(l>=s[0])c=s[0]+s[1]-l;else return;t.splice(n,c),e.splice(n,c)}function Z0(t,e,n,r,i,a,o,s,l,c,u){c===void 0&&(c=0),u===void 0&&(u=0);var d=vd(t.slice(n)),f=d.horizontalRange,v=d.verticalRange;if(r>-1)for(var p=fr[r]===1?a-c:s-a,h=f[1];h<=r;++h){var g=vr[h]===1?u:l,m=0;if(r===h?m=a:h===0?m=c+p:fr[h]===-1&&(m=s-(e[n][0]-c)),t.splice(n+h,0,{horizontal:fr[h],vertical:0,pos:[m,g]}),e.splice(n+h,0,[m,g]),h===0)break}else if(i>-1){var y=vr[i]===1?o-u:l-o;if(f[1]===0&&v[1]===0){var x=[c+y,u];t.push({horizontal:fr[0],vertical:0,pos:x}),e.push(x)}for(var S=v[0],h=v[1];h<=i;++h){var m=fr[h]===1?c:s,g=0;if(i===h?g=o:h===0?g=u+y:vr[h]===1?g=e[n+S][1]:vr[h]===-1&&(g=l-(e[n+S][1]-u)),t.push({horizontal:0,vertical:vr[h],pos:[m,g]}),e.push([m,g]),h===0)break}}}function Q0(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var q0=[[0,-1,"n"],[1,0,"e"]],J0=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Fs(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,o=i.height,s=e,l=s.type,c=s.poses,u=l==="rect",d=l==="circle";if(l==="polygon")return n.map(function(E){return"".concat(pn(E[0],a,r)," ").concat(pn(E[1],o,r))});if(u||l==="inset"){var f=n[1][1],v=n[3][0],p=n[7][0],h=n[5][1];if(u)return[f,v,h,p].map(function(E){return"".concat(E,"px")});var g=[f,a-v,o-h,p].map(function(E,D){return pn(E,D%2?a:o,r)});if(n.length>8){var m=_(dt(n[4],n[0]),2),y=m[0],x=m[1];g.push.apply(g,J(["round"],_(Gs(c.slice(8).map(function(E,D){return O(O({},E),{pos:n[D]})}),r,y,x,p,f,v,h).styles),!1))}return g}else if(d||l==="ellipse"){var S=n[0],w=pn(X(n[1][1]-S[1]),d?Math.sqrt((a*a+o*o)/2):o,r),g=d?[w]:[pn(X(n[2][0]-S[0]),a,r),w];return g.push("at",pn(S[0],a,r),pn(S[1],o,r)),g}}function Wa(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return J0.map(function(o){var s=_(o,3),l=s[0],c=s[1],u=s[2],d=i[l+1],f=a[c+1];return{vertical:X(c),horizontal:X(l),direction:u,pos:[d,f]}})}function hd(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[X(e[1]-e[0]),X(n[1]-n[0])]}function gd(t,e,n,r,i){var a,o,s,l,c,u,d,f,v;if(t){var p=i;if(!p){var h=Ie(t),g=h("clipPath");p=g!=="none"?g:h("clip")}if(!((!p||p==="none"||p==="auto")&&(p=r,!p))){var m=go(p),y=m.prefix,x=y===void 0?p:y,S=m.value,w=S===void 0?"":S,E=x==="circle",D=" ";if(x==="polygon"){var T=jn(w||"0% 0%, 100% 0%, 100% 100%, 0% 100%");D=",";var C=T.map(function(Yt){var te=_(Yt.split(" "),2),Et=te[0],wt=te[1];return{vertical:1,horizontal:1,pos:[Ft(Et,e),Ft(wt,n)]}}),M=ar(C.map(function(Yt){return Yt.pos}));return{type:x,clipText:p,poses:C,splitter:D,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(E||x==="ellipse"){var R="",A="",P=0,L=0,T=Bn(w);if(E){var N="";a=_(T,4),o=a[0],N=o===void 0?"50%":o,s=a[2],R=s===void 0?"50%":s,l=a[3],A=l===void 0?"50%":l,P=Ft(N,Math.sqrt((e*e+n*n)/2)),L=P}else{var j="",F="";c=_(T,5),u=c[0],j=u===void 0?"50%":u,d=c[1],F=d===void 0?"50%":d,f=c[3],R=f===void 0?"50%":f,v=c[4],A=v===void 0?"50%":v,P=Ft(j,e),L=Ft(F,n)}var G=[Ft(R,e),Ft(A,n)],C=J([{vertical:1,horizontal:1,pos:G,direction:"nesw"}],_(q0.slice(0,E?1:2).map(function(Et){return{vertical:X(Et[1]),horizontal:Et[0],direction:Et[2],sub:!0,pos:[G[0]+Et[0]*P,G[1]+Et[1]*L]}})),!1);return{type:x,clipText:p,radiusX:P,radiusY:L,left:G[0]-P,top:G[1]-L,right:G[0]+P,bottom:G[1]+L,poses:C,splitter:D}}else if(x==="inset"){var T=Bn(w||"0 0 0 0"),W=T.indexOf("round"),K=(W>-1?T.slice(0,W):T).length,B=T.slice(K+1),Q=_(T.slice(0,K),4),q=Q[0],H=Q[1],U=H===void 0?q:H,Y=Q[2],tt=Y===void 0?q:Y,nt=Q[3],vt=nt===void 0?U:nt,ct=_([q,tt].map(function(Et){return Ft(Et,n)}),2),$=ct[0],et=ct[1],Tt=_([vt,U].map(function(Et){return Ft(Et,e)}),2),ut=Tt[0],ft=Tt[1],xt=e-ft,Ot=n-et,Rt=pd(B,xt-ut,Ot-$,ut,$),C=J(J([],_(Wa($,xt,Ot,ut)),!1),_(Rt),!1);return{type:"inset",clipText:p,poses:C,top:$,left:ut,right:xt,bottom:Ot,radius:B,splitter:D}}else if(x==="rect"){var T=jn(w||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));D=",";var gt=_(T.map(function(ge){var le=tr(ge).value;return le}),4),Ct=gt[0],ft=gt[1],et=gt[2],ut=gt[3],C=Wa(Ct,ft,et,ut);return{type:"rect",clipText:p,poses:C,top:Ct,right:ft,bottom:et,left:ut,values:T,splitter:D}}}}}function tm(t,e,n,r,i){var a=t[e],o=a.direction,s=a.sub,l=t.map(function(){return[0,0]}),c=o?o.split(""):[];if(r&&e<8){var u=c.filter(function(P){return P==="w"||P==="e"}),d=c.filter(function(P){return P==="n"||P==="s"}),f=u[0],v=d[0];l[e]=n;var p=_(hd(t),2),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&i){var y=(e+4)%8,x=t[y].pos,S=[0,0];o.indexOf("w")>-1?S[0]=-1:o.indexOf("e")>-1&&(S[0]=1),o.indexOf("n")>-1?S[1]=-1:o.indexOf("s")>-1&&(S[1]=1);var w=nd([h,g],n,m,S,!0),E=h+w[0],D=g+w[1],T=x[1],C=x[1],M=x[0],R=x[0];S[0]===-1?M=R-E:S[0]===1?R=M+E:(M=M-E/2,R=R+E/2),S[1]===-1?T=C-D:(S[1]===1||(T=C-D/2),C=T+D);var A=Wa(T,R,C,M);t.forEach(function(P,L){l[L][0]=A[L].pos[0]-P.pos[0],l[L][1]=A[L].pos[1]-P.pos[1]})}else t.forEach(function(P,L){var N=P.direction;N&&(N.indexOf(f)>-1&&(l[L][0]=n[0]),N.indexOf(v)>-1&&(l[L][1]=n[1]))}),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),v&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else o&&!s?c.forEach(function(P){var L=P==="n"||P==="s";t.forEach(function(N,j){var F=N.direction,G=N.horizontal,W=N.vertical;!F||F.indexOf(P)===-1||(l[j]=[L||!G?0:n[0],!L||!W?0:n[1]])})}):l[e]=n;return l}function em(t,e){var n=_(Uc(t,e),2),r=n[0],i=n[1],a=e.datas,o=a.clipPath,s=a.clipIndex,l=o,c=l.type,u=l.poses,d=l.splitter,f=u.map(function(y){return y.pos});if(c==="polygon")f.splice(s,0,[r,i]);else if(c==="inset"){var v=H0.indexOf(s),p=$0.indexOf(s),h=u.length;if(Z0(u,f,8,v,p,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),h===u.length)return}else return;var g=Fs(t,o,f),m="".concat(c,"(").concat(g.join(d),")");rt(t,"onClip",Dt(t,e,O({clipEventType:"added",clipType:c,poses:f,clipStyles:g,clipStyle:m,distX:0,distY:0},Ae({clipPath:m},e))))}function nm(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,o=a.type,s=a.poses,l=a.splitter,c=s.map(function(v){return v.pos}),u=c.length;if(o==="polygon")s.splice(i,1),c.splice(i,1);else if(o==="inset"){if(i<8||(U0(s,c,i,8,u),u===s.length))return}else return;var d=Fs(t,r,c),f="".concat(o,"(").concat(d.join(l),")");rt(t,"onClip",Dt(t,e,O({clipEventType:"removed",clipType:o,poses:c,clipStyles:d,clipStyle:f,distX:0,distY:0},Ae({clipPath:f},e))))}var rm={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,s=n.groupable,l=t.getState(),c=l.target,u=l.width,d=l.height,f=l.allMatrix,v=l.is3d,p=l.left,h=l.top,g=l.pos1,m=l.pos2,y=l.pos3,x=l.pos4,S=l.clipPathState,w=l.snapBoundInfos,E=l.rotation;if(!c||s)return[];var D=gd(c,u,d,i||"inset",S||r);if(!D)return[];var T=v?4:3,C=D.type,M=D.poses,R=M.map(function(ft){var xt=Jt(f,ft.pos,T);return[xt[0]-p,xt[1]-h]}),A=[],P=[],L=C==="rect",N=C==="inset",j=C==="polygon";if(L||N||j){var F=N?R.slice(0,8):R;P=F.map(function(ft,xt){var Ot=xt===0?F[F.length-1]:F[xt-1],Rt=se(Ot,ft),gt=Vu(Ot,ft);return e.createElement("div",{key:"clipLine".concat(xt),className:lt("line","clip-line","snap-control"),"data-clip-index":xt,style:{width:"".concat(gt,"px"),transform:"translate(".concat(Ot[0],"px, ").concat(Ot[1],"px) rotate(").concat(Rt,"rad) scaleY(").concat(o,")")}})})}if(A=R.map(function(ft,xt){return e.createElement("div",{key:"clipControl".concat(xt),className:lt("control","clip-control","snap-control"),"data-clip-index":xt,style:{transform:"translate(".concat(ft[0],"px, ").concat(ft[1],"px) rotate(").concat(E,"rad) scale(").concat(o,")")}})}),N&&A.push.apply(A,J([],_(R.slice(8).map(function(ft,xt){return e.createElement("div",{key:"clipRadiusControl".concat(xt),className:lt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+xt,style:{transform:"translate(".concat(ft[0],"px, ").concat(ft[1],"px) rotate(").concat(E,"rad) scale(").concat(o,")")}})})),!1)),C==="circle"||C==="ellipse"){var G=D.left,W=D.top,K=D.radiusX,B=D.radiusY,Q=_(dt(Jt(f,[G,W],T),Jt(f,[0,0],T)),2),q=Q[0],H=Q[1],U="none";if(!a){for(var Y=Math.max(10,K/5,B/5),tt=[],nt=0;nt<=Y;++nt){var vt=Math.PI*2/Y*nt;tt.push([K+(K-o)*Math.cos(vt),B+(B-o)*Math.sin(vt)])}tt.push([K,-2]),tt.push([-2,-2]),tt.push([-2,B*2+2]),tt.push([K*2+2,B*2+2]),tt.push([K*2+2,-2]),tt.push([K,-2]),U="polygon(".concat(tt.map(function(ft){return"".concat(ft[0],"px ").concat(ft[1],"px")}).join(", "),")")}A.push(e.createElement("div",{key:"clipEllipse",className:lt("clip-ellipse","snap-control"),style:{width:"".concat(K*2,"px"),height:"".concat(B*2,"px"),clipPath:U,transform:"translate(".concat(-p+q,"px, ").concat(-h+H,"px) ").concat(La(f))}}))}if(a){var ct=qe(J([g,m,y,x],_(R),!1)),$=ct.width,et=ct.height,Tt=ct.left,ut=ct.top;if(j||L||N){var tt=N?R.slice(0,8):R;A.push(e.createElement("div",{key:"clipArea",className:lt("clip-area","snap-control"),style:{width:"".concat($,"px"),height:"".concat(et,"px"),transform:"translate(".concat(Tt,"px, ").concat(ut,"px)"),clipPath:"polygon(".concat(tt.map(function(xt){return"".concat(xt[0]-Tt,"px ").concat(xt[1]-ut,"px")}).join(", "),")")}}))}}return w&&["vertical","horizontal"].forEach(function(ft){var xt=w[ft],Ot=ft==="horizontal";xt.isSnap&&P.push.apply(P,J([],_(xt.snap.posInfos.map(function(Rt,gt){var Ct=Rt.pos,Yt=dt(Jt(f,Ot?[0,Ct]:[Ct,0],T),[p,h]),te=dt(Jt(f,Ot?[u,Ct]:[Ct,d],T),[p,h]);return mi(e,"",Yt,te,o,"clip".concat(ft,"snap").concat(gt),"guideline")})),!1)),xt.isBound&&P.push.apply(P,J([],_(xt.bounds.map(function(Rt,gt){var Ct=Rt.pos,Yt=dt(Jt(f,Ot?[0,Ct]:[Ct,0],T),[p,h]),te=dt(Jt(f,Ot?[u,Ct]:[Ct,d],T),[p,h]);return mi(e,"",Yt,te,o,"clip".concat(ft,"bounds").concat(gt),"guideline","bounds","bold")})),!1))}),J(J([],_(A),!1),_(P),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,O(O({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,s=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",d=e.datas,f=gd(o,s,l,i||"inset",a);if(!f)return!1;var v=f.clipText,p=f.type,h=f.poses,g=rt(t,"onClipStart",Dt(t,e,{clipType:p,clipStyle:v,poses:h.map(function(m){return m.pos})}));return g===!1?(d.isClipStart=!1,!1):(d.isControl=u&&u.indexOf("clip-control")>-1,d.isLine=u.indexOf("clip-line")>-1,d.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,d.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=v,sr(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.originalDatas,s=e.isDragTarget;if(!a.isClipStart)return!1;var l=a,c=l.isControl,u=l.isLine,d=l.isArea,f=l.clipIndex,v=l.clipPath;if(!v)return!1;var p=dr(t.props,"clippable"),h=p.keepRatio,g=0,m=0,y=o.draggable,x=bn(e);s&&y?(n=_(y.prevBeforeDist,2),g=n[0],m=n[1]):(r=_(x,2),g=r[0],m=r[1]);var S=[g,m],w=t.state,E=w.width,D=w.height,T=!d&&!c&&!u,C=v.type,M=v.poses,R=v.splitter,A=M.map(function(Pt){return Pt.pos});T&&(g=-g,m=-m);var P=!c||M[f].direction==="nesw",L=C==="inset"||C==="rect",N=M.map(function(){return[0,0]});if(c&&!P){var j=M[f],F=j.horizontal,G=j.vertical,W=[g*X(F),m*X(G)];N=tm(M,f,W,L,h)}else P&&(N=A.map(function(){return[g,m]}));var K=A.map(function(Pt,Vt){return Lt(Pt,N[Vt])}),B=J([],_(K),!1);w.snapBoundInfos=null;var Q=v.type==="circle",q=v.type==="ellipse";if(Q||q){var H=qe(K),U=X(H.bottom-H.top),Y=X(q?H.right-H.left:U),tt=K[0][1]+U,nt=K[0][0]-Y,vt=K[0][0]+Y;Q&&(B.push([vt,H.bottom]),N.push([1,0])),B.push([H.left,tt]),N.push([0,1]),B.push([nt,H.bottom]),N.push([1,0])}var ct=Lu((p.clipHorizontalGuidelines||[]).map(function(Pt){return Ft("".concat(Pt),D)}),(p.clipVerticalGuidelines||[]).map(function(Pt){return Ft("".concat(Pt),E)}),E,D),$=[],et=[];if(Q||q)$=[B[4][0],B[2][0]],et=[B[1][1],B[3][1]];else if(L){var Tt=[B[0],B[2],B[4],B[6]],ut=[N[0],N[2],N[4],N[6]];$=Tt.filter(function(Pt,Vt){return ut[Vt][0]}).map(function(Pt){return Pt[0]}),et=Tt.filter(function(Pt,Vt){return ut[Vt][1]}).map(function(Pt){return Pt[1]})}else $=B.filter(function(Pt,Vt){return N[Vt][0]}).map(function(Pt){return Pt[0]}),et=B.filter(function(Pt,Vt){return N[Vt][1]}).map(function(Pt){return Pt[1]});var ft=[0,0],xt=wu(ct,p.clipTargetBounds&&{left:0,top:0,right:E,bottom:D},$,et,5,5),Ot=xt.horizontal,Rt=xt.vertical,gt=Ot.offset,Ct=Rt.offset;if(Ot.isBound&&(ft[1]+=gt),Rt.isBound&&(ft[0]+=Ct),(q||Q)&&N[0][0]===0&&N[0][1]===0){var H=qe(K),Yt=H.bottom-H.top,te=q?H.right-H.left:Yt,Et=Rt.isBound?X(Ct):Rt.snapIndex===0?-Ct:Ct,wt=Ot.isBound?X(gt):Ot.snapIndex===0?-gt:gt;te-=Et,Yt-=wt,Q&&(Yt=yu(Rt,Ot)>0?Yt:te,te=Yt);var ht=B[0];B[1][1]=ht[1]-Yt,B[2][0]=ht[0]+te,B[3][1]=ht[1]+Yt,B[4][0]=ht[0]-te}else if(L&&h&&c){var ge=_(hd(M),2),le=ge[0],Nt=ge[1],Kt=le&&Nt?le/Nt:0,ee=M[f],St=ee.direction||"",ot=B[1][1],tt=B[5][1],nt=B[7][0],vt=B[3][0];X(gt)<=X(Ct)?gt=Oe(gt)*X(Ct)/Kt:Ct=Oe(Ct)*X(gt)*Kt,St.indexOf("w")>-1?nt-=Ct:St.indexOf("e")>-1?vt-=Ct:(nt+=Ct/2,vt-=Ct/2),St.indexOf("n")>-1?ot-=gt:St.indexOf("s")>-1?tt-=gt:(ot+=gt/2,tt-=gt/2);var be=Wa(ot,vt,tt,nt);B.forEach(function(mr,Hr){var $r;$r=_(be[Hr].pos,2),mr[0]=$r[0],mr[1]=$r[1]})}else B.forEach(function(Pt,Vt){var wn=N[Vt];wn[0]&&(Pt[0]-=Ct),wn[1]&&(Pt[1]-=gt)});var zt=Fs(t,v,K),ae="".concat(C,"(").concat(zt.join(R),")");if(w.clipPathState=ae,Q||q)$=[B[4][0],B[2][0]],et=[B[1][1],B[3][1]];else if(L){var Tt=[B[0],B[2],B[4],B[6]];$=Tt.map(function(Vt){return Vt[0]}),et=Tt.map(function(Vt){return Vt[1]})}else $=B.map(function(Pt){return Pt[0]}),et=B.map(function(Pt){return Pt[1]});if(w.snapBoundInfos=wu(ct,p.clipTargetBounds&&{left:0,top:0,right:E,bottom:D},$,et,1,1),y){var ye=w.is3d,Ye=w.allMatrix,sn=ye?4:3,Te=ft;s&&(Te=[S[0]+ft[0]-x[0],S[1]+ft[1]-x[1]]),y.deltaOffset=Wt(Ye,[Te[0],Te[1],0,0],sn)}return rt(t,"onClip",Dt(t,e,O({clipEventType:"changed",clipType:C,poses:K,clipStyle:ae,clipStyles:zt,distX:g,distY:m},Ae((i={},i[C==="rect"?"clip":"clipPath"]=ae,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,s=r.isControl;return o?(rt(t,"onClipEnd",Ve(t,e,{})),i&&(s?nm(t,e):a&&em(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},im={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":fe(e.inputEvent.target,lt("origin"))},dragControlStart:function(t,e){var n=e.datas;sr(t,e);var r=Dt(t,e,{dragStart:Pe.dragStart(t,new Ar().dragStart([0,0],e))}),i=rt(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=_(bn(e),2),o=a[0],s=a[1],l=t.state,c=l.width,u=l.height,d=l.offsetMatrix,f=l.targetMatrix,v=l.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=v?4:3,m=[o,s];if(i){var y=e.distOrigin;(y[0]||y[1])&&(m=y)}var x=Lt(n.startOrigin,m),S=Lt(n.startTargetOrigin,m),w=dt(m,n.prevOrigin),E=gi(d,f,x,g),D=t.getRect(),T=qe(ur(E,c,u,g)),C=[D.left-T.left,D.top-T.top];n.prevOrigin=m;var M=[pn(S[0],c,h),pn(S[1],u,h)].join(" "),R=Pe.drag(t,hi(e,t.state,C,!!r,!1)),A=Dt(t,e,O(O({width:c,height:u,origin:x,dist:m,delta:w,transformOrigin:M,drag:R},Ae({transformOrigin:M,transform:R.transform},e)),{afterTransform:R.transform}));return rt(t,"onDragOrigin",A),A},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(rt(t,"onDragOriginEnd",Ve(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-a[0],o[1]=s.origin[1]-a[1]):("x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function am(t,e,n,r){var i=t.filter(function(l){var c=l.virtual,u=l.horizontal;return u&&!c}).length,a=t.filter(function(l){var c=l.virtual,u=l.vertical;return u&&!c}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var s=t[o];om(t,o),o<4?s.pos[0]=n:s.pos[1]=r}}function om(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function sm(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function md(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Bn(t),pd(a,e,n,0,0,r,i)}function yd(t,e,n,r,i){var a=t.state,o=a.width,s=a.height,l=Gs(i,t.props.roundRelative,o,s),c=l.raws,u=l.styles,d=l.radiusPoses,f=Q0(d,c),v=f.horizontals,p=f.verticals,h=u.join(" ");a.borderRadiusState=h;var g=Dt(t,e,O({horizontals:v,verticals:p,borderRadius:h,width:o,height:s,delta:r,dist:n},Ae({borderRadius:h},e)));return rt(t,"onRound",g),g}function xd(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&(a?.props.target===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=As(o).borderRadius,r.borderRadius=i))}return i}var lm={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?lt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,o=n.allMatrix,s=n.is3d,l=n.left,c=n.top,u=n.borderRadiusState,d=t.props,f=d.minRoundControls,v=f===void 0?[0,0]:f,p=d.maxRoundControls,h=p===void 0?[4,4]:p,g=d.zoom,m=d.roundPadding,y=m===void 0?0:m,x=d.isDisplayShadowRoundControls,S=d.groupable;if(!r)return null;var w=u||xd(t),E=s?4:3,D=md(w,i,a,v,!0);if(!D)return null;var T=0,C=0,M=S?[0,0]:[l,c];return D.map(function(R,A){var P=R.horizontal,L=R.vertical,N=R.direction||"",j=J([],_(R.pos),!1);C+=Math.abs(P),T+=Math.abs(L),P&&N.indexOf("n")>-1&&(j[1]-=y),L&&N.indexOf("w")>-1&&(j[0]-=y),P&&N.indexOf("s")>-1&&(j[1]+=y),L&&N.indexOf("e")>-1&&(j[0]+=y);var F=dt(Jt(o,j,E),M),G=x&&x!=="horizontal",W=R.vertical?T<=h[1]&&(G||!R.virtual):C<=h[0]&&(x||!R.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(A),className:lt("control","border-radius",R.vertical?"vertical":"",R.virtual?"virtual":""),"data-radius-index":A,style:{display:W?"block":"none",transform:"translate(".concat(F[0],"px, ").concat(F[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,s=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,l=o?parseInt(i.getAttribute("data-radius-index"),10):-1,c=-1;if(s){var u=i.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!o&&!s)return!1;var d=Dt(t,e,{}),f=rt(t,"onRoundStart",d);if(f===!1)return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=o,r.isLine=s,sr(t,e);var v=t.props,p=v.roundRelative,h=v.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,y=m.width,x=m.height;r.isRound=!0,r.prevDist=[0,0];var S=xd(t),w=md(S||"",y,x,g,!0)||[];return r.controlPoses=w,m.borderRadiusState=Gs(w,p,y,x).styles.join(" "),d},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=_(bn(e),2),o=a[0],s=a[1],l=[o,s],c=dt(l,n.prevDist),u=t.props.maxRoundControls,d=u===void 0?[4,4]:u,f=t.state,v=f.width,p=f.height,h=r[i],g=h.vertical,m=h.horizontal,y=r.map(function(S){var w=S.horizontal,E=S.vertical,D=[w*m*l[0],E*g*l[1]];if(w){if(d[0]===1)return D;if(d[0]<4&&w!==m)return D}else{if(d[1]===0)return D[1]=E*m*l[0]/v*p,D;if(g){if(d[1]===1)return D;if(d[1]<4&&E!==g)return D}}return[0,0]});y[i]=l;var x=r.map(function(S,w){return O(O({},S),{pos:Lt(S.pos,y[w])})});return i<4?x.slice(0,i+1).forEach(function(S){S.virtual=!1}):x.slice(4,i+1).forEach(function(S){S.virtual=!1}),n.prevDist=[o,s],yd(t,e,l,c,x)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,s=r.isLine,l=r.lineIndex,c=r.controlPoses,u=c.filter(function(m){var y=m.virtual;return y}).length,d=t.props.roundClickable,f=d===void 0?!0:d;if(i&&f){if(a&&(f===!0||f==="control"))sm(c,o);else if(s&&(f===!0||f==="line")){var v=_(Uc(t,e),2),p=v[0],h=v[1];am(c,l,p,h)}u!==c.filter(function(m){var y=m.virtual;return y}).length&&yd(t,e,[0,0],[0,0],c)}var g=Ve(t,e,{});return rt(t,"onRoundEnd",g),n.borderRadiusState="",g},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=vn(t,"roundable",e),o=O({targets:t.props.targets,events:a.map(function(s,l){return O(O({},s),{target:i[l],moveable:r[l],currentTarget:r[l]})})},n);return rt(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=vn(t,"roundable",e),o=O({targets:t.props.targets,events:a.map(function(s,l){return O(O(O({},s),{target:i[l],moveable:r[l],currentTarget:r[l]}),Ae({borderRadius:n.borderRadius},s))})},n);return rt(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=vn(t,"roundable",e);Ia(t,"onRound",function(s){var l=O({targets:t.props.targets,events:i.map(function(c,u){return O(O(O({},c),{target:r[u],moveable:n[u],currentTarget:n[u]}),Ae({borderRadius:s.borderRadius},c))})},s);rt(t,"onRoundGroup",l)});var a=this.dragControlEnd(t,e);if(!a)return!1;var o=O({targets:t.props.targets,events:i.map(function(s,l){var c;return O(O({},s),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(c=s.datas)===null||c===void 0?void 0:c.lastEvent})})},a);return rt(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function cm(t,e){var n=e?4:3,r=Ut(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var bd={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Ac(i,!0),")"),s=!a||a==="none"?o:a;e.datas.startTransforms=cm(s,r)?[]:Bn(s)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Dt(t,e,{setTransform:function(n){e.datas.startTransforms=ie(n)?n:Bn(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Dt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),rt(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),rt(t,"onBeforeRender",Dt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),rt(t,"onBeforeRenderEnd",Dt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=vn(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,s){var l=i[s];return n.setTransform(l,o),n.resetStyle(o),n.fillDragStartParams(l,o)});rt(t,"onBeforeRenderGroupStart",Dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=vn(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,s){var l=i[s];return n.resetStyle(o),n.fillDragParams(l,o)});rt(t,"onBeforeRenderGroup",Dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),rt(t,"onBeforeRenderGroupEnd",Dt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Cd={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){rt(t,"onRenderStart",Dt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){rt(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){rt(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){rt(t,"onRenderGroupStart",Dt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=vn(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,s){var l=i[s];return n.fillDragParams(l,o)});rt(t,"onRenderGroup",Dt(t,e,O(O({isPinch:!!e.isPinch,targets:t.props.targets,transform:Ea(e),transformObject:{}},Ae(wa(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=vn(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,s){var l=i[s];return n.fillDragEndParams(l,o)});rt(t,"onRenderGroupEnd",Dt(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Ea(e)},Ae(wa(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return Tr(Sa(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),Dt(t,e,O({isPinch:!!e.isPinch,transformObject:n,transform:Ea(e)},Ae(wa(e))))},fillDragEndParams:function(t,e){var n={};return Tr(Sa(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),Dt(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Ea(e)},Ae(wa(e))))}};function wi(t,e,n,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var s=i==="Start",l=i==="End",c=i==="After",u=t.state.target,d=a.isRequest,f=r.indexOf("Control")>-1;if(!u||s&&f&&!d&&t.areaElement===a.inputEvent.target)return!1;var v=J([],_(e),!1);if(d){var p=a.requestAble;v.some(function(A){return A.name===p})||v.push.apply(v,J([],_(t.props.ables.filter(function(A){return A.name===p})),!1))}if(!v.length||v.every(function(A){return A.dragRelation}))return!1;var h=a.inputEvent,g;l&&h&&(g=document.elementFromPoint(a.clientX,a.clientY)||h.target);var m=!1,y=function(){var A;m=!0,(A=a.stop)===null||A===void 0||A.call(a)},x=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());x&&t.updateRect(i,!0,!1);var S=a.datas,w=f?"controlGesto":"targetGesto",E=t[w],D=function(A,P,L){if(!(P in A)||E!==t[w])return!1;var N=A.name,j=S[N]||(S[N]={});if(s&&(j.isEventStart=!L||!A[L]||A[L](t,a)),!j.isEventStart)return!1;var F=A[P](t,O(O({},a),{stop:y,datas:j,originalDatas:S,inputTarget:g}));return t._emitter.off(),s&&F===!1&&(j.isEventStart=!1),F};x&&v.forEach(function(A){A.unset&&A.unset(t)}),D(bd,"drag".concat(r).concat(i));var T=0,C=0;n.forEach(function(A){if(m)return!1;var P="".concat(A).concat(r).concat(i),L="".concat(A).concat(r,"Condition");i===""&&!d&&td(t.state,a);var N=v.filter(function(G){return G[P]});N=N.filter(function(G,W){return G.name&&N.indexOf(G)===W});var j=N.filter(function(G){return D(G,P,L)}),F=j.length;m&&++T,F&&++C,!m&&s&&N.length&&!F&&(T+=N.filter(function(G){var W=G.name,K=S[W];return K.isEventStart?G.dragRelation!=="strong":!1}).length?1:0)}),(!c||C)&&D(Cd,"drag".concat(r).concat(i));var M=E!==t[w]||T===n.length;if((l||m||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(A){A.state.gestos={}}),v.forEach(function(A){A.unset&&A.unset(t)})),s&&!M&&!d&&C&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||M)return!1;if(!s&&C&&!o||l){var R=t.props.flushSync||Gu;R(function(){t.updateRect(l?i:"",!0,!1),t.forceUpdate()})}return!s&&!l&&!c&&C&&!o&&wi(t,e,n,r,i+"After",a),!0}function Ws(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,o=t.areaElement,s=t._dragTarget;return!s||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===s||s.contains(a)||a===o||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||fe(a,"moveable-area")||fe(a,"moveable-padding")||fe(a,"moveable-edgeDraggable")}}function Sd(t,e,n){var r=t.controlBox,i=[],a=t.props,o=a.dragArea,s=t.state.target,l=a.dragTarget;i.push(r),(!o||l)&&i.push(e),!o&&l&&s&&e!==s&&a.dragTargetSelf&&i.push(s);var c=Ws(t);return wd(t,i,"targetAbles",n,{dragStart:c,pinchStart:c})}function Ed(t,e){var n=t.controlBox,r=[];r.push(n);var i=Ws(t,!0),a=function(o,s){if(s===void 0&&(s=o.inputEvent.target),s===n)return!0;var l=i(o,s);return!l};return wd(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function wd(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",o=t.props,s=o.pinchOutside,l=o.pinchThreshold,c=o.preventClickEventOnDrag,u=o.preventClickDefault,d=o.checkInput,f=o.dragFocusedInput,v=o.preventDefault,p=v===void 0?!0:v,h=o.preventRightClick,g=h===void 0?!0:h,m=o.preventWheelClick,y=m===void 0?!0:m,x=o.dragContainer,S=Cn(x,!0),w={preventDefault:p,preventRightClick:g,preventWheelClick:y,container:S||Ke(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:s,preventClickEventOnDrag:a?c:!1,preventClickEventOnDragStart:a?u:!1,preventClickEventByCondition:a?null:function(T){return t.controlBox.contains(T.target)},checkInput:a?d:!1,dragFocusedInput:f},E=new jc(e,w),D=r==="Control";return["drag","pinch"].forEach(function(T){["Start","","End"].forEach(function(C){E.on("".concat(T).concat(C),function(M){var R,A=M.eventType,P=T==="drag"&&M.isPinch;if(i[A]&&!i[A](M)){M.stop();return}if(!P){var L=T==="drag"?[T]:["drag",T],N=J([],_(t[n]),!1),j=wi(t,N,L,r,C,M);j?(t.props.stopPropagation||C==="Start"&&D)&&((R=M?.inputEvent)===null||R===void 0||R.stopPropagation()):M.stop()}})})}),E}var um=function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,s=i.moveable;s.state.disableNativeEvent||i.ables.forEach(function(l){l[o](s,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function dm(t,e,n,r){var i;n===void 0&&(n=e);var a=eu(t,e),o=a.matrixes,s=a.is3d,l=a.targetMatrix,c=a.transformOrigin,u=a.targetOrigin,d=a.offsetContainer,f=a.hasFixed,v=a.zoom,p=Tg(d,n),h=p.matrixes,g=p.is3d,m=p.offsetContainer,y=p.zoom,x=r||g||s,S=x?4:3,w=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,E=l,D=Ut(S),T=Ut(S),C=Ut(S),M=Ut(S),R=o.length,A=h.map(function(W){return O(O({},W),{matrix:W.matrix?J([],_(W.matrix),!1):void 0})}).reverse();o.reverse(),!s&&x&&(E=fn(E,3,4),Ts(o)),!g&&x&&Ts(A),A.forEach(function(W){T=Wt(T,W.matrix,S)});var P=n||Gn(t),L=((i=A[0])===null||i===void 0?void 0:i.target)||Ci(P,P,!0).offsetParent,N=A.slice(1).reduce(function(W,K){return Wt(W,K.matrix,S)},Ut(S));o.forEach(function(W,K){if(R-2===K&&(C=D.slice()),R-1===K&&(M=D.slice()),!W.matrix){var B=o[K+1],Q=R0(W,B,L,S,Wt(N,D,S));W.matrix=nr(Q,S)}D=Wt(D,W.matrix,S)});var j=!w&&s;E||(E=Ut(j?4:3));var F=La(w&&E.length===16?fn(E,4,3):E,j),G=T;return T=Rc(T,S,S),{hasZoom:v!==1||y!==1,hasFixed:f,matrixes:o,rootMatrix:T,originalRootMatrix:G,beforeMatrix:C,offsetMatrix:M,allMatrix:D,targetMatrix:E,targetTransform:F,inlineTransform:t.style.transform,transformOrigin:c,targetOrigin:u,is3d:x,offsetContainer:d,offsetRootContainer:m}}function Dd(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,o=0,s={},l=Yu(t);if(t&&(i=l.offsetWidth,a=l.offsetHeight),t){var c=dm(t,e,n,r),u=Or(c.allMatrix,c.transformOrigin,i,a);s=O(O({},c),u);var d=Or(c.allMatrix,[50,50],100,100);o=Xu([d.pos1,d.pos2],d.direction)}var f=r?4:3;return O(O(O({hasZoom:!1,width:i,height:a,rotation:o},l),{originalRootMatrix:Ut(f),rootMatrix:Ut(f),beforeMatrix:Ut(f),offsetMatrix:Ut(f),allMatrix:Ut(f),targetMatrix:Ut(f),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function pC(t,e,n){return n===void 0&&(n=e),Dd(t,e,n,!0)}function Ks(t,e,n,r,i,a){a===void 0&&(a=[]);var o=1,s=[0,0],l=za(),c=za(),u=za(),d=za(),f=[0,0],v={},p=Dd(e,n,i,!0);if(e){var h=Ie(e);a.forEach(function(A){v[A]=h(A)});var g=p.is3d?4:3,m=Or(p.offsetMatrix,Lt(p.transformOrigin,Pc(p.targetMatrix,g)),p.width,p.height);o=m.direction,s=Lt(m.origin,[m.left-p.left,m.top-p.top]),d=Ei(p.offsetRootContainer);var y=Ci(r,r,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var x=Or(Wt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),S=Or(p.originalRootMatrix,_a(Ie(y)("transformOrigin")).map(function(A){return parseFloat(A)}),y.offsetWidth,y.offsetHeight);if(l=ks(x,d),u=ks(S,d,y,!0),t){var w=x.left,E=x.top;c=ks({left:w,top:E,bottom:E,right:E},d)}}else{l=Ei(e),u=Dg(y),t&&(c=Ei(t));var D=u.left,T=u.top,C=u.clientLeft,M=u.clientTop,R=[l.left-D,l.top-T];f=dt(Gr(p.rootMatrix,R,4),[C+p.left,M+p.top])}}return O({targetClientRect:l,containerClientRect:u,moveableClientRect:c,rootContainerClientRect:d,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:e,style:v,offsetDelta:f},p)}function Td(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=ar([e,n,r,i]),o=[a.minX,a.minY],s=dt(t.origin,o);return e=dt(e,o),n=dt(n,o),r=dt(r,o),i=dt(i,o),O(O({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:s,beforeOrigin:s,isPersisted:!0})}var Wr=function(t){Rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=O({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Ks(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new di,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}Sp(n._observerId),n._observerId=Zl(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,o=n.target,s=n.zoom,l=n.cspNonce,c=n.translateZ,u=n.cssStyled,d=n.groupable,f=n.linePadding,v=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=_(i||[0,0],2),h=p[0],g=p[1],m=r.left,y=r.top,x=r.target,S=r.direction,w=r.hasFixed,E=r.offsetDelta,D=n.targets,T=this.isDragging(),C={};this.getEnabledAbles().forEach(function(N){C["data-able-".concat(N.name.toLowerCase())]=!0});var M=this._getAbleClassName(),R=D&&D.length&&(x||d)||o||!this._hasFirstTarget&&this.state.isPersisted,A=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[m-h,y-g];!d&&n.useAccuratePosition&&(P[0]+=E[0],P[1]+=E[1]);var L={position:w?"fixed":"absolute",display:R?"block":"none",visibility:A?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(c,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return f&&(L["--moveable-line-padding"]=f),v&&(L["--moveable-control-padding"]=v),Qe(u,O({cspNonce:l,ref:Rn(this,"controlBox"),className:"".concat(lt("control-box",S===-1?"reverse":"",T?"dragging":"")," ").concat(M," ").concat(a)},C,{onClick:this._onPreventClick,style:L}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Br(this,!1),Br(this,!0);var a=this.events;for(var o in a){var s=a[o];s&&s.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Ne(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(ns)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&Ws(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,s=r.pos3,l=r.pos4,c=r.targetClientRect;if(!i)return 0;var u;if(Fn(n)){var d=n.getBoundingClientRect();u={left:d.left,top:d.top,width:d.width,height:d.height}}else u=O({width:0,height:0},n);var f=u.left,v=u.top,p=u.width,h=u.height,g=Ko([a,o,l,s],c),m=Ph(g,[[f,v],[f+p,v],[f+p,v+h],[f,v+h]]),y=fi(g);return!m||!y?0:Math.min(100,m/y*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,o=i.pos1,s=i.pos2,l=i.pos3,c=i.pos4,u=i.targetClientRect;return a?va([n,r],Ko([o,s,c,l],u)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&Nr(!0);var s=a.parentMoveable,l=this.state,c=l.target||a.target,u=this.getContainer(),d=s?s._rootContainer:this._rootContainer,f=Ks(this.controlBox,c,u,u,d||u,this._getRequestStyles());if(!c&&this._hasFirstTarget&&a.persistData){var v=Td(a.persistData);for(var p in v)f[p]=v[p]}o&&Nr(),this.updateState(f,s?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var s=a.getEventData();return!!(!((r=s[n])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!n)return!0;var s=o.getEventData();return!!(!((i=s[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=tn(this.state),i=_(r,4),a=i[0],o=i[1],s=i[2],l=i[3],c=qe(r),u=n.width,d=n.height,f=c.width,v=c.height,p=c.left,h=c.top,g=[n.left,n.top],m=Lt(g,n.origin),y=Lt(g,n.beforeOrigin),x=n.transformOrigin;return{width:f,height:v,left:p,top:h,pos1:a,pos2:o,pos3:s,pos4:l,offsetWidth:u,offsetHeight:d,beforeOrigin:y,origin:m,transformOrigin:x,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&Ps(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&Ps(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return N0(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,o=a.props,s=o.parentMoveable||o.wrapperMoveable||a,l=s.props.ables,c=o.groupable,u=Ne(l,function(m){return m.name===n});if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var d=u.request(a),f=i||r.isInstant,v=d.isControl?"controlAbles":"targetAbles",p="".concat(c?"Group":"").concat(d.isControl?"Control":""),h=J([],_(s[v]),!1),g={request:function(m){return wi(a,h,["drag"],p,"",O(O({},d.request(m)),{requestAble:n,isRequest:!0}),f),g},requestEnd:function(){return wi(a,h,["drag"],p,"End",O(O({},d.requestEnd()),{requestAble:n,isRequest:!0}),f),g}};return wi(a,h,["drag"],p,"Start",O(O({},d.requestStart(r)),{requestAble:n,isRequest:!0}),f),f?g.request(r).requestEnd():g},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,o=n.transformOrigin,s=n.allMatrix,l=n.is3d,c=n.pos1,u=n.pos2,d=n.pos3,f=n.pos4,v=n.left,p=n.top,h=n.isPersisted,g=r.zoom||1;if(!i&&g<=1){n.renderPoses=[c,u,d,f],n.renderLines=[[c,u],[u,f],[f,d],[d,c]];return}var m=ad(i||{}),y=m.left,x=m.top,S=m.bottom,w=m.right,E=l?4:3,D=[];h?D=o:this.controlBox&&r.groupable?D=a:D=Lt(a,[v,p]);var T=ca(E,nr(D.map(function(L){return-L}),E),s,nr(o,E)),C=en(T,c,[-y,-x],E),M=en(T,u,[w,-x],E),R=en(T,d,[-y,S],E),A=en(T,f,[w,S],E);if(n.renderPoses=[C,M,R,A],n.renderLines=[[C,M],[M,A],[A,R],[R,C]],g){var P=g/2;n.renderLines=[[en(T,c,[-y-P,-x],E),en(T,u,[w+P,-x],E)],[en(T,u,[w,-x-P],E),en(T,f,[w,S+P],E)],[en(T,f,[w+P,S],E),en(T,d,[-y-P,S],E)],[en(T,d,[-y,S+P],E),en(T,c,[-y,-x-P],E)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,o=this.state,s=o.target,l=o.container;if(!(!s&&!r)){this.updateAbles();var c=!Os(s,r),u=c||!Os(l,i);if(u){var d=i||this.controlBox;d&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&d&&this.updateRect("End",!1,!1),this._isPropTargetChanged=c}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=Fc(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var s=Td(a);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),s="drag".concat(r,"Start"),l="pinch".concat(r,"Start"),c="drag".concat(r,"ControlStart"),u=Ba(o,[s,l],a),d=Ba(o,[c],a);this.enabledAbles=o,this.targetAbles=u,this.controlAbles=d},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Qe};return this.renderState={},O0(Ju(Ba(this.getEnabledAbles(),["render"],i).map(function(o){var s=o.render;return s(n,a)||[]})).filter(function(o){return o}),function(o){var s=o.key;return s}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,s=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return J(J([],_(r),!1),_(s),!1)},J([],_(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Br(this,!1),this.updateState({gestos:{}})),r||Br(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=Sd(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=Ed(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=Cn(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,s=r.parentMoveable;if(a||s&&o)return[];var l=this.getState(),c={createElement:Qe};return l.renderLines.map(function(u,d){return mi(c,"",u[0],u[1],i,"render-line-".concat(d))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,s=r.dragArea,l=!s&&a!==i,c=(n||s)&&o!==s;return l||c||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=yn(a);if(this._isTargetChanged())for(var s in a){var l=a[s];l&&l.destroy(),a[s]=null}if(i){var c=this.enabledAbles;o.forEach(function(u){var d=Ba(c,[u]),f=d.length>0,v=a[u];if(!f){v&&(v.destroy(),a[u]=null);return}v||(v=new um(i,n,u),a[u]=v),v.setAbles(d)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=Cn(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=Cn(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(J(J([],_(this._getAbleViewClassNames()),!1),[this.isDragging()?W0:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=qu(n.filter(Boolean),function(c){return c}).map(function(c){var u=_(c,1),d=u[0];return d}),a=this._viewClassNames,o=ri(a,i),s=o.removed,l=o.added;s.forEach(function(c){rc(r,a[c])}),l.forEach(function(c){bo(r,i[c])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,s=a?.isFlag()?a.getEventData():{},l=o?.isFlag()?o.getEventData():{};return i.map(function(c){var u,d,f,v=c.name,p=((u=c.className)===null||u===void 0?void 0:u.call(c,r))||"";return(!((d=s[v])===null||d===void 0)&&d.isEventStart||!((f=l[v])===null||f===void 0)&&f.isEventStart)&&(p+=" ".concat(lt("".concat(v).concat(n,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,o=Ke(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(a,{box:"border-box"}),this._reiszeObserver=s}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,o=a.target,s=Ke(this.getControlBoxElement());if(!s.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var l=new s.MutationObserver(function(c){var u,d;try{for(var f=$h(c),v=f.next();!v.done;v=f.next()){var p=v.value;p.type==="attributes"&&p.attributeName==="style"&&r.checkUpdateRect()}}catch(h){u={error:h}}finally{try{v&&!v.done&&(d=f.return)&&d.call(f)}finally{if(u)throw u.error}}});l.observe(o,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Gu,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(vc),Vs={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),o=a.left,s=a.top,l=a.isPersisted,c=r.zoom||1,u=t.renderGroupRects,d=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];l?i=d.map(function(){return null}):d=[];var f=Fr(t,"parentPosition",[o,s],function(p){return p.join(",")}),v=Fr(t,"requestStyles",t.getRequestChildStyles(),function(p){return p.join(",")});return t.moveables=t.moveables.slice(0,i.length),J(J([],_(i.map(function(p,h){return e.createElement(Wr,{key:"moveable"+h,ref:Wl(t,"moveables",h),target:p,origin:!1,requestStyles:v,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,s],persistData:d[h],zoom:c})})),!1),_(Ju(u.map(function(p,h){var g=p.pos1,m=p.pos2,y=p.pos3,x=p.pos4,S=[g,m,y,x];return[[0,1],[1,3],[3,2],[2,0]].map(function(w,E){var D=_(w,2),T=D[0],C=D[1];return mi(e,"",dt(S[T],f),dt(S[C],f),c,"group-rect-".concat(h,"-").concat(E))})}))),!1)}},fm=pi("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var s=n.contains(i);rt(t,"onClick",Dt(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),o=a>-1,s=!1;a===-1&&(a=Pn(i,function(l){return l.contains(r)}),s=a>-1),rt(t,"onClickGroup",Dt(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:s,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Kr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),O(O({},t),{datas:e})}var vm=pi("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?iu(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&fe(i,lt("direction"))&&fe(i,lt("edge"))&&fe(i,lt("edgeDraggable"))},dragStart:function(t,e){return Pe.dragStart(t,Kr(e))},drag:function(t,e){return Pe.drag(t,Kr(e))},dragEnd:function(t,e){return Pe.dragEnd(t,Kr(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&fe(i,lt("direction"))&&fe(i,lt("line"))},dragGroupStart:function(t,e){return Pe.dragGroupStart(t,Kr(e))},dragGroup:function(t,e){return Pe.dragGroup(t,Kr(e))},dragGroupEnd:function(t,e){return Pe.dragGroupEnd(t,Kr(e))},unset:function(t){return Pe.unset(t)}}),Md={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Ys=[bd,dd,x0,I0,Pe,vm,ys,B0,G0,e0,Y0,X0,K0,im,rm,lm,Vs,Md,fm,ud,Cd],pm=Ys.reduce(function(t,e){return(e.events||[]).forEach(function(n){ec(t,n)}),t},[]),hm=Ys.reduce(function(t,e){return(e.props||[]).forEach(function(n){ec(t,n)}),t},[]);function kd(t,e){var n=_(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function Ka(t,e){var n=_(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function Rd(t,e){return Math.max.apply(Math,J([],_(t.map(function(n){var r=_(n,4),i=r[0],a=r[1],o=r[2],s=r[3];return Math.max(i[e],a[e],o[e],s[e])})),!1))}function Pd(t,e){return Math.min.apply(Math,J([],_(t.map(function(n){var r=_(n,4),i=r[0],a=r[1],o=r[2],s=r[3];return Math.min(i[e],a[e],o[e],s[e])})),!1))}function gm(t,e){var n,r,i,a=[0,0],o=[0,0],s=[0,0],l=[0,0],c=0,u=0;if(!t.length)return{pos1:a,pos2:o,pos3:s,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:c,height:u,rotation:e};var d=bt(e,Re);if(d%90){var f=d/180*Math.PI,v=Math.tan(f),p=-1/v,h=[is,Xc],g=[[0,0],[0,0]],m=[is,Xc],y=[[0,0],[0,0]];t.forEach(function(q){q.forEach(function(H){var U=kd([-v,1,0],H),Y=kd([-p,1,0],H);h[0]>U&&(g[0]=H,h[0]=U),h[1]<U&&(g[1]=H,h[1]=U),m[0]>Y&&(y[0]=H,m[0]=Y),m[1]<Y&&(y[1]=H,m[1]=Y)})});var x=_(g,2),S=x[0],w=x[1],E=_(y,2),D=E[0],T=E[1],C=[-v,1,Ka([-v,1],S)],M=[-v,1,Ka([-v,1],w)],R=[-p,1,Ka([-p,1],D)],A=[-p,1,Ka([-p,1],T)];n=_([[C,R],[C,A],[M,R],[M,A]].map(function(q){var H=_(q,2),U=H[0],Y=H[1];return pa(U,Y)[0]}),4),a=n[0],o=n[1],s=n[2],l=n[3],c=m[1]-m[0],u=h[1]-h[0]}else{var P=Pd(t,0),L=Pd(t,1),N=Rd(t,0),j=Rd(t,1);if(a=[P,L],o=[N,L],s=[P,j],l=[N,j],c=N-P,u=j-L,d%180){var F=[s,a,l,o];r=_(F,4),a=r[0],o=r[1],s=r[2],l=r[3],c=j-L,u=N-P}}if(d%360>180){var F=[l,s,o,a];i=_(F,4),a=i[0],o=i[1],s=i[2],l=i[3]}var G=ar([a,o,s,l]),W=G.minX,K=G.minY,B=G.maxX,Q=G.maxY;return{pos1:a,pos2:o,pos3:s,pos4:l,width:c,height:u,minX:W,minY:K,maxX:B,maxY:Q,rotation:e}}function Ad(t,e){var n=e.map(function(r){if(ie(r)){var i=Ad(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Ne(t,function(s){var l=s.manager;return l.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&ie(n[0])?n[0]:n}var mm=function(t){Rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new _c,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Nr(!0),this.moveables.forEach(function(nt){nt.updateRect(n,!1,!1)});var s=this.props,l=this.moveables,c=o.target||s.target,u=l.map(function(nt){return{finded:!1,manager:nt}}),d=this.props.targetGroups||[],f=Ad(u,d),v=s.useDefaultGroupRotate;f.push.apply(f,J([],_(u.filter(function(nt){var vt=nt.finded;return!vt}).map(function(nt){var vt=nt.manager;return vt})),!1));var p=[],h=!r||n!==""&&s.updateGroup,g=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(a=s.persistData)===null||a===void 0?void 0:a.rotation;m!=null&&(g=m)}function y(nt,vt,ct){var $=nt.map(function(Rt){if(ie(Rt)){var gt=y(Rt,vt),Ct=[gt.pos1,gt.pos2,gt.pos3,gt.pos4];return p.push(gt),{poses:Ct,rotation:gt.rotation}}else return{poses:tn(Rt.state),rotation:Rt.getRotation()}}),et=$.map(function(Rt){var gt=Rt.rotation;return gt}),Tt=0,ut=et[0],ft=et.every(function(Rt){return Math.abs(ut-Rt)<.1});h?Tt=!v&&ft?ut:g:Tt=!v&&!ct&&ft?ut:vt;var xt=$.map(function(Rt){var gt=Rt.poses;return gt}),Ot=gm(xt,Tt);return Ot}var x=y(f,this.rotation,!0);h&&(this.rotation=x.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=p;var S=this.transformOrigin,w=this.rotation,E=this.scale,D=x.width,T=x.height,C=x.minX,M=x.minY,R=z0([[0,0],[D,0],[0,T],[D,T]],Is(S,D,T),this.rotation/180*Math.PI),A=ar(R.result),P=A.minX,L=A.minY,N=" rotate(".concat(w,"deg)")+" scale(".concat(Oe(E[0]),", ").concat(Oe(E[1]),")"),j="translate(".concat(-P,"px, ").concat(-L,"px)").concat(N);this.controlBox.style.transform="translate3d(".concat(C,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(S,";")+"width:".concat(D,"px;height:").concat(T,"px;")+"transform: ".concat(j),o.width=D,o.height=T;var F=this.getContainer(),G=Ks(this.controlBox,c,this.controlBox,this.getContainer(),this._rootContainer||F,[]),W=[G.left,G.top],K=_(tn(G),4),B=K[0],Q=K[1],q=K[2],H=K[3],U=ar([B,Q,q,H]),Y=[U.minX,U.minY],tt=Oe(E[0]*E[1]);G.pos1=dt(B,Y),G.pos2=dt(Q,Y),G.pos3=dt(q,Y),G.pos4=dt(H,Y),G.left=C-G.left+Y[0],G.top=M-G.top+Y[1],G.origin=dt(Lt(W,G.origin),Y),G.beforeOrigin=dt(Lt(W,G.beforeOrigin),Y),G.originalBeforeOrigin=Lt(W,G.originalBeforeOrigin),G.transformOrigin=dt(Lt(W,G.transformOrigin),Y),c.style.transform="translate(".concat(-P-Y[0],"px, ").concat(-L-Y[1],"px)")+N,Nr(),this.updateState(O(O({},G),{posDelta:Y,direction:tt,beforeDirection:tt}),i)},e.prototype.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,s=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return J(J([],_(r),!1),_(s),!1)},[]);return n},e.prototype.getMoveables=function(){return J([],_(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,J(J([],_(this.props.ables),!1),[Vs],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Cn(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,s=this.differ.update(o),l=s.added,c=s.changed,u=s.removed,d=l.length||u.length;(d||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Br(this,!1),Br(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=Sd(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Ed(this,"GroupControl")));var f=!Os(n.container,r.container);f&&(n.container=r.container),(f||d||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||c.length||o.length&&!id(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!d},e.prototype._updateObserver=function(){},e.defaultProps=O(O({},Wr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Wr),ym=function(t){Rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,s=i.persistData,l=i.targets||[],c=l.length,u=this.isUnmounted||!c,d=(r=s?.children)!==null&&r!==void 0?r:[];return u&&!c&&d.length?l=d.map(function(){return null}):u||(d=[]),Qe(o,{cspNonce:a,ref:Rn(this,"controlBox"),className:lt("control-box")},l.map(function(f,v){var p,h,g=(h=(p=i.individualGroupableProps)===null||p===void 0?void 0:p.call(i,f,v))!==null&&h!==void 0?h:{};return Qe(Wr,O({key:"moveable"+v,ref:Wl(n,"moveables",v)},i,g,{target:f,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:d[v]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Nr(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Nr()},e.prototype.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(l){return l.request(n,O(O({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,s={request:function(l){return a.forEach(function(c){return c.request(l)}),this},requestEnd:function(){return a.forEach(function(l){return l.requestEnd()}),this}};return o?s.request(r).requestEnd():s},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Ne(this.moveables,function(o){var s=o.getTargets()[0],l=o.getControlBoxElement(),c=o.getDragElement();return!s||!c?!1:c===i||c.contains(i)||c!==s&&s===i||s.contains(i)||l===i||l.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return J([],_(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(Wr);function Od(t,e){var n=[];return t.forEach(function(r){if(r){if(we(r)){e[r]&&n.push.apply(n,J([],_(e[r]),!1));return}ie(r)?n.push.apply(n,J([],_(Od(r,e)),!1)):n.push(r)}}),n}function _d(t,e){var n=[];return t.forEach(function(r){if(r){if(we(r)){e[r]&&n.push.apply(n,J([],_(e[r]),!1));return}ie(r)?n.push(_d(r,e)):n.push(r)}}),n}function Ld(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?ie(n)&&ie(i)?Ld(n,i):!0:!1})}var Nd=function(t){Rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new _c,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(s){n[s]=!0})});var i=yn(n).join(`
`);this.defaultStyled=Fc("div",dp(ns,ag+i))},e.getTotalAbles=function(){return J([dd,Vs,Md,ud],_(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,s=Xh(i,["ables","props"]),l=_(this._updateRefs(!0),2),c=l[0],u=l[1],d=Od(c,u),f=d.length>1,v=r.getTotalAbles(),p=J(J([],_(v),!1),_(a||[]),!1),h=O(O(O({},s),o||{}),{ables:p,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=d;var g=null,m=this.moveable,y=s.persistData;if(y?.children&&(f=!0),s.individualGroupable)return Qe(ym,O({key:"individual-group",ref:Rn(this,"moveable")},h,{target:null,targets:d}));if(f){var x=_d(c,u);if(m&&!m.props.groupable&&!m.props.individualGroupable){var S=m.props.target;S&&d.indexOf(S)>-1&&(g=O({},m.state))}return Qe(mm,O({key:"group",ref:Rn(this,"moveable")},h,(n=s.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:d,targetGroups:x,firstRenderState:g}))}else{var w=d[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var E=m.moveables||[],D=Ne(E,function(T){return T.props.target===w});D&&(g=O({},D.state))}return Qe(Wr,O({key:"single",ref:Rn(this,"moveable")},h,{target:w,firstRenderState:g}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=Ns(this.props.target||this.props.targets),a=typeof document<"u",o=Ld(r,i),s=this.selectorMap,l={};return this.refTargets.forEach(function c(u){if(we(u)){var d=s[u];d?l[u]=s[u]:a&&(o=!0,l[u]=[].slice.call(document.querySelectorAll(u)))}else ie(u)&&u.forEach(c)}),this._tmpRefTargets=i,this._tmpSelectorMap=l,[i,l,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,s=a.removed,l=o.length||s.length;l&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var c=_(this._updateRefs(),3),u=c[0],d=c[1],f=c[2];this.refTargets=u,this.selectorMap=d,f&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,Hh([fp($c)],e.prototype,"moveable",void 0),e}(vc),xm=function(t){Rr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=Ys,e}(Nd);function hC(t){var e;return e=function(n){Rr(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(Nd),e.defaultAbles=t,e}var Xs=function(t,e){return Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Xs(t,e)};function Hs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Xs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Di=function(){return Di=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Di.apply(this,arguments)};function bm(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var Cm=function(t){Hs(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Qe(xm,Di({ref:Rn(this,"moveable")},this.state))},e}(To),Sm=hm,Em=$c,wm=pm,Dm=function(t){Hs(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=Di({},i),s={};wm.forEach(function(u){s[mo("on ".concat(u))]=function(d){return a.trigger(u,d)}});var l;i.warpSelf?(delete i.warpSelf,a._warp=!0,l=r):(l=ze(r).createElement("div"),r.appendChild(l)),a.containerProvider=bc(Qe(Cm,Di({ref:Rn(a,"innerMoveable")},o,s)),l),a.selfElement=l;var c=o.target;return ie(c)&&c.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;bc(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=bm([vo(Em,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=this.getMoveable();if(!(!s||!s[i]))return s[i].apply(s,a)})}),vo(Sm,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e}(di),Tm=function(t){Hs(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Dm);function gC(t,e,n){return getElementInfo$1(t,e,n)}function mC(t,e){return makeAble$1(t,e)}var $s=function(t,e){return $s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},$s(t,e)};function Mm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$s(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var km="object",Rm="string";function zd(t){return t&&typeof t===km}function Id(t){return Array.isArray(t)}function Bd(t){return typeof t===Rm}function Pm(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Us(t,e,n,r){t.addEventListener(e,n,r)}function Zs(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qs=function(){return Qs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qs.apply(this,arguments)};function Am(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var Om=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(zd(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(zd(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=Pm(a,function(s){return s.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,Am(a).forEach(function(s){s.listener(r),s.once&&i.off(n,s.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(Qs({listener:r},i))},t}();function _m(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Ti=_m(function(t,e){function n(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return o[l];var u=String(l),d=r[u.toLowerCase()];if(d)return d;var d=i[u.toLowerCase()];if(d)return d;if(u.length===1)return u.charCodeAt(0)}n.isEventKey=function(c,u){if(c&&typeof c=="object"){var d=c.which||c.keyCode||c.charCode;if(d==null)return!1;if(typeof u=="string"){var f=r[u.toLowerCase()];if(f)return f===d;var f=i[u.toLowerCase()];if(f)return f===d}else if(typeof u=="number")return u===d;return!1}},e=t.exports=n;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)r[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)r[a-48]=a;for(a=1;a<13;a++)r["f"+a]=a+111;for(a=0;a<10;a++)r["numpad "+a]=a+96;var o=e.names=e.title={};for(a in r)o[r[a]]=a;for(var s in i)r[s]=i[s]}),yC=Ti.code,xC=Ti.codes,bC=Ti.aliases,Lm=Ti.names,CC=Ti.title,jd={"+":"plus","left command":"meta","right command":"meta"},Gd={shift:1,ctrl:2,alt:3,meta:4};function Fd(t,e){var n=(Lm[t]||e||"").toLowerCase();for(var r in jd)n=n.replace(r,jd[r]);return n.replace(/\s/g,"")}function Wd(t,e){e===void 0&&(e=Fd(t.keyCode,t.key));var n=Nm(t);return n.indexOf(e)===-1&&n.push(e),n.filter(Boolean)}function Nm(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function Kd(t){var e=t.slice();return e.sort(function(n,r){var i=Gd[n]||5,a=Gd[r]||5;return i-a}),e}var Vd,zm=function(t){Mm(e,t);function e(r){r===void 0&&(r=window);var i=t.call(this)||this;return i.container=r,i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.metaKey=!1,i.clear=function(){return i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.metaKey=!1,i},i.keydownEvent=function(a){i.triggerEvent("keydown",a)},i.keyupEvent=function(a){i.triggerEvent("keyup",a)},i.blur=function(){i.clear(),i.trigger("blur")},Us(r,"blur",i.blur),Us(r,"keydown",i.keydownEvent),Us(r,"keyup",i.keyupEvent),i}var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return Vd||(Vd=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var r=this.container;this.clear(),this.off(),Zs(r,"blur",this.blur),Zs(r,"keydown",this.keydownEvent),Zs(r,"keyup",this.keyupEvent)},n.keydown=function(r,i){return this.addEvent("keydown",r,i)},n.offKeydown=function(r,i){return this.removeEvent("keydown",r,i)},n.offKeyup=function(r,i){return this.removeEvent("keyup",r,i)},n.keyup=function(r,i){return this.addEvent("keyup",r,i)},n.addEvent=function(r,i,a){return Id(i)?this.on(r+"."+Kd(i).join("."),a):Bd(i)?this.on(r+"."+i,a):this.on(r,i),this},n.removeEvent=function(r,i,a){return Id(i)?this.off(r+"."+Kd(i).join("."),a):Bd(i)?this.off(r+"."+i,a):this.off(r,i),this},n.triggerEvent=function(r,i){this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey;var a=Fd(i.keyCode,i.key),o=a==="ctrl"||a==="shift"||a==="meta"||a==="alt",s={key:a,isToggle:o,inputEvent:i,keyCode:i.keyCode,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey};this.trigger(r,s),this.trigger(r+"."+a,s);var l=Wd(i,a);l.length>1&&this.trigger(r+"."+l.join("."),s)},e}(Om);const Im=zm;var qs=function(t,e){return qs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},qs(t,e)};function Yd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var he=function(){return he=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},he.apply(this,arguments)};function Bm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function jm(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Mi(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Gm(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:t.clientX,clientY:t.clientY}}function Fm(t){if(typeof Map>"u")return t.filter(function(n,r){return t.indexOf(n)===r});var e=new Map;return t.filter(function(n){return e.has(n)?!1:(e.set(n,!0),!0)})}function Wm(t,e,n){var r=ze(t);return r.elementFromPoint&&r.elementFromPoint(e,n)||null}function Xd(t,e,n){var r=t.tag,i=t.children,a=t.attributes,o=t.className,s=t.style,l=e||ze(n).createElement(r);for(var c in a)l.setAttribute(c,a[c]);var u=l.children;if(i.forEach(function(f,v){Xd(f,u[v],l)}),o&&o.split(/\s+/g).forEach(function(f){f&&!fe(l,f)&&bo(l,f)}),s){var d=l.style;for(var c in s)d[c]=s[c]}return!e&&n&&n.appendChild(l),l}function Km(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.className,o=a===void 0?"":a,s=i.style,l=s===void 0?{}:s,c=Bm(i,["className","style"]);return{tag:t,className:o,style:l,attributes:c,children:n}}function Js(t,e,n){t!==e&&n(t,e)}function Hd(t,e,n){var r;n===void 0&&(n=t.data.boundArea);var i=t.distX,a=i===void 0?0:i,o=t.distY,s=o===void 0?0:o,l=t.data,c=l.startX,u=l.startY;if(e>0){var d=Math.sqrt((a*a+s*s)/(1+e*e)),f=e*d;a=(a>=0?1:-1)*f,s=(s>=0?1:-1)*d}var v=Math.abs(a),p=Math.abs(s),h=a<0?c-n.left:n.right-c,g=s<0?u-n.top:n.bottom-u;r=yo([v,p],[0,0],[h,g],!!e),v=r[0],p=r[1],a=(a>=0?1:-1)*v,s=(s>=0?1:-1)*p;var m=Math.min(0,a),y=Math.min(0,s),x=c+m,S=u+y;return{left:x,top:S,right:x+v,bottom:S+p,width:v,height:p}}function Va(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,a=e.height;return{pos1:[n,r],pos2:[n+i,r],pos3:[n,r+a],pos4:[n+i,r+a]}}function $d(t,e,n){var r=Mr(t,e),i=r.list,a=r.prevList,o=r.added,s=r.removed,l=r.maintained;return Mi(Mi(Mi([],o.map(function(c){return i[c]}),!0),s.map(function(c){return a[c]}),!0),n?l.map(function(c){var u=c[1];return i[u]}):[],!0)}function Ud(t){for(var e=0,n=t.length,r=1;r<n;++r)e=Math.max(xn(t[r],t[r-1]),e);return e}var Zd=Gc(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),Qd="selecto-selection ".concat(Zd.className),qd=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],SC=Mi(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],qd,!0),EC={className:String,boundContainer:null,portalContainer:null,container:null,dragContainer:null,selectableTargets:Array,selectByClick:Boolean,selectFromInside:Boolean,continueSelect:Boolean,toggleContinueSelect:Array,toggleContinueSelectWithoutDeselect:Array,keyContainer:null,hitRate:Number,scrollOptions:Object,checkInput:Boolean,preventDefault:Boolean,cspNonce:String,ratio:Number,getElementRect:Function,preventDragFromInside:Boolean,rootContainer:Object,dragCondition:Function,clickBySelectEnd:Boolean,continueSelectWithoutDeselect:Boolean,preventClickEventOnDragStart:Boolean,preventClickEventOnDrag:Boolean,checkOverflow:Boolean,innerScrollOptions:Object},wC=null,DC=null,Vm=function(t){Yd(e,t);function e(r){r===void 0&&(r={});var i=t.call(this)||this;i.selectedTargets=[],i.dragScroll=new Nc,i._onDragStart=function(s,l){var c=s.data,u=s.clientX,d=s.clientY,f=s.inputEvent,v=i.options,p=v.selectFromInside,h=v.selectByClick,g=v.rootContainer,m=v.boundContainer,y=v.preventDragFromInside,x=y===void 0?!0:y,S=v.clickBySelectEnd,w=v.dragCondition;if(w&&!w(s)){s.stop();return}c.data={};var E=Ke(i.container);c.innerWidth=E.innerWidth,c.innerHeight=E.innerHeight,i.findSelectableTargets(c),c.startSelectedTargets=i.selectedTargets,c.scaleMatrix=jo(),c.containerX=0,c.containerY=0;var D=i.container,T={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(g){var C=i.container.getBoundingClientRect();c.containerX=C.left,c.containerY=C.top,c.scaleMatrix=hh(i.container,g)}if(m){var M=We(m)&&"element"in m?he({left:!0,top:!0,bottom:!0,right:!0},m):{element:m,left:!0,top:!0,bottom:!0,right:!0},R=M.element,A=void 0;if(R){we(R)?A=ze(D).querySelector(R):R===!0?A=i.container:A=R;var P=A.getBoundingClientRect();M.left&&(T.left=P.left),M.top&&(T.top=P.top),M.right&&(T.right=P.right),M.bottom&&(T.bottom=P.bottom)}}c.boundArea=T;var L={left:u,top:d,right:u,bottom:d,width:0,height:0},N=[],j=h&&!S,F=!1;if(!p||j){var G=i._findElement(l||f.target,c.selectableTargets);F=!!G,j&&(N=G?[G]:[])}var W=!p&&F;if(W&&!h)return s.stop(),!1;var K=f.type,B=K==="mousedown"||K==="touchstart",Q=!s.isClick&&B?i.emit("dragStart",he(he({},s),{data:c.data})):!0;if(!Q)return s.stop(),!1;if(i.continueSelect?(N=$d(i.selectedTargets,N,i.continueSelectWithoutDeselect),c.startPassedTargets=i.selectedTargets):c.startPassedTargets=[],i._select(N,L,s,!0,W&&h&&!S&&x),c.startX=u,c.startY=d,c.selectFlag=!1,c.preventDragFromInside=!1,f.target){var q=da(c.scaleMatrix,[u-c.containerX,d-c.containerY]);i.target.style.cssText+="position: ".concat(g?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(q[0],"px, ").concat(q[1],"px)")}if(W&&h&&!S)f.preventDefault(),x&&(i._selectEnd(c.startSelectedTargets,c.startPassedTargets,L,s,!0),c.preventDragFromInside=!0);else{c.selectFlag=!0;var H=i.options,U=H.scrollOptions,Y=H.innerScrollOptions,tt=!1;if(Y){for(var nt=s.inputEvent,vt=nt.target,ct=null,$=vt;$&&$!==ze(D).body;){var et=getComputedStyle($).overflow!=="visible";if(et){ct=$;break}$=$.parentElement}ct&&(c.innerScrollOptions=he({container:ct,checkScrollEvent:!0},Y===!0?{}:Y),i.dragScroll.dragStart(s,c.innerScrollOptions),tt=!0)}!tt&&U&&U.container&&i.dragScroll.dragStart(s,U),W&&h&&S&&(c.selectFlag=!1,s.preventDrag())}return!0},i._onDrag=function(s){if(s.data.selectFlag){var l=i.scrollOptions,c=s.data.innerScrollOptions,u=c||l?.container;if(u&&!s.isScroll&&i.dragScroll.drag(s,c||l))return}i._checkSelected(s)},i._onDragEnd=function(s){var l=s.data,c=s.inputEvent,u=Hd(s,i.options.ratio),d=l.selectFlag,f=i.container;if(c&&i.emit("dragEnd",he(he({isDouble:!!s.isDouble,isClick:!!s.isClick,isDrag:!1,isSelect:d},s),{data:l.data,rect:u})),i.target.style.cssText+="display: none;",d)l.selectFlag=!1,i.dragScroll.dragEnd();else if(i.selectByClick&&i.clickBySelectEnd){var v=i._findElement(c?.target||Wm(f,s.clientX,s.clientY),l.selectableTargets);i._select(v?[v]:[],u,s)}l.preventDragFromInside||i._selectEnd(l.startSelectedTargets,l.startPassedTargets,u,s)},i._onKeyDown=function(s){var l=i.options,c=!1;if(!i._keydownContinueSelect){var u=i._sameCombiKey(s,l.toggleContinueSelect);i._keydownContinueSelect=u,c||(c=u)}if(!i._keydownContinueSelectWithoutDeselection){var u=i._sameCombiKey(s,l.toggleContinueSelectWithoutDeselect);i._keydownContinueSelectWithoutDeselection=u,c||(c=u)}c&&i.emit("keydown",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection})},i._onKeyUp=function(s){var l=i.options,c=!1;if(i._keydownContinueSelect){var u=i._sameCombiKey(s,l.toggleContinueSelect,!0);i._keydownContinueSelect=!u,c||(c=u)}if(i._keydownContinueSelectWithoutDeselection){var u=i._sameCombiKey(s,l.toggleContinueSelectWithoutDeselect,!0);i._keydownContinueSelectWithoutDeselection=!u,c||(c=u)}c&&i.emit("keyup",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection})},i._onBlur=function(){(i._keydownContinueSelect||i._keydownContinueSelectWithoutDeselection)&&(i._keydownContinueSelect=!1,i._keydownContinueSelectWithoutDeselection=!1,i.emit("keyup",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection}))},i._onDocumentSelectStart=function(s){var l=ze(i.container);if(i.gesto.isFlag()){var c=i.dragContainer;c===Ke(i.container)&&(c=l.documentElement);var u=Fn(c)?[c]:[].slice.call(c),d=s.target;u.some(function(f){if(f===d||f.contains(d))return s.preventDefault(),!0})}},i.target=r.portalContainer;var a=r.container;i.options=he({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:null,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:Va,cspNonce:"",ratio:0},r);var o=i.options.portalContainer;return o&&(a=o.parentElement),i.container=a||document.body,i.initElement(),i.initDragScroll(),i.setKeyController(),i}var n=e.prototype;return n.setSelectedTargets=function(r){var i=this.selectedTargets,a=Mr(i,r),o=a.added,s=a.removed,l=a.prevList,c=a.list;return this.selectedTargets=r,{added:o.map(function(u){return c[u]}),removed:s.map(function(u){return l[u]}),beforeSelected:i,selected:r}},n.setSelectedTargetsByPoints=function(r,i){var a=Math.min(r[0],i[0]),o=Math.min(r[1],i[1]),s=Math.max(r[0],i[0]),l=Math.max(r[1],i[1]),c={left:a,top:o,right:s,bottom:l,width:s-a,height:l-o},u={ignoreClick:!0};this.findSelectableTargets(u);var d=this.hitTest(c,u,!0,null),f=this.setSelectedTargets(d);return he(he({},f),{rect:c})},n.selectTargetsByPoints=function(r,i){var a=new MouseEvent("mousedown",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),l=this.gesto,c=l.onDragStart(a);c!==!1&&(l.onDrag(o),l.onDragEnd(s))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(r){return this.gesto.triggerDragStart(r),this},n.destroy=function(){var r;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),ve(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(r=this.target.parentElement)===null||r===void 0||r.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(r){var i=this.getElementRect||Va,a=i(r),o=[a.pos1,a.pos2,a.pos4,a.pos3];if(i!==Va){var s=r.getBoundingClientRect();return Ko(o,s)}return o},n.getSelectableElements=function(){var r=this.container,i=[];return this.options.selectableTargets.forEach(function(a){if(Ji(a)){var o=a();o&&i.push.apply(i,[].slice.call(o))}else if(Fn(a))i.push(a);else if(We(a))i.push(a.value||a.current);else{var s=[].slice.call(ze(r).querySelectorAll(a));i.push.apply(i,s)}}),i},n.checkScroll=function(){if(this.gesto.isFlag()){var r=this.scrollOptions,i=this.gesto.getEventData().innerScrollOptions,a=i||r?.container;a&&this.dragScroll.checkScroll(he({inputEvent:this.gesto.getCurrentEvent()},i||r))}},n.findSelectableTargets=function(r){var i=this;r===void 0&&(r=this.gesto.getEventData());var a=this.getSelectableElements(),o=a.map(function(d){return i.getElementPoints(d)});r.selectableTargets=a,r.selectablePoints=o,r.selectableParentMap=null;var s=this.options,l=s.checkOverflow||s.innerScrollOptions,c=ze(this.container);if(l){var u=new Map;r.selectableInnerScrollParentMap=u,r.selectableInnerScrollPathsList=a.map(function(d,f){for(var v=d.parentElement,p=[],h=[],g=function(){var m=u.get(v);if(!m){var y=getComputedStyle(v).overflow!=="visible";if(y){var x=Va(v);m={parentElement:v,indexes:[],points:[x.pos1,x.pos2,x.pos4,x.pos3],paths:Mi([],h,!0)},p.push(v),p.forEach(function(S){u.set(S,m)}),p=[]}}m?(v=m.parentElement,u.get(v).indexes.push(f),h.push(v)):p.push(v),v=v.parentElement};v&&v!==c.body;)g();return h})}return s.checkOverflow||(r.selectableInners=a.map(function(){return!0})),this._refreshGroups(r),a},n.clickTarget=function(r,i){var a=Gm(r),o=a.clientX,s=a.clientY,l={data:{selectFlag:!1},clientX:o,clientY:s,inputEvent:r,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,i)&&this._onDragEnd(l),this},n.setKeyController=function(){var r=this.options,i=r.keyContainer,a=r.toggleContinueSelect,o=r.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(a||o)&&(this.keycon=new Im(i||Ke(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setClassName=function(r){this.options.className=r,this.target.setAttribute("class","".concat(Qd," ").concat(r||""))},n.setKeyEvent=function(){var r=this.options,i=r.toggleContinueSelect,a=r.toggleContinueSelectWithoutDeselect;!i&&!a||this.keycon||this.setKeyController()},n.setKeyContainer=function(r){var i=this,a=this.options;Js(a.keyContainer,r,function(){a.keyContainer=r,i.setKeyController()})},n.getContinueSelect=function(){var r=this.options,i=r.continueSelect,a=r.toggleContinueSelect;return!a||!this._keydownContinueSelect?i:!i},n.getContinueSelectWithoutDeselect=function(){var r=this.options,i=r.continueSelectWithoutDeselect,a=r.toggleContinueSelectWithoutDeselect;return!a||!this._keydownContinueSelectWithoutDeselection?i:!i},n.setToggleContinueSelect=function(r){var i=this,a=this.options;Js(a.toggleContinueSelect,r,function(){a.toggleContinueSelect=r,i.setKeyEvent()})},n.setToggleContinueSelectWithoutDeselect=function(r){var i=this,a=this.options;Js(a.toggleContinueSelectWithoutDeselect,r,function(){a.toggleContinueSelectWithoutDeselect=r,i.setKeyEvent()})},n.setPreventDefault=function(r){this.gesto.options.preventDefault=r},n.setCheckInput=function(r){this.gesto.options.checkInput=r},n.initElement=function(){var r=this.options,i=r.dragContainer,a=r.checkInput,o=r.preventDefault,s=r.preventClickEventOnDragStart,l=r.preventClickEventOnDrag,c=r.preventClickEventByCondition,u=r.preventRightClick,d=u===void 0?!0:u,f=r.className,v=this.container;this.target=Xd(Km("div",{className:"".concat(Qd," ").concat(f||"")}),this.target,v);var p=this.target;this.dragContainer=typeof i=="string"?[].slice.call(ze(v).querySelectorAll(i)):i||this.target.parentNode,this.gesto=new jc(this.dragContainer,{checkWindowBlur:!0,container:Ke(v),checkInput:a,preventDefault:o,preventClickEventOnDragStart:s,preventClickEventOnDrag:l,preventClickEventByCondition:c,preventRightClick:d}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),xe(document,"selectstart",this._onDocumentSelectStart),this.injectResult=Zd.inject(p,{nonce:this.options.cspNonce})},n.hitTest=function(r,i,a,o){var s=this.options,l=s.hitRate,c=s.selectByClick,u=r.left,d=r.top,f=r.right,v=r.bottom,p=i.innerGroups,h=i.innerWidth,g=i.innerHeight,m=o?.clientX,y=o?.clientY,x=i.ignoreClick,S=[[u,d],[f,d],[f,v],[u,v]],w=function(G,W){var K=tr(typeof l=="function"?"".concat(l(W)):"".concat(l)),B=x?!1:va([m,y],G);if(!a&&c&&B)return!0;var Q=Ho(S,G);if(!Q.length)return!1;var q=fi(Q),H=0;if(q===0&&fi(G)===0?(H=Ud(G),q=Ud(Q)):H=fi(G),K.unit==="px")return q>=K.value;var U=ea(Math.round(q/H*100),0,100);return U>=Math.min(100,K.value)},E=i.selectableTargets,D=i.selectablePoints,T=i.selectableInners;if(!p)return E.filter(function(G,W){return T[W]?w(D[W],E[W]):!1});for(var C=[],M=Math.floor(u/h),R=Math.floor(f/h),A=Math.floor(d/g),P=Math.floor(v/g),L=M;L<=R;++L){var N=p[L];if(N)for(var j=A;j<=P;++j){var F=N[j];F&&F.forEach(function(G){var W=D[G],K=T[G],B=E[G];K&&w(W,B)&&C.push(B)})}}return Fm(C)},n.initDragScroll=function(){var r=this;this.dragScroll.on("scrollDrag",function(i){var a=i.next;a(r.gesto.getCurrentEvent())}).on("scroll",function(i){var a=i.container,o=i.direction,s=r.gesto.getEventData().innerScrollOptions;s?r.emit("innerScroll",{container:a,direction:o}):r.emit("scroll",{container:a,direction:o})}).on("move",function(i){var a=i.offsetX,o=i.offsetY,s=i.inputEvent,l=r.gesto;if(!(!l||!l.isFlag())){var c=r.gesto.getEventData(),u=c.boundArea;c.startX-=a,c.startY-=o;var d=r.gesto.getEventData().innerScrollOptions,f=d?.container,v=!1;if(f){var p=c.selectableInnerScrollParentMap,h=p.get(f);h&&(h.paths.forEach(function(g){var m=p.get(g);m.points.forEach(function(y){y[0]-=a,y[1]-=o})}),h.indexes.forEach(function(g){c.selectablePoints[g].forEach(function(m){m[0]-=a,m[1]-=o})}),v=!0)}v||c.selectablePoints.forEach(function(g){g.forEach(function(m){m[0]-=a,m[1]-=o})}),r._refreshGroups(c),u.left-=a,u.right-=a,u.top-=o,u.bottom-=o,r.gesto.scrollBy(a,o,s.inputEvent),r._checkSelected(r.gesto.getCurrentEvent())}})},n._select=function(r,i,a,o,s){s===void 0&&(s=!1);var l=a.inputEvent,c=a.data,u=this.setSelectedTargets(r),d=Mr(c.startSelectedTargets,r),f=d.added,v=d.removed,p=d.prevList,h=d.list,g={startSelected:p,startAdded:f.map(function(m){return h[m]}),startRemoved:v.map(function(m){return p[m]})};o&&this.emit("selectStart",he(he(he({},u),g),{rect:i,inputEvent:l,data:c.data,isTrusted:a.isTrusted,isDragStartEnd:s})),(u.added.length||u.removed.length)&&this.emit("select",he(he(he({},u),g),{rect:i,inputEvent:l,data:c.data,isTrusted:a.isTrusted,isDragStartEnd:s}))},n._selectEnd=function(r,i,a,o,s){s===void 0&&(s=!1);var l=o.inputEvent,c=o.isDouble,u=o.data,d=l&&l.type,f=d==="mousedown"||d==="touchstart",v=Mr(r,this.selectedTargets),p=v.added,h=v.removed,g=v.prevList,m=v.list,y=Mr(i,this.selectedTargets),x=y.added,S=y.removed,w=y.prevList,E=y.list;this.emit("selectEnd",{startSelected:r,beforeSelected:i,selected:this.selectedTargets,added:p.map(function(D){return m[D]}),removed:h.map(function(D){return g[D]}),afterAdded:x.map(function(D){return E[D]}),afterRemoved:S.map(function(D){return w[D]}),isDragStart:f&&s,isDragStartEnd:f&&s,isClick:!!o.isClick,isDouble:!!c,rect:a,inputEvent:l,data:u.data,isTrusted:o.isTrusted})},n._checkSelected=function(r,i){i===void 0&&(i=Hd(r,this.options.ratio));var a=r.data,o=i.top,s=i.left,l=i.width,c=i.height,u=a.selectFlag,d=a.containerX,f=a.containerY,v=a.scaleMatrix,p=da(v,[s-d,o-f]),h=da(v,[l,c]),g=[];if(u){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(p[0],"px, ").concat(p[1],"px);")+"width:".concat(h[0],"px;height:").concat(h[1],"px;");var m=this.hitTest(i,a,!0,r);g=$d(a.startPassedTargets,m,this.continueSelect&&this.continueSelectWithoutDeselect)}var y=this.emit("drag",he(he({},r),{data:a.data,isSelect:u,rect:i}));if(y===!1){this.target.style.cssText+="display: none;",r.stop();return}u&&this._select(g,i,r)},n._sameCombiKey=function(r,i,a){if(!i)return!1;var o=Wd(r.inputEvent,r.key),s=[].concat(i),l=ie(s[0])?s:[s];if(a){var c=r.key;return l.some(function(u){return u.some(function(d){return d===c})})}return l.some(function(u){return u.every(function(d){return o.indexOf(d)>-1})})},n._findElement=function(r,i){for(var a=r;a&&!(i.indexOf(a)>-1);)a=a.parentElement;return a},n._refreshGroups=function(r){var i,a=r.innerWidth,o=r.innerHeight,s=r.selectablePoints;if(this.options.checkOverflow){var l=(i=this.gesto.getEventData().innerScrollOptions)===null||i===void 0?void 0:i.container,c=r.selectableInnerScrollParentMap,u=r.selectableInnerScrollPathsList;r.selectableInners=u.map(function(v,p){var h=!1;return v.every(function(g){if(h)return!0;if(g===l)return h=!0,!0;var m=c.get(g);if(m){var y=s[p],x=m.points,S=Ho(y,x);if(!S.length)return!1}return!0})})}if(!a||!o)r.innerGroups=null;else{var d=r.selectablePoints,f={};d.forEach(function(v,p){var h=1/0,g=-1/0,m=1/0,y=-1/0;v.forEach(function(w){var E=Math.floor(w[0]/a),D=Math.floor(w[1]/o);h=Math.min(E,h),g=Math.max(E,g),m=Math.min(D,m),y=Math.max(D,y)});for(var x=h;x<=g;++x)for(var S=m;S<=y;++S)f[x]=f[x]||{},f[x][S]=f[x][S]||[],f[x][S].push(p)}),r.innerGroups=f}},e=jm([vo(qd,function(r,i){var a={enumerable:!0,configurable:!0,get:function(){return this.options[i]}},o=mo("get ".concat(i));r[o]?a.get=function(){return this[o]()}:a.get=function(){return this.options[i]};var s=mo("set ".concat(i));r[s]?a.set=function(l){this[s](l)}:a.set=function(l){this.options[i]=l},Object.defineProperty(r,i,a)})],e),e}(di),Ym=function(t){Yd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Vm);const Xm=Ym,Jd="connectionControl",tf="connection anchor",tl=8,ef=[{x:-1,y:1},{x:-.5,y:1},{x:0,y:1},{x:.5,y:1},{x:1,y:1},{x:1,y:.5},{x:1,y:0},{x:1,y:-.5},{x:1,y:-1},{x:.5,y:-1},{x:0,y:-1},{x:-.5,y:-1},{x:-1,y:-1},{x:-1,y:-.5},{x:-1,y:0},{x:-1,y:.5}],On=3,Ya=2.5,Hm=({setRef:t,setAnchorsRef:e,handleMouseLeave:n})=>{const r=(0,I.useRef)(null),i=(0,yt.of)($m),a=5.5,o="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=",s=d=>{d.target instanceof HTMLImageElement&&r.current&&d.target.style&&(r.current.style.display="block",r.current.style.top=`calc(${d.target.style.top} - ${a}px + ${On}px)`,r.current.style.left=`calc(${d.target.style.left} - ${a}px + ${On}px)`)},l=()=>{r.current&&(r.current.style.display="none")},c=d=>{n(d)&&l()},u=(d=ef)=>d.map(f=>{const v=`${f.x},${f.y}`,p={top:`calc(${-f.y*50+50}% - ${Ya}px - ${On}px)`,left:`calc(${f.x*50+50}% - ${Ya}px - ${On}px)`};return(0,b.jsx)("img",{id:v,ref:h=>{h&&h.style.setProperty("pointer-events","auto","important")},alt:tf,className:i.anchor,style:p,src:o,onMouseEnter:s},v)});return(0,b.jsxs)("div",{className:i.root,ref:t,children:[(0,b.jsx)("div",{className:i.mouseoutDiv,onMouseOut:c,onBlur:c}),(0,b.jsx)("div",{id:Jd,ref:r,className:i.highlightElement,onMouseLeave:l}),(0,b.jsx)("div",{ref:e,children:u()})]})},$m=t=>({root:(0,Z.css)({position:"absolute",display:"none"}),mouseoutDiv:(0,Z.css)({position:"absolute",margin:"-30px",width:"calc(100% + 60px)",height:"calc(100% + 60px)"}),anchor:(0,Z.css)({padding:`${On}px`,position:"absolute",cursor:"cursor",width:`calc(5px + 2 * ${On}px)`,height:`calc(5px + 2 * ${On}px)`,zIndex:100}),highlightElement:(0,Z.css)({backgroundColor:"#00ff00",opacity:.3,position:"absolute",cursor:"cursor",pointerEvents:"auto",width:"16px",height:"16px",borderRadius:t.shape.radius.circle,display:"none",zIndex:110})});var nf=z(49426),rf=z(57532);const Um=(t,e,n,r)=>{switch(n){case!0:switch(r){case-1:t.parent instanceof Be?e.parent&&(Xa(t,e.parent,e.parent.elements.length),t.updateData(e.parent.scene.context)):e.parent?.reorderTree(t,e,!0);break;default:e.parent&&(Xa(t,e.parent,e.parent.elements.indexOf(e)),t.updateData(e.parent.scene.context));break}break;case!1:e instanceof Be?t.parent===e?t.parent?.reorderTree(t,e,!0):(Xa(t,e),t.updateData(e.scene.context)):t.parent===e.parent?t.parent?.reorderTree(t,e):e.parent&&(Xa(t,e.parent),t.updateData(e.parent.scene.context));break}},Xa=(t,e,n=null)=>{t.parent?.doAction(It.Delete,t),t.parent=e;const r=t.div?.getBoundingClientRect();t.setPlacementFromConstraint(r,e.div?.getBoundingClientRect());const i=n??e.elements.length-1;e.elements.splice(i,0,t),e.scene.save(),e.reinitializeMoveable()},_e=(t,e)=>{const n=[...e];for(;n.length>0;){const r=n.shift();if(r&&r.div&&r.div===t)return r;const i=r instanceof Be?r.elements:[];for(const a of i)n.unshift(a)}},Zm=t=>{t.selection.pipe((0,rf.$)()).subscribe(e=>{const n=e[0].parent,r=new Be({type:"frame",name:t.getNextElementName(!0),elements:[]},t,e[0].parent),i=Qm(e);r.options.placement=i,e.forEach(a=>{const o=a.div?.getBoundingClientRect();a.setPlacementFromConstraint(o,i),n.doAction(It.Delete,a),r.doAction(It.Duplicate,a,!1,!1)}),r.setPlacementFromConstraint(i,n.div?.getBoundingClientRect()),n.elements.push(r),t.byName.set(r.getName(),r),t.save()})},Qm=t=>{let e=1/0,n=1/0,r=0,i=0;return t.forEach(a=>{const o=a.div?.getBoundingClientRect();o&&(e>o.top&&(e=o.top),n>o.left&&(n=o.left),r<o.right&&(r=o.right),i<o.bottom&&(i=o.bottom))}),{top:e,left:n,width:r-n,height:i-e}};let qm=0;const Jm=["input","textarea"],t1=({setSVGRef:t,setLineRef:e,setSVGVertexRef:n,setVertexPathRef:r,setVertexRef:i,scene:a})=>{const o=(0,yt.of)(e1),s=Date.now()+"_"+qm++,l=(0,I.useMemo)(()=>`connectionLineId-${s}`,[s]),c=(0,I.useMemo)(()=>`editorHead-${s}`,[s]),u=Bt.$W.theme2.colors.text.primary,d=2,f=un.Forward,v=10,[p,h]=(0,I.useState)(void 0),g=(0,I.useRef)(p);(0,I.useEffect)(()=>{g.current=p}),(0,I.useEffect)(()=>{a.panel.context.instanceState?.selectedConnection&&h(a.panel.context.instanceState?.selectedConnection)},[a.panel.context.instanceState?.selectedConnection]);const m=w=>{const E=w.target;if(E instanceof HTMLElement&&!(Jm.indexOf(E.nodeName.toLowerCase())>-1)){if(w.keyCode===8||w.keyCode===46)g.current&&g.current.source&&(g.current.source.options.connections=g.current.source.options.connections?.filter(D=>D!==g.current?.info),g.current.source.onChange(g.current.source.options),h(void 0),a.connections.select(void 0),a.connections.updateState(),a.save());else return;document.removeEventListener("keyup",m),a.selecto.rootContainer.removeEventListener("click",y)}},y=w=>{const E=w.target;!(E instanceof SVGLineElement&&E.id===l)&&(h(void 0),a.connections.select(void 0))},x=w=>{a.isEditingEnabled&&(h(w),a.connections.select(w),document.addEventListener("keyup",m),a.selecto.rootContainer.addEventListener("click",y))},S=()=>a.connections.state.sort((w,E)=>p===E&&a.panel.context.instanceState.selectedConnection?-1:0).map((w,E)=>{const{source:D,target:T,info:C,vertices:M,index:R}=w,A=D.div?.getBoundingClientRect(),P=D.div?.parentElement,L=a.scale,N=qn(a);if(!A||!P||!N)return;const{x1:j,y1:F,x2:G,y2:W}=fo(A,N,C,T,L);let{xStart:K,yStart:B,xEnd:Q,yEnd:q}={xStart:j,yStart:F,xEnd:G,yEnd:W};w.sourceOriginal&&w.targetOriginal?(K=w.sourceOriginal.x,B=w.sourceOriginal.y,Q=w.targetOriginal.x,q=w.targetOriginal.y):D.options.connections&&(!D.options.connections[R].sourceOriginal||!D.options.connections[R].targetOriginal)&&(D.options.connections[R].sourceOriginal={x:j,y:F},D.options.connections[R].targetOriginal={x:G,y:W});const H=$i(j,F,G,W),U=Q-K,Y=q-B,{strokeColor:tt,strokeWidth:nt,strokeRadius:vt,arrowDirection:ct,lineStyle:$,shouldAnimate:et}=ap(C,a,d,f),Tt=p===w&&a.panel.context.instanceState.selectedConnection,ut=a.isEditingEnabled?"grab":"",ft={stroke:"#44aaff",strokeOpacity:.6,strokeWidth:nt+5},xt=`connectionHeadStart-${s+Math.random()}`,Ot=`connectionHeadEnd-${s+Math.random()}`,Rt=vt,gt=[];let Ct=`M${j} ${F} `;M?.length&&(M.map((wt,ht)=>{const ge=wt.x,le=wt.y,Nt=ge*U+K,Kt=le*Y+B;let ee=Nt,St=Kt,ot=Nt,be=Kt,zt=0,ae=0,ye=0;if(Rt){if(ht<M.length-1){const Te=M[ht+1].x*U+K,Pt=M[ht+1].y*Y+B;if(ht===0)ae=kn(j,F,Nt,Kt),ye=kn(Nt,Kt,Te,Pt);else{const Vt=M[ht-1],wn=Vt.x*U+K,mr=Vt.y*Y+B;ae=kn(wn,mr,Nt,Kt),ye=kn(Nt,Kt,Te,Pt)}}else{if(ht>0){const Te=M[ht-1],Pt=Te.x*U+K,Vt=Te.y*Y+B;ae=kn(Pt,Vt,Nt,Kt)}else ae=kn(j,F,Nt,Kt);ye=kn(Nt,Kt,G,W)}const Ye=ye-ae,sn=Ye<0;zt=Rt*Math.tan(Ye/2),sn&&(zt*=-1)}if(ht===0){if(gt.push($i((j-K)/(Q-K),(F-B)/(q-B),ge,le)),Rt){const Ye=Ui(Nt,Kt,j,F);Math.abs(zt)>.5*Math.abs(Ye)&&(zt=.5*Ye);let sn=G,Te=W;if(ht<M.length-1){const wn=M[ht+1];sn=wn.x*U+K,Te=wn.y*Y+B}const Pt=Ui(Nt,Kt,sn,Te);Math.abs(zt)>.5*Math.abs(Pt)&&(zt=.5*Pt);const Vt=Ye-zt;ee=Math.round(Vt*Math.cos(ae)+j),St=Math.round(Vt*Math.sin(ae)+F),ot=Math.round(zt*Math.cos(ye)+Nt),be=Math.round(zt*Math.sin(ye)+Kt),(ee>Nt&&ee>j||ee<Nt&&ee<j)&&(ee=(Vt+2*zt)*Math.cos(ae)+j,St=(Vt+2*zt)*Math.sin(ae)+F,ot=-zt*Math.cos(ye)+Nt,be=-zt*Math.sin(ye)+Kt)}}else{const Ye=M[ht-1];if(gt.push($i(Ye.x,Ye.y,ge,le)),Rt){const sn=Ye.x*U+K,Te=Ye.y*Y+B,Pt=Ui(Nt,Kt,sn,Te);Math.abs(zt)>.5*Math.abs(Pt)&&(zt=.5*Pt);let Vt=G,wn=W;if(ht<M.length-1){const $r=M[ht+1];Vt=$r.x*U+K,wn=$r.y*Y+B}const mr=Ui(Nt,Kt,Vt,wn);Math.abs(zt)>.5*Math.abs(mr)&&(zt=.5*mr);const Hr=Pt-zt;ee=Math.round(Hr*Math.cos(ae)+sn),St=Math.round(Hr*Math.sin(ae)+Te),ot=Math.round(zt*Math.cos(ye)+Nt),be=Math.round(zt*Math.sin(ye)+Kt),(ee>Nt&&ee>sn||ee<Nt&&ee<sn)&&(ee=(Hr+2*zt)*Math.cos(ae)+sn,St=(Hr+2*zt)*Math.sin(ae)+Te,ot=-zt*Math.cos(ye)+Nt,be=-zt*Math.sin(ye)+Kt)}}ht===M.length-1&&gt.push($i((G-K)/(Q-K),(W-B)/(q-B),ge,le)),Ct+=`L${ee} ${St} `,zt!==0&&(Ct+=`Q ${Nt} ${Kt} ${ot} ${be} `)}),Ct+=`L${G} ${W}`);const Yt=ct===un.Reverse||ct===un.Both?`url(#${xt})`:void 0,te=ct===un.Forward||ct===un.Both?`url(#${Ot})`:void 0,Et=()=>{let wt="100;0";return ct===un.Reverse&&(wt="0;100"),wt};return(0,b.jsx)("svg",{className:o.connection,children:(0,b.jsxs)("g",{onClick:()=>x(w),children:[(0,b.jsxs)("defs",{children:[(0,b.jsx)("marker",{id:xt,markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",stroke:tt,children:(0,b.jsx)("polygon",{points:"10 0, 0 3.5, 10 7",fill:tt})}),(0,b.jsx)("marker",{id:Ot,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:tt,children:(0,b.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:tt})})]}),M?.length?(0,b.jsxs)("g",{children:[(0,b.jsx)("path",{id:`${l}_transparent`,d:Ct,cursor:ut,pointerEvents:"auto",stroke:"transparent",strokeWidth:15,fill:"none",style:Tt?ft:{}}),(0,b.jsx)("path",{d:Ct,stroke:tt,strokeWidth:nt,strokeDasharray:$,strokeDashoffset:1,fill:"none",markerEnd:te,markerStart:Yt,children:et&&(0,b.jsx)("animate",{attributeName:"stroke-dashoffset",values:Et(),dur:"5s",calcMode:"linear",repeatCount:"indefinite",fill:"freeze"})}),Tt&&(0,b.jsxs)("g",{children:[M.map((wt,ht)=>(0,b.jsx)("circle",{id:el,"data-index":ht,cx:wt.x*U+K,cy:wt.y*Y+B,r:5,stroke:tt,className:o.vertex,cursor:"crosshair",pointerEvents:"auto"},`${el}${ht}_${E}`)),M.length<v&&gt.map((wt,ht)=>(0,b.jsx)("circle",{id:Ha,"data-index":ht,cx:wt.x*U+K,cy:wt.y*Y+B,r:4,stroke:tt,className:o.addVertex,cursor:"crosshair",pointerEvents:"auto"},`${Ha}${ht}_${E}`))]})]}):(0,b.jsxs)("g",{children:[(0,b.jsx)("line",{id:`${l}_transparent`,cursor:ut,pointerEvents:"auto",stroke:"transparent",strokeWidth:15,style:Tt?ft:{},x1:j,y1:F,x2:G,y2:W}),(0,b.jsx)("line",{id:l,stroke:tt,pointerEvents:"auto",strokeWidth:nt,markerEnd:te,markerStart:Yt,strokeDasharray:$,strokeDashoffset:1,x1:j,y1:F,x2:G,y2:W,cursor:ut,children:et&&(0,b.jsx)("animate",{attributeName:"stroke-dashoffset",values:Et(),dur:"5s",calcMode:"linear",repeatCount:"indefinite",fill:"freeze"})}),Tt&&(0,b.jsx)("circle",{id:Ha,"data-index":0,cx:H.x,cy:H.y,r:4,stroke:tt,className:o.addVertex,cursor:"crosshair",pointerEvents:"auto"})]})]})},E)});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{ref:t,className:o.editorSVG,children:[(0,b.jsx)("defs",{children:(0,b.jsx)("marker",{id:c,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:u,children:(0,b.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:u})})}),(0,b.jsx)("line",{ref:e,stroke:u,strokeWidth:2,markerEnd:`url(#${c})`})]}),(0,b.jsxs)("svg",{ref:n,className:o.editorSVG,children:[(0,b.jsx)("path",{ref:r,stroke:u,strokeWidth:2,strokeDasharray:"5, 5",fill:"none"}),(0,b.jsx)("circle",{ref:i,stroke:u,r:4,className:o.vertex})]}),S()]})},e1=t=>({editorSVG:(0,Z.css)({position:"absolute",pointerEvents:"none",width:"100%",height:"100%",zIndex:1e3,display:"none"}),connection:(0,Z.css)({position:"absolute",width:"100%",height:"100%",zIndex:1e3,pointerEvents:"none"}),vertex:(0,Z.css)({fill:"#44aaff",strokeWidth:2}),addVertex:(0,Z.css)({fill:"#44aaff",opacity:.5,strokeWidth:1})}),el="vertex",Ha="vertexAdd",Hn=.05,n1=5/180*Math.PI;class r1{constructor(e){this.state=[],this.selection=new nf.t(void 0),this.select=n=>{n!==this.selection.value&&this.selection.next(n)},this.updateState=()=>{const n=this.selection.value;if(this.state=Gl(this.scene.byName),n){for(let r of this.state)if(r.source===n.source&&r.index===n.index){this.selection.next(r);break}}},this.setConnectionAnchorRef=n=>{this.connectionAnchorDiv=n},this.setAnchorsRef=n=>{this.anchorsDiv=n},this.setConnectionSVGRef=n=>{this.connectionSVG=n},this.setConnectionLineRef=n=>{this.connectionLine=n},this.setConnectionSVGVertexRef=n=>{this.connectionSVGVertex=n},this.setConnectionVertexRef=n=>{this.connectionVertex=n},this.setConnectionVertexPathRef=n=>{this.connectionVertexPath=n},this.findElementTarget=n=>{let r;if(n!==this.scene.div)return r=_e(n,this.scene.root.elements),!r&&n.parentElement&&(r=this.findElementTarget(n.parentElement)),r},this.handleMouseEnter=n=>{if(!(n.target instanceof Element)||!this.scene.isEditingEnabled)return;let r=this.findElementTarget(n.target);if(!r){console.log("no element");return}if(this.isDrawingConnection)this.connectionTarget=r;else if(this.connectionSource=r,!this.connectionSource){console.log("no connection source");return}const i=r?.item.customConnectionAnchors||ef,a=Array.from(this.anchorsDiv?.children),o=i.length;a.forEach((f,v)=>{if(v>=o)f.style.display="none";else{const{x:p,y:h}=i[v];f.style.top=`calc(${-h*50+50}% - ${Ya}px - ${On}px)`,f.style.left=`calc(${p*50+50}% - ${Ya}px - ${On}px)`,f.style.display="block"}});const s=r.div.getBoundingClientRect(),l=this.scene.scale,c=qn(this.scene),u=s.top-(c?.top??0),d=s.left-(c?.left??0);this.connectionAnchorDiv&&(this.connectionAnchorDiv.style.display="none",this.connectionAnchorDiv.style.display="block",this.connectionAnchorDiv.style.top=`${u/l}px`,this.connectionAnchorDiv.style.left=`${d/l}px`,this.connectionAnchorDiv.style.height=`${s.height/l}px`,this.connectionAnchorDiv.style.width=`${s.width/l}px`)},this.handleMouseLeave=n=>n.relatedTarget instanceof HTMLImageElement&&n.relatedTarget.getAttribute("alt")===tf?!1:(this.connectionTarget=void 0,this.connectionAnchorDiv.style.display="none",!0),this.connectionListener=n=>{if(n.preventDefault(),!(this.connectionLine&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.scale,i=qn(this.scene);if(!i)return;const a=n.pageX-(i.x??0),o=n.pageY-(i.y??0);this.connectionLine.setAttribute("x2",`${a/r}`),this.connectionLine.setAttribute("y2",`${o/r}`);const s=this.connectionLine.x1.baseVal.value,l=this.connectionLine.y1.baseVal.value;if(this.didConnectionLeaveHighlight||Math.hypot(a-s,o-l)>tl&&this.connectionSVG&&(this.didConnectionLeaveHighlight=!0,this.connectionSVG.style.display="block",this.isDrawingConnection=!0),!n.buttons){if(this.connectionSource&&this.connectionSource.div&&this.connectionSource.div.parentElement){const c=this.connectionSource.div.getBoundingClientRect(),u=this.scene.scale,d=qn(this.scene);if(!d)return;const f=(c.top-d.top+c.height/2)/u,v=(c.left-d.left+c.width/2)/u,p=(s-v)/(c.width/2/u),h=(f-l)/(c.height/2/u);let g,m,y;if(this.connectionTarget&&this.connectionTarget.div){const w=this.connectionTarget.div.getBoundingClientRect(),E=w.top-d.top+w.height/2,D=w.left-d.left+w.width/2;g=(a-D)/(w.width/2),m=(E-o)/(w.height/2),y=this.connectionTarget.options.name}else{const w=d.height/2,E=d.width/2;g=(a-E)/(d.width/2),m=(w-o)/(d.height/2)}const x={source:{x:p,y:h},target:{x:g,y:m},targetName:y,color:{fixed:ce.$.theme2.colors.text.primary},size:{fixed:2,min:1,max:10},path:kl.Straight},{options:S}=this.connectionSource;S.connections||(S.connections=[]),this.didConnectionLeaveHighlight&&(this.connectionSource.options.connections=[...S.connections,x],this.connectionSource.onChange(this.connectionSource.options))}this.connectionSVG&&(this.connectionSVG.style.display="none"),this.scene.selecto&&this.scene.selecto.rootContainer&&(this.scene.selecto.rootContainer.style.cursor="default",this.scene.selecto.rootContainer.removeEventListener("mousemove",this.connectionListener)),this.isDrawingConnection=!1,this.updateState(),this.scene.save()}},this.vertexListener=n=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",n.preventDefault(),!(this.connectionVertex&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.scale,i=qn(this.scene);if(!i)return;const a=(n.pageX-i.x)/r,o=(n.pageY-i.y)/r;this.connectionVertex?.setAttribute("cx",`${a}`),this.connectionVertex?.setAttribute("cy",`${o}`);const s=this.selection.value,l=s.source.div.getBoundingClientRect(),{x1:c,y1:u,x2:d,y2:f}=fo(l,i,s?.info,s.target,r);let{xStart:v,yStart:p,xEnd:h,yEnd:g}={xStart:c,yStart:u,xEnd:d,yEnd:f};s?.sourceOriginal&&s.targetOriginal&&(v=s.sourceOriginal.x,p=s.sourceOriginal.y,h=s.targetOriginal.x,g=s.targetOriginal.y);const m=h-v,y=g-p;let x=c,S=u,w=d,E=f;s&&s.vertices&&(this.selectedVertexIndex!==void 0&&this.selectedVertexIndex>0&&(x=s.vertices[this.selectedVertexIndex-1].x*m+v,S=s.vertices[this.selectedVertexIndex-1].y*y+p),this.selectedVertexIndex!==void 0&&this.selectedVertexIndex<s.vertices.length-1&&(w=s.vertices[this.selectedVertexIndex+1].x*m+v,E=s.vertices[this.selectedVertexIndex+1].y*y+p));let D=a,T=o,C=!1;if(!n.ctrlKey){const M=Math.abs((a-x)/(o-S))<Hn,R=Math.abs((a-w)/(o-E))<Hn,A=Math.abs((o-S)/(a-x))<Hn,P=Math.abs((o-E)/(a-w))<Hn;M?D=x:R&&(D=w),A?T=S:P&&(T=E),(M||R)&&(A||P)?this.scene.selecto.rootContainer.style.cursor="move":M||R?this.scene.selecto.rootContainer.style.cursor="col-resize":(A||P)&&(this.scene.selecto.rootContainer.style.cursor="row-resize");const L=kn(x,S,w,E),N=kn(x,S,a,o);C=Math.abs(N-L)<n1}if(C?(this.connectionVertexPath?.setAttribute("d",`M${x} ${S} L${w} ${E}`),this.connectionSVGVertex.style.display="block",this.connectionVertex.style.display="none"):(this.connectionVertexPath?.setAttribute("d",`M${x} ${S} L${D} ${T} L${w} ${E}`),this.connectionSVGVertex.style.display="block",this.connectionVertex.style.display="block"),!n.buttons){this.scene.selecto?.rootContainer?.removeEventListener("mousemove",this.vertexListener),this.scene.selecto?.rootContainer?.removeEventListener("mouseup",this.vertexListener),this.scene.selecto.rootContainer.style.cursor="auto",this.connectionSVGVertex.style.display="none";const M=s?.index,R=this.selectedVertexIndex;if(M!==void 0&&R!==void 0){const A=s.source;if(A.options.connections){const P=[...A.options.connections];if(P[M].vertices){const L=[...P[M].vertices];if(C)L.splice(R,1);else{const N={...L[R]};N.x=(D-v)/m,N.y=(T-p)/y,L[R]=N}P[M]={...P[M],vertices:L},A.onChange({...A.options,connections:P}),this.updateState(),this.scene.save()}}}}},this.vertexAddListener=n=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",n.preventDefault(),!(this.connectionVertex&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.scale,i=qn(this.scene);if(!i)return;const a=(n.pageX-i.x)/r,o=(n.pageY-i.y)/r;this.connectionVertex?.setAttribute("cx",`${a}`),this.connectionVertex?.setAttribute("cy",`${o}`);const s=this.selection.value,l=s.source.div.getBoundingClientRect(),{x1:c,y1:u,x2:d,y2:f}=fo(l,i,s?.info,s.target,r);let{xStart:v,yStart:p,xEnd:h,yEnd:g}={xStart:c,yStart:u,xEnd:d,yEnd:f};s?.sourceOriginal&&s.targetOriginal&&(v=s.sourceOriginal.x,p=s.sourceOriginal.y,h=s.targetOriginal.x,g=s.targetOriginal.y);const m=h-v,y=g-p;let x=c,S=u,w=d,E=f;s&&s.vertices&&(this.selectedVertexIndex!==void 0&&this.selectedVertexIndex>0&&(x=s.vertices[this.selectedVertexIndex-1].x*m+v,S=s.vertices[this.selectedVertexIndex-1].y*y+p),this.selectedVertexIndex!==void 0&&this.selectedVertexIndex<s.vertices.length&&(w=s.vertices[this.selectedVertexIndex].x*m+v,E=s.vertices[this.selectedVertexIndex].y*y+p));let D=a,T=o;if(!n.ctrlKey){const C=Math.abs((a-x)/(o-S))<Hn,M=Math.abs((a-w)/(o-E))<Hn,R=Math.abs((o-S)/(a-x))<Hn,A=Math.abs((o-E)/(a-w))<Hn;C?D=x:M&&(D=w),R?T=S:A&&(T=E),(C||M)&&(R||A)?this.scene.selecto.rootContainer.style.cursor="move":C||M?this.scene.selecto.rootContainer.style.cursor="col-resize":(R||A)&&(this.scene.selecto.rootContainer.style.cursor="row-resize")}if(this.connectionVertexPath?.setAttribute("d",`M${x} ${S} L${D} ${T} L${w} ${E}`),this.connectionSVGVertex.style.display="block",this.connectionVertex.style.display="block",!n.buttons){this.scene.selecto?.rootContainer?.removeEventListener("mousemove",this.vertexAddListener),this.scene.selecto?.rootContainer?.removeEventListener("mouseup",this.vertexAddListener),this.scene.selecto.rootContainer.style.cursor="auto",this.connectionSVGVertex.style.display="none";const C=s?.index,M=this.selectedVertexIndex;if(C!==void 0&&M!==void 0){const R=s.source;if(R.options.connections){const A=[...R.options.connections],P={x:(a-v)/m,y:(o-p)/y};if(A[C].vertices){const L=[...A[C].vertices];L.splice(M,0,P),A[C]={...A[C],vertices:L}}else{const L=[P];A[C]={...A[C],vertices:L}}(!A[C].sourceOriginal||!A[C].targetOriginal)&&(A[C]={...A[C],sourceOriginal:{x:c,y:u},targetOriginal:{x:d,y:f}}),R.onChange({...R.options,connections:A}),this.updateState(),this.scene.save()}}}},this.handleConnectionDragStart=(n,r,i)=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",this.connectionSVG&&this.connectionLine&&this.scene.div&&this.scene.div.parentElement){const a=n.getBoundingClientRect(),o=this.scene.scale,s=qn(this.scene);if(!s)return;const l=tl*o,c=tl*o,u=(a.x-s.x+l)/o,d=(a.y-s.y+c)/o,f=r-s.x,v=i-s.y;this.connectionLine.setAttribute("x1",`${u}`),this.connectionLine.setAttribute("y1",`${d}`),this.connectionLine.setAttribute("x2",`${f}`),this.connectionLine.setAttribute("y2",`${v}`),this.didConnectionLeaveHighlight=!1}this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.connectionListener)},this.handleVertexDragStart=n=>{this.selectedVertexIndex=Number(n.getAttribute("data-index")),this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.vertexListener),this.scene.selecto?.rootContainer?.addEventListener("mouseup",this.vertexListener)},this.handleVertexAddDragStart=n=>{this.selectedVertexIndex=Number(n.getAttribute("data-index")),this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.vertexAddListener),this.scene.selecto?.rootContainer?.addEventListener("mouseup",this.vertexAddListener)},this.onChange=(n,r)=>{const i=n.source.options.connections?.splice(0)??[];i[n.index]=r,n.source.onChange({...n.source.options,connections:i}),this.updateState()},this.connectionsNeedUpdate=n=>rp(n)||jl(n,this.scene.byName),this.scene=e,this.updateState()}render(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Hm,{setRef:this.setConnectionAnchorRef,setAnchorsRef:this.setAnchorsRef,handleMouseLeave:this.handleMouseLeave}),(0,b.jsx)(t1,{setSVGRef:this.setConnectionSVGRef,setLineRef:this.setConnectionLineRef,setSVGVertexRef:this.setConnectionSVGVertexRef,setVertexPathRef:this.setConnectionVertexPathRef,setVertexRef:this.setConnectionVertexRef,scene:this.scene})]})}}const i1=t=>({name:"settingsViewable",props:[],events:[],render(e,n){if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;const r=(s,l)=>{const c=e.getContainer(),u=new PointerEvent("contextmenu",{clientX:s,clientY:l});c.dispatchEvent(u)},i=s=>{r(s.clientX,s.clientY)},a=s=>{if(s.key==="Enter"){const l=s.currentTarget.getBoundingClientRect();r(l.x,l.y)}},o=e.getRect();return(0,b.jsxs)("div",{className:"moveable-settings",style:{position:"absolute",left:`${o.width+18}px`,top:"0px",color:"white",fontSize:"18px",cursor:"pointer",userSelect:"none",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},onClick:i,onKeyDown:a,role:"button",tabIndex:0,children:["","\u2699\uFE0F",""]},"settings-viewable")}}),a1={name:"dimensionViewable",props:[],events:[],render(t,e){const n=t.getRect();return(0,b.jsxs)("div",{className:"moveable-dimension",style:{position:"absolute",left:`${n.width/2}px`,top:`${n.height+20}px`,background:"#4af",borderRadius:"2px",padding:"2px 4px",color:"white",fontSize:"13px",whiteSpace:"nowrap",fontWeight:"bold",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},children:[Math.round(n.offsetWidth)," x ",Math.round(n.offsetHeight)]},"dimension-viewable")}},o1=t=>({name:"constraintViewable",props:[],events:[],render(e,n){const r=e.getRect(),i=_e(e.state.target,t.root.elements);if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;let a=null,o=null;const s=i?.tempConstraint??i?.options.constraint??{},l="1px dashed #4af",c=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(45deg)"}}),u=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(-45deg)"}}),d=n.createElement("div",{},[c,u]),f=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,bottom:"0px",borderLeft:l,height:"100vh"}}),v=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height}px`,borderLeft:l,height:"100vh"}}),p=n.createElement("div",{},[f,v]),h=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/4}px`,borderLeft:l,height:`${r.height/2}px`}}),g=n.createElement("div",{},[h,d]);switch(s.vertical){case V.gR.Top:a=f;break;case V.gR.Bottom:a=v;break;case V.gR.TopBottom:a=p;break;case V.gR.Center:a=g;break}const m=n.createElement("div",{style:{position:"absolute",right:"0px",top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),y=n.createElement("div",{style:{position:"absolute",left:`${r.width}px`,top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),x=n.createElement("div",{},[m,y]),S=n.createElement("div",{style:{position:"absolute",left:`${r.width/4}px`,top:`${r.height/2}px`,borderTop:l,width:`${r.width/2}px`}}),w=n.createElement("div",{},[S,d]);switch(s.horizontal){case V.en.Left:o=m;break;case V.en.Right:o=y;break;case V.en.LeftRight:o=x;break;case V.en.Center:o=w;break}return n.createElement("div",{},[a,o])}}),s1=t=>{t.props={dimensionViewable:!1,constraintViewable:!1,settingsViewable:!1}},l1=t=>{t.props={dimensionViewable:!0,constraintViewable:!0,settingsViewable:!0}},c1=(t,e)=>{let n=t.parentElement,r=!1;for(;n&&!(n===e.root.div||(r=e.selecto?.getSelectedTargets().includes(n)??!1,r));)n=n.parentElement;return r},u1=t=>{let e=[];const n=[...t];for(;n.length>0;){const r=n.shift();r&&r.div&&e.push(r.div);const i=r instanceof Be?r.elements:[];for(const a of i)n.unshift(a)}return e},nl=(t=!1,e=!0,n)=>{const r=u1(n.root.elements);t&&n.selecto&&n.selecto.destroy(),n.selecto=new Xm({container:n.div,rootContainer:lp(n),selectableTargets:r,toggleContinueSelect:"shift",selectFromInside:!1,hitRate:0});const i={top:!0,left:!0,bottom:!0,right:!0,center:!0,middle:!0},a={top:!0,left:!0,bottom:!0,right:!0,center:!0,middle:!0};n.moveable=new Tm(n.div,{draggable:e&&!n.editModeEnabled.getValue(),resizable:e,rotatable:e,throttleRotate:5,rotationPosition:["top","right"],snappable:e,snapDirections:i,elementSnapDirections:a,elementGuidelines:r,ables:[a1,o1(n),i1(n)],props:{dimensionViewable:e,constraintViewable:e,settingsViewable:e},origin:!1}).on("rotateStart",()=>{s1(n.moveable)}).on("rotate",s=>{const l=_e(s.target,n.root.elements);l&&l.applyRotate(s)}).on("rotateGroup",s=>{for(let l of s.events){const c=_e(l.target,n.root.elements);c&&c.applyRotate(l)}}).on("rotateEnd",()=>{l1(n.moveable),n.moved.next(Date.now())}).on("click",s=>{const l=_e(s.target,n.root.elements);let c=!1;l&&(c=l.item.hasEditMode??!1),s.isDouble&&e&&!n.editModeEnabled.getValue()&&c&&n.editModeEnabled.next(!0)}).on("clickGroup",s=>{n.selecto.clickTarget(s.inputEvent,s.inputTarget)}).on("dragStart",s=>{if(n.ignoreDataUpdate=!0,n.setNonTargetPointerEvents(s.target,!0),n.moveable&&n.moveable.elementGuidelines){const l=n.moveable.elementGuidelines.indexOf(s.target);l>-1&&n.moveable.elementGuidelines.splice(l,1)}}).on("dragGroupStart",s=>{if(n.ignoreDataUpdate=!0,n.moveable&&n.moveable.elementGuidelines)for(let l of s.events){const c=n.moveable.elementGuidelines.indexOf(l.target);c>-1&&n.moveable.elementGuidelines.splice(c,1)}}).on("drag",s=>{const l=_e(s.target,n.root.elements);l&&(l.applyDrag(s),n.connections.connectionsNeedUpdate(l)&&n.moveableActionCallback&&n.moveableActionCallback(!0))}).on("dragGroup",s=>{let l=!1;for(let c of s.events){const u=_e(c.target,n.root.elements);u&&(u.applyDrag(c),l||(l=n.connections.connectionsNeedUpdate(u)))}l&&n.moveableActionCallback&&n.moveableActionCallback(!0)}).on("dragGroupEnd",s=>{s.events.forEach(l=>{const c=_e(l.target,n.root.elements);c&&(c&&c.setPlacementFromConstraint(void 0,void 0,n.scale),n.moveable&&n.moveable.elementGuidelines&&n.moveable.elementGuidelines.push(l.target))}),n.moved.next(Date.now()),n.ignoreDataUpdate=!1}).on("dragEnd",s=>{const l=_e(s.target,n.root.elements);l&&l.setPlacementFromConstraint(void 0,void 0,n.scale),n.moved.next(Date.now()),n.ignoreDataUpdate=!1,n.setNonTargetPointerEvents(s.target,!1),n.moveable&&n.moveable.elementGuidelines&&n.moveable.elementGuidelines.push(s.target)}).on("resizeStart",s=>{const l=_e(s.target,n.root.elements);if(l){if(n.moveable&&n.moveable.elementGuidelines){const c=n.moveable.elementGuidelines.indexOf(s.target);c>-1&&n.moveable.elementGuidelines.splice(c,1)}l.tempConstraint={...l.options.constraint},l.options.constraint={vertical:V.gR.Top,horizontal:V.en.Left},l.setPlacementFromConstraint(void 0,void 0,n.scale)}}).on("resizeGroupStart",s=>{if(n.moveable&&n.moveable.elementGuidelines)for(let l of s.events){const c=n.moveable.elementGuidelines.indexOf(l.target);c>-1&&n.moveable.elementGuidelines.splice(c,1)}}).on("resize",s=>{const l=_e(s.target,n.root.elements);l&&(l.applyResize(s,n.scale),n.connections.connectionsNeedUpdate(l)&&n.moveableActionCallback&&n.moveableActionCallback(!0)),n.moved.next(Date.now())}).on("resizeGroup",s=>{let l=!1;for(let c of s.events){const u=_e(c.target,n.root.elements);u&&(u.applyResize(c),l||(l=n.connections.connectionsNeedUpdate(u)))}l&&n.moveableActionCallback&&n.moveableActionCallback(!0),n.moved.next(Date.now())}).on("resizeEnd",s=>{const l=_e(s.target,n.root.elements);l&&(l.tempConstraint&&(l.options.constraint=l.tempConstraint,l.tempConstraint=void 0),l.setPlacementFromConstraint(void 0,void 0,n.scale),n.moveable&&n.moveable.elementGuidelines&&n.moveable.elementGuidelines.push(s.target))}).on("resizeGroupEnd",s=>{if(n.moveable&&n.moveable.elementGuidelines)for(let l of s.events)n.moveable.elementGuidelines.push(l.target)});let o=[];n.selecto.on("dragStart",s=>{const l=s.inputEvent.target;if(l.id===Jd){n.connections.handleConnectionDragStart(l,s.inputEvent.clientX,s.inputEvent.clientY),s.stop();return}if(l.id===el){n.connections.handleVertexDragStart(l),s.stop();return}if(l.id===Ha){n.connections.handleVertexAddDragStart(l),s.stop();return}const c=n.moveable.isMoveableElement(l)||o.some(d=>d===l||d.contains(l)),u=c1(l,n);n.isEditingEnabled&&!n.editModeEnabled.getValue()&&c&&n.selecto?.getSelectedTargets().length&&(n.selecto.getSelectedTargets()[0].style.cursor="grabbing"),(c||u||!n.isEditingEnabled)&&s.stop()}).on("select",()=>{n.editModeEnabled.next(!1),n.connections.connectionAnchorDiv&&(n.connections.connectionAnchorDiv.style.display="none")}).on("selectEnd",s=>{o=s.selected,n.updateSelection({targets:o}),s.isDragStart&&(n.isEditingEnabled&&!n.editModeEnabled.getValue()&&n.selecto?.getSelectedTargets().length&&(n.selecto.getSelectedTargets()[0].style.cursor="grabbing"),s.inputEvent.preventDefault(),s.data.timer=setTimeout(()=>{n.moveable.dragStart(s.inputEvent)}))}).on("dragEnd",s=>{clearTimeout(s.data.timer)})},Sn=10,$a=50,d1={id:"frame",name:"Frame",description:"Frame",getNewOptions:()=>({config:{}}),display:()=>(0,b.jsx)("div",{children:"FRAME!"})};class Be extends Xi{constructor(e,n,r){super(d1,e,r),this.options=e,this.parent=r,this.elements=[],this.doAction=(a,o,s=!0,l=!0)=>{switch(a){case It.Delete:this.elements=this.elements.filter(d=>d!==o),ip(o,this.scene),this.scene.byName.delete(o.options.name),this.scene.save(),this.reinitializeMoveable();break;case It.Duplicate:if(o.item.id==="frame"){console.log("Can not duplicate frames (yet)",a,o);return}const c=(0,Zt.cloneDeep)(o.options);if(l){const{constraint:d,placement:f}=o.options,{vertical:v,horizontal:p}=d??{},h={...f};switch(v){case V.gR.Top:h.top==null?h.top=25:h.top+=Sn;break;case V.gR.Bottom:h.bottom==null?h.bottom=100:h.bottom-=Sn;break;case V.gR.TopBottom:h.top==null?h.top=25:h.top+=Sn,h.bottom==null?h.bottom=100:h.bottom-=Sn;break;case V.gR.Center:h.top!=null&&(h.top-=Sn);break}switch(p){case V.en.Left:h.left==null?h.left=$a:h.left+=Sn;break;case V.en.Right:h.right==null?h.right=$a:h.right-=Sn;break;case V.en.LeftRight:h.left==null?h.left=$a:h.left+=Sn,h.right==null?h.right=$a:h.right-=Sn;break;case V.en.Center:h.left!=null&&(h.left-=Sn);break}c.placement=h}c.connections=void 0;const u=new Xi(o.item,c,this);u.updateData(this.scene.context),s&&(u.options.name=this.scene.getNextElementName()),this.elements.push(u),this.scene.byName.set(u.options.name,u),this.scene.byName.set(o.options.name,o),this.scene.save(),this.reinitializeMoveable(),setTimeout(()=>{this.scene.targetsToSelect.add(u.div)});break;case It.MoveTop:case It.MoveBottom:o.parent?.doMove(o,a);break;default:console.log("DO action",a,o);return}},this.scene=n;let{elements:i}=this.options;i||(this.options.elements=i=[]);for(const a of i)if(a.type==="frame")this.elements.push(new Be(a,n,this));else{const o=ti.getIfExists(a.type)??pt;this.elements.push(new Xi(o,a,this))}}isRoot(){return!1}updateData(e){super.updateData(e);for(const n of this.elements)n.updateData(e)}reorder(e,n){const r=Array.from(this.elements),[i]=r.splice(e,1);r.splice(n,0,i),this.elements=r,this.reinitializeMoveable()}reorderTree(e,n,r=!1){const i=Array.from(this.elements),a=this.elements.indexOf(e),o=r?this.elements.length-1:this.elements.indexOf(n),[s]=i.splice(a,1);i.splice(o,0,s),this.elements=i,this.reinitializeMoveable()}doMove(e,n){const r=this.elements.filter(i=>i!==e);n===It.MoveBottom?r.unshift(e):r.push(e),this.elements=r,this.scene.save(),this.reinitializeMoveable()}reinitializeMoveable(){this.scene.clearCurrentSelection(),setTimeout(()=>nl(!0,this.scene.isEditingEnabled,this.scene))}render(){return(0,b.jsx)("div",{ref:this.initElement,children:this.elements.map(e=>e.render())},this.UID)}visit(e){super.visit(e);for(const n of this.elements)e(n)}getSaveModel(){return{...this.options,elements:this.elements.map(e=>e.getSaveModel())}}}var af=z(39741),f1=z(64423),of=z(36490),sf=z(13752),ki=z(15245),Ri=z(32503),_n=z(94535),v1=z(97375);const p1=({scene:t,panel:e,onVisibilityChange:n})=>{const r=e.state.openInlineEdit,[i,a]=(0,I.useState)(!1),[o,s]=(0,I.useState)({x:0,y:0}),l=h1(),c=t.selecto?.getSelectedTargets(),u=e.context?.instanceState?.layer,d=(0,I.useCallback)(h=>{if(!(h instanceof MouseEvent)||h.ctrlKey)return;h.preventDefault(),e.setActivePanel(),h.currentTarget!==t.div&&(h.currentTarget instanceof HTMLElement||h.currentTarget instanceof SVGElement)&&t.select({targets:[h.currentTarget]}),s({x:h.pageX,y:h.pageY}),a(!0),n(!0)},[t,e,n]);(0,I.useEffect)(()=>{t.selecto&&t.selecto.getSelectableElements().forEach(h=>{h.addEventListener("contextmenu",d)})},[d,t.selecto]),(0,I.useEffect)(()=>{t.div&&t.div.addEventListener("contextmenu",d)},[d,t.div]);const f=()=>{a(!1),n(!1)},v=()=>{const h=!t.isPanelEditing&&(0,b.jsx)(_n.D,{label:r?(0,k.t)("canvas.canvas-context-menu.close-editor","Close Editor"):(0,k.t)("canvas.canvas-context-menu.open-editor","Open Editor"),onClick:()=>{t.inlineEditingCallback&&(r?e.closeInlineEdit():t.inlineEditingCallback()),f()},className:l.menuItem}),g=()=>{if(c?.length===1){const w=()=>{t.editModeEnabled.next(!0),f()},E=_e(c[0],t.root.elements);return E&&E.item.hasEditMode&&(0,b.jsx)(_n.D,{label:(0,k.t)("canvas.canvas-context-menu.render-menu-items.edit-element-menu-item.label-edit","Edit"),onClick:w,className:l.menuItem})}return null},m=Hi(t.shouldShowAdvancedTypes).options,y=()=>{const w=[],E=D=>{let T=o.y,C=o.x;if(t.div){const M=t.scale,R=t.div.getBoundingClientRect();T=(T-R.top)/M,C=(C-R.left)/M}uo(D,u,{...o,y:T,x:C})};return m.map(D=>{w.push((0,b.jsx)(_n.D,{label:D.label??"Canvas item",onClick:()=>E(D)},D.value))}),w},x=(0,b.jsx)(_n.D,{label:(0,k.t)("canvas.canvas-context-menu.render-menu-items.add-item-menu-item.label-add-item","Add item"),className:l.menuItem,childItems:y(),customSubMenuContainerStyles:{maxHeight:"150px",overflowY:"auto"}}),S=(0,b.jsx)(_n.D,{label:(0,k.t)("canvas.canvas-context-menu.render-menu-items.set-background-menu-item.label-set-background","Set background"),onClick:()=>{t.setBackgroundCallback&&t.setBackgroundCallback(o),f()},className:l.menuItem});return c&&c.length>=1?(0,b.jsxs)(b.Fragment,{children:[g(),(0,b.jsx)(_n.D,{label:(0,k.t)("canvas.canvas-context-menu.render-menu-items.label-delete","Delete"),onClick:()=>{p(It.Delete),f()},className:l.menuItem}),(0,b.jsx)(_n.D,{label:(0,k.t)("canvas.canvas-context-menu.render-menu-items.label-duplicate","Duplicate"),onClick:()=>{p(It.Duplicate),f()},className:l.menuItem}),(0,b.jsx)(_n.D,{label:(0,k.t)("canvas.canvas-context-menu.render-menu-items.label-bring-to-front","Bring to front"),onClick:()=>{p(It.MoveTop),f()},className:l.menuItem}),(0,b.jsx)(_n.D,{label:(0,k.t)("canvas.canvas-context-menu.render-menu-items.label-send-to-back","Send to back"),onClick:()=>{p(It.MoveBottom),f()},className:l.menuItem}),h]}):(0,b.jsxs)(b.Fragment,{children:[h,S,x]})},p=h=>{t.selection.pipe((0,rf.$)()).subscribe(g=>{const m=g[0].parent;g.forEach(y=>{m.doAction(h,y)})}),setTimeout(()=>{t.addToSelection(),t.targetsToSelect.clear()})};return i?(0,b.jsx)("div",{onContextMenu:h=>{h.preventDefault(),f()},children:(0,b.jsx)(v1.t,{x:o.x,y:o.y,onClose:f,renderMenuItems:v,focusOnOpen:!1})}):(0,b.jsx)(b.Fragment,{})},h1=()=>({menuItem:(0,Z.css)({maxWidth:"200px"})});var g1=z(18828),m1=z(93225),y1=z(55386),x1=z(71076),b1=z(84522),C1=z(41530),S1=z(47466),E1=z(39064),w1=z(16913);const D1=({scene:t})=>{const e=(0,yt.of)(T1),n=()=>{t?.tooltipCallback&&t.tooltip&&t.tooltipCallback(void 0)},r=(0,I.createRef)(),{overlayProps:i}=(0,m1.e)({onClose:n,isDismissable:!0},r),{dialogProps:a}=(0,g1.s)({},r),o=t.tooltip?.element;if(!o)return(0,b.jsx)(b.Fragment,{});const s=t.data?.series[0]?.fields?.find(m=>m.type===co.PU.time),l=s?.values[s.values.length-1],c=s&&l&&o.data.field&&(0,qt.Ct)(s)!==o.data.field,u={label:o.getName(),value:""},d=[{label:o.data.field??"Fixed",value:o.data.text},...c?[{label:"Time",value:(0,y1.cN)(s?.display(l))}]:[]],f=[];if((o.options.links?.length??0)>0&&o.getLinks){const m=new Set;o.getLinks({valueRowIndex:Er(o.data.field,t)}).forEach(y=>{const x=`${y.title}/${y.href}`;m.has(x)||(f.push(y),m.add(x))})}t.data?.series&&cp(t.data?.series,o.options).forEach(m=>{f.push(...(0,w1.u6)(m,Er(o.data.field,t)))});const v=[],p=new Set,h=(o.options.actions?.length??0)>0,g=t.data?.series;if(h&&g){const m=(0,Yi.Xx)(o.options.links??[],o.options.actions??[]),y={__dataContext:{value:{data:g,field:m,frame:g[0],frameIndex:0}}},x={valueRowIndex:Er(o.data.field,t)};(0,Yi.ko)(g[0],m,y,t.panel.props.replaceVariables,o.options.actions??[],x).forEach(w=>{const E=`${w.title}/${Math.random()}`;p.has(E)||(v.push(w),p.add(E))})}return(0,b.jsx)(b.Fragment,{children:t.tooltip?.element&&t.tooltip.anchorPoint&&(0,b.jsx)(ki.ZL,{children:(0,b.jsx)(x1.o,{className:(0,Z.cx)(e.tooltipWrapper,t.tooltip.isOpen&&e.pinned),position:{x:t.tooltip.anchorPoint.x,y:t.tooltip.anchorPoint.y},offset:{x:5,y:0},allowPointerEvents:t.tooltip.isOpen,children:(0,b.jsxs)("section",{ref:r,...i,...a,children:[t.tooltip.isOpen&&(0,b.jsx)(b1.J,{style:{zIndex:1},onClick:n}),(0,b.jsx)(C1.A,{item:u,isPinned:t.tooltip.isOpen}),o.data.text&&(0,b.jsx)(S1.o,{items:d,isPinned:t.tooltip.isOpen}),(f.length>0||v.length>0)&&(0,b.jsx)(E1.S,{dataLinks:f,actions:v})]})})})})},T1=t=>({wrapper:(0,Z.css)({marginTop:"20px",background:t.colors.background.primary}),tooltipWrapper:(0,Z.css)({top:0,left:0,zIndex:t.zIndex.portal,whiteSpace:"pre",borderRadius:t.shape.radius.default,position:"fixed",background:t.colors.background.primary,border:`1px solid ${t.colors.border.weak}`,boxShadow:t.shadows.z2,userSelect:"text",padding:0,fontSize:t.typography.bodySmall.fontSize}),pinned:(0,Z.css)({boxShadow:t.shadows.z3})});var nn=function(t,e){return Number(t.toFixed(e))},M1=function(t,e){return typeof t=="number"?t:e},Qt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},k1=function(t){return-Math.cos(t*Math.PI)/2+.5},R1=function(t){return t},P1=function(t){return t*t},A1=function(t){return t*(2-t)},O1=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},_1=function(t){return t*t*t},L1=function(t){return--t*t*t+1},N1=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},z1=function(t){return t*t*t*t},I1=function(t){return 1- --t*t*t*t},B1=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},j1=function(t){return t*t*t*t*t},G1=function(t){return 1+--t*t*t*t*t},F1=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},lf={easeOut:k1,linear:R1,easeInQuad:P1,easeOutQuad:A1,easeInOutQuad:O1,easeInCubic:_1,easeOutCubic:L1,easeInOutCubic:N1,easeInQuart:z1,easeOutQuart:I1,easeInOutQuart:B1,easeInQuint:j1,easeOutQuint:G1,easeInOutQuint:F1},cf=function(t){typeof t=="number"&&cancelAnimationFrame(t)},hn=function(t){t.mounted&&(cf(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function uf(t,e,n,r){if(t.mounted){var i=new Date().getTime(),a=1;hn(t),t.animation=function(){if(!t.mounted)return cf(t.animation);var o=new Date().getTime()-i,s=o/n,l=lf[e],c=l(s);o>=n?(r(a),t.animation=null):t.animation&&(r(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function W1(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function $n(t,e,n,r){var i=W1(e);if(!(!t.mounted||!i)){var a=t.setTransformState,o=t.transformState,s=o.scale,l=o.positionX,c=o.positionY,u=e.scale-s,d=e.positionX-l,f=e.positionY-c;n===0?a(e.scale,e.positionX,e.positionY):uf(t,r,n,function(v){var p=s+u*v,h=l+d*v,g=c+f*v;a(p,h,g)})}}function K1(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,a=e.offsetWidth,o=e.offsetHeight,s=a*n,l=o*n,c=r-s,u=i-l;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:s,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var V1=function(t,e,n,r,i,a,o){var s=t>e?n*(o?1:.5):0,l=r>i?a*(o?1:.5):0,c=t-e-s,u=s,d=r-i-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},rl=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var a=K1(n,r,e),o=a.wrapperWidth,s=a.wrapperHeight,l=a.newContentWidth,c=a.newDiffWidth,u=a.newContentHeight,d=a.newDiffHeight,f=V1(o,l,c,s,u,d,!!i);return f},il=function(t,e,n,r){return r?t<e?nn(e,2):t>n?nn(n,2):nn(t,2):nn(t,2)},pr=function(t,e){var n=rl(t,e);return t.bounds=n,n};function Pi(t,e,n,r,i,a,o){var s=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=i,f=a);var v=il(t,s-d,c+d,r),p=il(e,l-f,u+f,r);return{x:v,y:p}}function Ua(t,e,n,r,i,a){var o=t.transformState,s=o.scale,l=o.positionX,c=o.positionY,u=r-s;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,v=Pi(d,f,i,a,0,0,null);return v}function Ai(t,e,n,r,i){var a=i?r:0,o=e-a;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var df=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,a=e.target,o="shadowRoot"in a&&"composedPath"in e,s=o?e.composedPath().some(function(u){return u instanceof Element?i?.contains(u):!1}):i?.contains(a),l=r&&a&&s;if(!l)return!1;var c=Ja(a,n);return!c},ff=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,a=e&&n&&!i;return!!a},Y1=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var a=e.clientX,o=e.clientY;t.startCoords={x:a-r,y:o-i}},X1=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,a=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var s=n[0].clientX,l=n[0].clientY;t.startCoords={x:s-i,y:l-a}}};function H1(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,a=t.setup,o=a.disabled,s=a.limitToBounds,l=a.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,v=u.maxPositionY,p=u.minPositionY,h=n>d||n<f,g=r>v||r<p,m=n>d?c.offsetWidth:t.setup.minPositionX||0,y=r>v?c.offsetHeight:t.setup.minPositionY||0,x=Ua(t,m,y,i,t.bounds,s||l),S=x.x,w=x.y;return{scale:i,positionX:h?S:n,positionY:g?w:r}}}function vf(t,e,n,r,i){var a=t.setup.limitToBounds,o=t.wrapperComponent,s=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||s===null||e===u&&n===d)){var f=Pi(e,n,s,a,r,i,o),v=f.x,p=f.y;t.setTransformState(c,v,p)}}var $1=function(t,e,n){var r=t.startCoords,i=t.transformState,a=t.setup.panning,o=a.lockAxisX,s=a.lockAxisY,l=i.positionX,c=i.positionY;if(!r)return{x:l,y:c};var u=e-r.x,d=n-r.y,f=o?l:u,v=s?c:d;return{x:f,y:v}},Un=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,a=n.minScale,o=n.disablePadding;return e>0&&i>=a&&!o?e:0},U1=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,a=t.transformState.scale,o=i.disabled,s=!o||a>1||!r||e;return!!s},Z1=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,a=i.disabled,o=i.velocityAnimation,s=t.transformState.scale,l=o.disabled,c=!l||s>1||!a||e;return!(!c||!n||!r)};function Q1(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,a=n.sensitivity;return r?i*e*a:i}function pf(t,e,n,r,i,a,o,s,l,c){if(i){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<a&&n<a){var u=a+(t-a)*c;return u<s?s:u>a?a:u}}return r?e:il(t,a,o,i)}function q1(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function J1(t,e){var n=U1(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,a=t.setup,o=t.wrapperComponent,s=a.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var c=q1(o,s),u=e.x-r.x,d=e.y-r.y,f=u/c,v=d/c,p=l-i,h=u*u+d*d,g=Math.sqrt(h)/p;t.velocity={velocityX:f,velocityY:v,total:g}}t.lastMousePosition=e,t.velocityTime=l}}function ty(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,a=Z1(t);if(!(!a||!e||!n||!i)){var o=e.velocityX,s=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,v=r.limitToBounds,p=r.alignmentAnimation,h=r.zoomAnimation,g=r.panning,m=g.lockAxisY,y=g.lockAxisX,x=h.animationType,S=p.sizeX,w=p.sizeY,E=p.velocityAlignmentTime,D=E,T=Q1(t,l),C=Math.max(T,D),M=Un(t,S),R=Un(t,w),A=M*i.offsetWidth/100,P=R*i.offsetHeight/100,L=c+A,N=u-A,j=d+P,F=f-P,G=t.transformState,W=new Date().getTime();uf(t,x,C,function(K){var B=t.transformState,Q=B.scale,q=B.positionX,H=B.positionY,U=new Date().getTime()-W,Y=U/D,tt=lf[p.animationType],nt=1-tt(Math.min(1,Y)),vt=1-K,ct=q+o*vt,$=H+s*vt,et=pf(ct,G.positionX,q,y,v,u,c,N,L,nt),Tt=pf($,G.positionY,H,m,v,f,d,F,j,nt);(q!==ct||H!==$)&&t.setTransformState(Q,et,Tt)})}}function hf(t,e){var n=t.transformState.scale;hn(t),pr(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?X1(t,e):Y1(t,e)}function al(t,e){var n=t.transformState.scale,r=t.setup,i=r.minScale,a=r.alignmentAnimation,o=a.disabled,s=a.sizeX,l=a.sizeY,c=a.animationTime,u=a.animationType,d=o||n<i||!s&&!l;if(!d){var f=H1(t);f&&$n(t,f,e??c,u)}}function gf(t,e,n){var r=t.startCoords,i=t.setup,a=i.alignmentAnimation,o=a.sizeX,s=a.sizeY;if(r){var l=$1(t,e,n),c=l.x,u=l.y,d=Un(t,o),f=Un(t,s);J1(t,{x:c,y:u}),vf(t,c,u,d,f)}}function ey(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var a=r?.getBoundingClientRect(),o=i?.getBoundingClientRect(),s=a?.width||0,l=a?.height||0,c=o?.width||0,u=o?.height||0,d=s<c||l<u,f=!e&&n&&n?.total>.1&&d;f?ty(t):al(t)}}function ol(t,e,n,r){var i=t.setup,a=i.minScale,o=i.maxScale,s=i.limitToBounds,l=Ai(nn(e,2),a,o,0,!1),c=pr(t,l),u=Ua(t,n,r,l,c,s),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function mf(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,a=t.setup,o=a.minScale,s=a.limitToBounds,l=a.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||r>=o;if((r>=1||s)&&al(t),!(f||!i||!t.mounted)){var v=e||i.offsetWidth/2,p=n||i.offsetHeight/2,h=ol(t,o,v,p);h&&$n(t,h,u,d)}}var rn=function(){return rn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rn.apply(this,arguments)};function ny(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function sl(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var Za={previousScale:1,scale:1,positionX:0,positionY:0},Oi={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},ll={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},yf=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Za.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Za.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:Za.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:Za.positionY}},xf=function(t){var e=rn({},Oi);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof Oi[n]<"u";if(i&&r){var a=Object.prototype.toString.call(Oi[n]),o=a==="[object Object]",s=a==="[object Array]";o?e[n]=rn(rn({},Oi[n]),t[n]):s?e[n]=sl(sl([],Oi[n],!0),t[n],!0):e[n]=t[n]}}),e},bf=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,a=t.setup,o=a.maxScale,s=a.minScale,l=a.zoomAnimation,c=a.smooth,u=l.size;if(!i)throw new Error("Wrapper is not mounted");var d=c?r*Math.exp(e*n):r+e*n,f=Ai(nn(d,3),s,o,u,!1);return f};function Cf(t,e,n,r,i){var a=t.wrapperComponent,o=t.transformState,s=o.scale,l=o.positionX,c=o.positionY;if(!a)return console.error("No WrapperComponent found");var u=a.offsetWidth,d=a.offsetHeight,f=(u/2-l)/s,v=(d/2-c)/s,p=bf(t,e,n),h=ol(t,p,f,v);if(!h)return console.error("Error during zoom event. New transformation state was not calculated.");$n(t,h,r,i)}function Sf(t,e,n,r){var i=t.setup,a=t.wrapperComponent,o=i.limitToBounds,s=yf(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(a){var f=rl(t,s.scale),v=Pi(s.positionX,s.positionY,f,o,0,0,a),p={scale:s.scale,positionX:v.x,positionY:v.y};c===s.scale&&u===s.positionX&&d===s.positionY||(r?.(),$n(t,p,e,n))}}function ry(t,e,n,r){var i=t.getBoundingClientRect(),a=e.getBoundingClientRect(),o=n.getBoundingClientRect(),s=a.x*r.scale,l=a.y*r.scale;return{x:(i.x-o.x+s)/r.scale,y:(i.y-o.y+l)/r.scale}}function iy(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,a=t.transformState,o=t.setup,s=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!r||!i)return a;var u=r.getBoundingClientRect(),d=e.getBoundingClientRect(),f=ry(e,r,i,a),v=f.x,p=f.y,h=d.width/a.scale,g=d.height/a.scale,m=r.offsetWidth/h,y=r.offsetHeight/g,x=Ai(n||Math.min(m,y),l,c,0,!1),S=(u.width-h*x)/2,w=(u.height-g*x)/2,E=(u.left-v)*x+S,D=(u.top-p)*x+w,T=rl(t,x),C=Pi(E,D,T,s,0,0,r),M=C.x,R=C.y;return{positionX:M,positionY:R,scale:x}}var ay=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),Cf(t,1,e,n,r)}},oy=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),Cf(t,-1,e,n,r)}},sy=function(t){return function(e,n,r,i,a){i===void 0&&(i=300),a===void 0&&(a="easeOut");var o=t.transformState,s=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var v={positionX:Number.isNaN(e)?s:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};$n(t,v,i,a)}}},ly=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),Sf(t,e,n)}},cy=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,a=t.wrapperComponent,o=t.contentComponent;if(a&&o){var s=Ef(e||i.scale,a,o);$n(t,s,n,r)}}},uy=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),hn(t);var a=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(a&&o&&a.contains(o)){var s=iy(t,o,n);$n(t,s,r,i)}}},Qa=function(t){return{instance:t,zoomIn:ay(t),zoomOut:oy(t),setTransform:sy(t),resetTransform:ly(t),centerView:cy(t),zoomToElement:uy(t)}},Vr=function(t){return{instance:t,state:t.transformState}},Ht=function(t){var e={};return Object.assign(e,Vr(t)),Object.assign(e,Qa(t)),e},cl=!1;function ul(){try{var t={get passive(){return cl=!0,!1}};return t}catch{return cl=!1,cl}}var qa=".".concat(ll.wrapperClass),Ja=function(t,e){return e.some(function(n){return t.matches("".concat(qa," ").concat(n,", ").concat(qa," .").concat(n,", ").concat(qa," ").concat(n," *, ").concat(qa," .").concat(n," *"))})},dl=function(t){t&&clearTimeout(t)},dy=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},TC=function(t,e,n){var r=n,i=0,a=0,o=n,s=t,l=e;return"matrix3d(".concat(r,", ").concat(i,", 0, 0, ").concat(a,", ").concat(o,", 0, 0, 0, 0, 1, 0, ").concat(s,", ").concat(l,", 0, 1)")},Ef=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,a=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:a,positionY:o}};function fy(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var vy=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,a=n.touchPadDisabled,o=n.excluded,s=t.isInitialized,l=t.isPanning,c=e.target,u=s&&!l&&!r&&c;if(!u||i&&!e.ctrlKey||a&&e.ctrlKey)return!1;var d=Ja(c,o);return!d},py=function(t){return t?t.deltaY<0?1:-1:0};function hy(t,e){var n=py(t),r=M1(e,n);return r}function wf(t,e,n){var r=e.getBoundingClientRect(),i=0,a=0;if("clientX"in t)i=(t.clientX-r.left)/n,a=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,a=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:i,y:a}}var gy=function(t,e,n,r,i){var a=t.transformState.scale,o=t.wrapperComponent,s=t.setup,l=s.maxScale,c=s.minScale,u=s.zoomAnimation,d=s.disablePadding,f=u.size,v=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=a+e*n;if(i)return p;var h=r?!1:!v,g=Ai(nn(p,3),c,l,f,h&&!d);return g},my=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,a=i.maxScale,o=i.minScale;return n?r<a||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},yy=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,a=t.isInitialized,o=e.target,s=a&&!r&&o;if(!s)return!1;var l=Ja(o,i);return!l},xy=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},by=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,a=nn(i[0].clientX-r.left,5),o=nn(i[0].clientY-r.top,5),s=nn(i[1].clientX-r.left,5),l=nn(i[1].clientY-r.top,5);return{x:(a+s)/2/e,y:(o+l)/2/e}},Df=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},Cy=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,a=i.maxScale,o=i.minScale,s=i.zoomAnimation,l=i.disablePadding,c=s.size,u=s.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/r,f=d*n;return Ai(nn(f,2),o,a,c,!u&&!l)},Sy=160,Ey=100,wy=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(hn(t),Qt(Ht(t),e,r),Qt(Ht(t),e,i))},Dy=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,a=t.contentComponent,o=t.setup,s=t.transformState,l=s.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,v=o.disablePadding,p=o.smooth,h=d.size,g=d.disabled,m=f.step,y=f.smoothStep;if(!a)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=hy(e,null),S=p?y*Math.abs(e.deltaY):m,w=gy(t,x,S,!e.ctrlKey);if(l!==w){var E=pr(t,w),D=wf(e,a,l),T=g||h===0||u||v,C=c&&T,M=Ua(t,D.x,D.y,w,E,C),R=M.x,A=M.y;t.previousWheelEvent=e,t.setTransformState(w,R,A),Qt(Ht(t),e,r),Qt(Ht(t),e,i)}},Ty=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;dl(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(mf(t,e.x,e.y),t.wheelAnimationTimer=null)},Ey);var a=my(t,e);a&&(dl(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Qt(Ht(t),e,r),Qt(Ht(t),e,i))},Sy))},Tf=function(t){for(var e=0,n=0,r=0;r<2;r+=1)e+=t.touches[r].clientX,n+=t.touches[r].clientY;var i=e/2,a=n/2;return{x:i,y:a}},My=function(t,e){var n=Df(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var r=Tf(e);t.pinchLastCenterX=r.x,t.pinchLastCenterY=r.y,hn(t)},ky=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.wrapperComponent,a=t.transformState.scale,o=t.setup,s=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(r===null||!n)){var v=by(e,a,n);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var p=Df(e),h=Cy(t,p),g=Tf(e),m=g.x-(t.pinchLastCenterX||0),y=g.y-(t.pinchLastCenterY||0);if(!(h===a&&m===0&&y===0)){t.pinchLastCenterX=g.x,t.pinchLastCenterY=g.y;var x=pr(t,h),S=d||f===0||l,w=s&&S,E=Ua(t,v.x,v.y,h,x,w),D=E.x,T=E.y;t.pinchMidpoint=v,t.lastDistance=p;var C=u.sizeX,M=u.sizeY,R=Un(t,C),A=Un(t,M),P=D+m,L=T+y,N=Pi(P,L,x,s,R,A,i),j=N.x,F=N.y;t.setTransformState(h,j,F)}}}},Ry=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,mf(t,e?.x,e?.y)},Mf=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;dl(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Qt(Ht(t),e,n)},r)},Py=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,a=t.setup.doubleClick,o=a.animationTime,s=a.animationType;Qt(Ht(t),e,r),Sf(t,o,s,function(){return Qt(Ht(t),e,i)}),Mf(t,e)};function Ay(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function Oy(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,a=t.contentComponent,o=i.scale,s=t.props,l=s.onZoomStart,c=s.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,v=u.step,p=u.animationTime,h=u.animationType;if(!d&&!r){if(f==="reset")return Py(t,e);if(!a)return console.error("No ContentComponent found");var g=Ay(f,t.transformState.scale),m=bf(t,g,v);if(o!==m){Qt(Ht(t),e,l);var y=wf(e,a,o),x=ol(t,m,y.x,y.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");Qt(Ht(t),e,c),$n(t,x,p,h),Mf(t,e)}}}var _y=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,a=r.doubleClick,o=a.disabled,s=a.excluded,l=e.target,c=i?.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Ja(l,s);return!d},Ly=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,pr(n,n.transformState.scale),n.setup=xf(r)},this.initializeWindowEvents=function(){var r,i,a=ul(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=o?.defaultView;(i=n.wrapperComponent)===null||i===void 0||i.addEventListener("wheel",n.onWheelPanning,a),s?.addEventListener("mousedown",n.onPanningStart,a),s?.addEventListener("mousemove",n.onPanning,a),s?.addEventListener("mouseup",n.onPanningStop,a),o?.addEventListener("mouseleave",n.clearPanning,a),s?.addEventListener("keyup",n.setKeyUnPressed,a),s?.addEventListener("keydown",n.setKeyPressed,a)},this.cleanupWindowEvents=function(){var r,i,a=ul(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=o?.defaultView;s?.removeEventListener("mousedown",n.onPanningStart,a),s?.removeEventListener("mousemove",n.onPanning,a),s?.removeEventListener("mouseup",n.onPanningStop,a),o?.removeEventListener("mouseleave",n.clearPanning,a),s?.removeEventListener("keyup",n.setKeyUnPressed,a),s?.removeEventListener("keydown",n.setKeyPressed,a),document.removeEventListener("mouseleave",n.clearPanning,a),hn(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=ul();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r,i){var a=!1,o=n.setup.centerOnInit,s=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(Ht(n))}),n.observer=new ResizeObserver(function(l){if(s(l,r)||s(l,i))if(o&&!a){var c=i.offsetWidth,u=i.offsetHeight;(c>0||u>0)&&(a=!0,n.setCenter())}else hn(n),pr(n,n.transformState.scale),al(n,0)}),n.observer.observe(r),n.observer.observe(i)},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var a=vy(n,r);if(a){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(wy(n,r),Dy(n,r),Ty(n,r))}}},this.onWheelPanning=function(r){var i=n.setup,a=i.disabled,o=i.wheel,s=i.panning;if(!(!n.wrapperComponent||!n.contentComponent||a||!o.wheelDisabled||s.disabled||!s.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-r.deltaX,f=u-r.deltaY,v=s.lockAxisX?c:d,p=s.lockAxisY?u:f,h=n.setup.alignmentAnimation,g=h.sizeX,m=h.sizeY,y=Un(n,g),x=Un(n,m);v===c&&p===u||vf(n,v,p,y,x)}},this.onPanningStart=function(r){var i=n.setup.disabled,a=n.props.onPanningStart;if(!i){var o=df(n,r);if(o){var s=n.isPressingKeys(n.setup.panning.activationKeys);s&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),hn(n),hf(n,r),Qt(Ht(n),r,a)))}}},this.onPanning=function(r){var i=n.setup.disabled,a=n.props.onPanning;if(!i){var o=ff(n);if(o){var s=n.isPressingKeys(n.setup.panning.activationKeys);s&&(r.preventDefault(),r.stopPropagation(),gf(n,r.clientX,r.clientY),Qt(Ht(n),r,a))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(ey(n),Qt(Ht(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,a=n.props,o=a.onPinchingStart,s=a.onZoomStart;if(!i){var l=yy(n,r);l&&(My(n,r),hn(n),Qt(Ht(n),r,o),Qt(Ht(n),r,s))}},this.onPinch=function(r){var i=n.setup.disabled,a=n.props,o=a.onPinching,s=a.onZoom;if(!i){var l=xy(n);l&&(r.preventDefault(),r.stopPropagation(),ky(n,r),Qt(Ht(n),r,o),Qt(Ht(n),r,s))}},this.onPinchStop=function(r){var i=n.props,a=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&(Ry(n),Qt(Ht(n),r,a),Qt(Ht(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,a=n.props.onPanningStart;if(!i){var o=df(n,r);if(o){var s=n.lastTouch&&+new Date-n.lastTouch<200&&r.touches.length===1;if(!s){n.lastTouch=+new Date,hn(n);var l=r.touches,c=l.length===1,u=l.length===2;c&&(hn(n),hf(n,r),Qt(Ht(n),r,a)),u&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,a=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=ff(n);if(!o)return;r.preventDefault(),r.stopPropagation();var s=r.touches[0];gf(n,s.clientX,s.clientY),Qt(Ht(n),r,a)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var a=_y(n,r);a&&Oy(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,a){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=a,n.applyTransformation();var s=Ht(n);n.onChangeCallbacks.forEach(function(l){return l(s)}),Qt(s,{scale:r,positionX:i,positionY:a},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=Ef(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,a){return n.props.customTransform?n.props.customTransform(r,i,a):dy(r,i,a)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,a=r.positionX,o=r.positionY,s=n.handleTransformStyles(a,o,i);n.contentComponent.style.transform=s}},this.getContext=function(){return Ht(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,pr(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(r,i),n.initializeWindowEvents(),n.isInitialized=!0;var a=Ht(n);Qt(a,void 0,n.props.onInit)},this.props=e,this.setup=xf(this.props),this.transformState=yf(this.props)}return t}(),to=I.createContext(null),Ny=function(t,e){return typeof t=="function"?t(e):t},zy=I.forwardRef(function(t,e){var n=(0,I.useRef)(new Ly(t)).current,r=Ny(t.children,Qa(n));return(0,I.useImperativeHandle)(e,function(){return Qa(n)},[n]),(0,I.useEffect)(function(){n.update(t)},[n,t]),I.createElement(to.Provider,{value:n},r)}),MC=I.forwardRef(function(t,e){var n=(0,I.useRef)(null),r=(0,I.useContext)(to);return(0,I.useEffect)(function(){return r.onChange(function(i){if(n.current){var a=0,o=0;n.current.style.transform=r.handleTransformStyles(a,o,1/i.instance.transformState.scale)}})},[r]),I.createElement("div",rn({},t,{ref:fy([n,e])}))}),Iy={width:0,height:0,y:0,x:0,top:0,bottom:0,left:0,right:0},By=function(t,e,n){var r=useRef(),i=useRef(Iy),a=useRef(!1);useLayoutEffect(function(){var o;if(a.current=!1,"ResizeObserver"in window)return t&&(r.current=new ResizeObserver(function(s){var l=t.getBoundingClientRect();!Array.isArray(s)||!s.length||a.current||l.width===i.current.width&&l.height===i.current.height||(e(l,t),i.current=l)}),(o=r.current)===null||o===void 0||o.observe(t)),function(){var s;a.current=!0,t&&((s=r.current)===null||s===void 0||s.unobserve(t))}},sl([e,t],n,!0))},jy={position:"absolute",zIndex:2,top:"0px",left:"0px",boxSizing:"border-box",border:"3px solid red",transformOrigin:"0% 0%",boxShadow:"rgba(0,0,0,0.2) 0 0 0 10000000px"},kC=function(t){var e=t.width,n=e===void 0?200:e,r=t.height,i=r===void 0?200:r,a=t.borderColor,o=a===void 0?"red":a,s=t.children,l=ny(t,["width","height","borderColor","children"]),c=useState(!1),u=c[0],d=c[1],f=_i(),v=useRef(null),p=useRef(null),h=useRef(null),g=useRef(null),m=useCallback(function(){if(f.wrapperComponent){var C=f.wrapperComponent.getBoundingClientRect();return{width:C.width,height:C.height}}return{width:0,height:0}},[f.wrapperComponent]),y=useCallback(function(){if(f.contentComponent){var C=f.contentComponent.getBoundingClientRect();return{width:C.width/f.transformState.scale,height:C.height/f.transformState.scale}}return{width:0,height:0}},[f.contentComponent,f.transformState.scale]),x=useCallback(function(){var C=y(),M=n/C.width,R=i/C.height,A=R>M?M:R;return A},[y,i,n]),S=function(){var C=y(),M=n/C.width,R=i/C.height;return R>M?{width:n,height:C.height*M}:{width:C.width*R,height:i}},w=function(){var C=x(),M={transform:"scale(".concat(C||1,")"),transformOrigin:"0% 0%",position:"absolute",boxSizing:"border-box",zIndex:1,overflow:"hidden"};Object.keys(M).forEach(function(R){h.current&&(h.current.style[R]=M[R])})},E=function(){w();var C=S(),M=y();if(h.current&&(h.current.style.width="".concat(M.width,"px"),h.current.style.height="".concat(M.height,"px")),p.current&&(p.current.style.width="".concat(C.width,"px"),p.current.style.height="".concat(C.height,"px")),g.current){var R=m(),A=x(),P=A*(1/f.transformState.scale),L=f.handleTransformStyles(-f.transformState.positionX*P,-f.transformState.positionY*P,1);g.current.style.transform=L,g.current.style.width="".concat(R.width*P,"px"),g.current.style.height="".concat(R.height*P,"px")}},D=function(){E()};Vy(function(){E()}),Ky(function(){D(),d(!0)}),By(f.contentComponent,D,[u]),useEffect(function(){return f.onChange(function(C){var M=x();v.current&&(v.current.instance.transformState.scale=C.instance.transformState.scale,v.current.instance.transformState.positionX=C.instance.transformState.positionX*M,v.current.instance.transformState.positionY=C.instance.transformState.positionY*M)})},[x,f,v]);var T=useMemo(function(){return{position:"relative",zIndex:2,overflow:"hidden"}},[]);return React.createElement("div",rn({},l,{ref:p,style:T,className:"rzpp-mini-map ".concat(l.className||"")}),React.createElement("div",rn({},l,{ref:h,className:"rzpp-wrapper"}),s),React.createElement("div",{className:"rzpp-preview",ref:g,style:rn(rn({},jy),{borderColor:o})}))};function Gy(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var Fy=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,kf={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Gy(Fy);var Wy=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,a=i===void 0?"":i,o=t.wrapperStyle,s=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=(0,I.useContext)(to),v=f.init,p=f.cleanupWindowEvents,h=(0,I.useRef)(null),g=(0,I.useRef)(null);return(0,I.useEffect)(function(){var m=h.current,y=g.current;return m!==null&&y!==null&&v&&v?.(m,y),function(){p?.()}},[]),I.createElement("div",rn({},c,{ref:h,className:"".concat(ll.wrapperClass," ").concat(kf.wrapper," ").concat(r),style:o}),I.createElement("div",rn({},d,{ref:g,className:"".concat(ll.contentClass," ").concat(kf.content," ").concat(a),style:s}),e))},_i=function(){var t=useContext(to);if(!t)throw new Error("Transform context must be placed inside TransformWrapper");return t},RC=function(){var t=_i();return Qa(t)},Ky=function(t){var e=_i();useEffect(function(){var n,r;return e.contentComponent&&e.wrapperComponent?n=t(Vr(e)):r=e.onInit(function(i){n=t(Vr(i.instance))}),function(){r?.(),n?.()}},[])},Vy=function(t){var e=_i();useEffect(function(){var n,r=e.onChange(function(i){n=t(Vr(i.instance))});return function(){r(),n?.()}},[t,e])};function PC(t){var e=_i(),n=useState(t(Vr(e))),r=n[0],i=n[1];return useEffect(function(){var a=!0,o=e.onChange(function(s){a&&i(t(Vr(s.instance)))});return function(){o(),a=!1}},[t,e]),r}const Yy=({scene:t,children:e})=>{const n=l=>{const c=l.state.scale;t.scale=c,t.shouldInfinitePan&&c<1&&(t.updateSize(t.width/c,t.height/c),t.panel.forceUpdate())},r=l=>{const c=l.state.scale;t.scale=c,a(c)},i=(l,c)=>{const u=c.scale;t.scale=u,a(u)},a=l=>{t.moveable&&l>0&&(t.moveable.zoom=1/l,l===1?t.moveable.snappable=!0:t.moveable.snappable=!1)},o=(l,c)=>{if(t.shouldInfinitePan&&c instanceof MouseEvent){let u=c.movementX,d=c.movementY;u>0&&(u=0),d>0&&(d=0),t.updateSize(t.width-u,t.height-d),t.panel.forceUpdate()}},s=l=>{(!t.shouldPanZoom||t.contextMenuVisible)&&(l.button===1||l.button===2&&l.ctrlKey)&&(l.preventDefault(),l.stopPropagation()),!t.contextMenuVisible&&!t.isPanelEditing&&l.button===2&&!l.ctrlKey&&(l.preventDefault(),l.stopPropagation())};return t.div?.parentElement?.parentElement?.parentElement?.parentElement?.setAttribute("style","overflow: hidden"),(0,b.jsx)(zy,{doubleClick:{mode:"reset"},ref:t.transformComponentRef,onZoom:n,onZoomStop:r,onTransformed:i,disabled:!ce.$.featureToggles.canvasPanelPanZoom||!t.shouldPanZoom,panning:{allowLeftClickPan:!1},limitToBounds:!t.shouldInfinitePan,minScale:t.shouldInfinitePan?.1:void 0,onPanning:o,children:(0,b.jsx)(Wy,{children:(0,b.jsx)("div",{onMouseDown:s,children:e})})})};class Xy extends Be{constructor(e,n,r){super(e,n),this.options=e,this.scene=n,this.changeCallback=r,this.setRootRef=i=>{this.div=i},this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(e){this.revId++,this.options={...e},this.changeCallback()}getSaveModel(){const{placement:e,constraint:n,...r}=this.options;return{...r,elements:this.elements.map(i=>i.getSaveModel())}}render(){return(0,b.jsx)("div",{onContextMenu:e=>e.preventDefault(),ref:this.setRootRef,style:{...this.sizeStyle,...this.dataStyle},children:this.elements.map(e=>e.render())},this.UID)}}class Hy{constructor(e,n,r,i,a,o,s){this.onSave=o,this.styles=$y(),this.selection=new af.m(1),this.moved=new sf.B,this.byName=new Map,this.revId=0,this.width=0,this.height=0,this.scale=1,this.style={},this.skipNextSelectionBroadcast=!1,this.ignoreDataUpdate=!1,this.contextMenuOnVisibilityChange=l=>{this.contextMenuVisible=l;const c=sp(this);c&&(l?c.setup.disabled=!0:c.setup.disabled=!1)},this.isPanelEditing=of.Ny.getSearchObject().editPanel!==void 0,this.editModeEnabled=new nf.t(!1),this.targetsToSelect=new Set,this.getNextElementName=(l=!1)=>{const c=l?"Frame":"Element";let u=this.byName.size+1;const d=u+100;for(;u<d;){const f=`${c} ${u++}`;if(!this.byName.has(f))return f}return`${c} ${Date.now()}`},this.canRename=l=>!this.byName.has(l),this.context={getColor:l=>(0,Ri.Wb)(this.data,l),getScale:l=>(0,Ri.XV)(this.data,l),getScalar:l=>(0,Ri.b5)(this.data,l),getText:l=>(0,Ri.wv)(this.data,l),getResource:l=>(0,Ri.B_)(this.data,l),getPanelData:()=>this.data},this.save=(l=!1)=>{this.onSave(this.root.getSaveModel()),l&&setTimeout(()=>{this.div&&nl(!0,this.isEditingEnabled,this)})},this.setNonTargetPointerEvents=(l,c)=>{const u=[...this.root.elements];for(;u.length>0;){const d=u.shift();d&&d.div&&d.div!==l&&d.applyLayoutStylesToDiv(c);const f=d instanceof Be?d.elements:[];for(const v of f)u.unshift(v)}},this.setRef=l=>{this.div=l},this.select=l=>{this.selecto&&(this.selecto.setSelectedTargets(l.targets),this.updateSelection(l),this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none"))},this.updateSelection=l=>{if(this.moveable.target=l.targets,this.skipNextSelectionBroadcast){this.skipNextSelectionBroadcast=!1;return}if(l.frame)this.selection.next([l.frame]);else{const c=l.targets.map(u=>_e(u,this.root.elements));this.selection.next(c)}},this.addToSelection=()=>{try{let l={targets:[]};l.targets=[...this.targetsToSelect],this.select(l)}catch{ne.A.emit(Xe.r1.alertError,["Unable to add to selection"])}},this.root=this.load(e,n,r,i,a),this.subscription=this.editModeEnabled.subscribe(l=>{!this.moveable||!this.isEditingEnabled||(this.moveable.draggable=!l)}),this.panel=s,this.connections=new r1(this),this.transformComponentRef=(0,I.createRef)()}load(e,n,r,i,a){return this.root=new Xy(e??{type:"frame",elements:[lo]},this,this.save),this.isEditingEnabled=n,this.shouldShowAdvancedTypes=r,this.shouldPanZoom=i,this.shouldInfinitePan=a,setTimeout(()=>{this.div&&(nl(n,n,this),this.currentLayer=this.root,this.selection.next([]),this.connections.select(void 0),this.connections.updateState())}),this.root}updateData(e){this.data=e,this.root.updateData(this.context)}updateSize(e,n){this.width=e,this.height=n,this.style={width:e,height:n},this.selecto?.getSelectedTargets().length&&this.clearCurrentSelection()}clearCurrentSelection(e=!1){this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");this.selecto?.clickTarget(n,this.div)}render(){const e=this.tooltip?.element?.getLinks&&this.tooltip.element.getLinks({}).length>0,n=this.tooltip?.element?.options.actions&&this.tooltip.element.options.actions.length>0,r=e||n||this.tooltip?.element?.data?.field,i=!this.isEditingEnabled&&r,a=(0,b.jsxs)("div",{className:this.styles.wrap,style:this.style,ref:this.setRef,children:[this.connections.render(),this.root.render(),this.isEditingEnabled&&(0,b.jsx)(ki.ZL,{children:(0,b.jsx)(p1,{scene:this,panel:this.panel,onVisibilityChange:this.contextMenuOnVisibilityChange})}),i&&(0,b.jsx)(ki.ZL,{children:(0,b.jsx)(D1,{scene:this})})]},this.revId);return Bt.$W.featureToggles.canvasPanelPanZoom?(0,b.jsx)(Yy,{scene:this,children:a}):a}}const $y=()=>({wrap:(0,Z.css)({overflow:"hidden",position:"relative"})});var Rf=z(87745),Uy=z(73304),Pf=z(4896);function Zy({onClose:t,scene:e,anchorPoint:n}){const r=e.root.options.background?.image?.fixed??"",[i,a]=(0,I.useState)(r),o=(0,yt.$j)(),s=Qy(o,n),l=c=>{c&&(a(c),e.root&&(e.root.options.background={...e.root.options.background,image:{mode:Xt.q_.Fixed,fixed:c}},e.revId++,e.save(),e.root.reinitializeMoveable()),e&&e.updateData(e.data)),t()};return(0,b.jsx)(ki.ZL,{className:s.portalWrapper,children:(0,b.jsx)(Uy.i,{onChange:l,value:i,mediaType:Pf.zu.Image,folderName:Pf.Iu.IOT})})}const Qy=(t,e)=>({portalWrapper:(0,Z.css)({width:"315px",height:"445px",transform:`translate(${e.x}px, ${e.y-200}px)`})});var qy=z(55794),Jy=z.n(qy),tx=z(66036),Af=z(29043),Of=z(86956),ex=z(74098),fl=z(25797),nx=z(56424),eo=z(61215);const rx=({value:t,onChange:e})=>{const n=[{value:V.xp.Original,label:(0,k.t)("dimensions.background-size-editor.options.label-original","Original")},{value:V.xp.Contain,label:(0,k.t)("dimensions.background-size-editor.options.label-contain","Contain")},{value:V.xp.Cover,label:(0,k.t)("dimensions.background-size-editor.options.label-cover","Cover")},{value:V.xp.Fill,label:(0,k.t)("dimensions.background-size-editor.options.label-fill","Fill")},{value:V.xp.Tile,label:(0,k.t)("dimensions.background-size-editor.options.label-tile","Tile")}],r=t??V.xp.Cover,i=(0,I.useCallback)(a=>{e(a)},[e]);return(0,b.jsx)(je.C,{children:(0,b.jsx)(He.I,{grow:!0,children:(0,b.jsx)(Ce.z,{value:r,options:n,onChange:i,fullWidth:!0})})})};var _f=z(71820),ix=z(21285);const ax=[{value:ue.Solid,label:"Solid"},{value:ue.Dashed,label:"Dashed"},{value:ue.Dotted,label:"Dotted"}],ox={style:ue.Solid,animate:!1},sx=({value:t,onChange:e})=>{t?typeof t!="object"&&(t={style:t,animate:!1}):t=ox;const n=(0,I.useCallback)(i=>{e({...t,style:i})},[e,t]),r=(0,I.useCallback)(i=>{e({...t,animate:i})},[e,t]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ce.z,{value:t.style,options:ax,onChange:n,fullWidth:!0}),t.style!==ue.Solid&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("br",{}),(0,b.jsx)(zn.D,{label:(0,k.t)("canvas.line-style-editor.label-animate","Animate"),children:(0,b.jsx)(ix.d,{value:t.animate,onChange:i=>r(i.currentTarget.checked)})})]})]})};var lx=z(49517);function cx({value:t,onChange:e,item:n,context:r}){const i=n.settings?.links||[];return(0,b.jsx)(lx.G,{actions:t,onChange:a=>{a.some(({oneClick:o})=>o===!0)&&i.forEach(o=>{o.oneClick=!1}),e(a)},getSuggestions:()=>r.getSuggestions?r.getSuggestions(Ue.uP.Values):[],data:[],showOneClick:!0})}var ux=z(96822);function dx({value:t,onChange:e,item:n,context:r}){const i=n.settings?.actions||[];return(0,b.jsx)(ux.e,{links:t,onChange:a=>{a.some(({oneClick:o})=>o===!0)&&i.forEach(o=>{o.oneClick=!1}),e(a)},getSuggestions:()=>r.getSuggestions?r.getSuggestions(Ue.uP.Values):[],data:[],showOneClick:!0})}const Lf=(t,e)=>e!=="frame"&&e!==void 0?[t+` (${e})`]:[t],gn={addBackground:(t,e)=>{const n=Lf((0,k.t)("canvas.category-background","Background"),e.options?.type);t.addCustomEditor({category:n,id:"background.color",path:"background.color",name:(0,k.t)("canvas.label-color","Color"),editor:re.N,settings:{},defaultValue:{fixed:""}}).addCustomEditor({category:n,id:"background.image",path:"background.image",name:(0,k.t)("canvas.label-image","Image"),editor:Rl.m,settings:{resourceType:"image"}}).addCustomEditor({category:n,id:"background.size",path:"background.size",name:(0,k.t)("canvas.label-image-size","Image size"),editor:rx,settings:{resourceType:"image"},showIf:()=>e.options?.type?!zl.has(e.options.type):!0})},addBorder:(t,e)=>{const n=Lf((0,k.t)("canvas.category-border","Border"),e.options?.type);t.addSliderInput({category:n,path:"border.width",name:(0,k.t)("canvas.label-width","Width"),defaultValue:2,settings:{min:0,max:20}}),e.options?.border?.width&&t.addCustomEditor({category:n,id:"border.color",path:"border.color",name:(0,k.t)("canvas.label-color","Color"),editor:re.N,settings:{},defaultValue:{fixed:""}}),t.addSliderInput({category:n,path:"border.radius",name:(0,k.t)("canvas.label-radius","Radius"),defaultValue:0,settings:{min:0,max:60}})},addColor:(t,e)=>{const n=[(0,k.t)("canvas.category-color","Color")];t.addCustomEditor({category:n,id:"color",path:"color",name:(0,k.t)("canvas.label-color","Color"),editor:re.N,settings:{},defaultValue:{fixed:""}})},addSize:(t,e)=>{const n=[(0,k.t)("canvas.category-size","Size")];t.addCustomEditor({category:n,id:"size",path:"size",name:(0,k.t)("canvas.label-size","Size"),editor:_f.g,settings:{min:1,max:10},defaultValue:{fixed:2,min:1,max:10}})},addRadius:(t,e)=>{const n=[(0,k.t)("canvas.category-radius","Radius")];t.addCustomEditor({category:n,id:"radius",path:"radius",name:(0,k.t)("canvas.label-radius","Radius"),editor:_f.g,settings:{min:0,max:200,filteredFieldType:co.PU.number},defaultValue:{fixed:0,min:0,max:100}})},addDirection:(t,e)=>{const n=[(0,k.t)("canvas.category-arrow-direction","Arrow Direction")];t.addRadio({category:n,path:"direction",name:(0,k.t)("canvas.label-direction","Direction"),settings:{options:[{value:void 0,label:(0,k.t)("canvas.direction-options.label-forward","Forward")},{value:un.Reverse,label:(0,k.t)("canvas.direction-options.label-reverse","Reverse")},{value:un.Both,label:(0,k.t)("canvas.direction-options.label-both","Both")},{value:un.None,label:(0,k.t)("canvas.direction-options.label-none","None")}]},defaultValue:un.Forward})},addLineStyle:(t,e)=>{const n=[(0,k.t)("canvas.category-line-style","Line style")];t.addCustomEditor({category:n,id:"lineStyle",path:"lineStyle",name:(0,k.t)("canvas.label-line-style","Line style"),editor:sx,settings:{},defaultValue:{value:ue.Solid,label:(0,k.t)("canvas.line-style-options.label-solid","Solid")}})},addDataLinks:(t,e)=>{t.addCustomEditor({category:[(0,k.t)("canvas.category-data-links","Data links and actions")],id:"dataLinks",path:"links",name:(0,k.t)("canvas.label-links","Links"),editor:dx,settings:e.options})},addActions:(t,e)=>{t.addCustomEditor({category:[(0,k.t)("canvas.category-data-links","Data links and actions")],id:"actions",path:"actions",name:(0,k.t)("canvas.label-actions","Actions"),editor:cx,settings:e.options})}};function Nf(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,Zt.get)(t.connection.info,n),onChange:(n,r)=>{let i=t.connection.info;i=(0,eo.Sf)(i,n,r),t.scene.connections.onChange(t.connection,i)}}),build:(e,n)=>{const r={...n,options:t.connection.info};gn.addColor(e,r),gn.addSize(e,r),gn.addRadius(e,r),gn.addDirection(e,r),gn.addLineStyle(e,r)}}}var no=z(30703),fx=z(19753);const vx=({onVerticalConstraintChange:t,onHorizontalConstraintChange:e,currentConstraints:n})=>{const r=(0,yt.of)(px(n)),i=()=>{t(V.gR.Top)},a=()=>{t(V.gR.Bottom)},o=()=>{t(V.gR.Center)},s=()=>{e(V.en.Left)},l=()=>{e(V.en.Right)},c=()=>{e(V.en.Center)};return(0,b.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"75.000000pt",height:"75.000000pt",viewBox:"0 0 228.000000 228.000000",preserveAspectRatio:"xMidYMid meet",style:{marginBottom:"4.8px"},children:(0,b.jsxs)("g",{transform:"translate(0.000000,228.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:[(0,b.jsx)("path",{fill:"#e5e5e5",d:`M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29
29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16
-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1
-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2
659 2 912 0 431 -2 462 -4 478 -21z`}),(0,b.jsx)("rect",{className:r.topConstraint,height:"228",width:"46",y:"1735",x:"1123"}),(0,b.jsx)("rect",{className:r.constraintHover,onClick:i,height:"350",width:"300",y:"1680",x:"995",fill:"transparent"}),(0,b.jsx)("rect",{className:r.bottomConstraint,height:"228",width:"46",y:"210",x:"1123"}),(0,b.jsx)("rect",{className:r.constraintHover,onClick:a,height:"350",width:"300",y:"135",x:"995",fill:"transparent"}),(0,b.jsx)("rect",{className:r.leftConstraint,height:"46",width:"228",y:"1060",x:"265"}),(0,b.jsx)("rect",{className:r.constraintHover,onClick:s,height:"300",width:"350",y:"925",x:"200",fill:"transparent"}),(0,b.jsx)("rect",{className:r.rightConstraint,height:"46",width:"228",y:"1060",x:"1795"}),(0,b.jsx)("rect",{className:r.constraintHover,onClick:l,height:"300",width:"350",y:"925",x:"1730",fill:"transparent"}),(0,b.jsx)("path",{className:r.box,d:`M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14
1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577
16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4
-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z`}),(0,b.jsx)("rect",{className:r.verticalCenterConstraint,height:"456",width:"46",y:"855",x:"1123"}),(0,b.jsx)("rect",{className:r.constraintHover,onClick:o,height:"660",width:"300",y:"750",x:"995",fill:"transparent"}),(0,b.jsx)("rect",{className:r.horizontalCenterConstraint,height:"46",width:"456",y:"1060",x:"918"}),(0,b.jsx)("rect",{className:r.constraintHover,onClick:c,height:"300",width:"660",y:"925",x:"815",fill:"transparent"})]})})},px=t=>e=>{const n="#daebf7",r="0.6",i="#0d99ff",a=e.isDark?"#ffffff":"#000000";return{constraintHover:(0,Z.css)({"&:hover":{fill:n,fillOpacity:r}}),topConstraint:(0,Z.css)({...t.vertical===V.gR.Top||t.vertical===V.gR.TopBottom?{width:"92pt",x:"1085",fill:i}:{fill:a}}),bottomConstraint:(0,Z.css)({...t.vertical===V.gR.Bottom||t.vertical===V.gR.TopBottom?{width:"92pt",x:"1085",fill:i}:{fill:a}}),leftConstraint:(0,Z.css)({...t.horizontal===V.en.Left||t.horizontal===V.en.LeftRight?{height:"92pt",y:"1014",fill:i}:{fill:a}}),rightConstraint:(0,Z.css)({...t.horizontal===V.en.Right||t.horizontal===V.en.LeftRight?{height:"92pt",y:"1014",fill:i}:{fill:a}}),horizontalCenterConstraint:(0,Z.css)({...t.horizontal===V.en.Center?{height:"92pt",y:"1014",fill:i}:{fill:a}}),verticalCenterConstraint:(0,Z.css)({...t.vertical===V.gR.Center?{width:"92pt",x:"1085",fill:i}:{fill:a}}),box:(0,Z.css)({fill:a})}},hx=({onPositionChange:t,element:e,settings:n})=>{const r=(0,yt.of)(gx),i=s=>{const l={vertical:V.gR.Top,horizontal:V.en.Left},c={...e.options.constraint};switch(e.options.constraint=l,e.setPlacementFromConstraint(),s){case Fe.Top:t(0,"top");break;case Fe.Bottom:t(o(e.options.placement?.height??0,"bottom"),"top");break;case Fe.VerticalCenter:t(a(e.options.placement?.height??0,"v"),"top");break;case Fe.Left:t(0,"left");break;case Fe.Right:t(o(e.options.placement?.width??0,"right"),"left");break;case Fe.HorizontalCenter:t(a(e.options.placement?.width??0,"h"),"left");break}e.options.constraint=c,e.setPlacementFromConstraint()},a=(s,l)=>((l==="h"?n.scene.width:n.scene.height)-s)/2,o=(s,l)=>(l==="right"?n.scene.width:n.scene.height)-s;return(0,b.jsxs)("div",{className:r.buttonGroup,children:[(0,b.jsx)(Ee.K,{name:"horizontal-align-left",onClick:()=>i(Fe.Left),className:r.button,size:"lg",tooltip:(0,k.t)("canvas.quick-positioning.tooltip-align-left","Align left")}),(0,b.jsx)(Ee.K,{name:"horizontal-align-center",onClick:()=>i(Fe.HorizontalCenter),className:r.button,size:"lg",tooltip:(0,k.t)("canvas.quick-positioning.tooltip-align-horizontal-centers","Align horizontal centers")}),(0,b.jsx)(Ee.K,{name:"horizontal-align-right",onClick:()=>i(Fe.Right),className:r.button,size:"lg",tooltip:(0,k.t)("canvas.quick-positioning.tooltip-align-right","Align right")}),(0,b.jsx)(Ee.K,{name:"vertical-align-top",onClick:()=>i(Fe.Top),size:"lg",tooltip:(0,k.t)("canvas.quick-positioning.tooltip-align-top","Align top")}),(0,b.jsx)(Ee.K,{name:"vertical-align-center",onClick:()=>i(Fe.VerticalCenter),className:r.button,size:"lg",tooltip:(0,k.t)("canvas.quick-positioning.tooltip-align-vertical-centers","Align vertical centers")}),(0,b.jsx)(Ee.K,{name:"vertical-align-bottom",onClick:()=>i(Fe.Bottom),className:r.button,size:"lg",tooltip:(0,k.t)("canvas.quick-positioning.tooltip-align-bottom","Align bottom")})]})},gx=t=>({buttonGroup:(0,Z.css)({display:"flex",flexWrap:"wrap",padding:"12px 0 12px 0"}),button:(0,Z.css)({marginLeft:"5px",marginRight:"5px"})}),mx=["top","left","bottom","right","width","height","rotation"];function zf({item:t}){const e=t.settings,n=[{label:(0,k.t)("canvas.placement-editor.horizontal-options.label-left","Left"),value:V.en.Left},{label:(0,k.t)("canvas.placement-editor.horizontal-options.label-right","Right"),value:V.en.Right},{label:(0,k.t)("canvas.placement-editor.horizontal-options.label-left-and-right","Left & right"),value:V.en.LeftRight},{label:(0,k.t)("canvas.placement-editor.horizontal-options.label-center","Center"),value:V.en.Center},{label:(0,k.t)("canvas.placement-editor.horizontal-options.label-scale","Scale"),value:V.en.Scale}],r=[{label:(0,k.t)("canvas.placement-editor.vertical-options.label-top","Top"),value:V.gR.Top},{label:(0,k.t)("canvas.placement-editor.vertical-options.label-bottom","Bottom"),value:V.gR.Bottom},{label:(0,k.t)("canvas.placement-editor.vertical-options.label-top-and-bottom","Top & bottom"),value:V.gR.TopBottom},{label:(0,k.t)("canvas.placement-editor.vertical-options.label-center","Center"),value:V.gR.Center},{label:(0,k.t)("canvas.placement-editor.vertical-options.label-scale","Scale"),value:V.gR.Scale}];if((0,Wi.A)(e?.scene?e.scene.moved:new sf.B),!e)return(0,b.jsx)("div",{children:(0,b.jsx)(k.x6,{i18nKey:"canvas.placement-editor.loading",children:"Loading..."})});const i=e.element;if(!i)return(0,b.jsx)("div",{children:"???"});const{options:a}=i,{placement:o,constraint:s}=a;o&&(o.rotation=o?.rotation??0);const l=()=>{setTimeout(()=>{e.scene.select({targets:[i.div]})})},c=h=>{u(h.value)},u=h=>{i.options.constraint.horizontal=h,i.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),l()},d=h=>{f(h.value)},f=h=>{i.options.constraint.vertical=h,i.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),l()},v=(h,g)=>{i.options.placement[g]=h??i.options.placement[g],i.applyLayoutStylesToDiv(),e.scene.clearCurrentSelection(!0),l()},p=i.tempConstraint??s??{};return(0,b.jsxs)("div",{children:[(0,b.jsx)(hx,{onPositionChange:v,settings:e,element:i}),(0,b.jsx)("br",{}),(0,b.jsx)(zn.D,{label:(0,k.t)("canvas.placement-editor.label-constraints","Constraints"),children:(0,b.jsxs)(Ge.B,{direction:"row",children:[(0,b.jsx)(vx,{onVerticalConstraintChange:f,onHorizontalConstraintChange:u,currentConstraints:p}),(0,b.jsxs)(Ge.B,{direction:"column",children:[(0,b.jsxs)(Ge.B,{direction:"row",children:[(0,b.jsx)(no.I,{name:"arrows-h"}),(0,b.jsx)(cn.l6,{options:n,onChange:c,value:p.horizontal})]}),(0,b.jsxs)(Ge.B,{direction:"row",children:[(0,b.jsx)(no.I,{name:"arrows-v"}),(0,b.jsx)(cn.l6,{options:r,onChange:d,value:p.vertical})]})]})]})}),(0,b.jsx)("br",{}),(0,b.jsx)(zn.D,{label:(0,k.t)("canvas.placement-editor.label-position","Position"),children:(0,b.jsx)(b.Fragment,{children:mx.map(h=>{const g=o[h];if(g==null)return null;const m=h==="rotation"?0:void 0,y=h==="rotation"?360:void 0;return(0,b.jsx)(je.C,{children:(0,b.jsx)(He.I,{label:h,labelWidth:8,grow:!0,children:(0,b.jsx)(fx.Q,{min:m,max:y,value:g,onChange:x=>v(x,h)})})},h)})})})]})}function If(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,Zt.get)(t.element.options,n),onChange:(n,r)=>{let i=t.element.options;if(n==="type"&&r){const a=ti.getIfExists(r);if(!a){console.warn("layer does not exist",r);return}i={...i,...a.getNewOptions(i),type:a.id}}else i=(0,eo.Sf)(i,n,r);t.element.onChange(i),t.element.updateData(t.scene.context)}}),build:(e,n)=>{const{options:r}=t.element,i=r?.type?r.type:lo.type,a=Hi(t.scene.shouldShowAdvancedTypes,i).options,o=!t.scene.shouldShowAdvancedTypes&&!Vi.filter(v=>v.id===r?.type).length;e.addSelect({path:"type",name:void 0,settings:{options:a},description:o?(0,k.t)("canvas.element-editor.description-unsupported","Selected element type is not supported by current settings. Please enable advanced element types."):""});const s=ti.getIfExists(r?.type??lo.type);let l=r;l||(l={...s.getNewOptions(r),type:s.id,name:`Element ${Date.now()}.${Math.floor(Math.random()*100)}`});const c={...n,options:l};s?.registerOptionsUI&&s.registerOptionsUI(e,c),(t.element.item.standardEditorConfig?.layout??!0)&&e.addCustomEditor({category:[(0,k.t)("canvas.element-editor.category-layout","Layout")],id:"content",path:"__",name:(0,k.t)("canvas.element-editor.name-quick-placement","Quick placement"),editor:zf,settings:t}),(t.element.item.standardEditorConfig?.background??!0)&&gn.addBackground(e,c),(t.element.item.standardEditorConfig?.border??!0)&&gn.addBorder(e,c),gn.addDataLinks(e,c),gn.addActions(e,c)}}}var Bf=z(17437);function Ln(){return Ln=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ln.apply(null,arguments)}var vl=z(20194),an=z(30313),pl=z(78448);function yx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var xx=z(88702);function jf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(0,xx.A)(r.key),r)}}function bx(t,e,n){return e&&jf(t.prototype,e),n&&jf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hl(t,e){return hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},hl(t,e)}function Cx(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hl(t,e)}function ro(t){return ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ro(t)}function Gf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gf=function(){return!!t})()}function Sx(t,e){if(e&&((0,vl.A)(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mt(t)}function Ex(t){var e=Gf();return function(){var n,r=ro(t);if(e){var i=ro(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sx(this,n)}}var it=z(68037),wx=z(46942),En=z.n(wx),Yr=z(16928),Ff=z(72065),Li=z(68210),gl=I.createContext(null),Dx=I.createContext({}),Tx=function(e){var n=e.dropPosition,r=e.dropLevelOffset,i=e.indent,a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(n){case-1:a.top=0,a.left=-r*i;break;case 1:a.bottom=0,a.left=-r*i;break;case 0:a.bottom=0,a.left=i;break}return I.createElement("div",{style:a})};const Mx=Tx;function Wf(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function kx(t){if(Array.isArray(t))return t}function Rx(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}var Px=z(86906);function Ax(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zn(t,e){return kx(t)||Rx(t,e)||(0,Px.A)(t,e)||Ax()}var ml=z(78080),io=z(30981),Ox=z(48301),_x=z(1052),Lx=function(e){for(var n=e.prefixCls,r=e.level,i=e.isStart,a=e.isEnd,o="".concat(n,"-indent-unit"),s=[],l=0;l<r;l+=1)s.push(I.createElement("span",{key:l,className:En()(o,(0,it.A)((0,it.A)({},"".concat(o,"-start"),i[l]),"".concat(o,"-end"),a[l]))}));return I.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},s)};const Nx=I.memo(Lx);var on=z(84963),_t=z(7974),zx=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],Kf="open",Vf="close",Ix="---",Yf=function(e){var n,r,i,a=e.eventKey,o=e.className,s=e.style,l=e.dragOver,c=e.dragOverGapTop,u=e.dragOverGapBottom,d=e.isLeaf,f=e.isStart,v=e.isEnd,p=e.expanded,h=e.selected,g=e.checked,m=e.halfChecked,y=e.loading,x=e.domRef,S=e.active,w=e.data,E=e.onMouseMove,D=e.selectable,T=(0,ml.A)(e,zx),C=I.useContext(gl),M=I.useContext(Dx),R=I.useRef(null),A=I.useState(!1),P=Zn(A,2),L=P[0],N=P[1],j=!!(C.disabled||e.disabled||(n=M.nodeDisabled)!==null&&n!==void 0&&n.call(M,w)),F=I.useMemo(function(){return!C.checkable||e.checkable===!1?!1:C.checkable},[C.checkable,e.checkable]),G=function(ot){j||C.onNodeSelect(ot,(0,_t.Hj)(e))},W=function(ot){j||!F||e.disableCheckbox||C.onNodeCheck(ot,(0,_t.Hj)(e),!g)},K=I.useMemo(function(){return typeof D=="boolean"?D:C.selectable},[D,C.selectable]),B=function(ot){C.onNodeClick(ot,(0,_t.Hj)(e)),K?G(ot):W(ot)},Q=function(ot){C.onNodeDoubleClick(ot,(0,_t.Hj)(e))},q=function(ot){C.onNodeMouseEnter(ot,(0,_t.Hj)(e))},H=function(ot){C.onNodeMouseLeave(ot,(0,_t.Hj)(e))},U=function(ot){C.onNodeContextMenu(ot,(0,_t.Hj)(e))},Y=I.useMemo(function(){return!!(C.draggable&&(!C.draggable.nodeDraggable||C.draggable.nodeDraggable(w)))},[C.draggable,w]),tt=function(ot){ot.stopPropagation(),N(!0),C.onNodeDragStart(ot,e);try{ot.dataTransfer.setData("text/plain","")}catch{}},nt=function(ot){ot.preventDefault(),ot.stopPropagation(),C.onNodeDragEnter(ot,e)},vt=function(ot){ot.preventDefault(),ot.stopPropagation(),C.onNodeDragOver(ot,e)},ct=function(ot){ot.stopPropagation(),C.onNodeDragLeave(ot,e)},$=function(ot){ot.stopPropagation(),N(!1),C.onNodeDragEnd(ot,e)},et=function(ot){ot.preventDefault(),ot.stopPropagation(),N(!1),C.onNodeDrop(ot,e)},Tt=function(ot){y||C.onNodeExpand(ot,(0,_t.Hj)(e))},ut=I.useMemo(function(){var St=(0,on.A)(C.keyEntities,a)||{},ot=St.children;return!!(ot||[]).length},[C.keyEntities,a]),ft=I.useMemo(function(){return d===!1?!1:d||!C.loadData&&!ut||C.loadData&&e.loaded&&!ut},[d,C.loadData,ut,e.loaded]);I.useEffect(function(){y||typeof C.loadData=="function"&&p&&!ft&&!e.loaded&&C.onNodeLoad((0,_t.Hj)(e))},[y,C.loadData,C.onNodeLoad,p,ft,e]);var xt=I.useMemo(function(){var St;return(St=C.draggable)!==null&&St!==void 0&&St.icon?I.createElement("span",{className:"".concat(C.prefixCls,"-draggable-icon")},C.draggable.icon):null},[C.draggable]),Ot=function(ot){var be=e.switcherIcon||C.switcherIcon;return typeof be=="function"?be((0,an.A)((0,an.A)({},e),{},{isLeaf:ot})):be},Rt=function(){if(ft){var ot=Ot(!0);return ot!==!1?I.createElement("span",{className:En()("".concat(C.prefixCls,"-switcher"),"".concat(C.prefixCls,"-switcher-noop"))},ot):null}var be=Ot(!1);return be!==!1?I.createElement("span",{onClick:Tt,className:En()("".concat(C.prefixCls,"-switcher"),"".concat(C.prefixCls,"-switcher_").concat(p?Kf:Vf))},be):null},gt=I.useMemo(function(){if(!F)return null;var St=typeof F!="boolean"?F:null;return I.createElement("span",{className:En()("".concat(C.prefixCls,"-checkbox"),(0,it.A)((0,it.A)((0,it.A)({},"".concat(C.prefixCls,"-checkbox-checked"),g),"".concat(C.prefixCls,"-checkbox-indeterminate"),!g&&m),"".concat(C.prefixCls,"-checkbox-disabled"),j||e.disableCheckbox)),onClick:W,role:"checkbox","aria-checked":m?"mixed":g,"aria-disabled":j||e.disableCheckbox,"aria-label":"Select ".concat(typeof e.title=="string"?e.title:"tree node")},St)},[F,g,m,j,e.disableCheckbox,e.title]),Ct=I.useMemo(function(){return ft?null:p?Kf:Vf},[ft,p]),Yt=I.useMemo(function(){return I.createElement("span",{className:En()("".concat(C.prefixCls,"-iconEle"),"".concat(C.prefixCls,"-icon__").concat(Ct||"docu"),(0,it.A)({},"".concat(C.prefixCls,"-icon_loading"),y))})},[C.prefixCls,Ct,y]),te=I.useMemo(function(){var St=!!C.draggable,ot=!e.disabled&&St&&C.dragOverNodeKey===a;return ot?C.dropIndicatorRender({dropPosition:C.dropPosition,dropLevelOffset:C.dropLevelOffset,indent:C.indent,prefixCls:C.prefixCls,direction:C.direction}):null},[C.dropPosition,C.dropLevelOffset,C.indent,C.prefixCls,C.direction,C.draggable,C.dragOverNodeKey,C.dropIndicatorRender]),Et=I.useMemo(function(){var St=e.title,ot=St===void 0?Ix:St,be="".concat(C.prefixCls,"-node-content-wrapper"),zt;if(C.showIcon){var ae=e.icon||C.icon;zt=ae?I.createElement("span",{className:En()("".concat(C.prefixCls,"-iconEle"),"".concat(C.prefixCls,"-icon__customize"))},typeof ae=="function"?ae(e):ae):Yt}else C.loadData&&y&&(zt=Yt);var ye;return typeof ot=="function"?ye=ot(w):C.titleRender?ye=C.titleRender(w):ye=ot,I.createElement("span",{ref:R,title:typeof ot=="string"?ot:"",className:En()(be,"".concat(be,"-").concat(Ct||"normal"),(0,it.A)({},"".concat(C.prefixCls,"-node-selected"),!j&&(h||L))),onMouseEnter:q,onMouseLeave:H,onContextMenu:U,onClick:B,onDoubleClick:Q},zt,I.createElement("span",{className:"".concat(C.prefixCls,"-title")},ye),te)},[C.prefixCls,C.showIcon,e,C.icon,Yt,C.titleRender,w,Ct,q,H,U,B,Q]),wt=(0,Ff.A)(T,{aria:!0,data:!0}),ht=(0,on.A)(C.keyEntities,a)||{},ge=ht.level,le=v[v.length-1],Nt=!j&&Y,Kt=C.draggingNodeKey===a,ee=D!==void 0?{"aria-selected":!!D}:void 0;return I.createElement("div",Ln({ref:x,role:"treeitem","aria-expanded":d?void 0:p,className:En()(o,"".concat(C.prefixCls,"-treenode"),(i={},(0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)(i,"".concat(C.prefixCls,"-treenode-disabled"),j),"".concat(C.prefixCls,"-treenode-switcher-").concat(p?"open":"close"),!d),"".concat(C.prefixCls,"-treenode-checkbox-checked"),g),"".concat(C.prefixCls,"-treenode-checkbox-indeterminate"),m),"".concat(C.prefixCls,"-treenode-selected"),h),"".concat(C.prefixCls,"-treenode-loading"),y),"".concat(C.prefixCls,"-treenode-active"),S),"".concat(C.prefixCls,"-treenode-leaf-last"),le),"".concat(C.prefixCls,"-treenode-draggable"),Y),"dragging",Kt),(0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)((0,it.A)(i,"drop-target",C.dropTargetKey===a),"drop-container",C.dropContainerKey===a),"drag-over",!j&&l),"drag-over-gap-top",!j&&c),"drag-over-gap-bottom",!j&&u),"filter-node",(r=C.filterTreeNode)===null||r===void 0?void 0:r.call(C,(0,_t.Hj)(e))),"".concat(C.prefixCls,"-treenode-leaf"),ft))),style:s,draggable:Nt,onDragStart:Nt?tt:void 0,onDragEnter:Y?nt:void 0,onDragOver:Y?vt:void 0,onDragLeave:Y?ct:void 0,onDrop:Y?et:void 0,onDragEnd:Y?$:void 0,onMouseMove:E},ee,wt),I.createElement(Nx,{prefixCls:C.prefixCls,level:ge,isStart:f,isEnd:v}),xt,Rt(),gt,Et)};Yf.isTreeNode=1;const yl=Yf;function Bx(t,e){var n=I.useState(!1),r=Zn(n,2),i=r[0],a=r[1];(0,io.A)(function(){if(i)return t(),function(){e()}},[i]),(0,io.A)(function(){return a(!0),function(){a(!1)}},[])}const jx=Bx;var Gx=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Fx=I.forwardRef(function(t,e){var n=t.className,r=t.style,i=t.motion,a=t.motionNodes,o=t.motionType,s=t.onMotionStart,l=t.onMotionEnd,c=t.active,u=t.treeNodeRequiredProps,d=(0,ml.A)(t,Gx),f=I.useState(!0),v=Zn(f,2),p=v[0],h=v[1],g=I.useContext(gl),m=g.prefixCls,y=a&&o!=="hide";(0,io.A)(function(){a&&y!==p&&h(y)},[a]);var x=function(){a&&s()},S=I.useRef(!1),w=function(){a&&!S.current&&(S.current=!0,l())};jx(x,w);var E=function(T){y===T&&w()};return a?I.createElement(_x.A,Ln({ref:e,visible:p},i,{motionAppear:o==="show",onVisibleChanged:E}),function(D,T){var C=D.className,M=D.style;return I.createElement("div",{ref:T,className:En()("".concat(m,"-treenode-motion"),C),style:M},a.map(function(R){var A=Object.assign({},(Wf(R.data),R.data)),P=R.title,L=R.key,N=R.isStart,j=R.isEnd;delete A.children;var F=(0,_t.N5)(L,u);return I.createElement(yl,Ln({},A,F,{title:P,active:c,data:R.data,key:L,isStart:N,isEnd:j}))}))}):I.createElement(yl,Ln({domRef:e,className:n,style:r},d,{active:c}))});const Wx=Fx;function Kx(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.length,r=e.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function i(a,o){var s=new Map;a.forEach(function(c){s.set(c,!0)});var l=o.filter(function(c){return!s.has(c)});return l.length===1?l[0]:null}return n<r?{add:!0,key:i(t,e)}:{add:!1,key:i(e,t)}}function Xf(t,e,n){var r=t.findIndex(function(s){return s.key===n}),i=t[r+1],a=e.findIndex(function(s){return s.key===n});if(i){var o=e.findIndex(function(s){return s.key===i.key});return e.slice(a+1,o)}return e.slice(a+1)}var Vx=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Hf={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Yx=function(){},hr="RC_TREE_MOTION_".concat(Math.random()),xl={key:hr},$f={key:hr,level:0,index:0,pos:"0",node:xl,nodes:[xl]},Uf={parent:null,children:[],pos:$f.pos,data:xl,title:null,key:hr,isStart:[],isEnd:[]};function Zf(t,e,n,r){return e===!1||!n?t:t.slice(0,Math.ceil(n/r)+1)}function Qf(t){var e=t.key,n=t.pos;return(0,_t.i7)(e,n)}function Xx(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}var Hx=I.forwardRef(function(t,e){var n=t.prefixCls,r=t.data,i=t.selectable,a=t.checkable,o=t.expandedKeys,s=t.selectedKeys,l=t.checkedKeys,c=t.loadedKeys,u=t.loadingKeys,d=t.halfCheckedKeys,f=t.keyEntities,v=t.disabled,p=t.dragging,h=t.dragOverNodeKey,g=t.dropPosition,m=t.motion,y=t.height,x=t.itemHeight,S=t.virtual,w=t.scrollWidth,E=t.focusable,D=t.activeItem,T=t.focused,C=t.tabIndex,M=t.onKeyDown,R=t.onFocus,A=t.onBlur,P=t.onActiveChange,L=t.onListChangeStart,N=t.onListChangeEnd,j=(0,ml.A)(t,Vx),F=I.useRef(null),G=I.useRef(null);I.useImperativeHandle(e,function(){return{scrollTo:function(wt){F.current.scrollTo(wt)},getIndentWidth:function(){return G.current.offsetWidth}}});var W=I.useState(o),K=Zn(W,2),B=K[0],Q=K[1],q=I.useState(r),H=Zn(q,2),U=H[0],Y=H[1],tt=I.useState(r),nt=Zn(tt,2),vt=nt[0],ct=nt[1],$=I.useState([]),et=Zn($,2),Tt=et[0],ut=et[1],ft=I.useState(null),xt=Zn(ft,2),Ot=xt[0],Rt=xt[1],gt=I.useRef(r);gt.current=r;function Ct(){var Et=gt.current;Y(Et),ct(Et),ut([]),Rt(null),N()}(0,io.A)(function(){Q(o);var Et=Kx(B,o);if(Et.key!==null)if(Et.add){var wt=U.findIndex(function(ee){var St=ee.key;return St===Et.key}),ht=Zf(Xf(U,r,Et.key),S,y,x),ge=U.slice();ge.splice(wt+1,0,Uf),ct(ge),ut(ht),Rt("show")}else{var le=r.findIndex(function(ee){var St=ee.key;return St===Et.key}),Nt=Zf(Xf(r,U,Et.key),S,y,x),Kt=r.slice();Kt.splice(le+1,0,Uf),ct(Kt),ut(Nt),Rt("hide")}else U!==r&&(Y(r),ct(r))},[o,r]),I.useEffect(function(){p||Ct()},[p]);var Yt=m?vt:r,te={expandedKeys:o,selectedKeys:s,loadedKeys:c,loadingKeys:u,checkedKeys:l,halfCheckedKeys:d,dragOverNodeKey:h,dropPosition:g,keyEntities:f};return I.createElement(I.Fragment,null,T&&D&&I.createElement("span",{style:Hf,"aria-live":"assertive"},Xx(D)),I.createElement("div",null,I.createElement("input",{style:Hf,disabled:E===!1||v,tabIndex:E!==!1?C:null,onKeyDown:M,onFocus:R,onBlur:A,value:"",onChange:Yx,"aria-label":"for screen reader"})),I.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},I.createElement("div",{className:"".concat(n,"-indent")},I.createElement("div",{ref:G,className:"".concat(n,"-indent-unit")}))),I.createElement(Ox.A,Ln({},j,{data:Yt,itemKey:Qf,height:y,fullHeight:!1,virtual:S,itemHeight:x,scrollWidth:w,prefixCls:"".concat(n,"-list"),ref:F,role:"tree",onVisibleChange:function(wt){wt.every(function(ht){return Qf(ht)!==hr})&&Ct()}}),function(Et){var wt=Et.pos,ht=Object.assign({},(Wf(Et.data),Et.data)),ge=Et.title,le=Et.key,Nt=Et.isStart,Kt=Et.isEnd,ee=(0,_t.i7)(le,wt);delete ht.key,delete ht.children;var St=(0,_t.N5)(ee,te);return I.createElement(Wx,Ln({},ht,St,{title:ge,active:!!D&&le===D.key,pos:wt,data:Et.data,isStart:Nt,isEnd:Kt,motion:m,motionNodes:le===hr?Tt:null,motionType:Ot,onMotionStart:L,onMotionEnd:Ct,treeNodeRequiredProps:te,onMouseMove:function(){P(null)}}))}))});const $x=Hx;var Ux=null;function Nn(t,e){if(!t)return[];var n=t.slice(),r=n.indexOf(e);return r>=0&&n.splice(r,1),n}function Qn(t,e){var n=(t||[]).slice();return n.indexOf(e)===-1&&n.push(e),n}function bl(t){return t.split("-")}function Zx(t,e){var n=[],r=(0,on.A)(e,t);function i(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];a.forEach(function(o){var s=o.key,l=o.children;n.push(s),i(l)})}return i(r.children),n}function Qx(t){if(t.parent){var e=bl(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function qx(t){var e=bl(t.pos);return Number(e[e.length-1])===0}function qf(t,e,n,r,i,a,o,s,l,c){var u,d=t.clientX,f=t.clientY,v=t.target.getBoundingClientRect(),p=v.top,h=v.height,g=(c==="rtl"?-1:1)*((i?.x||0)-d),m=(g-12)/r,y=l.filter(function(j){var F;return(F=s[j])===null||F===void 0||(F=F.children)===null||F===void 0?void 0:F.length}),x=(0,on.A)(s,n.eventKey);if(f<p+h/2){var S=o.findIndex(function(j){return j.key===x.key}),w=S<=0?0:S-1,E=o[w].key;x=(0,on.A)(s,E)}var D=x.key,T=x,C=x.key,M=0,R=0;if(!y.includes(D))for(var A=0;A<m&&Qx(x);A+=1)x=x.parent,R+=1;var P=e.data,L=x.node,N=!0;return qx(x)&&x.level===0&&f<p+h/2&&a({dragNode:P,dropNode:L,dropPosition:-1})&&x.key===n.eventKey?M=-1:(T.children||[]).length&&y.includes(C)?a({dragNode:P,dropNode:L,dropPosition:0})?M=0:N=!1:R===0?m>-1.5?a({dragNode:P,dropNode:L,dropPosition:1})?M=1:N=!1:a({dragNode:P,dropNode:L,dropPosition:0})?M=0:a({dragNode:P,dropNode:L,dropPosition:1})?M=1:N=!1:a({dragNode:P,dropNode:L,dropPosition:1})?M=1:N=!1,{dropPosition:M,dropLevelOffset:R,dropTargetKey:x.key,dropTargetPos:x.pos,dragOverNodeKey:C,dropContainerKey:M===0?null:((u=x.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:N}}function Jf(t,e){if(t){var n=e.multiple;return n?t.slice():t.length?[t[0]]:t}}var Jx=function(e){return e};function tb(t,e){if(!t)return[];var n=e||{},r=n.processProps,i=r===void 0?Jx:r,a=Array.isArray(t)?t:[t];return a.map(function(o){var s=o.children,l=_objectWithoutProperties(o,Ux),c=tb(s,e);return React.createElement(TreeNode,_extends({key:l.key},i(l)),c)})}function Cl(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else if((0,vl.A)(t)==="object")e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0};else return(0,Li.Ay)(!1,"`checkedKeys` is not an array or an object"),null;return e}function tv(t,e){var n=new Set;function r(i){if(!n.has(i)){var a=(0,on.A)(e,i);if(a){n.add(i);var o=a.parent,s=a.node;s.disabled||o&&r(o.key)}}}return(t||[]).forEach(function(i){r(i)}),(0,pl.A)(n)}var Sl=z(38820),eb=10,El=function(t){Cx(n,t);var e=Ex(n);function n(){var r;yx(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),(0,it.A)(Mt(r),"destroyed",!1),(0,it.A)(Mt(r),"delayedDragEnterLogic",void 0),(0,it.A)(Mt(r),"loadingRetryTimes",{}),(0,it.A)(Mt(r),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,_t.AZ)()}),(0,it.A)(Mt(r),"dragStartMousePosition",null),(0,it.A)(Mt(r),"dragNodeProps",null),(0,it.A)(Mt(r),"currentMouseOverDroppableNodeKey",null),(0,it.A)(Mt(r),"listRef",I.createRef()),(0,it.A)(Mt(r),"onNodeDragStart",function(s,l){var c=r.state,u=c.expandedKeys,d=c.keyEntities,f=r.props.onDragStart,v=l.eventKey;r.dragNodeProps=l,r.dragStartMousePosition={x:s.clientX,y:s.clientY};var p=Nn(u,v);r.setState({draggingNodeKey:v,dragChildrenKeys:Zx(v,d),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(p),window.addEventListener("dragend",r.onWindowDragEnd),f?.({event:s,node:(0,_t.Hj)(l)})}),(0,it.A)(Mt(r),"onNodeDragEnter",function(s,l){var c=r.state,u=c.expandedKeys,d=c.keyEntities,f=c.dragChildrenKeys,v=c.flattenNodes,p=c.indent,h=r.props,g=h.onDragEnter,m=h.onExpand,y=h.allowDrop,x=h.direction,S=l.pos,w=l.eventKey;if(r.currentMouseOverDroppableNodeKey!==w&&(r.currentMouseOverDroppableNodeKey=w),!r.dragNodeProps){r.resetDragState();return}var E=qf(s,r.dragNodeProps,l,p,r.dragStartMousePosition,y,v,d,u,x),D=E.dropPosition,T=E.dropLevelOffset,C=E.dropTargetKey,M=E.dropContainerKey,R=E.dropTargetPos,A=E.dropAllowed,P=E.dragOverNodeKey;if(f.includes(C)||!A){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(L){clearTimeout(r.delayedDragEnterLogic[L])}),r.dragNodeProps.eventKey!==l.eventKey&&(s.persist(),r.delayedDragEnterLogic[S]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var L=(0,pl.A)(u),N=(0,on.A)(d,l.eventKey);N&&(N.children||[]).length&&(L=Qn(u,l.eventKey)),r.props.hasOwnProperty("expandedKeys")||r.setExpandedKeys(L),m?.(L,{node:(0,_t.Hj)(l),expanded:!0,nativeEvent:s.nativeEvent})}},800)),r.dragNodeProps.eventKey===C&&T===0){r.resetDragState();return}r.setState({dragOverNodeKey:P,dropPosition:D,dropLevelOffset:T,dropTargetKey:C,dropContainerKey:M,dropTargetPos:R,dropAllowed:A}),g?.({event:s,node:(0,_t.Hj)(l),expandedKeys:u})}),(0,it.A)(Mt(r),"onNodeDragOver",function(s,l){var c=r.state,u=c.dragChildrenKeys,d=c.flattenNodes,f=c.keyEntities,v=c.expandedKeys,p=c.indent,h=r.props,g=h.onDragOver,m=h.allowDrop,y=h.direction;if(r.dragNodeProps){var x=qf(s,r.dragNodeProps,l,p,r.dragStartMousePosition,m,d,f,v,y),S=x.dropPosition,w=x.dropLevelOffset,E=x.dropTargetKey,D=x.dropContainerKey,T=x.dropTargetPos,C=x.dropAllowed,M=x.dragOverNodeKey;u.includes(E)||!C||(r.dragNodeProps.eventKey===E&&w===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():S===r.state.dropPosition&&w===r.state.dropLevelOffset&&E===r.state.dropTargetKey&&D===r.state.dropContainerKey&&T===r.state.dropTargetPos&&C===r.state.dropAllowed&&M===r.state.dragOverNodeKey||r.setState({dropPosition:S,dropLevelOffset:w,dropTargetKey:E,dropContainerKey:D,dropTargetPos:T,dropAllowed:C,dragOverNodeKey:M}),g?.({event:s,node:(0,_t.Hj)(l)}))}}),(0,it.A)(Mt(r),"onNodeDragLeave",function(s,l){r.currentMouseOverDroppableNodeKey===l.eventKey&&!s.currentTarget.contains(s.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var c=r.props.onDragLeave;c?.({event:s,node:(0,_t.Hj)(l)})}),(0,it.A)(Mt(r),"onWindowDragEnd",function(s){r.onNodeDragEnd(s,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)}),(0,it.A)(Mt(r),"onNodeDragEnd",function(s,l){var c=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),c?.({event:s,node:(0,_t.Hj)(l)}),r.dragNodeProps=null,window.removeEventListener("dragend",r.onWindowDragEnd)}),(0,it.A)(Mt(r),"onNodeDrop",function(s,l){var c,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=r.state,f=d.dragChildrenKeys,v=d.dropPosition,p=d.dropTargetKey,h=d.dropTargetPos,g=d.dropAllowed;if(g){var m=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),p!==null){var y=(0,an.A)((0,an.A)({},(0,_t.N5)(p,r.getTreeNodeRequiredProps())),{},{active:((c=r.getActiveItem())===null||c===void 0?void 0:c.key)===p,data:(0,on.A)(r.state.keyEntities,p).node}),x=f.includes(p);(0,Li.Ay)(!x,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var S=bl(h),w={event:s,node:(0,_t.Hj)(y),dragNode:r.dragNodeProps?(0,_t.Hj)(r.dragNodeProps):null,dragNodesKeys:[r.dragNodeProps.eventKey].concat(f),dropToGap:v!==0,dropPosition:v+Number(S[S.length-1])};u||m?.(w),r.dragNodeProps=null}}}),(0,it.A)(Mt(r),"cleanDragState",function(){var s=r.state.draggingNodeKey;s!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null}),(0,it.A)(Mt(r),"triggerExpandActionExpand",function(s,l){var c=r.state,u=c.expandedKeys,d=c.flattenNodes,f=l.expanded,v=l.key,p=l.isLeaf;if(!(p||s.shiftKey||s.metaKey||s.ctrlKey)){var h=d.filter(function(m){return m.key===v})[0],g=(0,_t.Hj)((0,an.A)((0,an.A)({},(0,_t.N5)(v,r.getTreeNodeRequiredProps())),{},{data:h.data}));r.setExpandedKeys(f?Nn(u,v):Qn(u,v)),r.onNodeExpand(s,g)}}),(0,it.A)(Mt(r),"onNodeClick",function(s,l){var c=r.props,u=c.onClick,d=c.expandAction;d==="click"&&r.triggerExpandActionExpand(s,l),u?.(s,l)}),(0,it.A)(Mt(r),"onNodeDoubleClick",function(s,l){var c=r.props,u=c.onDoubleClick,d=c.expandAction;d==="doubleClick"&&r.triggerExpandActionExpand(s,l),u?.(s,l)}),(0,it.A)(Mt(r),"onNodeSelect",function(s,l){var c=r.state.selectedKeys,u=r.state,d=u.keyEntities,f=u.fieldNames,v=r.props,p=v.onSelect,h=v.multiple,g=l.selected,m=l[f.key],y=!g;y?h?c=Qn(c,m):c=[m]:c=Nn(c,m);var x=c.map(function(S){var w=(0,on.A)(d,S);return w?w.node:null}).filter(Boolean);r.setUncontrolledState({selectedKeys:c}),p?.(c,{event:"select",selected:y,node:l,selectedNodes:x,nativeEvent:s.nativeEvent})}),(0,it.A)(Mt(r),"onNodeCheck",function(s,l,c){var u=r.state,d=u.keyEntities,f=u.checkedKeys,v=u.halfCheckedKeys,p=r.props,h=p.checkStrictly,g=p.onCheck,m=l.key,y,x={event:"check",node:l,checked:c,nativeEvent:s.nativeEvent};if(h){var S=c?Qn(f,m):Nn(f,m),w=Nn(v,m);y={checked:S,halfChecked:w},x.checkedNodes=S.map(function(R){return(0,on.A)(d,R)}).filter(Boolean).map(function(R){return R.node}),r.setUncontrolledState({checkedKeys:S})}else{var E=(0,Sl.p)([].concat((0,pl.A)(f),[m]),!0,d),D=E.checkedKeys,T=E.halfCheckedKeys;if(!c){var C=new Set(D);C.delete(m);var M=(0,Sl.p)(Array.from(C),{checked:!1,halfCheckedKeys:T},d);D=M.checkedKeys,T=M.halfCheckedKeys}y=D,x.checkedNodes=[],x.checkedNodesPositions=[],x.halfCheckedKeys=T,D.forEach(function(R){var A=(0,on.A)(d,R);if(A){var P=A.node,L=A.pos;x.checkedNodes.push(P),x.checkedNodesPositions.push({node:P,pos:L})}}),r.setUncontrolledState({checkedKeys:D},!1,{halfCheckedKeys:T})}g?.(y,x)}),(0,it.A)(Mt(r),"onNodeLoad",function(s){var l,c=s.key,u=r.state.keyEntities,d=(0,on.A)(u,c);if(!(d!=null&&(l=d.children)!==null&&l!==void 0&&l.length)){var f=new Promise(function(v,p){r.setState(function(h){var g=h.loadedKeys,m=g===void 0?[]:g,y=h.loadingKeys,x=y===void 0?[]:y,S=r.props,w=S.loadData,E=S.onLoad;if(!w||m.includes(c)||x.includes(c))return null;var D=w(s);return D.then(function(){var T=r.state.loadedKeys,C=Qn(T,c);E?.(C,{event:"load",node:s}),r.setUncontrolledState({loadedKeys:C}),r.setState(function(M){return{loadingKeys:Nn(M.loadingKeys,c)}}),v()}).catch(function(T){if(r.setState(function(M){return{loadingKeys:Nn(M.loadingKeys,c)}}),r.loadingRetryTimes[c]=(r.loadingRetryTimes[c]||0)+1,r.loadingRetryTimes[c]>=eb){var C=r.state.loadedKeys;(0,Li.Ay)(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:Qn(C,c)}),v()}p(T)}),{loadingKeys:Qn(x,c)}})});return f.catch(function(){}),f}}),(0,it.A)(Mt(r),"onNodeMouseEnter",function(s,l){var c=r.props.onMouseEnter;c?.({event:s,node:l})}),(0,it.A)(Mt(r),"onNodeMouseLeave",function(s,l){var c=r.props.onMouseLeave;c?.({event:s,node:l})}),(0,it.A)(Mt(r),"onNodeContextMenu",function(s,l){var c=r.props.onRightClick;c&&(s.preventDefault(),c({event:s,node:l}))}),(0,it.A)(Mt(r),"onFocus",function(){var s=r.props.onFocus;r.setState({focused:!0});for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];s?.apply(void 0,c)}),(0,it.A)(Mt(r),"onBlur",function(){var s=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];s?.apply(void 0,c)}),(0,it.A)(Mt(r),"getTreeNodeRequiredProps",function(){var s=r.state,l=s.expandedKeys,c=s.selectedKeys,u=s.loadedKeys,d=s.loadingKeys,f=s.checkedKeys,v=s.halfCheckedKeys,p=s.dragOverNodeKey,h=s.dropPosition,g=s.keyEntities;return{expandedKeys:l||[],selectedKeys:c||[],loadedKeys:u||[],loadingKeys:d||[],checkedKeys:f||[],halfCheckedKeys:v||[],dragOverNodeKey:p,dropPosition:h,keyEntities:g}}),(0,it.A)(Mt(r),"setExpandedKeys",function(s){var l=r.state,c=l.treeData,u=l.fieldNames,d=(0,_t.$9)(c,s,u);r.setUncontrolledState({expandedKeys:s,flattenNodes:d},!0)}),(0,it.A)(Mt(r),"onNodeExpand",function(s,l){var c=r.state.expandedKeys,u=r.state,d=u.listChanging,f=u.fieldNames,v=r.props,p=v.onExpand,h=v.loadData,g=l.expanded,m=l[f.key];if(!d){var y=c.includes(m),x=!g;if((0,Li.Ay)(g&&y||!g&&!y,"Expand state not sync with index check"),c=x?Qn(c,m):Nn(c,m),r.setExpandedKeys(c),p?.(c,{node:l,expanded:x,nativeEvent:s.nativeEvent}),x&&h){var S=r.onNodeLoad(l);S&&S.then(function(){var w=(0,_t.$9)(r.state.treeData,c,f);r.setUncontrolledState({flattenNodes:w})}).catch(function(){var w=r.state.expandedKeys,E=Nn(w,m);r.setExpandedKeys(E)})}}}),(0,it.A)(Mt(r),"onListChangeStart",function(){r.setUncontrolledState({listChanging:!0})}),(0,it.A)(Mt(r),"onListChangeEnd",function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})}),(0,it.A)(Mt(r),"onActiveChange",function(s){var l=r.state.activeKey,c=r.props,u=c.onActiveChange,d=c.itemScrollOffset,f=d===void 0?0:d;l!==s&&(r.setState({activeKey:s}),s!==null&&r.scrollTo({key:s,offset:f}),u?.(s))}),(0,it.A)(Mt(r),"getActiveItem",function(){var s=r.state,l=s.activeKey,c=s.flattenNodes;return l===null?null:c.find(function(u){var d=u.key;return d===l})||null}),(0,it.A)(Mt(r),"offsetActiveKey",function(s){var l=r.state,c=l.flattenNodes,u=l.activeKey,d=c.findIndex(function(p){var h=p.key;return h===u});d===-1&&s<0&&(d=c.length),d=(d+s+c.length)%c.length;var f=c[d];if(f){var v=f.key;r.onActiveChange(v)}else r.onActiveChange(null)}),(0,it.A)(Mt(r),"onKeyDown",function(s){var l=r.state,c=l.activeKey,u=l.expandedKeys,d=l.checkedKeys,f=l.fieldNames,v=r.props,p=v.onKeyDown,h=v.checkable,g=v.selectable;switch(s.which){case Yr.A.UP:{r.offsetActiveKey(-1),s.preventDefault();break}case Yr.A.DOWN:{r.offsetActiveKey(1),s.preventDefault();break}}var m=r.getActiveItem();if(m&&m.data){var y=r.getTreeNodeRequiredProps(),x=m.data.isLeaf===!1||!!(m.data[f.children]||[]).length,S=(0,_t.Hj)((0,an.A)((0,an.A)({},(0,_t.N5)(c,y)),{},{data:m.data,active:!0}));switch(s.which){case Yr.A.LEFT:{x&&u.includes(c)?r.onNodeExpand({},S):m.parent&&r.onActiveChange(m.parent.key),s.preventDefault();break}case Yr.A.RIGHT:{x&&!u.includes(c)?r.onNodeExpand({},S):m.children&&m.children.length&&r.onActiveChange(m.children[0].key),s.preventDefault();break}case Yr.A.ENTER:case Yr.A.SPACE:{h&&!S.disabled&&S.checkable!==!1&&!S.disableCheckbox?r.onNodeCheck({},S,!d.includes(c)):!h&&g&&!S.disabled&&S.selectable!==!1&&r.onNodeSelect({},S);break}}}p?.(s)}),(0,it.A)(Mt(r),"setUncontrolledState",function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var u=!1,d=!0,f={};Object.keys(s).forEach(function(v){if(r.props.hasOwnProperty(v)){d=!1;return}u=!0,f[v]=s[v]}),u&&(!l||d)&&r.setState((0,an.A)((0,an.A)({},f),c))}}),(0,it.A)(Mt(r),"scrollTo",function(s){r.listRef.current.scrollTo(s)}),r}return bx(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var i=this.props,a=i.activeKey,o=i.itemScrollOffset,s=o===void 0?0:o;a!==void 0&&a!==this.state.activeKey&&(this.setState({activeKey:a}),a!==null&&this.scrollTo({key:a,offset:s}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var i=this.state,a=i.focused,o=i.flattenNodes,s=i.keyEntities,l=i.draggingNodeKey,c=i.activeKey,u=i.dropLevelOffset,d=i.dropContainerKey,f=i.dropTargetKey,v=i.dropPosition,p=i.dragOverNodeKey,h=i.indent,g=this.props,m=g.prefixCls,y=g.className,x=g.style,S=g.showLine,w=g.focusable,E=g.tabIndex,D=E===void 0?0:E,T=g.selectable,C=g.showIcon,M=g.icon,R=g.switcherIcon,A=g.draggable,P=g.checkable,L=g.checkStrictly,N=g.disabled,j=g.motion,F=g.loadData,G=g.filterTreeNode,W=g.height,K=g.itemHeight,B=g.scrollWidth,Q=g.virtual,q=g.titleRender,H=g.dropIndicatorRender,U=g.onContextMenu,Y=g.onScroll,tt=g.direction,nt=g.rootClassName,vt=g.rootStyle,ct=(0,Ff.A)(this.props,{aria:!0,data:!0}),$;A&&((0,vl.A)(A)==="object"?$=A:typeof A=="function"?$={nodeDraggable:A}:$={});var et={prefixCls:m,selectable:T,showIcon:C,icon:M,switcherIcon:R,draggable:$,draggingNodeKey:l,checkable:P,checkStrictly:L,disabled:N,keyEntities:s,dropLevelOffset:u,dropContainerKey:d,dropTargetKey:f,dropPosition:v,dragOverNodeKey:p,indent:h,direction:tt,dropIndicatorRender:H,loadData:F,filterTreeNode:G,titleRender:q,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return I.createElement(gl.Provider,{value:et},I.createElement("div",{className:En()(m,y,nt,(0,it.A)((0,it.A)((0,it.A)({},"".concat(m,"-show-line"),S),"".concat(m,"-focused"),a),"".concat(m,"-active-focused"),c!==null)),style:vt},I.createElement($x,Ln({ref:this.listRef,prefixCls:m,style:x,data:o,disabled:N,selectable:T,checkable:!!P,motion:j,dragging:l!==null,height:W,itemHeight:K,virtual:Q,focusable:w,focused:a,tabIndex:D,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:U,onScroll:Y,scrollWidth:B},this.getTreeNodeRequiredProps(),ct))))}}],[{key:"getDerivedStateFromProps",value:function(i,a){var o=a.prevProps,s={prevProps:i};function l(D){return!o&&i.hasOwnProperty(D)||o&&o[D]!==i[D]}var c,u=a.fieldNames;if(l("fieldNames")&&(u=(0,_t.AZ)(i.fieldNames),s.fieldNames=u),l("treeData")?c=i.treeData:l("children")&&((0,Li.Ay)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),c=(0,_t.vH)(i.children)),c){s.treeData=c;var d=(0,_t.cG)(c,{fieldNames:u});s.keyEntities=(0,an.A)((0,it.A)({},hr,$f),d.keyEntities)}var f=s.keyEntities||a.keyEntities;if(l("expandedKeys")||o&&l("autoExpandParent"))s.expandedKeys=i.autoExpandParent||!o&&i.defaultExpandParent?tv(i.expandedKeys,f):i.expandedKeys;else if(!o&&i.defaultExpandAll){var v=(0,an.A)({},f);delete v[hr];var p=[];Object.keys(v).forEach(function(D){var T=v[D];T.children&&T.children.length&&p.push(T.key)}),s.expandedKeys=p}else!o&&i.defaultExpandedKeys&&(s.expandedKeys=i.autoExpandParent||i.defaultExpandParent?tv(i.defaultExpandedKeys,f):i.defaultExpandedKeys);if(s.expandedKeys||delete s.expandedKeys,c||s.expandedKeys){var h=(0,_t.$9)(c||a.treeData,s.expandedKeys||a.expandedKeys,u);s.flattenNodes=h}if(i.selectable&&(l("selectedKeys")?s.selectedKeys=Jf(i.selectedKeys,i):!o&&i.defaultSelectedKeys&&(s.selectedKeys=Jf(i.defaultSelectedKeys,i))),i.checkable){var g;if(l("checkedKeys")?g=Cl(i.checkedKeys)||{}:!o&&i.defaultCheckedKeys?g=Cl(i.defaultCheckedKeys)||{}:c&&(g=Cl(i.checkedKeys)||{checkedKeys:a.checkedKeys,halfCheckedKeys:a.halfCheckedKeys}),g){var m=g,y=m.checkedKeys,x=y===void 0?[]:y,S=m.halfCheckedKeys,w=S===void 0?[]:S;if(!i.checkStrictly){var E=(0,Sl.p)(x,!0,f);x=E.checkedKeys,w=E.halfCheckedKeys}s.checkedKeys=x,s.halfCheckedKeys=w}}return l("loadedKeys")&&(s.loadedKeys=i.loadedKeys),s}}]),n}(I.Component);(0,it.A)(El,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Mx,allowDrop:function(){return!0},expandAction:!1}),(0,it.A)(El,"TreeNode",yl);const nb=El;function rb(t){return(0,Bf.css)({".moveable-control-box":{zIndex:999},".rc-tree":{margin:0,marginBottom:"15px",border:"1px solid transparent","&-focused:not(&-active-focused)":{borderColor:"cyan"},".rc-tree-title":{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},".rc-tree-treenode":{margin:0,padding:"1px",lineHeight:"24px",whiteSpace:"nowrap",listStyle:"none",outline:0,display:"flex",marginBottom:"3px",cursor:"pointer",".draggable":{color:"#333",MozUserSelect:"none",KhtmlUserSelect:"none",WebkitUserSelect:"none",userSelect:"none"},"&.drop-container":{"> .draggable::after":{position:"absolute",top:0,right:0,bottom:0,left:0,boxShadow:"inset 0 0 0 2px blue",content:'""'},"& ~ .rc-tree-treenode":{borderLeft:`2px solid ${t.components.input.borderColor}`}},"&.drop-target":{"& ~ .rc-tree-treenode":{borderLeft:"none"}},"&.filter-node":{"> .rc-tree-node-content-wrapper":{color:"#a60000 !important",fontWeight:"bold !important"}},ul:{margin:0,padding:"0 0 0 18px"},".rc-tree-node-content-wrapper":{position:"relative",display:"inline-block",height:"24px",margin:0,padding:0,textDecoration:"none",verticalAlign:"top",cursor:"grab",flexGrow:1,border:`1px solid ${t.components.input.borderColor}`,borderRadius:`${t.shape.radius.default}`,background:`${t.colors.background.secondary}`,minHeight:`${t.spacing.gridSize*4}px`,"&:hover":{border:`1px solid ${t.components.input.borderHover}`},"&.rc-tree-node-selected":{border:`1px solid ${t.colors.primary.border}`,opacity:1}},span:{height:"100%","&.rc-tree-checkbox, &.rc-tree-iconEle":{display:"inline-block",width:"16px",height:"16px",marginRight:"2px",lineHeight:"16px",verticalAlign:"-0.125em",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",border:"0 none",outline:"none",cursor:"pointer","&.rc-tree-icon__customize":{backgroundImage:"none"}},"&.rc-tree-switcher":{display:"flex",alignItems:"center",width:"16px",height:"auto",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",border:"0 none",outline:"none",cursor:"pointer","&.rc-tree-icon__customize":{backgroundImage:"none"},"&.rc-tree-switcher-noop":{cursor:"auto"},"&.rc-tree-switcher_open":{backgroundPosition:"-93px -56px"},"&.rc-tree-switcher_close":{backgroundPosition:"-75px -56px"}},"&.rc-tree-icon_loading":{marginRight:"2px",verticalAlign:"top",background:"url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7') no-repeat scroll 0 0 transparent"},"&.rc-tree-checkbox":{width:"13px",height:"13px",margin:"0 3px",backgroundPosition:"0 0","&-checked":{backgroundPosition:"-14px 0"},"&-indeterminate":{backgroundPosition:"-14px -28px"},"&-disabled":{backgroundPosition:"0 -56px"},"&.rc-tree-checkbox-checked.rc-tree-checkbox-disabled":{backgroundPosition:"-14px -56px"},"&.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled":{position:"relative",background:"#ccc",borderRadius:t.shape.radius.default,"&::after":{position:"absolute",top:"5px",left:"3px",width:"5px",height:0,border:"2px solid #fff",borderTop:0,borderLeft:0,WebkitTransform:"scale(1)",transform:"scale(1)",content:'" "'}}}}},"&:not(.rc-tree-show-line)":{".rc-tree-treenode":{".rc-tree-switcher-noop":{background:"none"}}},"&.rc-tree-show-line":{".rc-tree-treenode:not(:last-child)":{"> ul":{background:"url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0 repeat-y"},"> .rc-tree-switcher-noop":{backgroundPosition:"-56px -18px"}},".rc-tree-treenode:last-child":{"> .rc-tree-switcher-noop":{backgroundPosition:"-56px -36px"}}},"&-child-tree":{display:"none","&-open":{display:"block"}},"&-treenode-disabled":{"> span:not(.rc-tree-switcher), > a, > a span":{color:"#767676",cursor:"not-allowed"}},"&-treenode-active":{background:"rgba(0, 0, 0, 0.1)"},"&-node-selected":{opacity:.8},"&-icon__open":{marginRight:"2px",verticalAlign:"top",backgroundPosition:"-110px -16px"},"&-icon__close":{marginRight:"2px",verticalAlign:"top",backgroundPosition:"-110px 0"},"&-icon__docu":{marginRight:"2px",verticalAlign:"top",backgroundPosition:"-110px -32px"},"&-icon__customize":{marginRight:"2px",verticalAlign:"top"},"&-title":{display:"inline-block"},"&-indent":{display:"inline-block",height:0,verticalAlign:"bottom"},"&-indent-unit":{display:"inline-block",width:"16px"},"&-draggable-icon":{display:"inline-flex",justifyContent:"center",width:"16px"}}})}var ib=z(34316);const ab=({settings:t,nodeData:e,setAllowSelection:n})=>{const r=e.dataRef,i=e.dataRef.getName(),a=(0,yt.of)(ob),o=t.layer,s=()=>{if(t?.layer)return t.layer.scene},l=v=>{(v.parent??o).doAction(It.Delete,v),n(!1)},c=v=>{(v.parent??o).doAction(It.Duplicate,v),n(!1)},u=(v,p)=>{v.onChange({...v.options,name:p})},d=v=>!!s()?.canRename(v),f=v=>v.options.type;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ib.R,{name:i,onChange:v=>u(r,v),verifyLayerNameUniqueness:d??void 0}),(0,b.jsxs)("div",{className:a.textWrapper,children:["\xA0 ",f(r)]}),!e.children&&(0,b.jsxs)("div",{className:a.actionButtonsWrapper,children:[(0,b.jsx)(Ee.K,{name:"copy",title:(0,k.t)("canvas.tree-node-title.title-duplicate","Duplicate"),className:a.actionIcon,onClick:()=>c(r),tooltip:(0,k.t)("canvas.tree-node-title.tooltip-duplicate","Duplicate")}),(0,b.jsx)(Ee.K,{name:"trash-alt",title:(0,k.t)("canvas.tree-node-title.title-remove","Remove"),className:a.actionIcon,onClick:()=>l(r),tooltip:(0,k.t)("canvas.tree-node-title.tooltip-remove","Remove")})]})]})},ob=t=>({actionButtonsWrapper:(0,Z.css)({display:"flex",alignItems:"flex-end"}),actionIcon:(0,Z.css)({color:t.colors.text.secondary,cursor:"pointer","&:hover":{color:t.colors.text.primary}}),textWrapper:(0,Z.css)({display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",marginRight:t.spacing(1)}),layerName:(0,Z.css)({fontWeight:t.typography.fontWeightMedium,color:t.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:t.spacing(.5)})});function wl(t,e,n){let r=[];if(t)for(let i=t.elements.length;i--;i>=0){const a=t.elements[i],o={key:a.UID,title:a.getName(),selectable:!0,dataRef:a};a instanceof Be&&(o.children=wl(a,e,n)),r.push(o)}return r}function sb(t,e){const n=t.node.key,r=t.dragNode.key,i=t.node.pos.split("-"),a=t.dropPosition-Number(i[i.length-1]),o=(c,u,d)=>{c.forEach((f,v,p)=>{if(f.key===u){d(f,v,p);return}f.children&&o(f.children,u,d)})},s=[...e];let l;if(o(s,r,(c,u,d)=>{d.splice(u,1),l=c}),a===0)o(s,n,c=>{c.children=c.children||[],c.children.unshift(l)});else{let c=[],u=0;o(s,n,(d,f,v)=>{c=v,u=f}),a===-1?c.splice(u,0,l):c.splice(u+1,0,l)}return s}let ev=!0;const lb=({item:t})=>{const[e,n]=(0,I.useState)(wl(t?.settings?.scene.root)),[r,i]=(0,I.useState)(!0),[a,o]=(0,I.useState)([]),[s,l]=(0,I.useState)([]),c=(0,yt.$j)(),u=rb(c),d=(0,yt.of)(cb),f=c.colors.primary.border,{settings:v}=t,p=(0,I.useMemo)(()=>v?.selected?v.selected.map(R=>R?.getName()):[],[v?.selected]),h=(0,I.useMemo)(()=>v?.selected?v.selected.map(R=>R?.UID):[],[v?.selected]);if((0,I.useEffect)(()=>{n(wl(t?.settings?.scene.root,p,f)),l(h),E()},[t?.settings?.scene.root,f,p,h]),!v)return(0,b.jsx)("div",{children:(0,b.jsx)(k.x6,{i18nKey:"canvas.tree-navigation-editor.no-settings",children:"No settings"})});const g=v.layer;if(!g)return(0,b.jsx)("div",{children:(0,b.jsx)(k.x6,{i18nKey:"canvas.tree-navigation-editor.missing-layer",children:"Missing layer?"})});const m=(R,A)=>{ev&&t.settings?.scene&&Il(t.settings.scene,A.node.dataRef)},y=()=>!0,x=R=>{const A=R.node.pos.split("-"),P=R.dropPosition-Number(A[A.length-1]),L=R.dragNode.dataRef,N=R.node.dataRef,j=sb(R,e);n(j),Um(L,N,R.dropToGap,P)},S=R=>{o(R),i(!1)},w=R=>R.isLeaf?(0,b.jsx)(b.Fragment,{}):(0,b.jsx)(no.I,{name:"angle-right",title:(0,k.t)("canvas.tree-navigation-editor.switcher-icon.title-node-icon","Node Icon"),style:{transform:`rotate(${R.expanded?90:0}deg)`,fill:c.colors.text.primary}}),E=(R=!0)=>{ev=R},D=()=>{g.scene.clearCurrentSelection()},T=R=>(0,b.jsx)(ab,{nodeData:R,setAllowSelection:E,settings:v}),C=()=>{g.scene?Zm(g.scene):console.warn("no scene!")},M=Hi(v.scene.shouldShowAdvancedTypes).options;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Bf.Global,{styles:u}),(0,b.jsx)(nb,{selectable:!0,onSelect:m,draggable:!0,defaultExpandAll:!0,autoExpandParent:r,showIcon:!1,allowDrop:y,onDrop:x,expandedKeys:a,onExpand:S,treeData:e,titleRender:T,switcherIcon:w,selectedKeys:s,multiple:!0}),(0,b.jsxs)(Ge.B,{justifyContent:"space-between",direction:"row",children:[(0,b.jsx)("div",{className:d.addLayerButton,children:(0,b.jsx)(Of.r,{onChange:R=>uo(R,g),options:M,label:(0,k.t)("canvas.tree-navigation-editor.label-add-item","Add item")})}),p.length>0&&(0,b.jsx)(de.$n,{size:"sm",variant:"secondary",onClick:D,children:(0,b.jsx)(k.x6,{i18nKey:"canvas.tree-navigation-editor.clear-selection",children:"Clear selection"})}),p.length>1&&ce.$.featureToggles.canvasPanelNesting&&(0,b.jsx)(de.$n,{size:"sm",variant:"secondary",onClick:C,children:(0,b.jsx)(k.x6,{i18nKey:"canvas.tree-navigation-editor.frame-selection",children:"Frame selection"})})]})]})},cb=t=>({addLayerButton:(0,Z.css)({marginLeft:"18px",minWidth:"150px"})});function nv(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const i of e){if(i instanceof Be){n.currentLayer=i;break}if(i&&i.parent){n.currentLayer=i.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:[(0,k.t)("canvas.layer-editor.category-layer","Layer")],path:"--",values:i=>({getValue:a=>(0,Zt.get)(r,a),onChange:(a,o)=>{if(a==="type"&&o){console.warn("unable to change layer type");return}const s=(0,eo.Sf)(r,a,o);n.currentLayer?.onChange(s),n.currentLayer?.updateData(n.context)}}),build:(i,a)=>{const o=n.currentLayer;o&&o.isRoot(),i.addCustomEditor({id:"content",path:"root",name:(0,k.t)("canvas.layer-editor.name-elements","Elements"),editor:lb,settings:{scene:n,layer:n.currentLayer,selected:e}});const s={...a,options:r};gn.addBackground(i,s),gn.addBorder(i,s),o&&!o.isRoot()&&i.addCustomEditor({category:[(0,k.t)("canvas.layer-editor.category-layout","Layout")],id:"content",path:"__",name:(0,k.t)("canvas.layer-editor.name-constraints","Constraints"),editor:zf,settings:{scene:t.scene,element:o}})}}}var ub=z(54314),db=z(60208);const fb=({onTabChange:t})=>{const[e,n]=(0,I.useState)($t.SelectedElement),r=[{label:"Selected Element",value:$t.SelectedElement},{label:"Element Management",value:$t.ElementManagement}],i=a=>{t(a),n(a)};return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(ub.U,{children:r.map((a,o)=>(0,b.jsx)(db.o,{label:a.label,active:a.value===e,onChangeTab:()=>i(a.value)},`${a.value}-${o}`))})})};function vb(){const t=(0,Wi.A)(Xr),e=t?.panel.context?.instanceState,n=(0,yt.of)(hb),[r,i]=(0,I.useState)($t.SelectedElement),a=(0,I.useMemo)(()=>{const d=t?.panel,f=e;if(!(f&&f.scene)||!d)return new fl.C({id:"root",title:"root"});const v=p=>{r===$t.ElementManagement&&p.addNestedOptions(nv(e));const h=f.selectedConnection;h&&r===$t.SelectedElement&&p.addNestedOptions(Nf({category:["Selected connection"],connection:h,scene:f.scene}));const g=f.selected;if(g?.length===1&&r===$t.SelectedElement){const m=g[0];m&&!(m instanceof Be)&&p.addNestedOptions(If({category:[(0,k.t)("canvas.inline-edit-body.category-selected-element","Selected element ({{element}})",{element:m.options.name})],element:m,scene:f.scene}))}Tl(p)};return pb({options:d.props.options,onChange:d.props.onOptionsChange,data:d.props.data?.series},v)},[e,t,r]),o={marginLeft:15,marginTop:10},s=d=>{i(d)},l=Hi(e?.scene.shouldShowAdvancedTypes).options,c=e?.layer,u=e&&r===$t.SelectedElement&&e.selected.length===0&&e.selectedConnection===void 0;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:o,children:a.items.map(d=>d.render())}),(0,b.jsx)("div",{style:o,children:(0,b.jsx)(Of.r,{onChange:d=>uo(d,c),options:l,label:(0,k.t)("canvas.inline-edit-body.label-add-item","Add item")})}),(0,b.jsxs)("div",{style:o,children:[(0,b.jsx)(fb,{onTabChange:s}),a.categories.map(d=>rv(d)),u&&(0,b.jsx)("div",{className:n.selectElement,children:(0,b.jsx)(k.x6,{i18nKey:"canvas.inline-edit-body.please-select-an-element",children:"Please select an element"})})]})]})}function rv(t){return(0,I.createElement)(ex.D,{...t.props,key:t.props.id},(0,b.jsx)("div",{children:t.items.map(e=>e.render())}),t.categories.map(e=>rv(e)))}function pb(t,e){const n={data:t.data??[],options:t.options},r=new fl.C({id:"root",title:"root"}),i=o=>{if(o?.length){const s=o[0];let l=r.categories.find(c=>c.props.id===s);return l||(l=new fl.C({id:s,title:s}),r.categories.push(l)),l}return r},a={getValue:o=>(0,Zt.get)(t.options,o),onChange:(o,s)=>{t.onChange((0,eo.Sf)(t.options,o,s))}};return(0,nx.g5)(e,a,i,n),r}const hb=t=>({selectElement:(0,Z.css)({color:t.colors.text.secondary,padding:t.spacing(2)})}),Dl=10,iv=32;function gb({onClose:t,id:e,scene:n}){const r=n.root.div?.getBoundingClientRect(),i=window.innerHeight,a=window.innerWidth,o=(0,I.useRef)(null),s=(0,yt.of)(mb),l="inlineEditPanel"+e.toString(),c={width:400,height:400},u=r?.width??c.width+Dl*2,d=r?.x??0+u-c.width-Dl,f=r?.y??0+iv,v=Af.A.getObject(l,{x:d,y:f,w:c.width,h:c.height}),[p,h]=(0,I.useState)({width:v.w,height:v.h}),[g,m]=(0,I.useState)({x:v.x,y:v.y});(0,I.useEffect)(()=>{const w=a-p.width-Dl,E=i-p.height-iv;w<g.x&&w>0&&m({...g,x:w}),E<g.y&&E>0&&m({...g,y:E})},[i,a,g,p]);const y=(w,E)=>{let D=E.x<0?0:E.x,T=E.y<0?0:E.y;m({x:D,y:T}),S(D,T,p.width,p.height)},x=(w,E)=>{const{size:D}=E;h({width:D.width,height:D.height}),S(g.x,g.y,D.width,D.height)},S=(w,E,D,T)=>{Af.A.setObject(l,{x:w,y:E,w:D,h:T})};return(0,b.jsx)(ki.ZL,{children:(0,b.jsx)("div",{className:s.draggableWrapper,children:(0,b.jsx)(Jy(),{handle:"strong",onStop:y,position:{x:g.x,y:g.y},children:(0,b.jsx)(tx.Resizable,{height:p.height,width:p.width,onResize:x,children:(0,b.jsxs)("div",{className:s.inlineEditorContainer,style:{height:`${p.height}px`,width:`${p.width}px`},ref:o,children:[(0,b.jsxs)("strong",{className:s.inlineEditorHeader,children:[(0,b.jsx)("div",{className:s.placeholder}),(0,b.jsx)("div",{children:(0,b.jsx)(k.x6,{i18nKey:"canvas.inline-edit.canvas-inline-editor",children:"Canvas Inline Editor"})}),(0,b.jsx)(Ee.K,{name:"times",size:"xl",className:s.inlineEditorClose,onClick:t,tooltip:(0,k.t)("canvas.inline-edit.tooltip-close-inline-editor","Close inline editor")})]}),(0,b.jsx)("div",{className:s.inlineEditorContentWrapper,children:(0,b.jsx)("div",{className:s.inlineEditorContent,children:(0,b.jsx)(vb,{})})})]})})})})})}const mb=t=>({inlineEditorContainer:(0,Z.css)({display:"flex",flexDirection:"column",background:t.components.panel.background,border:`1px solid ${t.colors.border.weak}`,boxShadow:t.shadows.z3,zIndex:1e3,opacity:1,minWidth:"400px"}),draggableWrapper:(0,Z.css)({width:0,height:0}),inlineEditorHeader:(0,Z.css)({display:"flex",alignItems:"center",justifyContent:"center",background:t.colors.background.canvas,borderBottom:`1px solid ${t.colors.border.weak}`,height:"40px",cursor:"move"}),inlineEditorContent:(0,Z.css)({whiteSpace:"pre-wrap",padding:"10px"}),inlineEditorClose:(0,Z.css)({marginLeft:"auto"}),placeholder:(0,Z.css)({width:"24px",height:"24px",visibility:"hidden",marginRight:"auto"}),inlineEditorContentWrapper:(0,Z.css)({overflow:"scroll"})});let Ni=[],gr,ao=!1,oo=!1;const Xr=new af.m(1);class yb extends I.Component{constructor(e){super(e),this.subs=new f1.yU,this.needsReload=!1,this.isEditing=of.Ny.getSearchObject().editPanel!==void 0,this.onUpdateScene=i=>{const{onOptionsChange:a,options:o}=this.props;a({...o,root:i}),this.setState({refresh:this.state.refresh+1}),Xr.next({panel:this})},this.openInlineEdit=()=>{if(ao){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openInlineEdit:!0}),ao=!0},this.openSetBackground=i=>{if(oo){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openSetBackground:!0}),this.setState({contextMenuAnchorPoint:i}),oo=!0},this.tooltipCallback=i=>{this.scene.tooltip=i,this.forceUpdate()},this.moveableActionCallback=i=>{this.setState({moveableAction:i}),this.forceUpdate()},this.actionConfirmationCallback=()=>{this.forceUpdate()},this.closeInlineEdit=()=>{this.setState({openInlineEdit:!1}),ao=!1},this.closeSetBackground=()=>{this.setState({openSetBackground:!1}),oo=!1},this.setActivePanel=()=>{gr=this,Xr.next({panel:this})},this.renderInlineEdit=()=>(0,b.jsx)(gb,{onClose:()=>this.closeInlineEdit(),id:this.props.id,scene:this.scene}),this.renderSetBackground=()=>(0,b.jsx)(Zy,{onClose:()=>this.closeSetBackground(),scene:this.scene,anchorPoint:this.state.contextMenuAnchorPoint}),this.state={refresh:0,openInlineEdit:!1,openSetBackground:!1,contextMenuAnchorPoint:{x:0,y:0},moveableAction:!1};const n=(0,Bi.UA)().getCurrent(),r=this.props.options.inlineEditing&&n?.editable;this.scene=new Hy(this.props.options.root,r,this.props.options.showAdvancedTypes,this.props.options.panZoom,this.props.options.infinitePan,this.onUpdateScene,this),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),this.scene.inlineEditingCallback=this.openInlineEdit,this.scene.setBackgroundCallback=this.openSetBackground,this.scene.tooltipCallback=this.tooltipCallback,this.scene.moveableActionCallback=this.moveableActionCallback,this.scene.actionConfirmationCallback=this.actionConfirmationCallback,this.subs.add(this.props.eventBus.subscribe(Rf.sL,i=>{this.scene.clearCurrentSelection(),this.closeInlineEdit()})),this.subs.add(this.props.eventBus.subscribe(Rf.i0,i=>{this.props.id===i.payload&&(this.needsReload=!0,this.scene.clearCurrentSelection())}))}static{this.contextType=qr.e4}componentDidMount(){gr=this,Xr.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:e=>{e.length&&(gr=this,Xr.next({panel:this})),Ni.forEach(n=>{n!==gr&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),this.panelContext?.onInstanceStateChange({scene:this.scene,selected:e,layer:this.scene.root})}})),this.subs.add(this.scene.connections.selection.subscribe({next:e=>{this.context.instanceState&&(this.panelContext?.onInstanceStateChange({scene:this.scene,selected:this.context.instanceState.selected,selectedConnection:e,layer:this.scene.root}),e&&(gr=this,Xr.next({panel:this})),Ni.forEach(n=>{n!==gr&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),setTimeout(()=>{this.forceUpdate()}))}}))),Ni.push(this)}componentWillUnmount(){this.scene.subscription.unsubscribe(),this.subs.unsubscribe(),ao=!1,oo=!1,Ni=Ni.filter(e=>e.props.id!==gr?.props.id)}shouldComponentUpdate(e,n){const{width:r,height:i,data:a,options:o}=this.props;let s=!1;(r!==e.width||i!==e.height)&&(this.scene.updateSize(e.width,e.height),s=!0),a!==e.data&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),s=!0),o!==e.options&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),s=!0),this.state.refresh!==n.refresh&&(s=!0),this.state.openInlineEdit!==n.openInlineEdit&&(s=!0),this.state.openSetBackground!==n.openSetBackground&&(s=!0),this.state.moveableAction!==n.moveableAction&&(s=!0);const l=this.props.options.inlineEditing!==e.options.inlineEditing,c=this.props.options.showAdvancedTypes!==e.options.showAdvancedTypes,u=this.props.options.panZoom!==e.options.panZoom,d=this.props.options.infinitePan!==e.options.infinitePan;return(this.needsReload||l||c||u||d)&&(l&&this.scene.revId++,this.needsReload=!1,this.scene.load(e.options.root,e.options.inlineEditing,e.options.showAdvancedTypes,e.options.panZoom,e.options.infinitePan),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),s=!0),s}render(){return(0,b.jsxs)(b.Fragment,{children:[this.scene.render(),this.state.openInlineEdit&&this.renderInlineEdit(),this.state.openSetBackground&&this.renderSetBackground()]})}}var xb=z(34999);const bb="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/canvas/",Cb=({})=>{const t=(0,yt.of)(Sb);return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(Ge.B,{direction:"row",children:(0,b.jsx)(xb.F,{title:(0,k.t)("canvas.pan-zoom-help.title-pan-and-zoom-controls","Pan and zoom controls"),severity:"info",buttonContent:(0,b.jsx)(no.I,{name:"question-circle",size:"xl"}),className:t.alert,onRemove:()=>{const e=window.open(bb,"_blank","noopener,noreferrer");e&&(e.opener=null)},children:(0,b.jsx)(Ge.B,{direction:"column",children:(0,b.jsxs)("ul",{children:[(0,b.jsxs)("li",{children:[(0,b.jsx)(k.x6,{i18nKey:"canvas.pan-zoom-help.pan-title",children:"Pan:"}),(0,b.jsxs)("ul",{children:[(0,b.jsx)("li",{children:(0,b.jsx)(k.x6,{i18nKey:"canvas.pan-zoom-help.middle-mouse",children:"Middle mouse"})}),(0,b.jsx)("li",{children:(0,b.jsx)(k.x6,{i18nKey:"canvas.pan-zoom-help.ctrl-right-mouse",children:"CTRL + right mouse"})})]})]}),(0,b.jsx)("li",{children:(0,b.jsx)(k.x6,{i18nKey:"canvas.pan-zoom-help.zoom-scroll-wheel",children:"Zoom: Scroll wheel"})}),(0,b.jsx)("li",{children:(0,b.jsx)(k.x6,{i18nKey:"canvas.pan-zoom-help.reset-double-click",children:"Reset: Double click"})})]})})})})})},Sb=t=>({alert:(0,Z.css)({"& div":{padding:"4px",alignItems:"start"},marginBottom:"0px",marginTop:"5px",padding:"2px","ul > li":{marginLeft:"10px"}})}),Eb=t=>{const e=t?.pluginVersion??"";if(e===""){const n=t.options?.root;if(n?.elements)for(const r of n.elements)r.type==="text-box"&&(r.type="rectangle")}if(e.startsWith("11.0")){const n=t.options?.root;if(n?.elements)for(const r of n.elements)r.type==="ellipse"&&(r.config.backgroundColor&&(r.background=r.config.backgroundColor,delete r.config.backgroundColor),r.config.borderColor&&(r.border.color=r.config.borderColor,delete r.config.borderColor),r.config.width&&(r.border.width=r.config.width,delete r.config.width))}if(parseFloat(e)<=11.3){const n=t.options?.root;if(n?.elements){for(const r of n.elements)if(r.actions)for(const i of r.actions)i.options&&(i.fetch={...i.options},delete i.options)}}if(parseFloat(e)<=11.6){const n=t.options?.root;if(n?.elements)for(const r of n.elements)(r.oneClickMode===Ue.yd.Link||r.oneClickLinks)&&r.links?.length?r.links[0].oneClick=!0:r.oneClickMode===Ue.yd.Action&&r.actions?.length&&(r.actions[0].oneClick=!0),delete r.oneClickMode,delete r.oneClickLinks}return t.options},Tl=t=>{const e=[(0,k.t)("canvas.category-canvas","Canvas")];t.addBooleanSwitch({path:"inlineEditing",name:(0,k.t)("canvas.name-inline-editing","Inline editing"),category:e,description:(0,k.t)("canvas.description-inline-editing","Enable editing the panel directly"),defaultValue:!0}),t.addBooleanSwitch({path:"showAdvancedTypes",name:(0,k.t)("canvas.name-experimental-types","Experimental element types"),category:e,description:(0,k.t)("canvas.description-experimental-types","Enable selection of experimental element types"),defaultValue:!0}),t.addBooleanSwitch({path:"panZoom",name:(0,k.t)("canvas.name-pan-zoom","Pan and zoom"),category:e,description:(0,k.t)("canvas.description-pan-zoom","Enable pan and zoom"),defaultValue:!1,showIf:n=>ce.$.featureToggles.canvasPanelPanZoom}),t.addCustomEditor({id:"panZoomHelp",path:"panZoomHelp",name:"",category:e,editor:Cb,showIf:n=>ce.$.featureToggles.canvasPanelPanZoom&&n.panZoom}),t.addBooleanSwitch({path:"infinitePan",name:(0,k.t)("canvas.name-infinite-panning","Infinite panning"),category:e,description:(0,k.t)("canvas.description-infinite-panning","Enable infinite panning - useful for expansive canvases. Warning: this is an experimental feature and currently only works well with elements that are top / left constrained"),defaultValue:!1,showIf:n=>ce.$.featureToggles.canvasPanelPanZoom&&n.panZoom})},wb=new At.m(yb).setNoPadding().useFieldConfig({standardOptions:{[kt.uo.Mappings]:{settings:{icon:!0}},[kt.uo.Links]:{settings:{showOneClick:!1}},[kt.uo.Actions]:{settings:{showOneClick:!1}}}}).setMigrationHandler(Eb).setPanelOptions((t,e)=>{const n=e.instanceState;if(Tl(t),n&&n.scene){t.addNestedOptions(nv(n));const r=n.selected,i=n.selectedConnection;if(r?.length===1){const a=r[0];a instanceof Be||t.addNestedOptions(If({category:[(0,k.t)("canvas.category-selected-element","Selected element ({{element}})",{element:a.options.name})],element:a,scene:n.scene}))}i&&t.addNestedOptions(Nf({category:[(0,k.t)("canvas.category-selected-connection","Selected connection")],connection:i,scene:n.scene}))}})},86967:(yr,Le,z)=>{z.d(Le,{DO:()=>ce,en:()=>At,gR:()=>kt,xp:()=>k});var At=(pt=>(pt.Center="center",pt.Left="left",pt.LeftRight="leftright",pt.Right="right",pt.Scale="scale",pt))(At||{}),kt=(pt=>(pt.Bottom="bottom",pt.Center="center",pt.Scale="scale",pt.Top="top",pt.TopBottom="topbottom",pt))(kt||{}),k=(pt=>(pt.Contain="contain",pt.Cover="cover",pt.Fill="fill",pt.Original="original",pt.Tile="tile",pt))(k||{}),ce=(pt=>(pt.GET="GET",pt.POST="POST",pt.PUT="PUT",pt))(ce||{}),b=(pt=>(pt.Straight="straight",pt))(b||{});const Zt={vertices:[]},I={connections:[]},Se={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},16913:(yr,Le,z)=>{z.d(Le,{OG:()=>ce,u6:()=>kt});var At=z(73163);const kt=(b,Zt)=>{const I=[];if((b.config.links?.length??0)>0&&b.getLinks!=null){const Se=b.values[Zt],pt=b.display?b.display(Se):{text:`${Se}`,numeric:+Se},V=new Set;b.getLinks({calculatedValue:pt,valueRowIndex:Zt}).forEach(It=>{const $t=`${It.title}/${It.href}`;V.has($t)||(I.push(It),V.add($t))})}return I},k=b=>{},ce=(b,Zt,I,Se)=>{const pt=[],V=new Set;return(0,At.ko)(b,Zt,Zt.state.scopedVars,I,Zt.config.actions??[],{valueRowIndex:Se}).forEach($t=>{const ue=`${$t.title}`;V.has(ue)||(pt.push($t),V.add(ue))}),pt}}}]);

//# sourceMappingURL=canvasPanel.70c1e75d0d4dccae6288.js.map