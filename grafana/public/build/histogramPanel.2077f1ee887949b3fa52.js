"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[323],{47466:(Q,N,t)=>{t.d(N,{o:()=>S});var i=t(74848),o=t(22803),D=t(63142),F=t(77239);const S=({items:v,children:L,isPinned:r,scrollable:W=!1,maxHeight:I})=>{const U=(0,D.of)(P),x=W?{maxHeight:I,overflowY:"auto"}:{};return(0,i.jsxs)("div",{className:U.wrapper,style:x,children:[v.map(({label:G,value:J,color:a,colorIndicator:g,colorPlacement:l,isActive:p,lineStyle:e},f)=>(0,i.jsx)(F.B,{label:G,value:J,color:a,colorIndicator:g,colorPlacement:l,isActive:p,justify:"space-between",isPinned:r,lineStyle:e,showValueScroll:!W},f)),L]})},P=v=>({wrapper:(0,o.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${v.colors.border.weak}`,padding:v.spacing(1)})})},41530:(Q,N,t)=>{t.d(N,{A:()=>S});var i=t(74848),o=t(22803),D=t(63142),F=t(77239);const S=({item:v,isPinned:L})=>{const r=(0,D.of)(P),{label:W,value:I,color:U,colorIndicator:x}=v;return(0,i.jsx)("div",{className:r.wrapper,children:(0,i.jsx)(F.B,{label:W,value:I,color:U,colorIndicator:x,marginRight:"22px",isPinned:L})})},P=v=>({wrapper:(0,o.css)({display:"flex",flexDirection:"column",flex:1,padding:v.spacing(1),lineHeight:1})})},77239:(Q,N,t)=>{t.d(N,{B:()=>l});var i=t(74848),o=t(22803),D=t(96540),F=t(63142),S=t(53371),P=t(45967),v=t(64394),L=t(71479),r=t(55978),W=t(55302),I=(e=>(e[e.Leading=0]="Leading",e[e.Trailing=1]="Trailing",e))(I||{});const U=({color:e=v.F,colorIndicator:f=r.Ev,position:c=0,lineStyle:h})=>{const E=(0,F.of)(x);return f===r.fX.series?(0,i.jsx)(L.p,{color:e,lineStyle:h,className:c===0?E.leading:E.trailing}):(0,i.jsx)("span",{style:{backgroundColor:e},className:(0,o.cx)(c===0?E.leading:E.trailing,(0,W.L$)(f,E))})},x=e=>({leading:(0,o.css)({marginRight:e.spacing(.5)}),trailing:(0,o.css)({marginLeft:e.spacing(.5)}),value:(0,o.css)({width:"12px",height:"12px",borderRadius:e.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,o.css)({}),pie_1_4:(0,o.css)({}),pie_2_4:(0,o.css)({}),pie_3_4:(0,o.css)({}),marker_sm:(0,o.css)({width:"4px",height:"4px",borderRadius:e.shape.radius.circle,minWidth:"4px"}),marker_md:(0,o.css)({width:"8px",height:"8px",borderRadius:e.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,o.css)({width:"12px",height:"12px",borderRadius:e.shape.radius.circle,minWidth:"12px"})});var G=(e=>(e.label="label",e.value="value",e))(G||{});const J="Copied to clipboard",a=2*1e3,g=7,l=({label:e,value:f,color:c,colorIndicator:h,colorPlacement:E=r.lJ.first,justify:O="flex-start",isActive:$=!1,marginRight:w="0px",isPinned:k,lineStyle:X,showValueScroll:z})=>{const y=(0,F.of)(p,O,w),H=z?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"pre-line",wordBreak:"break-word",lineHeight:1.2},[Y,V]=(0,D.useState)(!1),[at,lt]=(0,D.useState)(null),[tt,et]=(0,D.useState)(!1),it=(0,D.useRef)(null),ft=(0,D.useRef)(null);(0,D.useEffect)(()=>{let K;return tt&&(K=setTimeout(()=>{et(!1)},a)),()=>{window.clearTimeout(K)}},[tt]);const gt=async(K,st)=>{if(!(navigator?.clipboard&&window.isSecureContext)){xt(K,st);return}try{await navigator.clipboard.writeText(K),lt({[`${st}`]:K}),et(!0)}catch{lt(null)}},xt=(K,st)=>{const Z=document.createElement("textarea");it.current?.appendChild(Z),Z.value=K,Z.focus(),Z.select();try{document.execCommand("copy")&&(lt({[`${st}`]:K}),et(!0))}catch(ht){console.error("Unable to copy to clipboard",ht)}Z.remove()},yt=K=>{K.currentTarget.offsetWidth<K.currentTarget.scrollWidth&&V(!0)},Et=()=>V(!1);return e.length*g>window.innerWidth/2&&(e=e.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,i.jsxs)("div",{className:y.contentWrapper,children:[(c||e)&&(0,i.jsxs)("div",{className:y.valueWrapper,children:[c&&E===r.lJ.first&&(0,i.jsx)(U,{color:c,colorIndicator:h,lineStyle:X}),k?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(P.m,{content:e,interactive:!1,show:Y,children:(0,i.jsxs)(i.Fragment,{children:[tt&&at?.label&&(0,i.jsx)(S.r,{placement:"top",referenceElement:it.current,children:J}),(0,i.jsx)("div",{className:(0,o.cx)(y.label,$&&y.activeSeries,navigator?.clipboard&&y.copy),onMouseEnter:yt,onMouseLeave:Et,onClick:()=>gt(e,"label"),ref:it,children:e})]})})}):(0,i.jsx)("div",{className:(0,o.cx)(y.label,$&&y.activeSeries),children:e})]}),(0,i.jsxs)("div",{className:y.valueWrapper,children:[c&&E===r.lJ.leading&&(0,i.jsx)(U,{color:c,colorIndicator:h,position:I.Leading,lineStyle:X}),k?(0,i.jsxs)(i.Fragment,{children:[tt&&at?.value&&(0,i.jsx)(S.r,{placement:"top",referenceElement:ft.current,children:J}),(0,i.jsx)("div",{className:(0,o.cx)(y.value,$,navigator?.clipboard&&y.copy),style:H,onClick:()=>gt(f?f.toString():"","value"),ref:ft,children:f})]}):(0,i.jsx)("div",{className:(0,o.cx)(y.value,$),style:H,children:f}),c&&E===r.lJ.trailing&&(0,i.jsx)(U,{color:c,colorIndicator:h,position:I.Trailing,lineStyle:X})]})]})},p=(e,f,c)=>({contentWrapper:(0,o.css)({display:"flex",alignItems:"start",justifyContent:f,marginRight:c}),label:(0,o.css)({color:e.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:e.spacing(2)}),value:(0,o.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,o.css)({display:"flex",alignItems:"center"}),activeSeries:(0,o.css)({fontWeight:e.typography.fontWeightBold,color:e.colors.text.maxContrast}),copy:(0,o.css)({cursor:"pointer"})})},73163:(Q,N,t)=>{t.d(N,{Xx:()=>x,ko:()=>I});var i=t(60519),o=t(32899),D=t(95004),F=t(63704),S=t(68143),P=t(43173),v=t(73427),L=t(86967),r=t(92367);const W=(a,g,l)=>(p,e,f)=>(g.variables&&l&&(p=p.replace(/\$\w+/g,c=>{const h=c.slice(1);return g.variables.some(E=>E.key===h)&&l[h]!=null?l[h]:c})),a(p,e,f)),I=(a,g,l,p,e,f)=>!e||e.length===0?[]:e.map(h=>{const E=(0,i.vd)(a,g,l),O={...l,__dataContext:E},$=(k,X,z)=>p(k,{...O,...X},z);return f.valueRowIndex!==void 0&&!isNaN(f.valueRowIndex)?E.value.rowIndex=f.valueRowIndex:E.value.calculatedValue=f.calculatedValue,{title:p(h.title,O),confirmation:k=>W($,h,k)(h.confirmation||`Are you sure you want to ${h.title}?`),onClick:(k,X,z)=>{let y=U(h,W($,h,z));try{(0,S.AI)().fetch(y).subscribe({error:H=>{v.lE.emit(o.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(H)},complete:()=>{v.lE.emit(o.r1.alertSuccess,["API call was successful"])}})}catch(H){v.lE.emit(o.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(H);return}},oneClick:h.oneClick??!1,style:{backgroundColor:h.style?.backgroundColor??P.$.theme2.colors.secondary.main},variables:h.variables}}).filter(h=>!!h),U=(a,g)=>{const l=new URL(G(g(a.fetch.url))),p={};let e={url:l.toString(),method:a.fetch.method,data:J(a,g),headers:p};return a.fetch.headers&&a.fetch.headers.forEach(([f,c])=>{p[g(f)]=g(c)}),a.fetch.queryParams&&(a.fetch.queryParams?.forEach(([f,c])=>{l.searchParams.append(g(f),g(c))}),e.url=l.toString()),p["X-Grafana-Action"]="1",e.headers=p,e},x=(a=[],g=[])=>({name:"Default field",type:D.PU.string,config:{links:a,actions:g},values:[]}),G=a=>{if(a.startsWith("/")){const l=F.sQ.sanitizeUrl(a);a=(0,r.z)(l,[])}return a},J=(a,g)=>{let l=a.fetch.body?g(a.fetch.body):"{}";return a.fetch.method===L.DO.GET&&(l=void 0),l}},86967:(Q,N,t)=>{t.d(N,{DO:()=>F,en:()=>i,gR:()=>o,xp:()=>D});var i=(r=>(r.Center="center",r.Left="left",r.LeftRight="leftright",r.Right="right",r.Scale="scale",r))(i||{}),o=(r=>(r.Bottom="bottom",r.Center="center",r.Scale="scale",r.Top="top",r.TopBottom="topbottom",r))(o||{}),D=(r=>(r.Contain="contain",r.Cover="cover",r.Fill="fill",r.Original="original",r.Tile="tile",r))(D||{}),F=(r=>(r.GET="GET",r.POST="POST",r.PUT="PUT",r))(F||{}),S=(r=>(r.Straight="straight",r))(S||{});const P={vertices:[]},v={connections:[]},L={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},65672:(Q,N,t)=>{t.r(N),t.d(N,{plugin:()=>It});var i=t(16207),o=t(74261),D=t(83340),F=t(64394),S=t(38809),P=t(95004),v=t(92745),L=t(79277),r=t(41069),W=t(99555),I=t(45013),U=t(81082),x=t(74848),G=t(96540),J=t(16515),a=t(39443),g=t(63142),l=t(739),p=t(69234),e=t(36613),f=t(79243),c=t(55386),h=t(76637),E=t(47276),O=t(53568),$=t(23414),w=t(61897),k=t(54735),X=t(92790),z=t(36192);const y={bucketCount:30,bucketOffset:0},H={fillOpacity:80,gradientMode:l.on.None,lineWidth:1};function Y(n,s){return Math.floor(n/s)*s}function V(n,s){return Math.ceil(n/s)*s}function at(n){return n.fields[0].type===P.PU.string?1:(0,f.h)(n.fields[1].values[0]-n.fields[0].values[0],9)}function lt(n){return n.fields[0].type===P.PU.string?1:(0,f.h)(n.fields[1].values[1]-n.fields[0].values[1],9)}const tt=(n,s)=>{let{min:u,max:d}=n.fields[2].config,m=new E.e,C=n.fields[0].type===P.PU.string,R=at(n),b=lt(n),B=b/R,j=b!==R,_=(T,M,A,ot,Pt,Ot)=>{let ct=T.axes[M]._space,dt=T.valToPos(T.data[0][0]+R,"x")-T.valToPos(T.data[0][0],"x"),ut=Y(u??T.data[0][0],R),Bt=V(d??T.data[0][T.data[0].length-1]+R,R),Dt=[],Ft=Math.ceil(ct/dt);for(let Lt=0,Tt=ut;Tt<=Bt;Lt++,Tt+=R)!(Lt%Ft)&&Dt.push(Tt);return Dt};m.addScale({scaleKey:"x",isTime:!1,distribution:C?l.L4.Ordinal:j?l.L4.Log:l.L4.Linear,log:2,orientation:l.Lt.Horizontal,direction:l.ON.Right,range:j?(T,M,A)=>e.A.rangeLog(M,A*B,2,!0):(T,M,A)=>{u!=null&&(M=u),d!=null&&(A=d);let ot=T.data[0][T.data[0].length-1];return M=V(M,R),A=!C&&A===ot?A+R:Y(A,R),[M,A]}}),m.addScale({scaleKey:"y",isTime:!1,distribution:l.L4.Linear,orientation:l.Lt.Vertical,direction:l.ON.Up,softMin:0});const q=n.fields[0].display,rt=T=>(0,c.cN)(q(T));m.addAxis({scaleKey:"x",isTime:!1,placement:l.vM.Bottom,incrs:C?[1]:j?void 0:o.rW,splits:j||C?void 0:_,values:C?(T,M)=>M:(T,M)=>{const A=M.map(rt),ot=A.reduce((dt,ut)=>Math.max((0,O.kD)(ut,$.pi).width,dt),0),Ot=T.bbox.width/((ot+10)*devicePixelRatio),ct=Math.ceil(A.length/Ot);return A.map((dt,ut)=>ut%ct===0?dt:null)},theme:s});let pt=n.fields[2].display;m.addAxis({scaleKey:"y",isTime:!1,placement:l.vM.Left,formatValue:(T,M)=>(0,c.cN)(pt(T,M)),theme:s}),m.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Ct=(0,z.ro)(et(n));m.setStackingGroups(Ct);let vt=e.A.paths.bars({align:1,size:[1,1/0]}),Mt=0;for(let T=2;T<n.fields.length;T++){const M=n.fields[T];M.state=M.state??{},M.state.seriesIndex=Mt++;const A={...H,...M.config.custom},ot="y",Pt=(0,h.Qi)(M),ct=(0,h.lz)(M,s).color;m.addSeries({scaleKey:ot,lineWidth:A.lineWidth,lineColor:ct,fillOpacity:A.fillOpacity,theme:s,colorMode:Pt,pathBuilder:vt,show:!A.hideFrom?.viz,gradientMode:A.gradientMode,thresholds:M.config.thresholds,hardMin:M.config.min,hardMax:M.config.max,softMin:A.axisSoftMin,softMax:A.axisSoftMax,dataFrameFieldIndex:M.state.origin})}return m},et=n=>({...n,fields:n.fields.filter(s=>s.name!==o.dA)}),it=(n,s)=>{for(let u=1;u<s.fields.length;u++){let d=s.fields[u].values;for(let m=0;m<d.length;m++)d[m]===0&&(d[m]=null)}return(0,z.bq)(s,n.getStackingGroups())};class ft extends G.Component{constructor(s){super(s),this.state=this.prepState(s)}prepState(s,u=!0){const{alignedFrame:d}=s,m=u?tt(d,this.props.theme):this.state.config,C=et(d),R=it(m,C);return{alignedFrame:d,alignedData:R,config:m,xMinOnlyFrame:C}}renderLegend(s){const{legend:u}=this.props;if(!s||u.showLegend===!1)return null;const d=this.props.options.combine?[this.props.alignedFrame]:this.props.rawSeries;return(0,x.jsx)(w.$,{data:d,config:s,maxHeight:"35%",maxWidth:"60%",...u})}componentDidUpdate(s){const{structureRev:u,alignedFrame:d,bucketSize:m,bucketCount:C}=this.props;if(d!==s.alignedFrame){const R=this.state.config==null||C!==s.bucketCount||m!==s.bucketSize||this.props.options!==s.options||this.state.config===void 0||u!==s.structureRev||!u,b=this.prepState(this.props,R);this.setState(b)}}render(){const{width:s,height:u,children:d,alignedFrame:m}=this.props,{config:C}=this.state;return C?(0,x.jsx)(k.KU,{width:s,height:u,legend:this.renderLegend(C),children:(R,b)=>(0,x.jsx)(X.Z,{config:this.state.config,data:this.state.alignedData,width:R,height:b,children:d?d(C,m,this.state.xMinOnlyFrame):null})}):null}}var gt=t(55302),xt=t(39064),yt=t(61048),Et=t(41530),K=t(47466),st=t(16913),Z=t(76234);const ht=({series:n,xMinOnlyFrame:s,dataIdxs:u,seriesIdx:d,mode:m=l.$N.Single,sortOrder:C=l.xB.None,isPinned:R,maxHeight:b})=>{const B=n.fields[0],j=n.fields[1],{display:_}=B.config.unit!=null?B:j,{display:q}=j.config.unit!=null?j:B,rt=(0,c.cN)(_(B.values[u[0]])),mt=(0,c.cN)(q(j.values[u[1]])),pt=B.config.custom?.hideFrom?.tooltip?null:{label:"Bucket",value:`${rt} - ${mt}`},Ct=(0,G.useMemo)(()=>(0,gt.cp)(s.fields,B,u,d,m,C),[s.fields,B,u,d,m,C]);let vt;if(R&&d!=null){const Mt=n.fields[d],T=u[d],M=(0,st.u6)(Mt,T);vt=(0,x.jsx)(xt.S,{dataLinks:M})}return(0,x.jsxs)(yt.i,{children:[pt!=null&&(0,x.jsx)(Et.A,{item:pt,isPinned:R}),(0,x.jsx)(K.o,{items:Ct,isPinned:R,scrollable:(0,Z.T5)({mode:m,maxHeight:b}),maxHeight:b}),vt]})},Ut=({data:n,options:s,width:u,height:d})=>{const m=(0,g.$j)(),C=(0,G.useMemo)(()=>{if(!n.series.length)return;if(n.series.forEach((B,j)=>{B.fields.forEach((_,q)=>{_.state={..._.state,origin:{frameIndex:j,fieldIndex:q}}})}),(0,J.Fm)(n.series),n.series.length===1||n.series.every(B=>B.meta?.type===a.m.HeatmapCells||B.meta?.type===a.m.HeatmapRows)){const B=n.series.map(j=>(0,o.ix)(j)).filter(j=>j!=null);if(B.length)return(0,o.cg)((0,o.EO)(B),m)}const b=(0,o.p3)(n.series,s,m);if(b)return(0,o.cg)(b,m)},[n.series,s,m]);if(!C||!C.fields.length)return(0,x.jsx)("div",{className:"panel-empty",children:(0,x.jsx)("p",{children:(0,x.jsx)(v.x6,{i18nKey:"histogram.histogram-panel.no-histogram-found-in-response",children:"No histogram found in response"})})});const R=at(C);return(0,x.jsx)(ft,{options:s,theme:m,legend:s.legend,rawSeries:n.series,structureRev:n.structureRev,width:u,height:d,alignedFrame:C,bucketSize:R,bucketCount:s.bucketCount,children:(b,B,j)=>(0,x.jsx)(x.Fragment,{children:s.tooltip.mode!==l.$N.None&&(0,x.jsx)(p.xl,{config:b,hoverMode:s.tooltip.mode===l.$N.Single?p.b3.xOne:p.b3.xAll,render:(_,q,rt,mt=!1)=>(0,x.jsx)(ht,{series:C,xMinOnlyFrame:j,dataIdxs:q,seriesIdx:rt,mode:s.tooltip.mode,sortOrder:s.tooltip.sort,isPinned:mt,maxHeight:s.tooltip.maxHeight}),maxWidth:s.tooltip.maxWidth})})})},St={stacking:{mode:l.gs.None,group:"A"}};var Rt=t(2543);const At=(n,s,u,d)=>{if(s==="graph"&&u.angular.xaxis?.mode==="histogram"){const{fieldConfig:C,options:R}=Wt({...u.angular,fieldConfig:d});return n.fieldConfig=C,R}return{}};function Wt(n){let s={};const u={legend:{displayMode:l.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:l.$N.Single,sort:l.xB.None},combine:!1};return n.stack&&(s.stacking={mode:n.percentage?l.gs.Percent:l.gs.Normal,group:St.stacking.group},u.combine=!1),{fieldConfig:{defaults:(0,Rt.omitBy)({custom:s},Rt.isNil),overrides:[]},options:u}}function nt(n){if(n?.length!==1)return!1;const s=n[0];if(s.fields.length<3||!(0,o.NX)(s.fields[0].name)||!(0,o.H1)(s.fields[1].name))return!1;for(const u of s.fields)if(u.type!==P.PU.number)return!1;return!0}const It=new i.m(Ut).setPanelChangeHandler(At).setPanelOptions(n=>{const s=[(0,v.t)("histogram.category-histogram","Histogram")];n.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",category:s,description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(u,d)=>nt(d)}).addNumberInput({path:"bucketCount",name:o.Rt.bucketCount.name,category:s,description:o.Rt.bucketCount.description,settings:{placeholder:`Default: ${y.bucketCount}`,min:0},showIf:(u,d)=>!nt(d)}).addNumberInput({path:"bucketSize",name:o.Rt.bucketSize.name,category:s,description:o.Rt.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:y.bucketSize,showIf:(u,d)=>!nt(d)}).addNumberInput({path:"bucketOffset",name:o.Rt.bucketOffset.name,category:s,description:o.Rt.bucketOffset.description,settings:{placeholder:`Default: ${y.bucketOffset}`,min:0},showIf:(u,d)=>!nt(d)}).addBooleanSwitch({path:"combine",name:o.Rt.combine.name,category:s,description:o.Rt.combine.description,defaultValue:y.combine,showIf:(u,d)=>!nt(d)}),L.D(n),r.H(n)}).useFieldConfig({standardOptions:{[D.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:F.Y.PaletteClassic}},[D.uo.Links]:{settings:{showOneClick:!0}}},useCustomConfig:n=>{const s=H,u=(0,W.P)(),d=[(0,v.t)("histogram.category-histogram","Histogram")];n.addCustomEditor({id:"stacking",path:"stacking",name:(0,v.t)("histogram.name-stacking","Stacking"),category:d,defaultValue:St.stacking,editor:U.m,override:U.m,settings:{options:u.stacking},process:S.hS,shouldApply:m=>m.type===P.PU.number,showIf:(m,C)=>!nt(C)}).addSliderInput({path:"lineWidth",name:(0,v.t)("histogram.name-line-width","Line width"),category:d,defaultValue:s.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:(0,v.t)("histogram.name-fill-opacity","Fill opacity"),category:d,defaultValue:s.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:(0,v.t)("histogram.name-gradient-mode","Gradient mode"),category:d,defaultValue:u.fillGradient[0].value,settings:{options:u.fillGradient}}),I.e(n)}})},16913:(Q,N,t)=>{t.d(N,{OG:()=>F,u6:()=>o});var i=t(73163);const o=(S,P)=>{const v=[];if((S.config.links?.length??0)>0&&S.getLinks!=null){const L=S.values[P],r=S.display?S.display(L):{text:`${L}`,numeric:+L},W=new Set;S.getLinks({calculatedValue:r,valueRowIndex:P}).forEach(I=>{const U=`${I.title}/${I.href}`;W.has(U)||(v.push(I),W.add(U))})}return v},D=S=>{},F=(S,P,v,L)=>{const r=[],W=new Set;return(0,i.ko)(S,P,P.state.scopedVars,v,P.config.actions??[],{valueRowIndex:L}).forEach(U=>{const x=`${U.title}`;W.has(x)||(r.push(U),W.add(x))}),r}},76234:(Q,N,t)=>{t.d(N,{B_:()=>I,Fg:()=>G,O2:()=>x,T5:()=>J});var i=t(95004),o=t(16515),D=t(63409),F=t(34455),S=t(55386),P=t(11576),v=t(406),L=t(739),r=t(70332);function W(a){let g=new Map;return a.map(p=>({...p,fields:p.fields.map(e=>{if(e.type===i.PU.enum){let f=(0,r.M)(e.config,e.type),c=g.get(f);c||(c=[],g.set(f,c));let h=e.values.toArray().slice(),E=e.config.type.enum.text;if(c.length>0)for(let O=0;O<h.length;O++)h[O]+=c.length;return c.push(...E),e.config.type.enum.text=c,{...e,values:h}}return e})}))}function I(a,g,l,p){if(!a?.length)return null;(0,o.Fm)(a);let e=p!=null;p!=null&&p>0&&(a=[{...a[0],fields:[a[0].fields[p],...a[0].fields.filter((E,O)=>O!==p)]}]);for(let E of a)for(let O of E.fields)O.type===i.PU.time&&typeof O.values[0]!="number"&&(O.values=(0,v.s7)(O,{destinationType:i.PU.time}).values);let f=0;t:for(let E of a)for(let O of E.fields)if(O.type===i.PU.enum&&++f>1){a=W(a);break t}let c;const h=[];for(let E of a){const O=[];let $=!1,w=!1,k=e?E:(0,D.M)({frame:E,refFieldPseudoMin:l?.from.valueOf(),refFieldPseudoMax:l?.to.valueOf()});const X=(0,F.C)(k).fields;for(let z=0;z<(X?.length||0);z++){const y=X[z];switch(y.type){case i.PU.time:$=!0,O.push(y);break;case i.PU.number:w=e?z>0:!0,c={...y,values:y.values.map(V=>Number.isFinite(V)||V==null?V:null)},O.push(c);break;case i.PU.enum:w=!0;case i.PU.string:c={...y,values:y.values},O.push(c);break;case i.PU.boolean:w=!0;const H=y.config?.custom??{},Y={...y.config,max:1,min:0,custom:H};H.lineInterpolation!==L.dx.StepBefore&&(H.lineInterpolation=L.dx.StepAfter),c={...y,config:Y,type:i.PU.number,values:y.values.map(V=>V==null?V:V?1:0)},(0,S.j9)(Y.unit)||(Y.unit="bool",c.display=(0,P.J)({field:c,theme:g})),O.push(c);break}}(e||$)&&w&&h.push({...E,length:k.length,fields:O})}return h.length?(x(h,g,0),U(h,g),h):null}const U=(a,g)=>{const{palette:l}=g.visualization;for(const p of a)for(const e of p.fields)if(e.type===i.PU.enum){const f=l[e.state?.seriesIndex%l.length],c=g.visualization.getColorByName(f),h=e.config.type.enum;h.color=Array(h.text.length).fill(c),e.display=(0,P.J)({field:e,theme:g})}},x=(a,g,l)=>{let p=0;a.forEach(e=>{e.fields.forEach((f,c)=>{c!==l&&(f.type===i.PU.number||f.type===i.PU.boolean||f.type===i.PU.enum)&&(f.state={...f.state,seriesIndex:p++},f.display=(0,P.J)({field:f,theme:g}))})})};function G(a,g){return!a||!a.length?[g]:a.map(l=>l?.length?l:g)}const J=a=>a.mode===L.$N.Multi&&a.maxHeight!=null}}]);

//# sourceMappingURL=histogramPanel.2077f1ee887949b3fa52.js.map