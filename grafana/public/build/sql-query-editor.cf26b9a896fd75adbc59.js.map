{"version":3,"file":"sql-query-editor.cf26b9a896fd75adbc59.js","mappings":"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","sources":["webpack://grafana/./packages/grafana-sql/src/components/ConfirmModal.tsx","webpack://grafana/./packages/grafana-sql/src/components/DatasetSelector.tsx","webpack://grafana/./packages/grafana-sql/src/components/TableSelector.tsx","webpack://grafana/./packages/grafana-sql/src/components/QueryHeader.tsx","webpack://grafana/./packages/grafana-sql/src/components/query-editor-raw/QueryEditorRaw.tsx","webpack://grafana/./packages/grafana-sql/src/components/query-editor-raw/QueryValidator.tsx","webpack://grafana/./packages/grafana-sql/src/components/query-editor-raw/QueryToolbox.tsx","webpack://grafana/./packages/grafana-sql/src/components/query-editor-raw/RawEditor.tsx","webpack://grafana/./packages/grafana-sql/src/utils/getColumnsWithIndices.ts","webpack://grafana/./packages/grafana-sql/src/utils/useSqlChange.ts","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/GroupByRow.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/SQLGroupByRow.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/OrderByRow.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/SQLOrderByRow.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/AwesomeQueryBuilder.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/WhereRow.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/SQLWhereRow.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/SelectColumn.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/SelectCustomFunctionParameters.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/SelectFunctionParameters.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/SelectRow.tsx","webpack://grafana/./packages/grafana-sql/src/components/visual-query-builder/VisualEditor.tsx","webpack://grafana/./packages/grafana-sql/src/components/QueryEditor.tsx","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorHeader.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorList.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorRow.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorRows.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorStack.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/FlexItem.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/InlineSelect.js","webpack://grafana/./node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/InputGroup.js"],"sourcesContent":["import { css } from '@emotion/css';\nimport { useRef, useEffect } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { Button, Icon, Modal, useStyles2 } from '@grafana/ui';\n\ntype ConfirmModalProps = {\n  isOpen: boolean;\n  onCancel?: () => void;\n  onDiscard?: () => void;\n  onCopy?: () => void;\n};\nexport function ConfirmModal({ isOpen, onCancel, onDiscard, onCopy }: ConfirmModalProps) {\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const styles = useStyles2(getStyles);\n\n  // Moved from grafana/ui\n  useEffect(() => {\n    // for some reason autoFocus property did no work on this button, but this does\n    if (isOpen) {\n      buttonRef.current?.focus();\n    }\n  }, [isOpen]);\n\n  return (\n    <Modal\n      title={\n        <div className={styles.modalHeaderTitle}>\n          <Icon name=\"exclamation-triangle\" size=\"lg\" />\n          <span className={styles.titleText}>\n            <Trans i18nKey=\"grafana-sql.components.confirm-modal.warning\">Warning</Trans>\n          </span>\n        </div>\n      }\n      onDismiss={onCancel}\n      isOpen={isOpen}\n    >\n      <p>\n        <Trans i18nKey=\"grafana-sql.components.confirm-modal.builder-mode\">\n          Builder mode does not display changes made in code. The query builder will display the last changes you made\n          in builder mode.\n        </Trans>\n      </p>\n      <p>\n        <Trans i18nKey=\"grafana-sql.components.confirm-modal.clipboard\">\n          Do you want to copy your code to the clipboard?\n        </Trans>\n      </p>\n      <Modal.ButtonRow>\n        <Button type=\"button\" variant=\"secondary\" onClick={onCancel} fill=\"outline\">\n          <Trans i18nKey=\"grafana-sql.components.confirm-modal.cancel\">Cancel</Trans>\n        </Button>\n        <Button variant=\"destructive\" type=\"button\" onClick={onDiscard} ref={buttonRef}>\n          <Trans i18nKey=\"grafana-sql.components.confirm-modal.discard-code-and-switch\">Discard code and switch</Trans>\n        </Button>\n        <Button variant=\"primary\" onClick={onCopy}>\n          <Trans i18nKey=\"grafana-sql.components.confirm-modal.copy-code-and-switch\">Copy code and switch</Trans>\n        </Button>\n      </Modal.ButtonRow>\n    </Modal>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  titleText: css({\n    paddingLeft: theme.spacing(2),\n  }),\n  modalHeaderTitle: css({\n    fontSize: theme.typography.size.lg,\n    float: 'left',\n    paddingTop: theme.spacing(1),\n    margin: theme.spacing(0, 2),\n  }),\n});\n","import { useEffect } from 'react';\nimport { useAsync } from 'react-use';\n\nimport { SelectableValue } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { Select } from '@grafana/ui';\n\nimport { DB, ResourceSelectorProps, SQLDialect, toOption } from '../types';\n\nimport { isSqlDatasourceDatabaseSelectionFeatureFlagEnabled } from './QueryEditorFeatureFlag.utils';\n\nexport interface DatasetSelectorProps extends ResourceSelectorProps {\n  db: DB;\n  dataset: string | undefined;\n  preconfiguredDataset: string;\n  dialect: SQLDialect;\n  onChange: (v: SelectableValue) => void;\n  inputId?: string | undefined;\n}\n\nexport const DatasetSelector = ({\n  dataset,\n  db,\n  dialect,\n  onChange,\n  inputId,\n  preconfiguredDataset,\n}: DatasetSelectorProps) => {\n  /*\n    The behavior of this component - for MSSQL and MySQL datasources - is based on whether the user chose to create a datasource\n    with or without a default database (preconfiguredDataset). If the user configured a default database, this selector\n    should only allow that single preconfigured database option to be selected. If the user chose to NOT assign/configure a default database,\n    then the user should be able to use this component to choose between multiple databases available to the datasource.\n  */\n  // `hasPreconfigCondition` is true if either 1) the sql datasource has a preconfigured default database,\n  // OR if 2) the datasource is Postgres. In either case the only option available to the user is the preconfigured database.\n  const hasPreconfigCondition = !!preconfiguredDataset || dialect === 'postgres';\n\n  const state = useAsync(async () => {\n    if (isSqlDatasourceDatabaseSelectionFeatureFlagEnabled()) {\n      // If a default database is already configured for a MSSQL or MySQL data source, OR the data source is Postgres, no need to fetch other databases.\n      if (hasPreconfigCondition) {\n        // Set the current database to the preconfigured database.\n        onChange(toOption(preconfiguredDataset));\n        return [toOption(preconfiguredDataset)];\n      }\n    }\n\n    // If there is no preconfigured database, but there is a selected dataset, set the current database to the selected dataset.\n    if (dataset) {\n      onChange(toOption(dataset));\n    }\n\n    // Otherwise, fetch all databases available to the datasource.\n    const datasets = await db.datasets();\n    return datasets.map(toOption);\n  }, []);\n\n  useEffect(() => {\n    if (!isSqlDatasourceDatabaseSelectionFeatureFlagEnabled()) {\n      // Set default dataset when values are fetched\n      if (!dataset) {\n        if (state.value && state.value[0]) {\n          onChange(state.value[0]);\n        }\n      } else {\n        if (state.value && state.value.find((v) => v.value === dataset) === undefined) {\n          // if value is set and newly fetched values does not contain selected value\n          if (state.value.length > 0) {\n            onChange(state.value[0]);\n          }\n        }\n      }\n    }\n  }, [state.value, onChange, dataset]);\n\n  return (\n    <Select\n      aria-label={t('grafana-sql.components.dataset-selector.aria-label-dataset-selector', 'Dataset selector')}\n      inputId={inputId}\n      value={dataset}\n      options={state.value}\n      onChange={onChange}\n      disabled={state.loading}\n      isLoading={state.loading}\n      menuShouldPortal={true}\n    />\n  );\n};\n","import { useAsync } from 'react-use';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { Select } from '@grafana/ui';\n\nimport { DB, ResourceSelectorProps } from '../types';\n\nexport interface TableSelectorProps extends ResourceSelectorProps {\n  db: DB;\n  table: string | undefined;\n  dataset: string | undefined;\n  onChange: (v: SelectableValue) => void;\n  inputId?: string | undefined;\n}\n\nexport const TableSelector = ({ db, dataset, table, className, onChange, inputId }: TableSelectorProps) => {\n  const state = useAsync(async () => {\n    // No need to attempt to fetch tables for an unknown dataset.\n    if (!dataset) {\n      return [];\n    }\n\n    const tables = await db.tables(dataset);\n    return tables.map(toOption);\n  }, [dataset]);\n\n  return (\n    <Select\n      className={className}\n      disabled={state.loading}\n      aria-label={t('grafana-sql.components.table-selector.aria-label-table-selector', 'Table selector')}\n      inputId={inputId}\n      data-testid={selectors.components.SQLQueryEditor.headerTableSelector}\n      value={table}\n      options={state.value}\n      onChange={onChange}\n      isLoading={state.loading}\n      menuShouldPortal={true}\n      placeholder={\n        state.loading\n          ? t('grafana-sql.components.table-selector.placeholder-loading', 'Loading tables')\n          : t('grafana-sql.components.table-selector.placeholder-select-table', 'Select table')\n      }\n      allowCustomValue={true}\n    />\n  );\n};\n","import { useCallback, useId, useState } from 'react';\nimport { useCopyToClipboard } from 'react-use';\n\nimport { SelectableValue } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t, Trans } from '@grafana/i18n';\nimport { EditorField, EditorHeader, EditorMode, EditorRow, FlexItem, InlineSelect } from '@grafana/plugin-ui';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Button, InlineSwitch, RadioButtonGroup, Tooltip, Space } from '@grafana/ui';\n\nimport { QueryWithDefaults } from '../defaults';\nimport { SQLQuery, QueryFormat, QueryRowFilter, QUERY_FORMAT_OPTIONS, DB, SQLDialect } from '../types';\n\nimport { ConfirmModal } from './ConfirmModal';\nimport { DatasetSelector } from './DatasetSelector';\nimport { isSqlDatasourceDatabaseSelectionFeatureFlagEnabled } from './QueryEditorFeatureFlag.utils';\nimport { TableSelector } from './TableSelector';\n\nexport interface QueryHeaderProps {\n  db: DB;\n  dialect: SQLDialect;\n  isQueryRunnable: boolean;\n  onChange: (query: SQLQuery) => void;\n  onQueryRowChange: (queryRowFilter: QueryRowFilter) => void;\n  onRunQuery: () => void;\n  preconfiguredDataset: string;\n  query: QueryWithDefaults;\n  queryRowFilter: QueryRowFilter;\n}\n\nexport function QueryHeader({\n  db,\n  dialect,\n  isQueryRunnable,\n  onChange,\n  onQueryRowChange,\n  onRunQuery,\n  preconfiguredDataset,\n  query,\n  queryRowFilter,\n}: QueryHeaderProps) {\n  const { editorMode } = query;\n  const [_, copyToClipboard] = useCopyToClipboard();\n  const [showConfirm, setShowConfirm] = useState(false);\n  const toRawSql = db.toRawSql;\n\n  const htmlId = useId();\n\n  const editorModes = [\n    {\n      label: t('grafana-sql.components.query-header.editor-modes.label-builder', 'Builder'),\n      value: EditorMode.Builder,\n    },\n    { label: t('grafana-sql.components.query-header.editor-modes.label-code', 'Code'), value: EditorMode.Code },\n  ];\n\n  const onEditorModeChange = useCallback(\n    (newEditorMode: EditorMode) => {\n      if (newEditorMode === EditorMode.Code) {\n        reportInteraction('grafana_sql_editor_mode_changed', {\n          datasource: query.datasource?.type,\n          selectedEditorMode: EditorMode.Code,\n        });\n      }\n\n      if (editorMode === EditorMode.Code) {\n        setShowConfirm(true);\n        return;\n      }\n      onChange({ ...query, editorMode: newEditorMode });\n    },\n    [editorMode, onChange, query]\n  );\n\n  const onFormatChange = (e: SelectableValue) => {\n    const next = { ...query, format: e.value !== undefined ? e.value : QueryFormat.Table };\n\n    reportInteraction('grafana_sql_format_changed', {\n      datasource: query.datasource?.type,\n      selectedFormat: next.format,\n    });\n    onChange(next);\n  };\n\n  const onDatasetChange = (e: SelectableValue) => {\n    if (e.value === query.dataset) {\n      return;\n    }\n\n    const next = {\n      ...query,\n      dataset: e.value,\n      table: undefined,\n      sql: undefined,\n      rawSql: '',\n    };\n\n    onChange(next);\n  };\n\n  const onTableChange = (e: SelectableValue) => {\n    if (e.value === query.table) {\n      return;\n    }\n\n    const next: SQLQuery = {\n      ...query,\n      table: e.value,\n      sql: undefined,\n      rawSql: '',\n    };\n\n    onChange(next);\n  };\n\n  const datasetDropdownIsAvailable = () => {\n    if (dialect === 'influx') {\n      return false;\n    }\n    // If the feature flag is DISABLED, && the datasource is Postgres (`dialect = 'postgres`),\n    // we want to hide the dropdown - as per previous behavior.\n    if (!isSqlDatasourceDatabaseSelectionFeatureFlagEnabled() && dialect === 'postgres') {\n      return false;\n    }\n\n    return true;\n  };\n\n  return (\n    <>\n      <EditorHeader>\n        <InlineSelect\n          label={t('grafana-sql.components.query-header.label-format', 'Format')}\n          value={query.format}\n          placeholder={t('grafana-sql.components.query-header.placeholder-select-format', 'Select format')}\n          menuShouldPortal\n          onChange={onFormatChange}\n          options={QUERY_FORMAT_OPTIONS}\n        />\n\n        {editorMode === EditorMode.Builder && (\n          <>\n            <InlineSwitch\n              id={`sql-filter-${htmlId}`}\n              label={t('grafana-sql.components.query-header.label-filter', 'Filter')}\n              data-testid={selectors.components.SQLQueryEditor.headerFilterSwitch}\n              transparent={true}\n              showLabel={true}\n              value={queryRowFilter.filter}\n              onChange={(ev) => {\n                if (!(ev.target instanceof HTMLInputElement)) {\n                  return;\n                }\n\n                reportInteraction('grafana_sql_filter_toggled', {\n                  datasource: query.datasource?.type,\n                  displayed: ev.target.checked,\n                });\n\n                onQueryRowChange({ ...queryRowFilter, filter: ev.target.checked });\n              }}\n            />\n\n            <InlineSwitch\n              id={`sql-group-${htmlId}`}\n              label={t('grafana-sql.components.query-header.label-group', 'Group')}\n              data-testid={selectors.components.SQLQueryEditor.headerGroupSwitch}\n              transparent={true}\n              showLabel={true}\n              value={queryRowFilter.group}\n              onChange={(ev) => {\n                if (!(ev.target instanceof HTMLInputElement)) {\n                  return;\n                }\n\n                reportInteraction('grafana_sql_group_toggled', {\n                  datasource: query.datasource?.type,\n                  displayed: ev.target.checked,\n                });\n\n                onQueryRowChange({ ...queryRowFilter, group: ev.target.checked });\n              }}\n            />\n\n            <InlineSwitch\n              id={`sql-order-${htmlId}`}\n              label={t('grafana-sql.components.query-header.label-order', 'Order')}\n              data-testid={selectors.components.SQLQueryEditor.headerOrderSwitch}\n              transparent={true}\n              showLabel={true}\n              value={queryRowFilter.order}\n              onChange={(ev) => {\n                if (!(ev.target instanceof HTMLInputElement)) {\n                  return;\n                }\n\n                reportInteraction('grafana_sql_order_toggled', {\n                  datasource: query.datasource?.type,\n                  displayed: ev.target.checked,\n                });\n\n                onQueryRowChange({ ...queryRowFilter, order: ev.target.checked });\n              }}\n            />\n\n            <InlineSwitch\n              id={`sql-preview-${htmlId}`}\n              label={t('grafana-sql.components.query-header.label-preview', 'Preview')}\n              data-testid={selectors.components.SQLQueryEditor.headerPreviewSwitch}\n              transparent={true}\n              showLabel={true}\n              value={queryRowFilter.preview}\n              onChange={(ev) => {\n                if (!(ev.target instanceof HTMLInputElement)) {\n                  return;\n                }\n\n                reportInteraction('grafana_sql_preview_toggled', {\n                  datasource: query.datasource?.type,\n                  displayed: ev.target.checked,\n                });\n\n                onQueryRowChange({ ...queryRowFilter, preview: ev.target.checked });\n              }}\n            />\n          </>\n        )}\n\n        <FlexItem grow={1} />\n\n        {isQueryRunnable ? (\n          <Button icon=\"play\" variant=\"primary\" size=\"sm\" onClick={() => onRunQuery()}>\n            <Trans i18nKey=\"grafana-sql.components.query-header.run-query\">Run query</Trans>\n          </Button>\n        ) : (\n          <Tooltip\n            theme=\"error\"\n            content={\n              <Trans i18nKey=\"grafana-sql.components.query-header.content-invalid-query\">\n                Your query is invalid. Check below for details. <br />\n                However, you can still run this query.\n              </Trans>\n            }\n            placement=\"top\"\n          >\n            <Button icon=\"exclamation-triangle\" variant=\"secondary\" size=\"sm\" onClick={() => onRunQuery()}>\n              <Trans i18nKey=\"grafana-sql.components.query-header.run-query\">Run query</Trans>\n            </Button>\n          </Tooltip>\n        )}\n\n        <RadioButtonGroup options={editorModes} size=\"sm\" value={editorMode} onChange={onEditorModeChange} />\n\n        <ConfirmModal\n          isOpen={showConfirm}\n          onCopy={() => {\n            reportInteraction('grafana_sql_editor_mode_changed', {\n              datasource: query.datasource?.type,\n              selectedEditorMode: EditorMode.Builder,\n              type: 'copy',\n            });\n\n            setShowConfirm(false);\n            copyToClipboard(query.rawSql!);\n            onChange({\n              ...query,\n              rawSql: toRawSql(query),\n              editorMode: EditorMode.Builder,\n            });\n          }}\n          onDiscard={() => {\n            reportInteraction('grafana_sql_editor_mode_changed', {\n              datasource: query.datasource?.type,\n              selectedEditorMode: EditorMode.Builder,\n              type: 'discard',\n            });\n\n            setShowConfirm(false);\n            onChange({\n              ...query,\n              rawSql: toRawSql(query),\n              editorMode: EditorMode.Builder,\n            });\n          }}\n          onCancel={() => {\n            reportInteraction('grafana_sql_editor_mode_changed', {\n              datasource: query.datasource?.type,\n              selectedEditorMode: EditorMode.Builder,\n              type: 'cancel',\n            });\n\n            setShowConfirm(false);\n          }}\n        />\n      </EditorHeader>\n\n      {editorMode === EditorMode.Builder && (\n        <>\n          <Space v={0.5} />\n          <EditorRow>\n            {datasetDropdownIsAvailable() && (\n              <EditorField label={t('grafana-sql.components.query-header.label-dataset', 'Dataset')} width={25}>\n                <DatasetSelector\n                  db={db}\n                  inputId={`sql-dataset-${htmlId}`}\n                  dataset={query.dataset}\n                  dialect={dialect}\n                  preconfiguredDataset={preconfiguredDataset}\n                  onChange={onDatasetChange}\n                />\n              </EditorField>\n            )}\n            <EditorField label={t('grafana-sql.components.query-header.label-table', 'Table')} width={25}>\n              <TableSelector\n                db={db}\n                inputId={`sql-tableselect-${htmlId}`}\n                dataset={query.dataset || preconfiguredDataset}\n                table={query.table}\n                onChange={onTableChange}\n              />\n            </EditorField>\n          </EditorRow>\n        </>\n      )}\n    </>\n  );\n}\n","import { useCallback, useEffect, useRef } from 'react';\nimport * as React from 'react';\n\nimport { LanguageDefinition, SQLEditor } from '@grafana/plugin-ui';\n\nimport { SQLQuery } from '../../types';\n\ntype Props = {\n  query: SQLQuery;\n  onChange: (value: SQLQuery, processQuery: boolean) => void;\n  children?: (props: { formatQuery: () => void }) => React.ReactNode;\n  width?: number;\n  height?: number;\n  editorLanguageDefinition: LanguageDefinition;\n};\n\nexport function QueryEditorRaw({ children, onChange, query, width, height, editorLanguageDefinition }: Props) {\n  // We need to pass query via ref to SQLEditor as onChange is executed via monacoEditor.onDidChangeModelContent callback, not onChange property\n  const queryRef = useRef<SQLQuery>(query);\n  useEffect(() => {\n    queryRef.current = query;\n  }, [query]);\n\n  const onRawQueryChange = useCallback(\n    (rawSql: string, processQuery: boolean) => {\n      const newQuery = {\n        ...queryRef.current,\n        rawQuery: true,\n        rawSql,\n      };\n      onChange(newQuery, processQuery);\n    },\n    [onChange]\n  );\n\n  return (\n    <SQLEditor\n      width={width}\n      height={height}\n      query={query.rawSql!}\n      onChange={onRawQueryChange}\n      language={editorLanguageDefinition}\n    >\n      {children}\n    </SQLEditor>\n  );\n}\n","import { css } from '@emotion/css';\nimport { useState, useMemo, useEffect } from 'react';\nimport { useAsyncFn, useDebounce } from 'react-use';\n\nimport { formattedValueToString, getValueFormat, TimeRange } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { Icon, Spinner, useTheme2 } from '@grafana/ui';\n\nimport { DB, SQLQuery, ValidationResults } from '../../types';\n\nexport interface QueryValidatorProps {\n  db: DB;\n  query: SQLQuery;\n  range?: TimeRange;\n  onValidate: (isValid: boolean) => void;\n}\n\nexport function QueryValidator({ db, query, onValidate, range }: QueryValidatorProps) {\n  const [validationResult, setValidationResult] = useState<ValidationResults | null>();\n  const theme = useTheme2();\n  const valueFormatter = useMemo(() => getValueFormat('bytes'), []);\n\n  const styles = useMemo(() => {\n    return {\n      error: css({\n        color: theme.colors.error.text,\n        fontSize: theme.typography.bodySmall.fontSize,\n        fontFamily: theme.typography.fontFamilyMonospace,\n      }),\n      valid: css({\n        color: theme.colors.success.text,\n      }),\n      info: css({\n        color: theme.colors.text.secondary,\n      }),\n    };\n  }, [theme]);\n\n  const [state, validateQuery] = useAsyncFn(\n    async (q: SQLQuery) => {\n      if (q.rawSql?.trim() === '') {\n        return null;\n      }\n\n      return await db.validateQuery(q, range);\n    },\n    [db]\n  );\n\n  const [,] = useDebounce(\n    async () => {\n      const result = await validateQuery(query);\n      if (result) {\n        setValidationResult(result);\n      }\n\n      return null;\n    },\n    1000,\n    [query, validateQuery]\n  );\n\n  useEffect(() => {\n    if (validationResult?.isError) {\n      onValidate(false);\n    }\n    if (validationResult?.isValid) {\n      onValidate(true);\n    }\n  }, [validationResult, onValidate]);\n\n  if (!state.value && !state.loading) {\n    return null;\n  }\n\n  const error = state.value?.error ? processErrorMessage(state.value.error) : '';\n\n  return (\n    <>\n      {state.loading && (\n        <div className={styles.info}>\n          <Spinner inline={true} size=\"xs\" />{' '}\n          <Trans i18nKey=\"grafana-sql.components.query-validator.validating-query\">Validating query...</Trans>\n        </div>\n      )}\n      {!state.loading && state.value && (\n        <>\n          <>\n            {state.value.isValid && state.value.statistics && (\n              <div className={styles.valid}>\n                <Trans\n                  i18nKey=\"grafana-sql.components.query-validator.query-will-process\"\n                  values={{ bytes: formattedValueToString(valueFormatter(state.value.statistics.TotalBytesProcessed)) }}\n                >\n                  <Icon name=\"check\" /> This query will process <strong>{'{{bytes}}'}</strong> when run.\n                </Trans>\n              </div>\n            )}\n          </>\n\n          <>{state.value.isError && <div className={styles.error}>{error}</div>}</>\n        </>\n      )}\n    </>\n  );\n}\n\nfunction processErrorMessage(error: string) {\n  const splat = error.split(':');\n  if (splat.length > 2) {\n    return splat.slice(2).join(':');\n  }\n  return error;\n}\n","import { css } from '@emotion/css';\nimport { useMemo, useState } from 'react';\n\nimport { t } from '@grafana/i18n';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Stack, Icon, IconButton, Tooltip, useTheme2 } from '@grafana/ui';\n\nimport { QueryValidator, QueryValidatorProps } from './QueryValidator';\n\ninterface QueryToolboxProps extends Omit<QueryValidatorProps, 'onValidate'> {\n  showTools?: boolean;\n  isExpanded?: boolean;\n  onFormatCode?: () => void;\n  onExpand?: (expand: boolean) => void;\n  onValidate?: (isValid: boolean) => void;\n}\n\nexport function QueryToolbox({ showTools, onFormatCode, onExpand, isExpanded, ...validatorProps }: QueryToolboxProps) {\n  const theme = useTheme2();\n  const [validationResult, setValidationResult] = useState<boolean>();\n\n  const styles = useMemo(() => {\n    return {\n      container: css({\n        border: `1px solid ${theme.colors.border.medium}`,\n        borderTop: 'none',\n        padding: theme.spacing(0.5, 0.5, 0.5, 0.5),\n        display: 'flex',\n        flexGrow: 1,\n        justifyContent: 'space-between',\n        fontSize: theme.typography.bodySmall.fontSize,\n      }),\n      error: css({\n        color: theme.colors.error.text,\n        fontSize: theme.typography.bodySmall.fontSize,\n        fontFamily: theme.typography.fontFamilyMonospace,\n      }),\n      valid: css({\n        color: theme.colors.success.text,\n      }),\n      info: css({\n        color: theme.colors.text.secondary,\n      }),\n      hint: css({\n        color: theme.colors.text.disabled,\n        whiteSpace: 'nowrap',\n        cursor: 'help',\n      }),\n    };\n  }, [theme]);\n\n  let style = {};\n\n  if (!showTools && validationResult === undefined) {\n    style = { height: 0, padding: 0, visibility: 'hidden' };\n  }\n\n  return (\n    <div className={styles.container} style={style}>\n      <div>\n        {validatorProps.onValidate && (\n          <QueryValidator\n            {...validatorProps}\n            onValidate={(result: boolean) => {\n              setValidationResult(result);\n              validatorProps.onValidate!(result);\n            }}\n          />\n        )}\n      </div>\n      {showTools && (\n        <div>\n          <Stack gap={1}>\n            {onFormatCode && (\n              <IconButton\n                onClick={() => {\n                  reportInteraction('grafana_sql_query_formatted', {\n                    datasource: validatorProps.query.datasource?.type,\n                  });\n                  onFormatCode();\n                }}\n                name=\"brackets-curly\"\n                size=\"xs\"\n                tooltip={t('grafana-sql.components.query-toolbox.tooltip-format-query', 'Format query')}\n              />\n            )}\n            {onExpand && (\n              <IconButton\n                onClick={() => {\n                  reportInteraction('grafana_sql_editor_expand', {\n                    datasource: validatorProps.query.datasource?.type,\n                    expanded: !isExpanded,\n                  });\n\n                  onExpand(!isExpanded);\n                }}\n                name={isExpanded ? 'angle-up' : 'angle-down'}\n                size=\"xs\"\n                tooltip={\n                  isExpanded\n                    ? t('grafana-sql.components.query-toolbox.tooltip-collapse', 'Collapse editor')\n                    : t('grafana-sql.components.query-toolbox.tooltip-expand', 'Expand editor')\n                }\n              />\n            )}\n            <Tooltip\n              content={t(\n                'grafana-sql.components.query-toolbox.content-hit-ctrlcmdreturn-to-run-query',\n                'Hit CTRL/CMD+Return to run query'\n              )}\n            >\n              <Icon className={styles.hint} name=\"keyboard\" />\n            </Tooltip>\n          </Stack>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport { useMemo, useState } from 'react';\nimport { useMeasure } from 'react-use';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Modal, useStyles2, useTheme2 } from '@grafana/ui';\n\nimport { SQLQuery, QueryEditorProps } from '../../types';\n\nimport { QueryEditorRaw } from './QueryEditorRaw';\nimport { QueryToolbox } from './QueryToolbox';\n\ninterface RawEditorProps extends Omit<QueryEditorProps, 'onChange'> {\n  onRunQuery: () => void;\n  onChange: (q: SQLQuery, processQuery: boolean) => void;\n  onValidate: (isValid: boolean) => void;\n  queryToValidate: SQLQuery;\n}\n\nexport function RawEditor({ db, query, onChange, onRunQuery, onValidate, queryToValidate, range }: RawEditorProps) {\n  const theme = useTheme2();\n  const styles = useStyles2(getStyles);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [toolboxRef, toolboxMeasure] = useMeasure<HTMLDivElement>();\n  const [editorRef, editorMeasure] = useMeasure<HTMLDivElement>();\n\n  const editorLanguageDefinition = useMemo(() => db.getEditorLanguageDefinition(), [db]);\n\n  const renderQueryEditor = (width?: number, height?: number) => {\n    return (\n      <QueryEditorRaw\n        editorLanguageDefinition={editorLanguageDefinition}\n        query={query}\n        width={width}\n        height={height ? height - toolboxMeasure.height : undefined}\n        onChange={onChange}\n      >\n        {({ formatQuery }) => {\n          return (\n            <div ref={toolboxRef}>\n              <QueryToolbox\n                db={db}\n                query={queryToValidate}\n                onValidate={onValidate}\n                onFormatCode={formatQuery}\n                showTools\n                range={range}\n                onExpand={setIsExpanded}\n                isExpanded={isExpanded}\n              />\n            </div>\n          );\n        }}\n      </QueryEditorRaw>\n    );\n  };\n\n  const renderEditor = (standalone = false) => {\n    return standalone ? (\n      <AutoSizer>\n        {({ width, height }) => {\n          return renderQueryEditor(width, height);\n        }}\n      </AutoSizer>\n    ) : (\n      <div ref={editorRef}>{renderQueryEditor()}</div>\n    );\n  };\n\n  const renderPlaceholder = () => {\n    return (\n      <div\n        style={{\n          width: editorMeasure.width,\n          height: editorMeasure.height,\n          background: theme.colors.background.primary,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <Trans i18nKey=\"grafana-sql.components.raw-editor.render-placeholder.editing-in-expanded-code-editor\">\n          Editing in expanded code editor\n        </Trans>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      {isExpanded ? renderPlaceholder() : renderEditor()}\n      {isExpanded && (\n        <Modal\n          title={t('grafana-sql.components.raw-editor.title-query-num', 'Query {{queryNum}}', {\n            queryNum: query.refId,\n          })}\n          closeOnBackdropClick={false}\n          closeOnEscape={false}\n          className={styles.modal}\n          contentClassName={styles.modalContent}\n          isOpen={isExpanded}\n          onDismiss={() => {\n            reportInteraction('grafana_sql_editor_expand', {\n              datasource: query.datasource?.type,\n              expanded: false,\n            });\n            setIsExpanded(false);\n          }}\n        >\n          {renderEditor(true)}\n        </Modal>\n      )}\n    </>\n  );\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    modal: css({\n      width: '95vw',\n      height: '95vh',\n    }),\n    modalContent: css({\n      height: '100%',\n      paddingTop: 0,\n    }),\n  };\n}\n","import { SelectableValue } from '@grafana/data';\nimport { t } from '@grafana/i18n';\n\nimport { SQLQuery } from '../types';\n\nexport function getColumnsWithIndices(query: SQLQuery, fields: SelectableValue[]): SelectableValue[] {\n  if (!fields || !query.sql?.columns) {\n    return fields;\n  }\n\n  const options = query.sql.columns.map((c, i) => {\n    const value = c.name\n      ? `${c.name}(${c.parameters?.map((p) => p.name).join(', ')})`\n      : c.parameters?.map((p) => p.name).join(', ');\n    return {\n      value,\n      label: `${i + 1} - ${value}`,\n    };\n  });\n\n  return [\n    {\n      value: '',\n      label: t('grafana-sql.utils.get-columns-width-indices.label-selected-columns', 'Selected columns'),\n      options,\n      expanded: true,\n    },\n    ...fields,\n  ];\n}\n","import { useCallback } from 'react';\n\nimport { DB, SQLExpression, SQLQuery } from '../types';\n\ninterface UseSqlChange {\n  db: DB;\n  query: SQLQuery;\n  onQueryChange: (query: SQLQuery) => void;\n}\n\nexport function useSqlChange({ query, onQueryChange, db }: UseSqlChange) {\n  const onSqlChange = useCallback(\n    (sql: SQLExpression) => {\n      const toRawSql = db.toRawSql;\n      const rawSql = toRawSql({ sql, dataset: query.dataset, table: query.table, refId: query.refId });\n      const newQuery: SQLQuery = { ...query, sql, rawSql };\n      onQueryChange(newQuery);\n    },\n    [db, onQueryChange, query]\n  );\n\n  return { onSqlChange };\n}\n","import { useCallback } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { AccessoryButton, EditorList, InputGroup } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport { QueryEditorGroupByExpression } from '../../expressions';\nimport { SQLExpression } from '../../types';\nimport { setGroupByField } from '../../utils/sql.utils';\n\ninterface GroupByRowProps {\n  sql: SQLExpression;\n  onSqlChange: (sql: SQLExpression) => void;\n  columns?: Array<SelectableValue<string>>;\n}\n\nexport function GroupByRow({ sql, columns, onSqlChange }: GroupByRowProps) {\n  const onGroupByChange = useCallback(\n    (item: Array<Partial<QueryEditorGroupByExpression>>) => {\n      // As new (empty object) items come in, we need to make sure they have the correct type\n      const cleaned = item.map((v) => setGroupByField(v.property?.name));\n      const newSql = { ...sql, groupBy: cleaned };\n      onSqlChange(newSql);\n    },\n    [onSqlChange, sql]\n  );\n\n  return (\n    <EditorList\n      items={sql.groupBy!}\n      onChange={onGroupByChange}\n      renderItem={makeRenderColumn({\n        options: columns,\n      })}\n    />\n  );\n}\n\nfunction makeRenderColumn({ options }: { options?: Array<SelectableValue<string>> }) {\n  const renderColumn = function (\n    item: Partial<QueryEditorGroupByExpression>,\n    onChangeItem: (item: QueryEditorGroupByExpression) => void,\n    onDeleteItem: () => void\n  ) {\n    return (\n      <InputGroup>\n        <Select\n          value={item.property?.name ? toOption(item.property.name) : null}\n          aria-label={t('grafana-sql.components.make-render-column.render-column.aria-label-group-by', 'Group by')}\n          options={options}\n          menuShouldPortal\n          onChange={({ value }) => value && onChangeItem(setGroupByField(value))}\n        />\n        <AccessoryButton\n          title={t(\n            'grafana-sql.components.make-render-column.render-column.title-remove-group-by-column',\n            'Remove group by column'\n          )}\n          icon=\"times\"\n          variant=\"secondary\"\n          onClick={onDeleteItem}\n        />\n      </InputGroup>\n    );\n  };\n  return renderColumn;\n}\n","import { SelectableValue } from '@grafana/data';\n\nimport { QueryWithDefaults } from '../../defaults';\nimport { DB, SQLQuery } from '../../types';\nimport { getColumnsWithIndices } from '../../utils/getColumnsWithIndices';\nimport { useSqlChange } from '../../utils/useSqlChange';\n\nimport { GroupByRow } from './GroupByRow';\n\ninterface SQLGroupByRowProps {\n  fields: SelectableValue[];\n  query: QueryWithDefaults;\n  onQueryChange: (query: SQLQuery) => void;\n  db: DB;\n}\n\nexport function SQLGroupByRow({ fields, query, onQueryChange, db }: SQLGroupByRowProps) {\n  const { onSqlChange } = useSqlChange({ query, onQueryChange, db });\n  let columnsWithIndices: SelectableValue[] = getColumnsWithIndices(query, fields);\n  return <GroupByRow columns={columnsWithIndices} sql={query.sql!} onSqlChange={onSqlChange} />;\n}\n","import { uniqueId } from 'lodash';\nimport { useCallback } from 'react';\nimport * as React from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { EditorField, InputGroup } from '@grafana/plugin-ui';\nimport { Input, RadioButtonGroup, Select, Space } from '@grafana/ui';\n\nimport { SQLExpression } from '../../types';\nimport { setPropertyField } from '../../utils/sql.utils';\n\ntype OrderByRowProps = {\n  sql: SQLExpression;\n  onSqlChange: (sql: SQLExpression) => void;\n  columns?: Array<SelectableValue<string>>;\n  showOffset?: boolean;\n};\n\nconst sortOrderOptions = [\n  { description: 'Sort by ascending', value: 'ASC', icon: 'sort-amount-up' } as const,\n  { description: 'Sort by descending', value: 'DESC', icon: 'sort-amount-down' } as const,\n];\n\nexport function OrderByRow({ sql, onSqlChange, columns, showOffset }: OrderByRowProps) {\n  const onSortOrderChange = useCallback(\n    (item: 'ASC' | 'DESC') => {\n      const newSql: SQLExpression = { ...sql, orderByDirection: item };\n      onSqlChange(newSql);\n    },\n    [onSqlChange, sql]\n  );\n\n  const onLimitChange = useCallback(\n    (event: React.FormEvent<HTMLInputElement>) => {\n      const newSql: SQLExpression = { ...sql, limit: Number.parseInt(event.currentTarget.value, 10) };\n      onSqlChange(newSql);\n    },\n    [onSqlChange, sql]\n  );\n\n  const onOffsetChange = useCallback(\n    (event: React.FormEvent<HTMLInputElement>) => {\n      const newSql: SQLExpression = { ...sql, offset: Number.parseInt(event.currentTarget.value, 10) };\n      onSqlChange(newSql);\n    },\n    [onSqlChange, sql]\n  );\n\n  const onOrderByChange = useCallback(\n    (item: SelectableValue<string>) => {\n      const newSql: SQLExpression = { ...sql, orderBy: setPropertyField(item?.value) };\n      if (item === null) {\n        newSql.orderByDirection = undefined;\n      }\n      onSqlChange(newSql);\n    },\n    [onSqlChange, sql]\n  );\n\n  return (\n    <>\n      <EditorField label={t('grafana-sql.components.order-by-row.label-order-by', 'Order by')} width={25}>\n        <InputGroup>\n          <Select\n            aria-label={t('grafana-sql.components.order-by-row.aria-label-order-by', 'Order by')}\n            options={columns}\n            value={sql.orderBy?.property.name ? toOption(sql.orderBy.property.name) : null}\n            isClearable\n            menuShouldPortal\n            onChange={onOrderByChange}\n          />\n\n          <Space h={1.5} />\n\n          <RadioButtonGroup\n            options={sortOrderOptions}\n            disabled={!sql?.orderBy?.property.name}\n            value={sql.orderByDirection}\n            onChange={onSortOrderChange}\n          />\n        </InputGroup>\n      </EditorField>\n      <EditorField label={t('grafana-sql.components.order-by-row.label-limit', 'Limit')} optional width={25}>\n        <Input type=\"number\" min={0} id={uniqueId('limit-')} value={sql.limit || ''} onChange={onLimitChange} />\n      </EditorField>\n      {showOffset && (\n        <EditorField label={t('grafana-sql.components.order-by-row.label-offset', 'Offset')} optional width={25}>\n          <Input type=\"number\" id={uniqueId('offset-')} value={sql.offset || ''} onChange={onOffsetChange} />\n        </EditorField>\n      )}\n    </>\n  );\n}\n","import { SelectableValue } from '@grafana/data';\n\nimport { QueryWithDefaults } from '../../defaults';\nimport { DB, SQLQuery } from '../../types';\nimport { getColumnsWithIndices } from '../../utils/getColumnsWithIndices';\nimport { useSqlChange } from '../../utils/useSqlChange';\n\nimport { OrderByRow } from './OrderByRow';\n\ntype SQLOrderByRowProps = {\n  fields: SelectableValue[];\n  query: QueryWithDefaults;\n  onQueryChange: (query: SQLQuery) => void;\n  db: DB;\n};\n\nexport function SQLOrderByRow({ fields, query, onQueryChange, db }: SQLOrderByRowProps) {\n  const { onSqlChange } = useSqlChange({ query, onQueryChange, db });\n  let columnsWithIndices: SelectableValue[] = getColumnsWithIndices(query, fields);\n  return <OrderByRow sql={query.sql!} onSqlChange={onSqlChange} columns={columnsWithIndices} />;\n}\n","import {\n  BaseOperator,\n  BasicConfig,\n  Config,\n  Field,\n  ImmutableList,\n  JsonTree,\n  Operator,\n  OperatorOptionsI,\n  Settings,\n  Utils,\n  ValueSource,\n  WidgetProps,\n  Widgets,\n} from '@react-awesome-query-builder/ui';\nimport { isString } from 'lodash';\n\nimport { dateTime, toOption } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { Button, DateTimePicker, Input, Select } from '@grafana/ui';\n\nconst buttonLabels = {\n  add: 'Add',\n  remove: 'Remove',\n};\n\nexport const emptyInitTree: JsonTree = {\n  id: Utils.uuid(),\n  type: 'group',\n};\n\nconst TIME_FILTER = 'timeFilter';\nconst macros = [TIME_FILTER];\n\n// Widgets are the components rendered for each field type see the docs for more info\n// https://github.com/ukrbublik/react-awesome-query-builder/blob/master/CONFIG.adoc#configwidgets\nexport const widgets: Widgets = {\n  ...BasicConfig.widgets,\n  text: {\n    ...BasicConfig.widgets.text,\n    factory: function TextInput(props: WidgetProps) {\n      return (\n        <Input\n          value={props?.value || ''}\n          placeholder={props?.placeholder}\n          onChange={(e) => props?.setValue(e.currentTarget.value)}\n        />\n      );\n    },\n  },\n  number: {\n    ...BasicConfig.widgets.number,\n    factory: function NumberInput(props: WidgetProps) {\n      return (\n        <Input\n          value={props?.value}\n          placeholder={props?.placeholder}\n          type=\"number\"\n          onChange={(e) => props?.setValue(Number.parseInt(e.currentTarget.value, 10))}\n        />\n      );\n    },\n  },\n  datetime: {\n    ...BasicConfig.widgets.datetime,\n    factory: function DateTimeInput(props: WidgetProps) {\n      if (props?.operator === Op.MACROS) {\n        return (\n          <Select\n            id={props.id}\n            aria-label={t('grafana-sql.components.widgets.aria-label-macros-value-selector', 'Macros value selector')}\n            menuShouldPortal\n            options={macros.map(toOption)}\n            value={props?.value}\n            onChange={(val) => props.setValue(val.value)}\n          />\n        );\n      }\n      const dateValue = dateTime(props?.value).isValid() ? dateTime(props?.value).utc() : undefined;\n      return (\n        <DateTimePicker\n          onChange={(e) => {\n            props?.setValue(e?.format(BasicConfig.widgets.datetime.valueFormat));\n          }}\n          date={dateValue}\n        />\n      );\n    },\n    // Function for formatting widgets value in SQL WHERE query.\n    sqlFormatValue: (val, field, widget, operator, operatorDefinition, rightFieldDef) => {\n      if (operator === Op.MACROS) {\n        if (macros.includes(val)) {\n          return val;\n        }\n        return undefined;\n      }\n\n      // This is just satisfying the type checker, this should never happen\n      if (\n        typeof BasicConfig.widgets.datetime.sqlFormatValue === 'string' ||\n        typeof BasicConfig.widgets.datetime.sqlFormatValue === 'object'\n      ) {\n        return undefined;\n      }\n      const func = BasicConfig.widgets.datetime.sqlFormatValue;\n      // We need to pass the ctx to this function this way so *this* is correct\n      return func?.call(BasicConfig.ctx, val, field, widget, operator, operatorDefinition, rightFieldDef) || '';\n    },\n  },\n};\n\n// Settings are the configuration options for the query builder see the docs for more info\n// https://github.com/ukrbublik/react-awesome-query-builder/blob/master/CONFIG.adoc#configsettings\nexport const settings: Settings = {\n  ...BasicConfig.settings,\n  canRegroup: false,\n  maxNesting: 1,\n  canReorder: false,\n  showNot: false,\n  addRuleLabel: buttonLabels.add,\n  deleteLabel: buttonLabels.remove,\n  // This is the component that renders conjunctions (logical operators)\n  renderConjs: function Conjunctions(conjProps) {\n    return (\n      <Select\n        id={conjProps?.id}\n        aria-label={t('grafana-sql.components.settings.aria-label-conjunction', 'Conjunction')}\n        data-testid={selectors.components.SQLQueryEditor.filterConjunction}\n        menuShouldPortal\n        options={conjProps?.conjunctionOptions ? Object.keys(conjProps?.conjunctionOptions).map(toOption) : undefined}\n        value={conjProps?.selectedConjunction}\n        onChange={(val) => conjProps?.setConjunction(val.value!)}\n      />\n    );\n  },\n  // This is the component that renders fields\n  renderField: function Field(fieldProps) {\n    const fields = fieldProps?.config?.fields || {};\n    return (\n      <Select\n        id={fieldProps?.id}\n        width={25}\n        aria-label={t('grafana-sql.components.settings.aria-label-field', 'Field')}\n        data-testid={selectors.components.SQLQueryEditor.filterField}\n        menuShouldPortal\n        options={fieldProps?.items.map((f) => {\n          // @ts-ignore\n          const icon = fields[f.key].mainWidgetProps?.customProps?.icon;\n          return {\n            label: f.label,\n            value: f.key,\n            icon,\n          };\n        })}\n        value={fieldProps?.selectedKey}\n        onChange={(val) => {\n          fieldProps?.setField(val.label!);\n        }}\n      />\n    );\n  },\n  // This is the component used for the Add/Remove buttons\n  renderButton: function RAQBButton(buttonProps) {\n    return (\n      <Button\n        type=\"button\"\n        title={t('grafana-sql.components.settings.title-button-filter', '{{ buttonLabel }} filter', {\n          buttonLabel: buttonProps?.label,\n        })}\n        onClick={buttonProps?.onClick}\n        variant=\"secondary\"\n        size=\"md\"\n        icon={buttonProps?.label === buttonLabels.add ? 'plus' : 'times'}\n      />\n    );\n  },\n  // This is the component used for the fields operator selector\n  renderOperator: function Operator(operatorProps) {\n    return (\n      <Select\n        options={operatorProps?.items.map((op) => ({ label: op.label, value: op.key }))}\n        aria-label={t('grafana-sql.components.settings.aria-label-operator', 'Operator')}\n        data-testid={selectors.components.SQLQueryEditor.filterOperator}\n        menuShouldPortal\n        value={operatorProps?.selectedKey}\n        onChange={(val) => {\n          operatorProps?.setField(val.value || '');\n        }}\n      />\n    );\n  },\n};\n\n// add IN / NOT IN operators to text to support multi-value variables\nconst enum Op {\n  IN = 'select_any_in',\n  NOT_IN = 'select_not_any_in',\n  MACROS = 'macros',\n}\nconst customOperators = getCustomOperators(BasicConfig);\nconst textWidget = BasicConfig.types.text.widgets.text;\nconst opers = [...(textWidget.operators || []), Op.IN, Op.NOT_IN];\nconst customTextWidget = {\n  ...textWidget,\n  operators: opers,\n};\n\nconst customTypes = {\n  ...BasicConfig.types,\n  text: {\n    ...BasicConfig.types.text,\n    widgets: {\n      ...BasicConfig.types.text.widgets,\n      text: customTextWidget,\n    },\n  },\n  datetime: {\n    ...BasicConfig.types.datetime,\n    widgets: {\n      ...BasicConfig.types.datetime.widgets,\n      datetime: {\n        ...BasicConfig.types.datetime.widgets.datetime,\n        operators: [Op.MACROS, ...(BasicConfig.types.datetime.widgets.datetime.operators || [])],\n      },\n    },\n  },\n};\n\n// This is the configuration for the query builder that doesn't include the fields but all the other configuration for the UI\n// Fields should be added dynamically based on returned data\n// See the doc for more info https://github.com/ukrbublik/react-awesome-query-builder/blob/master/CONFIG.adoc\nexport const raqbConfig: Config = {\n  ...BasicConfig,\n  widgets,\n  settings,\n  operators: customOperators,\n  types: customTypes,\n};\n\nexport type { Config };\n\nconst noop = () => '';\n\nfunction getCustomOperators(config: BasicConfig) {\n  const { ...supportedOperators } = config.operators;\n\n  // IN operator expects array, override IN formatter for multi-value variables\n  const sqlFormatInOp = supportedOperators[Op.IN].sqlFormatOp?.bind(config.ctx) || noop;\n  const formatInOp = supportedOperators[Op.IN].formatOp?.bind(config.ctx) || noop;\n  const customSqlInFormatter = (\n    field: string,\n    op: string,\n    value: string | string[] | ImmutableList<string>,\n    valueSrc: ValueSource | undefined,\n    valueType: string | undefined,\n    opDef: Operator | undefined,\n    operatorOptions: OperatorOptionsI | undefined,\n    fieldDef: Field | undefined\n  ) => {\n    return sqlFormatInOp(field, op, splitIfString(value), valueSrc, valueType, opDef, operatorOptions, fieldDef);\n  };\n\n  // NOT IN operator expects array, override NOT IN formatter for multi-value variables\n  const sqlFormatNotInOp = supportedOperators[Op.NOT_IN].sqlFormatOp?.bind(config.ctx) || noop;\n  const formatNotInOp = supportedOperators[Op.NOT_IN].formatOp?.bind(config.ctx) || noop;\n  const customSqlNotInFormatter = (\n    field: string,\n    op: string,\n    value: string | string[] | ImmutableList<string>,\n    valueSrc: ValueSource | undefined,\n    valueType: string | undefined,\n    opDef: Operator | undefined,\n    operatorOptions: OperatorOptionsI | undefined,\n    fieldDef: Field | undefined\n  ) => {\n    return sqlFormatNotInOp(field, op, splitIfString(value), valueSrc, valueType, opDef, operatorOptions, fieldDef);\n  };\n\n  const customOperators: Record<string, BaseOperator> = {\n    ...supportedOperators,\n    [Op.IN]: {\n      ...supportedOperators[Op.IN],\n      formatOp: (\n        field: string,\n        op: string,\n        value: string | string[] | ImmutableList<string>,\n        valueSrc?: ValueSource\n      ) => {\n        return formatInOp(field, op, splitIfString(value), valueSrc);\n      },\n      sqlFormatOp: customSqlInFormatter,\n    },\n    [Op.NOT_IN]: {\n      ...supportedOperators[Op.NOT_IN],\n      formatOp: (\n        field: string,\n        op: string,\n        value: string | string[] | ImmutableList<string>,\n        valueSrc?: ValueSource\n      ) => {\n        return formatNotInOp(field, op, splitIfString(value), valueSrc);\n      },\n      sqlFormatOp: customSqlNotInFormatter,\n    },\n    [Op.MACROS]: {\n      label: t('grafana-sql.components.get-custom-operators.custom-operators.label.macros', 'Macros'),\n      sqlFormatOp: (field: string, _operator: string, value: string | string[] | ImmutableList<string>) => {\n        if (value === TIME_FILTER) {\n          return `$__timeFilter(${field})`;\n        }\n        throw new Error('Invalid macro');\n      },\n    },\n  };\n\n  return customOperators;\n}\n\n// value: string | List<string> but AQB uses a different version of Immutable\nfunction splitIfString(value: string | string[] | ImmutableList<string>) {\n  if (isString(value)) {\n    return value.split(',');\n  }\n  return value;\n}\n","import { injectGlobal } from '@emotion/css';\nimport { Builder, Config, ImmutableTree, Query, Utils } from '@react-awesome-query-builder/ui';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { SQLExpression } from '../../types';\n\nimport { emptyInitTree, raqbConfig } from './AwesomeQueryBuilder';\n\ninterface SQLBuilderWhereRowProps {\n  sql: SQLExpression;\n  onSqlChange: (sql: SQLExpression) => void;\n  config?: Partial<Config>;\n}\n\nexport function WhereRow({ sql, config, onSqlChange }: SQLBuilderWhereRowProps) {\n  const [tree, setTree] = useState<ImmutableTree>();\n  const configWithDefaults = useMemo(() => ({ ...raqbConfig, ...config }), [config]);\n\n  useEffect(() => {\n    // Set the initial tree\n    if (!tree) {\n      const initTree = Utils.checkTree(Utils.loadTree(sql.whereJsonTree ?? emptyInitTree), configWithDefaults);\n      setTree(initTree);\n    }\n  }, [configWithDefaults, sql.whereJsonTree, tree]);\n\n  useEffect(() => {\n    if (!sql.whereJsonTree) {\n      setTree(Utils.checkTree(Utils.loadTree(emptyInitTree), configWithDefaults));\n    }\n  }, [configWithDefaults, sql.whereJsonTree]);\n\n  const onTreeChange = useCallback(\n    (changedTree: ImmutableTree, config: Config) => {\n      setTree(changedTree);\n      const newSql = {\n        ...sql,\n        whereJsonTree: Utils.getTree(changedTree),\n        whereString: Utils.sqlFormat(changedTree, config),\n      };\n\n      onSqlChange(newSql);\n    },\n    [onSqlChange, sql]\n  );\n\n  if (!tree) {\n    return null;\n  }\n\n  return (\n    <Query\n      {...configWithDefaults}\n      value={tree}\n      onChange={onTreeChange}\n      renderBuilder={(props) => <Builder {...props} />}\n    />\n  );\n}\n\nfunction flex(direction: string) {\n  return `\n    display: flex;\n    gap: 8px;\n    flex-direction: ${direction};`;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-expressions\ninjectGlobal`\n  .group--header {\n    ${flex('row')}\n  }\n\n  .group-or-rule {\n    ${flex('column')}\n    .rule {\n      flex-direction: row;\n    }\n  }\n\n  .rule--body {\n    ${flex('row')}\n  }\n\n  .group--children {\n    ${flex('column')}\n  }\n\n  .group--conjunctions:empty {\n    display: none;\n  }\n`;\n","import { useAsync } from 'react-use';\n\nimport { SelectableValue, TypedVariableModel } from '@grafana/data';\nimport { getTemplateSrv } from '@grafana/runtime';\n\nimport { QueryWithDefaults } from '../../defaults';\nimport { DB, SQLExpression, SQLQuery, SQLSelectableValue } from '../../types';\nimport { useSqlChange } from '../../utils/useSqlChange';\n\nimport { Config } from './AwesomeQueryBuilder';\nimport { WhereRow } from './WhereRow';\n\ninterface WhereRowProps {\n  query: QueryWithDefaults;\n  fields: SelectableValue[];\n  onQueryChange: (query: SQLQuery) => void;\n  db: DB;\n}\n\nexport function SQLWhereRow({ query, fields, onQueryChange, db }: WhereRowProps) {\n  const state = useAsync(async () => {\n    return mapFieldsToTypes(fields);\n  }, [fields]);\n\n  const { onSqlChange } = useSqlChange({ query, onQueryChange, db });\n\n  return (\n    <WhereRow\n      // TODO: fix key that's used to force clean render or SQLWhereRow - otherwise it doesn't render operators correctly\n      key={JSON.stringify(state.value)}\n      config={{ fields: state.value || {} }}\n      sql={query.sql!}\n      onSqlChange={(val: SQLExpression) => {\n        const templateVars = getTemplateSrv().getVariables();\n\n        removeQuotesForMultiVariables(val, templateVars);\n\n        onSqlChange(val);\n      }}\n    />\n  );\n}\n\n// needed for awesome query builder\nfunction mapFieldsToTypes(columns: SQLSelectableValue[]) {\n  const fields: Config['fields'] = {};\n  for (const col of columns) {\n    fields[col.value] = {\n      type: col.raqbFieldType || 'text',\n      valueSources: ['value'],\n      mainWidgetProps: { customProps: { icon: col.icon } },\n    };\n  }\n  return fields;\n}\n\nexport function removeQuotesForMultiVariables(val: SQLExpression, templateVars: TypedVariableModel[]) {\n  const multiVariableInWhereString = (tv: TypedVariableModel) =>\n    'multi' in tv &&\n    tv.multi &&\n    (val.whereString?.includes(`\\${${tv.name}}`) || val.whereString?.includes(`$${tv.name}`));\n\n  if (templateVars.some((tv) => multiVariableInWhereString(tv))) {\n    val.whereString = val.whereString?.replaceAll(\"')\", ')');\n    val.whereString = val.whereString?.replaceAll(\"('\", '(');\n  }\n}\n","import { useId } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\ninterface Props {\n  columns: Array<SelectableValue<string>>;\n  onParameterChange: (value?: string) => void;\n  value: SelectableValue<string> | null;\n}\n\nexport function SelectColumn({ columns, onParameterChange, value }: Props) {\n  const selectInputId = useId();\n\n  return (\n    <EditorField label={t('grafana-sql.components.select-column.label-column', 'Column')} width={25}>\n      <Select\n        value={value}\n        data-testid={selectors.components.SQLQueryEditor.selectColumn}\n        inputId={selectInputId}\n        menuShouldPortal\n        options={[{ label: '*', value: '*' }, ...columns]}\n        allowCustomValue\n        onChange={(s) => onParameterChange(s.value)}\n      />\n    </EditorField>\n  );\n}\n","import { css } from '@emotion/css';\nimport { useCallback } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { Button, InlineLabel, Input, Stack, useStyles2 } from '@grafana/ui';\n\nimport { QueryEditorExpressionType } from '../../expressions';\nimport { SQLExpression, SQLQuery } from '../../types';\nimport { getColumnValue } from '../../utils/sql.utils';\n\nimport { SelectColumn } from './SelectColumn';\n\ninterface Props {\n  columns: Array<SelectableValue<string>>;\n  query: SQLQuery;\n  onSqlChange: (sql: SQLExpression) => void;\n  onParameterChange: (index: number) => (value?: string) => void;\n  currentColumnIndex: number;\n}\n\nexport function SelectCustomFunctionParameters({\n  columns,\n  query,\n  onSqlChange,\n  onParameterChange,\n  currentColumnIndex,\n}: Props) {\n  const styles = useStyles2(getStyles);\n  const macroOrFunction = query.sql?.columns?.[currentColumnIndex];\n\n  const addParameter = useCallback(\n    (index: number) => {\n      const item = query.sql?.columns?.[index];\n      if (!item) {\n        return;\n      }\n\n      item.parameters = item.parameters\n        ? [...item.parameters, { type: QueryEditorExpressionType.FunctionParameter, name: '' }]\n        : [];\n\n      const newSql: SQLExpression = {\n        ...query.sql,\n        columns: query.sql?.columns?.map((c, i) => (i === index ? item : c)),\n      };\n\n      onSqlChange(newSql);\n    },\n    [onSqlChange, query.sql]\n  );\n\n  const removeParameter = useCallback(\n    (columnIndex: number, index: number) => {\n      const item = query.sql?.columns?.[columnIndex];\n      if (!item?.parameters) {\n        return;\n      }\n      item.parameters = item.parameters?.filter((_, i) => i !== index);\n\n      const newSql: SQLExpression = {\n        ...query.sql,\n        columns: query.sql?.columns?.map((c, i) => (i === columnIndex ? item : c)),\n      };\n\n      onSqlChange(newSql);\n    },\n    [onSqlChange, query.sql]\n  );\n\n  function renderParameters(columnIndex: number) {\n    if (!macroOrFunction?.parameters || macroOrFunction.parameters.length <= 1) {\n      return null;\n    }\n\n    const paramComponents = macroOrFunction.parameters.map((param, index) => {\n      // Skip the first parameter as it is the column name\n      if (index === 0) {\n        return null;\n      }\n\n      return (\n        <Stack key={index} gap={2}>\n          <InlineLabel className={styles.label}>,</InlineLabel>\n          <Input\n            onChange={(e) => onParameterChange(index)(e.currentTarget.value)}\n            value={param.name}\n            aria-label={t(\n              'grafana-sql.components.select-custom-function-parameters.aria-label-parameter',\n              'Parameter {{index}} for column {{columnIndex}}',\n              { index, columnIndex }\n            )}\n            data-testid={selectors.components.SQLQueryEditor.selectInputParameter}\n            addonAfter={\n              <Button\n                title={t(\n                  'grafana-sql.components.select-custom-function-parameters.render-parameters.params.title-remove-parameter',\n                  'Remove parameter'\n                )}\n                type=\"button\"\n                icon=\"times\"\n                variant=\"secondary\"\n                size=\"md\"\n                onClick={() => removeParameter(columnIndex, index)}\n              />\n            }\n          />\n        </Stack>\n      );\n    });\n    return paramComponents;\n  }\n\n  return (\n    <>\n      <InlineLabel className={styles.label}>(</InlineLabel>\n      <SelectColumn\n        columns={columns}\n        onParameterChange={(s) => onParameterChange(0)(s)}\n        value={getColumnValue(macroOrFunction?.parameters?.[0])}\n      />\n      {renderParameters(currentColumnIndex)}\n      <Button\n        type=\"button\"\n        onClick={() => addParameter(currentColumnIndex)}\n        variant=\"secondary\"\n        size=\"md\"\n        icon=\"plus\"\n        title={t('grafana-sql.components.select-custom-function-parameters.title-add-parameter', 'Add parameter')}\n      />\n      <InlineLabel className={styles.label}>)</InlineLabel>\n    </>\n  );\n}\n\nconst getStyles = () => {\n  return {\n    label: css({\n      padding: 0,\n      margin: 0,\n      width: 'unset',\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { useCallback, useEffect, useId, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { InlineLabel, Input, Select, Stack, useStyles2 } from '@grafana/ui';\n\nimport { QueryEditorExpressionType } from '../../expressions';\nimport { DB, SQLExpression, SQLQuery } from '../../types';\nimport { getColumnValue } from '../../utils/sql.utils';\n\nimport { SelectColumn } from './SelectColumn';\nimport { SelectCustomFunctionParameters } from './SelectCustomFunctionParameters';\n\ninterface Props {\n  query: SQLQuery;\n  onSqlChange: (sql: SQLExpression) => void;\n  currentColumnIndex: number;\n  db: DB;\n  columns: Array<SelectableValue<string>>;\n}\n\nexport function SelectFunctionParameters({ query, onSqlChange, currentColumnIndex, db, columns }: Props) {\n  const selectInputId = useId();\n  const macroOrFunction = query.sql?.columns?.[currentColumnIndex];\n  const styles = useStyles2(getStyles);\n  const func = db.functions().find((f) => f.name === macroOrFunction?.name);\n\n  const [fieldsFromFunction, setFieldsFromFunction] = useState<Array<Array<SelectableValue<string>>>>([]);\n\n  useEffect(() => {\n    const getFieldsFromFunction = async () => {\n      if (!func) {\n        return;\n      }\n      const options: Array<Array<SelectableValue<string>>> = [];\n      for (const param of func.parameters ?? []) {\n        if (param.options) {\n          options.push(await param.options(query));\n        } else {\n          options.push([]);\n        }\n      }\n      setFieldsFromFunction(options);\n    };\n    getFieldsFromFunction();\n\n    // It is fine to ignore the warning here and omit the query object\n    // only table property is used in the query object and whenever table changes the component is re-rendered\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [macroOrFunction?.name]);\n\n  const onParameterChange = useCallback(\n    (index: number, keepIndex?: boolean) => (s: string | undefined) => {\n      const item = query.sql?.columns?.[currentColumnIndex];\n      if (!item) {\n        return;\n      }\n      if (!item.parameters) {\n        item.parameters = [];\n      }\n      if (item.parameters[index] === undefined) {\n        item.parameters[index] = { type: QueryEditorExpressionType.FunctionParameter, name: s };\n      } else if (s == null && keepIndex) {\n        // Remove value from index\n        item.parameters = item.parameters.map((p, i) => (i === index ? { ...p, name: '' } : p));\n        // Remove the last empty parameter\n        if (item.parameters[item.parameters.length - 1]?.name === '') {\n          item.parameters = item.parameters.filter((p) => p.name !== '');\n        }\n      } else if (s == null) {\n        item.parameters = item.parameters.filter((_, i) => i !== index);\n      } else {\n        item.parameters = item.parameters.map((p, i) => (i === index ? { ...p, name: s } : p));\n      }\n\n      const newSql: SQLExpression = {\n        ...query.sql,\n        columns: query.sql?.columns?.map((c, i) => (i === currentColumnIndex ? item : c)),\n      };\n\n      onSqlChange(newSql);\n    },\n    [currentColumnIndex, onSqlChange, query.sql]\n  );\n\n  function renderParametersWithFunctions() {\n    if (!func?.parameters) {\n      return null;\n    }\n\n    return func?.parameters.map((funcParam, index) => {\n      return (\n        <Stack key={index} alignItems=\"flex-end\" gap={2}>\n          <EditorField label={funcParam.name} width={25} optional={!funcParam.required}>\n            <>\n              {funcParam.options ? (\n                <Select\n                  value={getColumnValue(macroOrFunction?.parameters![index])}\n                  options={fieldsFromFunction?.[index]}\n                  data-testid={selectors.components.SQLQueryEditor.selectFunctionParameter(funcParam.name)}\n                  inputId={selectInputId}\n                  menuShouldPortal\n                  allowCustomValue\n                  isClearable\n                  onChange={(s) => onParameterChange(index, true)(s?.value)}\n                />\n              ) : (\n                <Input\n                  onChange={(e) => onParameterChange(index, true)(e.currentTarget.value)}\n                  value={macroOrFunction?.parameters![index]?.name}\n                  data-testid={selectors.components.SQLQueryEditor.selectInputParameter}\n                />\n              )}\n            </>\n          </EditorField>\n          {func.parameters!.length !== index + 1 && <InlineLabel className={styles.label}>,</InlineLabel>}\n        </Stack>\n      );\n    });\n  }\n\n  // This means that no function is selected, we render a column selector\n  if (macroOrFunction?.name === undefined) {\n    return (\n      <SelectColumn\n        columns={columns}\n        onParameterChange={(s) => onParameterChange(0)(s)}\n        value={getColumnValue(macroOrFunction?.parameters?.[0])}\n      />\n    );\n  }\n\n  // If the function is not found, that means that it might be a custom value\n  // we let the user add any number of parameters\n  if (!func) {\n    return (\n      <SelectCustomFunctionParameters\n        query={query}\n        onSqlChange={onSqlChange}\n        currentColumnIndex={currentColumnIndex}\n        columns={columns}\n        onParameterChange={onParameterChange}\n      />\n    );\n  }\n\n  // Else we render the function parameters based on the provided settings\n  return (\n    <>\n      <InlineLabel className={styles.label}>(</InlineLabel>\n      {renderParametersWithFunctions()}\n      <InlineLabel className={styles.label}>)</InlineLabel>\n    </>\n  );\n}\n\nconst getStyles = () => {\n  return {\n    label: css({\n      padding: 0,\n      margin: 0,\n      width: 'unset',\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { uniqueId } from 'lodash';\nimport { useCallback } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { EditorField } from '@grafana/plugin-ui';\nimport { Button, Select, Stack, useStyles2 } from '@grafana/ui';\n\nimport { QueryEditorExpressionType, QueryEditorFunctionExpression } from '../../expressions';\nimport { DB, QueryFormat, SQLExpression, SQLQuery } from '../../types';\nimport { createFunctionField } from '../../utils/sql.utils';\nimport { useSqlChange } from '../../utils/useSqlChange';\n\nimport { SelectFunctionParameters } from './SelectFunctionParameters';\n\ninterface SelectRowProps {\n  query: SQLQuery;\n  onQueryChange: (sql: SQLQuery) => void;\n  db: DB;\n  columns: Array<SelectableValue<string>>;\n}\n\nexport function SelectRow({ query, onQueryChange, db, columns }: SelectRowProps) {\n  const styles = useStyles2(getStyles);\n  const { onSqlChange } = useSqlChange({ query, onQueryChange, db });\n  const timeSeriesAliasOpts: Array<SelectableValue<string>> = [];\n\n  // Add necessary alias options for time series format\n  // when that format has been selected\n  if (query.format === QueryFormat.Timeseries) {\n    timeSeriesAliasOpts.push({ label: t('grafana-sql.components.select-row.label.time', 'time'), value: 'time' });\n    timeSeriesAliasOpts.push({ label: t('grafana-sql.components.select-row.label.value', 'value'), value: 'value' });\n  }\n\n  const onAggregationChange = useCallback(\n    (item: QueryEditorFunctionExpression, index: number) => (aggregation: SelectableValue<string>) => {\n      const newItem = {\n        ...item,\n        name: aggregation?.value,\n        parameters: [\n          { type: QueryEditorExpressionType.FunctionParameter as const, name: item.parameters?.[0]?.name || '' },\n        ],\n      };\n      const newSql: SQLExpression = {\n        ...query.sql,\n        columns: query.sql?.columns?.map((c, i) => (i === index ? newItem : c)),\n      };\n\n      onSqlChange(newSql);\n    },\n    [onSqlChange, query.sql]\n  );\n\n  const onAliasChange = useCallback(\n    (item: QueryEditorFunctionExpression, index: number) => (alias: SelectableValue<string>) => {\n      let newItem = { ...item };\n\n      if (alias !== null) {\n        newItem = { ...item, alias: `\"${alias?.value?.trim()}\"` };\n      } else {\n        delete newItem.alias;\n      }\n\n      const newSql: SQLExpression = {\n        ...query.sql,\n        columns: query.sql?.columns?.map((c, i) => (i === index ? newItem : c)),\n      };\n\n      onSqlChange(newSql);\n    },\n    [onSqlChange, query.sql]\n  );\n\n  const removeColumn = useCallback(\n    (index: number) => () => {\n      const clone = [...(query.sql?.columns || [])];\n      clone.splice(index, 1);\n      const newSql: SQLExpression = {\n        ...query.sql,\n        columns: clone,\n      };\n      onSqlChange(newSql);\n    },\n    [onSqlChange, query.sql]\n  );\n\n  const addColumn = useCallback(() => {\n    const newSql: SQLExpression = { ...query.sql, columns: [...(query.sql?.columns || []), createFunctionField()] };\n    onSqlChange(newSql);\n  }, [onSqlChange, query.sql]);\n\n  const aggregateOptions = () => {\n    const options: Array<SelectableValue<string>> = [\n      {\n        label: t('grafana-sql.components.select-row.aggregate-options.options.label.aggregations', 'Aggregations'),\n        options: [],\n      },\n      { label: t('grafana-sql.components.select-row.aggregate-options.options.label.macros', 'Macros'), options: [] },\n    ];\n    for (const func of db.functions()) {\n      // Create groups for macros\n      if (func.name.startsWith('$__')) {\n        options[1].options.push({ label: func.name, value: func.name });\n      } else {\n        options[0].options.push({ label: func.name, value: func.name });\n      }\n    }\n    return options;\n  };\n\n  return (\n    <Stack gap={2} wrap=\"wrap\" direction=\"column\">\n      {query.sql?.columns?.map((item, index) => (\n        <div key={index}>\n          <Stack gap={2} alignItems=\"end\">\n            <EditorField\n              label={t('grafana-sql.components.select-row.label-data-operations', 'Data operations')}\n              optional\n              width={25}\n            >\n              <Select\n                value={item.name ? toOption(item.name) : null}\n                inputId={`select-aggregation-${index}-${uniqueId()}`}\n                data-testid={selectors.components.SQLQueryEditor.selectAggregation}\n                isClearable\n                menuShouldPortal\n                allowCustomValue\n                options={aggregateOptions()}\n                onChange={onAggregationChange(item, index)}\n              />\n            </EditorField>\n\n            <SelectFunctionParameters\n              currentColumnIndex={index}\n              columns={columns}\n              onSqlChange={onSqlChange}\n              query={query}\n              db={db}\n            />\n\n            <EditorField label={t('grafana-sql.components.select-row.label-alias', 'Alias')} optional width={15}>\n              <Select\n                value={item.alias ? toOption(item.alias) : null}\n                inputId={`select-alias-${index}-${uniqueId()}`}\n                data-testid={selectors.components.SQLQueryEditor.selectAlias}\n                options={timeSeriesAliasOpts}\n                onChange={onAliasChange(item, index)}\n                isClearable\n                menuShouldPortal\n                allowCustomValue\n              />\n            </EditorField>\n            <Button\n              title={t('grafana-sql.components.select-row.title-remove-column', 'Remove column')}\n              type=\"button\"\n              icon=\"trash-alt\"\n              variant=\"secondary\"\n              size=\"md\"\n              onClick={removeColumn(index)}\n            />\n          </Stack>\n        </div>\n      ))}\n      <Button\n        type=\"button\"\n        onClick={addColumn}\n        variant=\"secondary\"\n        title={t('grafana-sql.components.select-row.title-add-column', 'Add column')}\n        size=\"md\"\n        icon=\"plus\"\n        className={styles.addButton}\n      />\n    </Stack>\n  );\n}\n\nconst getStyles = () => {\n  return {\n    addButton: css({ alignSelf: 'flex-start' }),\n    label: css({\n      padding: 0,\n      margin: 0,\n      width: 'unset',\n    }),\n  };\n};\n","import { useAsync } from 'react-use';\n\nimport { t } from '@grafana/i18n';\nimport { EditorRows, EditorRow, EditorField } from '@grafana/plugin-ui';\n\nimport { DB, QueryEditorProps, QueryRowFilter } from '../../types';\nimport { QueryToolbox } from '../query-editor-raw/QueryToolbox';\n\nimport { Preview } from './Preview';\nimport { SQLGroupByRow } from './SQLGroupByRow';\nimport { SQLOrderByRow } from './SQLOrderByRow';\nimport { SQLWhereRow } from './SQLWhereRow';\nimport { SelectRow } from './SelectRow';\n\ninterface VisualEditorProps extends QueryEditorProps {\n  db: DB;\n  queryRowFilter: QueryRowFilter;\n  onValidate: (isValid: boolean) => void;\n}\n\nexport const VisualEditor = ({ query, db, queryRowFilter, onChange, onValidate, range }: VisualEditorProps) => {\n  const state = useAsync(async () => {\n    const fields = await db.fields(query);\n    return fields;\n  }, [db, query.dataset, query.table]);\n\n  return (\n    <>\n      <EditorRows>\n        <EditorRow>\n          <SelectRow columns={state.value || []} query={query} onQueryChange={onChange} db={db} />\n        </EditorRow>\n        {queryRowFilter.filter && (\n          <EditorRow>\n            <EditorField\n              label={t('grafana-sql.components.visual-editor.label-filter-by-column-value', 'Filter by column value')}\n              optional\n            >\n              <SQLWhereRow fields={state.value || []} query={query} onQueryChange={onChange} db={db} />\n            </EditorField>\n          </EditorRow>\n        )}\n        {queryRowFilter.group && (\n          <EditorRow>\n            <EditorField label={t('grafana-sql.components.visual-editor.label-group-by-column', 'Group by column')}>\n              <SQLGroupByRow fields={state.value || []} query={query} onQueryChange={onChange} db={db} />\n            </EditorField>\n          </EditorRow>\n        )}\n        {queryRowFilter.order && (\n          <EditorRow>\n            <SQLOrderByRow fields={state.value || []} query={query} onQueryChange={onChange} db={db} />\n          </EditorRow>\n        )}\n        {queryRowFilter.preview && query.rawSql && (\n          <EditorRow>\n            <Preview rawSql={query.rawSql} datasourceType={query.datasource?.type} />\n          </EditorRow>\n        )}\n      </EditorRows>\n      <QueryToolbox db={db} query={query} onValidate={onValidate} range={range} />\n    </>\n  );\n};\n","import { useCallback, useEffect, useState } from 'react';\nimport { useAsync } from 'react-use';\n\nimport { QueryEditorProps } from '@grafana/data';\nimport { EditorMode } from '@grafana/plugin-ui';\nimport { Space } from '@grafana/ui';\n\nimport { SqlDatasource } from '../datasource/SqlDatasource';\nimport { applyQueryDefaults } from '../defaults';\nimport { SQLQuery, QueryRowFilter, SQLOptions } from '../types';\nimport { haveColumns } from '../utils/sql.utils';\n\nimport { QueryHeader, QueryHeaderProps } from './QueryHeader';\nimport { RawEditor } from './query-editor-raw/RawEditor';\nimport { VisualEditor } from './visual-query-builder/VisualEditor';\n\nexport interface SqlQueryEditorProps extends QueryEditorProps<SqlDatasource, SQLQuery, SQLOptions> {\n  queryHeaderProps?: Pick<QueryHeaderProps, 'dialect'>;\n}\n\nexport default function SqlQueryEditor({\n  datasource,\n  query,\n  onChange,\n  onRunQuery,\n  range,\n  queryHeaderProps,\n}: SqlQueryEditorProps) {\n  const [isQueryRunnable, setIsQueryRunnable] = useState(true);\n  const db = datasource.getDB();\n\n  const { preconfiguredDatabase } = datasource;\n  const dialect = queryHeaderProps?.dialect ?? 'other';\n  const { loading, error } = useAsync(async () => {\n    return () => {\n      if (datasource.getDB(datasource.id).init !== undefined) {\n        datasource.getDB(datasource.id).init!();\n      }\n    };\n  }, [datasource]);\n\n  const queryWithDefaults = applyQueryDefaults(query);\n  const [queryRowFilter, setQueryRowFilter] = useState<QueryRowFilter>({\n    filter: !!queryWithDefaults.sql?.whereString,\n    group: !!queryWithDefaults.sql?.groupBy?.[0]?.property.name,\n    order: !!queryWithDefaults.sql?.orderBy?.property.name,\n    preview: true,\n  });\n  const [queryToValidate, setQueryToValidate] = useState(queryWithDefaults);\n\n  useEffect(() => {\n    return () => {\n      if (datasource.getDB(datasource.id).dispose !== undefined) {\n        datasource.getDB(datasource.id).dispose!();\n      }\n    };\n  }, [datasource]);\n\n  const processQuery = useCallback(\n    (q: SQLQuery) => {\n      if (isQueryValid(q) && onRunQuery) {\n        onRunQuery();\n      }\n    },\n    [onRunQuery]\n  );\n\n  const onQueryChange = (q: SQLQuery, process = true) => {\n    setQueryToValidate(q);\n    onChange(q);\n\n    if (haveColumns(q.sql?.columns) && q.sql?.columns.some((c) => c.name) && !queryRowFilter.group) {\n      setQueryRowFilter({ ...queryRowFilter, group: true });\n    }\n\n    if (process) {\n      processQuery(q);\n    }\n  };\n\n  const onQueryHeaderChange = (q: SQLQuery) => {\n    setQueryToValidate(q);\n    onChange(q);\n  };\n\n  if (loading || error) {\n    return null;\n  }\n\n  return (\n    <>\n      <QueryHeader\n        db={db}\n        preconfiguredDataset={preconfiguredDatabase}\n        onChange={onQueryHeaderChange}\n        onRunQuery={onRunQuery}\n        onQueryRowChange={setQueryRowFilter}\n        queryRowFilter={queryRowFilter}\n        query={queryWithDefaults}\n        isQueryRunnable={isQueryRunnable}\n        dialect={dialect}\n      />\n\n      <Space v={0.5} />\n\n      {queryWithDefaults.editorMode !== EditorMode.Code && (\n        <VisualEditor\n          db={db}\n          query={queryWithDefaults}\n          onChange={(q: SQLQuery) => onQueryChange(q, false)}\n          queryRowFilter={queryRowFilter}\n          onValidate={setIsQueryRunnable}\n          range={range}\n        />\n      )}\n\n      {queryWithDefaults.editorMode === EditorMode.Code && (\n        <RawEditor\n          db={db}\n          query={queryWithDefaults}\n          queryToValidate={queryToValidate}\n          onChange={onQueryChange}\n          onRunQuery={onRunQuery}\n          onValidate={setIsQueryRunnable}\n          range={range}\n        />\n      )}\n    </>\n  );\n}\n\nconst isQueryValid = (q: SQLQuery) => {\n  return Boolean(q.rawSql);\n};\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nconst EditorHeader = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, children);\n};\nconst getStyles = (theme) => ({\n  root: css({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n    gap: theme.spacing(3),\n    minHeight: theme.spacing(4)\n  })\n});\n\nexport { EditorHeader };\n//# sourceMappingURL=EditorHeader.js.map\n","import { Button } from '@grafana/ui';\nimport React__default from 'react';\nimport { EditorStack } from './EditorStack.js';\n\nconst EditorList = React__default.forwardRef(function EditorList2({ items, renderItem, onChange }, ref) {\n  const onAddItem = () => {\n    const newItems = [...items, {}];\n    onChange(newItems);\n  };\n  const onChangeItem = (itemIndex, newItem) => {\n    const newItems = [...items];\n    newItems[itemIndex] = newItem;\n    onChange(newItems);\n  };\n  const onDeleteItem = (itemIndex) => {\n    const newItems = [...items];\n    newItems.splice(itemIndex, 1);\n    onChange(newItems);\n  };\n  return /* @__PURE__ */ React__default.createElement(EditorStack, null, items.map((item, index) => /* @__PURE__ */ React__default.createElement(\"div\", { key: index }, renderItem(\n    item,\n    (newItem) => onChangeItem(index, newItem),\n    () => onDeleteItem(index)\n  ))), /* @__PURE__ */ React__default.createElement(Button, { ref, onClick: onAddItem, variant: \"secondary\", size: \"md\", icon: \"plus\", \"aria-label\": \"Add\", type: \"button\" }));\n});\n\nexport { EditorList };\n//# sourceMappingURL=EditorList.js.map\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { EditorStack } from './EditorStack.js';\n\nconst EditorRow = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 2 }, children));\n};\nconst getStyles = (theme) => {\n  return {\n    root: css({\n      padding: theme.spacing(1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.radius.default\n    })\n  };\n};\n\nexport { EditorRow };\n//# sourceMappingURL=EditorRow.js.map\n","import React__default from 'react';\nimport { EditorStack } from './EditorStack.js';\n\nconst EditorRows = ({ children }) => {\n  return /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 0.5, direction: \"column\" }, children);\n};\n\nexport { EditorRows };\n//# sourceMappingURL=EditorRows.js.map\n","import React__default from 'react';\nimport { Stack } from '@grafana/ui';\nimport '@grafana/data';\n\nconst EditorStack = ({ children, wrap: wrapItems = true, ...props }) => {\n  var _a, _b;\n  return /* @__PURE__ */ React__default.createElement(Stack, { wrap: wrapItems ? \"wrap\" : undefined, direction: (_a = props.direction) != null ? _a : \"row\", gap: (_b = props.gap) != null ? _b : 2, ...props }, children);\n};\n\nexport { EditorStack };\n//# sourceMappingURL=EditorStack.js.map\n","import React__default from 'react';\n\nconst FlexItem = ({ grow, shrink }) => {\n  return /* @__PURE__ */ React__default.createElement(\"div\", { style: { display: \"block\", flexGrow: grow, flexShrink: shrink } });\n};\n\nexport { FlexItem };\n//# sourceMappingURL=FlexItem.js.map\n","import { css, cx } from '@emotion/css';\nimport React__default, { useState } from 'react';\nimport '@grafana/data';\nimport { useStyles2, Select, SelectContainer as SelectContainer$1 } from '@grafana/ui';\n\nfunction InlineSelect({ label: labelProp, ...props }) {\n  const [id] = useState(() => Math.random().toString(16).slice(2));\n  const styles = useStyles2(getSelectStyles);\n  const components = {\n    SelectContainer,\n    ValueContainer,\n    SingleValue: ValueContainer\n  };\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, labelProp && /* @__PURE__ */ React__default.createElement(\"label\", { className: styles.label, htmlFor: id }, labelProp, \":\", \"\\xA0\"), /* @__PURE__ */ React__default.createElement(Select, { openMenuOnFocus: true, inputId: id, ...props, components }));\n}\nconst SelectContainer = (props) => {\n  const { children } = props;\n  const styles = useStyles2(getSelectStyles);\n  return /* @__PURE__ */ React__default.createElement(SelectContainer$1, { ...props, className: cx(props.className, styles.container) }, children);\n};\nconst ValueContainer = (props) => {\n  const { className, children } = props;\n  const styles = useStyles2(getSelectStyles);\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: cx(className, styles.valueContainer) }, children);\n};\nconst getSelectStyles = (theme) => ({\n  root: css({\n    display: \"flex\",\n    fontSize: 12,\n    alignItems: \"center\"\n  }),\n  label: css({\n    color: theme.colors.text.secondary,\n    whiteSpace: \"nowrap\"\n  }),\n  container: css({\n    background: \"none\",\n    borderColor: \"transparent\"\n  }),\n  valueContainer: css({\n    display: \"flex\",\n    alignItems: \"center\",\n    flex: \"initial\",\n    color: theme.colors.text.secondary,\n    fontSize: 12\n  })\n});\n\nexport { InlineSelect };\n//# sourceMappingURL=InlineSelect.js.map\n","import { cx, css } from '@emotion/css';\nimport { useStyles2 } from '@grafana/ui';\nimport React__default, { Children, isValidElement, cloneElement } from 'react';\n\nconst InputGroup = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  const modifiedChildren = Children.map(children, (child) => {\n    if (isValidElement(child) && child.props.invalid) {\n      return cloneElement(child, { className: cx(child.props.className, styles.invalidChild) });\n    }\n    return child;\n  });\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, modifiedChildren);\n};\nconst borderPriority = [\n  \"\",\n  // lowest priority\n  \"base\",\n  \"hovered\",\n  \"invalid\",\n  \"focused\"\n  // highest priority\n];\nconst getStyles = () => ({\n  root: css({\n    display: \"flex\",\n    // Style the direct children of the component\n    \"> *\": {\n      \"&:not(:first-child)\": {\n        // Negative margin hides the double-border on adjacent selects\n        marginLeft: -1\n      },\n      \"&:first-child\": {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0\n      },\n      \"&:last-child\": {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0\n      },\n      \"&:not(:first-child):not(:last-child)\": {\n        borderRadius: 0\n      },\n      //\n      position: \"relative\",\n      zIndex: borderPriority.indexOf(\"base\"),\n      // Adjacent borders are overlapping, so raise children up when hovering etc\n      // so all that child's borders are visible.\n      \"&:hover\": {\n        zIndex: borderPriority.indexOf(\"hovered\")\n      },\n      \"&:focus-within\": {\n        zIndex: borderPriority.indexOf(\"focused\")\n      }\n    }\n  }),\n  invalidChild: css({\n    zIndex: borderPriority.indexOf(\"invalid\")\n  })\n});\n\nexport { InputGroup };\n//# sourceMappingURL=InputGroup.js.map\n"],"names":["ConfirmModal","isOpen","onCancel","onDiscard","onCopy","buttonRef","styles","getStyles","Modal","Icon","Button","theme","DatasetSelector","dataset","db","dialect","onChange","inputId","preconfiguredDataset","hasPreconfigCondition","state","useAsync","v","Select","TableSelector","table","className","selectors","QueryHeader","isQueryRunnable","onQueryRowChange","onRunQuery","query","queryRowFilter","editorMode","_","copyToClipboard","useCopyToClipboard","showConfirm","setShowConfirm","toRawSql","htmlId","editorModes","onEditorModeChange","newEditorMode","onFormatChange","e","next","onDatasetChange","onTableChange","datasetDropdownIsAvailable","EditorHeader","InlineSelect","ev","FlexItem","Tooltip","RadioButtonGroup","Space","EditorRow","EditorField","QueryEditorRaw","children","width","height","editorLanguageDefinition","queryRef","onRawQueryChange","rawSql","processQuery","newQuery","SQLEditor","QueryValidator","onValidate","range","validationResult","setValidationResult","valueFormatter","validateQuery","useAsyncFn","q","useDebounce","result","error","processErrorMessage","Spinner","splat","QueryToolbox","showTools","onFormatCode","onExpand","isExpanded","validatorProps","style","Stack","IconButton","RawEditor","queryToValidate","setIsExpanded","toolboxRef","toolboxMeasure","useMeasure","editorRef","editorMeasure","renderQueryEditor","formatQuery","renderEditor","standalone","renderPlaceholder","getColumnsWithIndices","fields","options","c","i","value","p","useSqlChange","onQueryChange","sql","GroupByRow","columns","onSqlChange","onGroupByChange","item","cleaned","newSql","EditorList","makeRenderColumn","onChangeItem","onDeleteItem","InputGroup","AccessoryButton","SQLGroupByRow","columnsWithIndices","sortOrderOptions","OrderByRow","showOffset","onSortOrderChange","onLimitChange","event","onOffsetChange","onOrderByChange","Input","SQLOrderByRow","buttonLabels","emptyInitTree","TIME_FILTER","macros","widgets","props","val","dateValue","DateTimePicker","field","widget","operator","operatorDefinition","rightFieldDef","settings","conjProps","fieldProps","f","icon","buttonProps","operatorProps","op","Op","customOperators","getCustomOperators","textWidget","opers","customTextWidget","customTypes","raqbConfig","noop","config","supportedOperators","sqlFormatInOp","formatInOp","customSqlInFormatter","valueSrc","valueType","opDef","operatorOptions","fieldDef","splitIfString","sqlFormatNotInOp","formatNotInOp","customSqlNotInFormatter","_operator","WhereRow","tree","setTree","configWithDefaults","initTree","onTreeChange","changedTree","flex","direction","SQLWhereRow","mapFieldsToTypes","templateVars","removeQuotesForMultiVariables","col","multiVariableInWhereString","tv","SelectColumn","onParameterChange","selectInputId","s","SelectCustomFunctionParameters","currentColumnIndex","macroOrFunction","addParameter","index","removeParameter","columnIndex","renderParameters","param","InlineLabel","SelectFunctionParameters","func","fieldsFromFunction","setFieldsFromFunction","keepIndex","renderParametersWithFunctions","funcParam","SelectRow","timeSeriesAliasOpts","onAggregationChange","aggregation","newItem","onAliasChange","alias","removeColumn","clone","addColumn","aggregateOptions","VisualEditor","EditorRows","Preview","SqlQueryEditor","datasource","queryHeaderProps","setIsQueryRunnable","preconfiguredDatabase","loading","queryWithDefaults","setQueryRowFilter","setQueryToValidate","isQueryValid","process","onQueryHeaderChange","items","renderItem","ref","onAddItem","newItems","itemIndex","EditorStack","wrapItems","_a","_b","grow","shrink","labelProp","id","getSelectStyles","components","SelectContainer","ValueContainer","modifiedChildren","child","borderPriority"],"sourceRoot":""}