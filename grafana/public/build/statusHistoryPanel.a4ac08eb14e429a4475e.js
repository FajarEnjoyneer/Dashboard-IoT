"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8259],{24181:(pt,C,t)=>{t.r(C),t.d(C,{plugin:()=>k});var R=t(16207),v=t(83340),P=t(64394),i=t(92745),l=t(739),D=t(45013),j=t(44017),w=t(41069),z=t(79277),s=t(74848),d=t(96540),A=t(84229),$=t(14477),B=t(63142),E=t(64400),K=t(18667),y=t(69234),Y=t(16608),p=t(68706),U=t(44391),O=t(28343),G=t(36327),Q=t(13507),J=t(76234);const X=({data:e,timeRange:n,timeZone:o,options:a,width:h,height:q,fieldConfig:_,replaceVariables:N,onChangeTimeRange:V,id:tt})=>{const u=(0,B.$j)(),[st,c]=(0,d.useState)(null),{sync:et,eventsScope:nt,canAddAnnotations:H,dataLinkPostProcessor:ot,eventBus:at}=(0,E.d2)(),x=et?.()??A.y.Off,L=!!(H&&H()),{frames:it,warn:T}=(0,d.useMemo)(()=>(0,p.Qe)(e.series,!1,n,u),[e.series,n,u]),{paginatedFrames:r,paginationRev:lt,paginationElement:rt,paginationHeight:ut}=(0,O.W)(it,a.perPage),dt=(0,d.useMemo)(()=>(0,p.Or)(r,a.legend,u),[r,a.legend,u]),ht=(0,d.useMemo)(()=>(0,J.Fg)(a.timezone,o),[a.timezone,o]);return!r||typeof T=="string"?(0,s.jsx)($.a,{panelId:tt,fieldConfig:_,data:e,message:T,needsTimeField:!0}):r[0].length>h/2?(0,s.jsx)("div",{className:"panel-empty",children:(0,s.jsx)("p",{children:(0,s.jsxs)(i.x6,{i18nKey:"status-history.status-history-panel.too-many-points",count:r[0].length,children:["Too many points to visualize properly. ",(0,s.jsx)("br",{}),"Update the query to return fewer points. ",(0,s.jsx)("br",{}),"(","{{count}}"," points received)"]})})}):(0,s.jsxs)("div",{className:O.i.container,children:[(0,s.jsx)(Y.I,{theme:u,frames:r,structureRev:e.structureRev,paginationRev:lt,timeRange:n,timeZone:ht,width:h,height:q-ut,legendItems:dt,...a,mode:p.pm.Samples,replaceVariables:N,dataLinkPostProcessor:ot,cursorSync:x,children:(g,m)=>(0,s.jsxs)(s.Fragment,{children:[x!==A.y.Off&&(0,s.jsx)(K.K,{config:g,eventBus:at,frame:m}),a.tooltip.mode!==l.$N.None&&(0,s.jsx)(y.xl,{config:g,hoverMode:a.tooltip.mode===l.$N.Multi?y.b3.xAll:y.b3.xOne,queryZoom:V,syncMode:x,syncScope:nt,getDataLinks:(f,S)=>m.fields[f].getLinks?.({valueRowIndex:S})??[],render:(f,S,gt,mt,W,F,ft,vt)=>{if(L&&F!=null){c(F),W();return}const yt=()=>{let I=f.posToVal(f.cursor.left,"x");c({from:I,to:I}),W()};return(0,s.jsx)(U.K,{series:m,dataIdxs:S,seriesIdx:gt,mode:ft?l.$N.Multi:a.tooltip.mode,sortOrder:a.tooltip.sort,isPinned:mt,timeRange:n,annotate:L?yt:void 0,withDuration:!1,maxHeight:a.tooltip.maxHeight,replaceVariables:N,dataLinks:vt})},maxWidth:a.tooltip.maxWidth}),m.fields[0].config.custom?.axisPlacement!==l.vM.Hidden&&(0,s.jsx)(G.W,{annotations:e.annotations??[],config:g,timeZone:o,newRange:st,setNewRange:c,canvasRegionRendering:!1}),(0,s.jsx)(Q.U,{config:g,onChangeTimeRange:V})]})}),rt]})},ct={colWidth:.9,perPage:20,rowHeight:.9,showValue:l.yL.Auto},M={fillOpacity:70,lineWidth:1};var Z=t(73495);class b{getSuggestionsForData(n){const{dataSummary:o}=n;if(!o.hasData||!o.hasTimeField||!o.hasStringField&&!o.hasNumberField||o.numberFieldCount>=30||o.rowCountMax>100||o.preferredVisualisationType==="logs")return;n.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:P.Y.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:h=>{h.options.colWidth=.7}}}).append({name:Z.m.StatusHistory})}}const k=new R.m(X).useFieldConfig({standardOptions:{[v.uo.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:P.Y.Thresholds}},[v.uo.Links]:{settings:{showOneClick:!0}},[v.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:e=>{const n=[(0,i.t)("status-history.category-status-history","Status history")];e.addSliderInput({path:"lineWidth",name:(0,i.t)("status-history.name-line-width","Line width"),category:n,defaultValue:M.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:(0,i.t)("status-history.name-fill-opacity","Fill opacity"),category:n,defaultValue:M.fillOpacity,settings:{min:0,max:100,step:1}}),D.e(e),j.Wq(e,o=>o===l.vM.Auto||o===l.vM.Hidden),j.T4(e)}}).setPanelOptions(e=>{const n=[(0,i.t)("status-history.category-status-history","Status history")];e.addRadio({path:"showValue",name:(0,i.t)("status-history.name-show-values","Show values"),category:n,settings:{options:[{value:l.yL.Auto,label:(0,i.t)("status-history.show-values-options.label-auto","Auto")},{value:l.yL.Always,label:(0,i.t)("status-history.show-values-options.label-always","Always")},{value:l.yL.Never,label:(0,i.t)("status-history.show-values-options.label-never","Never")}]},defaultValue:l.yL.Auto}).addSliderInput({path:"rowHeight",name:(0,i.t)("status-history.name-row-height","Row height"),category:n,defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:(0,i.t)("status-history.name-column-width","Column width"),category:n,defaultValue:.9,settings:{min:0,max:1,step:.01}}).addNumberInput({path:"perPage",name:(0,i.t)("status-history.name-page-size","Page size (enable pagination)"),category:n,settings:{min:1,step:1,integer:!0}}),w.H(e,!1),z.D(e)}).setSuggestionsSupplier(new b).setDataSupport({annotations:!0})}}]);

//# sourceMappingURL=statusHistoryPanel.a4ac08eb14e429a4475e.js.map