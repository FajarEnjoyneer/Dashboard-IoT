"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[428],{47466:(st,B,t)=>{t.d(B,{o:()=>E});var o=t(74848),r=t(22803),v=t(63142),C=t(77239);const E=({items:p,children:M,isPinned:a,scrollable:T=!1,maxHeight:A})=>{const y=(0,v.of)(x),O=T?{maxHeight:A,overflowY:"auto"}:{};return(0,o.jsxs)("div",{className:y.wrapper,style:O,children:[p.map(({label:I,value:_,color:s,colorIndicator:n,colorPlacement:f,isActive:d,lineStyle:c},i)=>(0,o.jsx)(C.B,{label:I,value:_,color:s,colorIndicator:n,colorPlacement:f,isActive:d,justify:"space-between",isPinned:a,lineStyle:c,showValueScroll:!T},i)),M]})},x=p=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${p.colors.border.weak}`,padding:p.spacing(1)})})},41530:(st,B,t)=>{t.d(B,{A:()=>E});var o=t(74848),r=t(22803),v=t(63142),C=t(77239);const E=({item:p,isPinned:M})=>{const a=(0,v.of)(x),{label:T,value:A,color:y,colorIndicator:O}=p;return(0,o.jsx)("div",{className:a.wrapper,children:(0,o.jsx)(C.B,{label:T,value:A,color:y,colorIndicator:O,marginRight:"22px",isPinned:M})})},x=p=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,padding:p.spacing(1),lineHeight:1})})},74410:(st,B,t)=>{t.d(B,{l:()=>E});var o=t(74848),r=t(22803),v=t(96540),C=t(49785);function E({defaultValues:x,onSubmit:p,validateOnMount:M=!1,validateFieldsOnMount:a,children:T,validateOn:A="onSubmit",maxWidth:y=600,...O}){const{handleSubmit:I,trigger:_,formState:s,...n}=(0,C.mN)({mode:A,defaultValues:x});return(0,v.useEffect)(()=>{M&&_(a)},[_,a,M]),(0,o.jsx)("form",{className:(0,r.css)({maxWidth:y!=="none"?y+"px":y,width:"100%"}),onSubmit:I(p),...O,children:T({errors:s.errors,formState:s,trigger:_,...n})})}},73163:(st,B,t)=>{t.d(B,{Xx:()=>O,ko:()=>A});var o=t(60519),r=t(32899),v=t(95004),C=t(63704),E=t(68143),x=t(43173),p=t(73427),M=t(86967),a=t(92367);const T=(s,n,f)=>(d,c,i)=>(n.variables&&f&&(d=d.replace(/\$\w+/g,g=>{const h=g.slice(1);return n.variables.some(S=>S.key===h)&&f[h]!=null?f[h]:g})),s(d,c,i)),A=(s,n,f,d,c,i)=>!c||c.length===0?[]:c.map(h=>{const S=(0,o.vd)(s,n,f),D={...f,__dataContext:S},at=(q,rt,Q)=>d(q,{...D,...rt},Q);return i.valueRowIndex!==void 0&&!isNaN(i.valueRowIndex)?S.value.rowIndex=i.valueRowIndex:S.value.calculatedValue=i.calculatedValue,{title:d(h.title,D),confirmation:q=>T(at,h,q)(h.confirmation||`Are you sure you want to ${h.title}?`),onClick:(q,rt,Q)=>{let F=y(h,T(at,h,Q));try{(0,E.AI)().fetch(F).subscribe({error:tt=>{p.lE.emit(r.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(tt)},complete:()=>{p.lE.emit(r.r1.alertSuccess,["API call was successful"])}})}catch(tt){p.lE.emit(r.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(tt);return}},oneClick:h.oneClick??!1,style:{backgroundColor:h.style?.backgroundColor??x.$.theme2.colors.secondary.main},variables:h.variables}}).filter(h=>!!h),y=(s,n)=>{const f=new URL(I(n(s.fetch.url))),d={};let c={url:f.toString(),method:s.fetch.method,data:_(s,n),headers:d};return s.fetch.headers&&s.fetch.headers.forEach(([i,g])=>{d[n(i)]=n(g)}),s.fetch.queryParams&&(s.fetch.queryParams?.forEach(([i,g])=>{f.searchParams.append(n(i),n(g))}),c.url=f.toString()),d["X-Grafana-Action"]="1",c.headers=d,c},O=(s=[],n=[])=>({name:"Default field",type:v.PU.string,config:{links:s,actions:n},values:[]}),I=s=>{if(s.startsWith("/")){const f=C.sQ.sanitizeUrl(s);s=(0,a.z)(f,[])}return s},_=(s,n)=>{let f=s.fetch.body?n(s.fetch.body):"{}";return s.fetch.method===M.DO.GET&&(f=void 0),f}},86967:(st,B,t)=>{t.d(B,{DO:()=>C,en:()=>o,gR:()=>r,xp:()=>v});var o=(a=>(a.Center="center",a.Left="left",a.LeftRight="leftright",a.Right="right",a.Scale="scale",a))(o||{}),r=(a=>(a.Bottom="bottom",a.Center="center",a.Scale="scale",a.Top="top",a.TopBottom="topbottom",a))(r||{}),v=(a=>(a.Contain="contain",a.Cover="cover",a.Fill="fill",a.Original="original",a.Tile="tile",a))(v||{}),C=(a=>(a.GET="GET",a.POST="POST",a.PUT="PUT",a))(C||{}),E=(a=>(a.Straight="straight",a))(E||{});const x={vertices:[]},p={connections:[]},M={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},16913:(st,B,t)=>{t.d(B,{OG:()=>C,u6:()=>r});var o=t(73163);const r=(E,x)=>{const p=[];if((E.config.links?.length??0)>0&&E.getLinks!=null){const M=E.values[x],a=E.display?E.display(M):{text:`${M}`,numeric:+M},T=new Set;E.getLinks({calculatedValue:a,valueRowIndex:x}).forEach(A=>{const y=`${A.title}/${A.href}`;T.has(y)||(p.push(A),T.add(y))})}return p},v=E=>{},C=(E,x,p,M)=>{const a=[],T=new Set;return(0,o.ko)(E,x,x.state.scopedVars,p,x.config.actions??[],{valueRowIndex:M}).forEach(y=>{const O=`${y.title}`;T.has(O)||(a.push(y),T.add(O))}),a}},36327:(st,B,t)=>{t.d(B,{W:()=>Rt});var o=t(74848),r=t(22803),v=t(96540),C=t(40961),E=t(84140),x=t(36613),p=t(27359),M=t(739),a=t(6773),T=t(8255),A=t(15245),y=t(63142),O=t(46885),I=t(83505),_=t(51898),s=t(49785),n=t(29647),f=t(41053),d=t(80011),c=t(5421),i=t(92745),g=t(64400),h=t(41654),S=t(37386),D=t(87105),at=t(45861),lt=t(74410),q=t(93732),rt=t(78767);const Q=({annoVals:e,annoIdx:l,dismiss:U,timeZone:W,...$})=>{const R=(0,y.of)(F),{onAnnotationCreate:N,onAnnotationUpdate:it}=(0,g.d2)(),z=(0,v.useRef)(null);(0,n.A)(z,U);const[G,k]=(0,f.A)(async u=>{const j=await N(u);return U(),j}),[dt,et]=(0,f.A)(async u=>{const j=await it(u);return U(),j}),H=u=>(0,d.LE)(u,{format:c.WC.fullDate,timeZone:W}),w=e.id?.[l]!=null,ct=e.isRegion?.[l],ft=w?et:k,nt=w?dt:G,m=ct?`${H(e.time[l])} - ${H(e.timeEnd[l])}`:H(e.time[l]),b=({tags:u,description:j})=>{ft({id:e.id?.[l]??void 0,tags:u,description:j,from:Math.round(e.time[l]),to:Math.round(e.timeEnd?.[l]??e.time[l])})};return(0,o.jsxs)("div",{ref:z,className:R.editor,...$,children:[(0,o.jsx)("div",{className:R.header,children:(0,o.jsxs)(h.B,{justifyContent:"space-between",alignItems:"center",children:[(0,o.jsx)("div",{children:w?(0,i.t)("timeseries.annotation-editor2.edit-annotation","Edit annotation"):(0,i.t)("timeseries.annotation-editor2.add-annotation","Add annotation")}),(0,o.jsx)("div",{children:m})]})}),(0,o.jsx)(lt.l,{onSubmit:b,defaultValues:{description:e.text?.[l],tags:e.tags?.[l]||[]},children:({register:u,errors:j,control:L})=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:R.content,children:[(0,o.jsx)(S.D,{label:(0,i.t)("timeseries.annotation-editor2.label-description","Description"),invalid:!!j.description,error:j?.description?.message,children:(0,o.jsx)(D.f,{className:R.textarea,...u("description",{required:"Annotation description is required"})})}),(0,o.jsx)(S.D,{label:(0,i.t)("timeseries.annotation-editor2.label-tags","Tags"),children:(0,o.jsx)(s.xI,{control:L,name:"tags",render:({field:{ref:K,onChange:Z,...P}})=>(0,o.jsx)(q.$,{allowCustomValue:!0,placeholder:(0,i.t)("timeseries.annotation-editor2.placeholder-add-tags","Add tags"),onChange:Z,tagOptions:rt.vy,tags:P.value})})})]}),(0,o.jsx)("div",{className:R.footer,children:(0,o.jsxs)(h.B,{justifyContent:"flex-end",children:[(0,o.jsx)(at.$n,{size:"sm",variant:"secondary",onClick:U,fill:"outline",children:(0,o.jsx)(i.x6,{i18nKey:"timeseries.annotation-editor2.cancel",children:"Cancel"})}),(0,o.jsx)(at.$n,{size:"sm",type:"submit",disabled:nt?.loading,children:nt?.loading?(0,i.t)("timeseries.annotation-editor2.saving","Saving"):(0,i.t)("timeseries.annotation-editor2.save","Save")})]})})]})})]})},F=e=>({editor:(0,r.css)({background:e.colors.background.elevated,border:`1px solid ${e.colors.border.weak}`,borderRadius:e.shape.radius.default,boxShadow:e.shadows.z3,userSelect:"text",width:"460px"}),content:(0,r.css)({padding:e.spacing(1)}),header:(0,r.css)({borderBottom:`1px solid ${e.colors.border.weak}`,padding:e.spacing(.5,1),fontWeight:e.typography.fontWeightBold,fontSize:e.typography.fontSize,color:e.colors.text.primary}),footer:(0,r.css)({borderTop:`1px solid ${e.colors.border.weak}`,padding:e.spacing(1,1)}),textarea:(0,r.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize})});var tt=t(63704),ut=t(32881),Y=t(76319),Mt=t(94018),pt=t(2954);const Et=()=>!1,At=({annoVals:e,annoIdx:l,timeZone:U,onEdit:W})=>{const $=e.id?.[l],R=(0,y.of)(Dt),{canEditAnnotations:N=Et,canDeleteAnnotations:it=Et,onAnnotationDelete:z}=(0,g.d2)(),G=e.dashboardUID?.[l],k=$!==0&&N(G),dt=$!==0&&it(G)&&z!=null,et=m=>(0,d.LE)(m,{format:c.WC.fullDate,timeZone:U});let H=et(e.time[l]),w=e.text?.[l]??"";e.isRegion?.[l]&&(H+=" - "+et(e.timeEnd[l]));let ct;e.login?.[l]&&e.avatarUrl?.[l]&&(ct=(0,o.jsx)("img",{className:R.avatar,alt:"Annotation avatar",src:e.avatarUrl[l]}));let ft=null,nt="";if(e.alertId?.[l]!==void 0&&e.newState?.[l]){const m=pt.A.getStateDisplayModel(e.newState[l]);ft=(0,o.jsx)("div",{className:R.alertState,children:(0,o.jsx)("i",{className:m.stateClass,children:m.text})}),nt=e.data?.[l]?pt.A.getAlertAnnotationText(e.data[l]):""}else e.title?.[l]&&(w=e.title[l]+(w?`<br />${w}`:""));return(0,o.jsxs)("div",{className:R.wrapper,children:[(0,o.jsx)("div",{className:R.header,children:(0,o.jsxs)(ut.Gy,{justify:"space-between",align:"center",spacing:"md",children:[(0,o.jsxs)("div",{className:R.meta,children:[(0,o.jsxs)("span",{children:[ct,ft]}),H]}),(k||dt)&&(0,o.jsxs)("div",{className:R.editControls,children:[k&&(0,o.jsx)(Y.K,{name:"pen",size:"sm",onClick:W,tooltip:(0,i.t)("timeseries.annotation-tooltip2.tooltip-edit","Edit")}),dt&&(0,o.jsx)(Y.K,{name:"trash-alt",size:"sm",onClick:()=>z($),tooltip:(0,i.t)("timeseries.annotation-tooltip2.tooltip-delete","Delete")})]})]})}),(0,o.jsxs)("div",{className:R.body,children:[w&&(0,o.jsx)("div",{className:R.text,dangerouslySetInnerHTML:{__html:tt.sQ.sanitize(w)}}),nt,(0,o.jsx)("div",{children:(0,o.jsx)(ut.Gy,{spacing:"xs",wrap:!0,children:e.tags?.[l]?.map((m,b)=>(0,o.jsx)(Mt.v,{name:m},`${m}-${b}`))})})]})]})},Dt=e=>({wrapper:(0,r.css)({zIndex:e.zIndex.tooltip,whiteSpace:"initial",borderRadius:e.shape.radius.default,background:e.colors.background.elevated,border:`1px solid ${e.colors.border.weak}`,boxShadow:e.shadows.z3,userSelect:"text"}),header:(0,r.css)({padding:e.spacing(.5,1),borderBottom:`1px solid ${e.colors.border.weak}`,fontWeight:e.typography.fontWeightBold,fontSize:e.typography.fontSize,color:e.colors.text.primary,display:"flex"}),meta:(0,r.css)({display:"flex",justifyContent:"space-between",color:e.colors.text.primary,fontWeight:400}),editControls:(0,r.css)({display:"flex",alignItems:"center","> :last-child":{marginLeft:0}}),body:(0,r.css)({padding:e.spacing(1),fontSize:e.typography.bodySmall.fontSize,color:e.colors.text.secondary,fontWeight:400,a:{color:e.colors.text.link,"&:hover":{textDecoration:"underline"}}}),text:(0,r.css)({paddingBottom:e.spacing(1)}),avatar:(0,r.css)({borderRadius:e.shape.radius.circle,width:16,height:16,marginRight:e.spacing(1)}),alertState:(0,r.css)({paddingRight:e.spacing(1),fontWeight:e.typography.fontWeightMedium})}),ht=0,mt=1,xt=2,Tt=({annoVals:e,annoIdx:l,className:U,style:W,exitWipEdit:$,timeZone:R,portalRoot:N})=>{const it=(0,y.of)(Ot),[z,G]=(0,v.useState)($!=null?mt:ht),{refs:k,floatingStyles:dt}=(0,I.we)({open:!0,placement:"bottom",middleware:[(0,O.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,O.BN)()],whileElementsMounted:O.ll,strategy:"fixed"}),et=z===xt?(0,o.jsx)(At,{annoIdx:l,annoVals:e,timeZone:R,onEdit:()=>G(mt)}):z===mt?(0,o.jsx)(Q,{annoIdx:l,annoVals:e,timeZone:R,dismiss:()=>{$?.(),G(ht)}}):null;return(0,o.jsx)("div",{ref:k.setReference,className:U,style:W,onMouseEnter:()=>z!==mt&&G(xt),onMouseLeave:()=>z!==mt&&G(ht),"data-testid":_.Tp.pages.Dashboard.Annotations.marker,children:et&&(0,C.createPortal)((0,o.jsx)("div",{ref:k.setFloating,className:it.annoBox,style:dt,"data-testid":"annotation-marker",children:et}),N)})},Ot=e=>({annoBox:(0,r.css)({top:0,left:0,zIndex:e.zIndex.tooltip,borderRadius:e.shape.radius.default,position:"absolute",background:e.colors.background.primary,border:`1px solid ${e.colors.border.weak}`,boxShadow:e.shadows.z2,userSelect:"text",minWidth:"300px"})}),yt=(e,l,U,W,$)=>{e.beginPath(),e.moveTo(W,l),e.lineTo(W,U),e.strokeStyle=$,e.stroke()},vt=(0,E.A)(T.Mk).toHex8String();function Pt(e){let l={};return e.fields.forEach(U=>{l[U.name]=U.values}),l}const Rt=({annotations:e,timeZone:l,config:U,newRange:W,setNewRange:$,canvasRegionRendering:R=!0})=>{const[N,it]=(0,v.useState)(),[z]=(0,v.useState)(()=>(0,A.gF)()),G=(0,y.of)(Ct),k=(0,y.$j)().visualization.getColorByName,[dt,et]=(0,v.useReducer)(m=>m+1,0),H=(0,v.useMemo)(()=>{let m=e.filter(b=>b.name!=="exemplar"&&b.length>0&&b.fields.some(u=>u.name==="time"));if(W){let b=W.to>W.from;const u=(0,p.I)([{time:W.from,timeEnd:b?W.to:null,isRegion:b,color:vt}]);u.meta={dataTopic:M.QR.Annotations,custom:{isWip:!0}},m.push(u)}return m},[e,W]),w=(0,v.useCallback)(()=>{$(null)},[$]),ct=(0,v.useRef)(H);ct.current=H;const ft=(0,v.useRef)(W);ft.current=W;const nt=(0,v.useRef)();if((0,v.useLayoutEffect)(()=>{U.addHook("ready",m=>{let b=m.root.querySelector(".u-axis");nt.current=b,it(m)}),U.addHook("draw",m=>{let b=ct.current;const u=m.ctx;u.save(),u.beginPath(),u.rect(m.bbox.left,m.bbox.top,m.bbox.width,m.bbox.height),u.clip(),b.forEach(j=>{let L=Pt(j);if(j.name==="xymark"){let K=U.scales[0].props.scaleKey,Z=U.scales[1].props.scaleKey;for(let P=0;P<j.length;P++){let V=k(L.color?.[P]||vt),X=m.valToPos(L.xMin[P],K,!0),J=m.valToPos(L.xMax[P],K,!0),ot=m.valToPos(L.yMax[P],Z,!0),gt=m.valToPos(L.yMin[P],Z,!0);u.fillStyle=a.MV.alpha(V,L.fillOpacity[P]),u.fillRect(X,ot,J-X,gt-ot),u.lineWidth=Math.round(L.lineWidth[P]*x.A.pxRatio),L.lineStyle[P]==="dash"?u.setLineDash([5,5]):u.setLineDash([]),u.strokeStyle=V,u.strokeRect(X,ot,J-X,gt-ot)}}else{let K=m.bbox.top,Z=K+m.bbox.height;u.lineWidth=2,u.setLineDash([5,5]);for(let P=0;P<L.time.length;P++){let V=k(L.color?.[P]||vt),X=m.valToPos(L.time[P],"x",!0);if(yt(u,K,Z,X,V),L.isRegion?.[P]){let J=m.valToPos(L.timeEnd[P],"x",!0);yt(u,K,Z,J,V),R&&(u.fillStyle=a.MV.alpha(V,.1),u.fillRect(X,K,J-X,m.bbox.height))}}}}),u.restore()})},[U,R,k]),(0,v.useEffect)(()=>{N&&(N.redraw(),setTimeout(()=>{et()},0))},[H,N]),N){let m=H.flatMap((b,u)=>{let j=Pt(b),L=[];for(let K=0;K<j.time.length;K++){let Z=k(j.color?.[K]||T.Mk),P=Math.round(N.valToPos(j.time[K],"x"))||0,V=null,X="",J=!0;if(j.isRegion?.[K]){let ot=Math.round(N.valToPos(j.timeEnd?.[K],"x"))||0;if(J=P<N.rect.width&&ot>0,J){let gt=Math.max(0,P),St=Math.min(N.rect.width,ot);V={left:gt,background:Z,width:St-gt},X=G.annoRegion}}else J=P>=0&&P<=N.rect.width,J&&(V={left:P,borderBottomColor:Z},X=G.annoMarker);if(J){let ot=b.meta?.custom?.isWip;L.push((0,o.jsx)(Tt,{annoIdx:K,annoVals:j,className:X,style:V,timeZone:l,exitWipEdit:ot?w:null,portalRoot:z},`${u}:${K}`))}}return L});return(0,C.createPortal)(m,nt.current)}return null},Ct=()=>({annoMarker:(0,r.css)({position:"absolute",width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottomWidth:"5px",borderBottomStyle:"solid",transform:"translateX(-50%)",cursor:"pointer",zIndex:1}),annoRegion:(0,r.css)({position:"absolute",height:"5px",cursor:"pointer",zIndex:1})})},13507:(st,B,t)=>{t.d(B,{U:()=>E});var o=t(74848),r=t(96540),v=t(92745),C=t(45861);const E=({config:x,onChangeTimeRange:p})=>{const M=(0,r.useRef)(),[a,T]=(0,r.useState)([]),[A,y]=(0,r.useState)();if((0,r.useLayoutEffect)(()=>{x.addHook("init",d=>{M.current=d}),x.addHook("setScale",d=>{T(d.data?.[0]??[]),y(d.scales.x??void 0)})},[x]),a.length<2||!p||!A||!A.time||!A.min||!A.max)return null;let O=0,I=a.length-1;for(;O<=I&&a[O]==null;)O++;for(;I>=0&&a[I]==null;)I--;const _=a[O],s=a[I],n=A.min,f=A.max;return _==null||s==null||_<=f&&s>=n?null:(0,o.jsx)("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"},children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)(v.x6,{i18nKey:"timeseries.outside-range-plugin.data-outside-time-range",children:"Data outside time range"})}),(0,o.jsx)(C.$n,{onClick:d=>p({from:_,to:s}),variant:"secondary","data-testid":"time-series-zoom-to-data",children:(0,o.jsx)(v.x6,{i18nKey:"timeseries.outside-range-plugin.zoom-to-data",children:"Zoom to data"})})]})})};E.displayName="OutsideRangePlugin"},76234:(st,B,t)=>{t.d(B,{B_:()=>A,Fg:()=>I,O2:()=>O,T5:()=>_});var o=t(95004),r=t(16515),v=t(63409),C=t(34455),E=t(55386),x=t(11576),p=t(406),M=t(739),a=t(70332);function T(s){let n=new Map;return s.map(d=>({...d,fields:d.fields.map(c=>{if(c.type===o.PU.enum){let i=(0,a.M)(c.config,c.type),g=n.get(i);g||(g=[],n.set(i,g));let h=c.values.toArray().slice(),S=c.config.type.enum.text;if(g.length>0)for(let D=0;D<h.length;D++)h[D]+=g.length;return g.push(...S),c.config.type.enum.text=g,{...c,values:h}}return c})}))}function A(s,n,f,d){if(!s?.length)return null;(0,r.Fm)(s);let c=d!=null;d!=null&&d>0&&(s=[{...s[0],fields:[s[0].fields[d],...s[0].fields.filter((S,D)=>D!==d)]}]);for(let S of s)for(let D of S.fields)D.type===o.PU.time&&typeof D.values[0]!="number"&&(D.values=(0,p.s7)(D,{destinationType:o.PU.time}).values);let i=0;t:for(let S of s)for(let D of S.fields)if(D.type===o.PU.enum&&++i>1){s=T(s);break t}let g;const h=[];for(let S of s){const D=[];let at=!1,lt=!1,q=c?S:(0,v.M)({frame:S,refFieldPseudoMin:f?.from.valueOf(),refFieldPseudoMax:f?.to.valueOf()});const rt=(0,C.C)(q).fields;for(let Q=0;Q<(rt?.length||0);Q++){const F=rt[Q];switch(F.type){case o.PU.time:at=!0,D.push(F);break;case o.PU.number:lt=c?Q>0:!0,g={...F,values:F.values.map(Y=>Number.isFinite(Y)||Y==null?Y:null)},D.push(g);break;case o.PU.enum:lt=!0;case o.PU.string:g={...F,values:F.values},D.push(g);break;case o.PU.boolean:lt=!0;const tt=F.config?.custom??{},ut={...F.config,max:1,min:0,custom:tt};tt.lineInterpolation!==M.dx.StepBefore&&(tt.lineInterpolation=M.dx.StepAfter),g={...F,config:ut,type:o.PU.number,values:F.values.map(Y=>Y==null?Y:Y?1:0)},(0,E.j9)(ut.unit)||(ut.unit="bool",g.display=(0,x.J)({field:g,theme:n})),D.push(g);break}}(c||at)&&lt&&h.push({...S,length:q.length,fields:D})}return h.length?(O(h,n,0),y(h,n),h):null}const y=(s,n)=>{const{palette:f}=n.visualization;for(const d of s)for(const c of d.fields)if(c.type===o.PU.enum){const i=f[c.state?.seriesIndex%f.length],g=n.visualization.getColorByName(i),h=c.config.type.enum;h.color=Array(h.text.length).fill(g),c.display=(0,x.J)({field:c,theme:n})}},O=(s,n,f)=>{let d=0;s.forEach(c=>{c.fields.forEach((i,g)=>{g!==f&&(i.type===o.PU.number||i.type===o.PU.boolean||i.type===o.PU.enum)&&(i.state={...i.state,seriesIndex:d++},i.display=(0,x.J)({field:i,theme:n}))})})};function I(s,n){return!s||!s.length?[n]:s.map(f=>f?.length?f:n)}const _=s=>s.mode===M.$N.Multi&&s.maxHeight!=null}}]);

//# sourceMappingURL=428.96b9630abd63ceb63c66.js.map