"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5428],{47220:(dt,Q,t)=>{t.d(Q,{o:()=>E});var A=t(74848),H=t(96540),T=t(36638),b=t(57866),Y=t(95004),F=t(60519),O=t(54735),R=t(36192),Z=t(92790),m=t(17669);function D(i,s,l=[]){for(const n of l)if(typeof n=="function"){if(!n(i,s))return!1}else if(s[n]!==i[n])return!1;return!0}const U={x:T.sJ.get(b.Ct.firstTimeField).get({}),y:T.sJ.get(b.Ct.byTypes).get(new Set([Y.PU.number,Y.PU.enum]))};class E extends H.Component{constructor(s){super(s),this.getTimeRange=()=>this.props.timeRange;let l=this.prepState(s);l.alignedData=l.config.prepData([l.alignedFrame]),this.state=l,this.plotInstance=H.createRef()}prepState(s,l=!0){let n=null;const{frames:a,fields:r=U,preparePlotFrame:d,replaceVariables:P,dataLinkPostProcessor:y}=s,x=d??m.m,g=a.some(M=>M.fields.some(W=>(W.config.links?.length??0)>0)),j=x(a,{...r,y:g?()=>!0:r.y},s.timeRange);if((0,R.uY)("GraphNG",!1,"data aligned",j),j){let M=j;if(g){const h=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;let u=a.map((c,p)=>({...c,fields:j.fields.filter((C,S)=>S===0||C.state?.origin?.frameIndex===p),length:j.length}));u.forEach((c,p)=>{c.fields.forEach(C=>{C.getLinks=(0,F._M)(c,C,{...C.state?.scopedVars,__dataContext:{value:{data:u,field:C,frame:c,frameIndex:p}}},P,h,y)})}),M={...j,fields:j.fields.filter((c,p)=>p===0||r.y(c,j,[j]))}}if(s.omitHideFromViz){const h=M.fields.filter(u=>u.config.custom?.hideFrom?.viz!==!0);M={...M,fields:h,length:h.length}}let W=this.state?.config;l&&(W=s.prepConfig(M,this.props.frames,this.getTimeRange),(0,R.uY)("GraphNG",!1,"config prepared",W)),n={alignedFrame:M,config:W},(0,R.uY)("GraphNG",!1,"data prepared",n.alignedData)}return n}componentDidUpdate(s){const{frames:l,structureRev:n,timeZone:a,cursorSync:r,propsToDiff:d}=this.props,P=!D(s,this.props,d);if(l!==s.frames||P||a!==s.timeZone||r!==s.cursorSync){let y=this.prepState(this.props,!1);y&&((this.state.config===void 0||a!==s.timeZone||r!==s.cursorSync||n!==s.structureRev||!n||P)&&(y.config=this.props.prepConfig(y.alignedFrame,this.props.frames,this.getTimeRange),(0,R.uY)("GraphNG",!1,"config recreated",y.config)),y.alignedData=y.config.prepData([y.alignedFrame]),this.setState(y))}}render(){const{width:s,height:l,children:n,renderLegend:a}=this.props,{config:r,alignedFrame:d,alignedData:P}=this.state;return r?(0,A.jsx)(O.KU,{width:s,height:l,legend:a(r),children:(y,x)=>(0,A.jsx)(Z.Z,{config:r,data:P,width:y,height:x,plotRef:g=>this.plotInstance.current=g,children:n?n(r,d):null})}):null}}},17669:(dt,Q,t)=>{t.d(Q,{m:()=>Z});var A=t(95004),H=t(63409),T=t(8721);function b(m,D,U){let E,i;for(let s=0;s<D.length;s++)if(D[s]==null)i==null&&E!=null&&(i=s);else{if(i!=null&&E!=null){if(m[s]-E<U)for(;i<s;)D[i++]=void 0;i=null}E=m[s]}return D}var Y=t(739);function F(m){return m.type===A.PU.number&&m.config.custom?.drawStyle===Y.GR.Bars&&!m.config.custom?.hideFrom?.viz}function O(m,D){return m.fields.find(U=>D!=null?U.name===D:U.type===A.PU.time)}function R(m,D){const U=O(m,D);let E=U?.values;for(let i=0;i<m.fields.length;i++){let s=m.fields[i];if(s===U||F(s))continue;let l=s.config.custom?.spanNulls;typeof l=="number"&&l!==-1&&E&&(s.values=b(E,s.values,l))}return m}function Z(m,D,U){let E;t:for(let n of m)for(let a of n.fields)if(D.x(a,n,m)){E=a;break t}m=m.map(n=>E?.state?.nullThresholdApplied?n:(0,H.M)({frame:n,refFieldName:E.name,refFieldPseudoMin:U?.from.valueOf(),refFieldPseudoMax:U?.to.valueOf()}));let i=m.reduce((n,a)=>n+a.fields.reduce((r,d)=>r+(F(d)?1:0),0),0),s=1/0;i>1&&m.forEach(n=>{if(!n.fields.some(F))return;const a=E.values;for(let r=0;r<a.length;r++)r>0&&(s=Math.min(s,a[r]-a[r-1]))});let l=(0,T.Fd)({frames:m,joinBy:D.x,keep:D.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:n=>{if(F(n))return T.WO;let a=n.config.custom?.spanNulls;return a===!0?T.RC:a===-1?T.WO:T.JI}});return l?(l=R(l,E.name),s!==1/0&&(l.fields.forEach((n,a)=>{let r=n.values;if(a===0){let d=r[r.length-1];r.push(d+s,d+2*s)}else F(n)?r.push(null,null):r.push(void 0,void 0)}),l.length+=2),l):null}},3041:(dt,Q,t)=>{t.d(Q,{Z:()=>W});var A=t(74848),H=t(96540),T=t(63142),b=t(61897),Y=t(47220),F=t(2543),O=t(36613),R=t(95004),Z=t(55386),m=t(11576),D=t(76637),U=t(64394),E=t(16515),i=t(739),s=t(47276),l=t(36192),n=t(70332),a=t(66650);const r=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),d=Array(53);for(let h=0;h<d.length;h++)d[h]=2**h;const P=(h,u=1)=>h==null?"-":h.toFixed(u),y={drawStyle:i.GR.Line,showPoints:i.yL.Auto,axisPlacement:i.vM.Auto},x=({frame:h,theme:u,timeZones:c,getTimeRange:p,allFrames:C,renderers:S,tweakScale:$=_=>_,tweakAxis:k=_=>_,hoverProximity:q,orientation:et=i.wV.Horizontal})=>{const _=et!==i.wV.Vertical,f=new s.e(c[0]);let v;f.setPrepData(B=>(v=B[0],(0,l.bq)(B[0],f.getStackingGroups())));const L=h.fields[0];if(!L)return f;const J="x";let ot="";const it=L.config.custom?.axisPlacement===i.vM.Hidden?i.vM.Hidden:_?i.vM.Bottom:i.vM.Left,at=L.config.custom?.axisPlacement!==i.vM.Hidden;if(L.type===R.PU.time){f.addScale({scaleKey:J,orientation:_?i.Lt.Horizontal:i.Lt.Vertical,direction:_?i.ON.Right:i.ON.Up,isTime:!0,range:()=>{const e=p();return[e.from.valueOf(),e.to.valueOf()]}});const B=c.length>1?(e,I)=>_?I.map((o,st)=>st<2?null:o):I:void 0;for(let e=0;e<c.length;e++){const I=c[e];f.addAxis({scaleKey:J,isTime:!0,placement:it,show:at,label:L.config.custom?.axisLabel,timeZone:I,theme:u,grid:{show:e===0&&L.config.custom?.axisGridShow},filter:B})}c.length>1&&f.addHook("drawAxes",e=>{e.ctx.save();let I=0;e.axes.forEach(o=>{if(_&&o.side===2){e.ctx.fillStyle=u.colors.text.primary,e.ctx.textAlign="left",e.ctx.textBaseline="bottom";let st=o._pos+o._size;e.ctx.fillText(c[I],e.bbox.left,st*O.A.pxRatio),I++}}),e.ctx.restore()})}else f.addScale({scaleKey:J,orientation:_?i.Lt.Horizontal:i.Lt.Vertical,direction:_?i.ON.Right:i.ON.Up,range:(B,e,I)=>[L.config.min??e,L.config.max??I]}),f.addAxis({scaleKey:J,placement:it,show:at,label:L.config.custom?.axisLabel,theme:u,grid:{show:L.config.custom?.axisGridShow},formatValue:(B,e)=>(0,Z.cN)(L.display(B,e))});let pt=S?.flatMap(B=>Object.values(B.fieldMap).filter(e=>B.indicesOnly.indexOf(e)===-1))??[],tt;for(let B=1;B<h.fields.length;B++){const e=h.fields[B],I={...e.config,custom:{...y,...e.config.custom}},o=I.custom;if(e===L||e.type!==R.PU.number&&e.type!==R.PU.enum)continue;let st=e.display??P;e.config.custom?.stacking?.mode===i.gs.Percent&&(st=(0,m.J)({field:{...e,config:{...e.config,unit:"percentunit"}},theme:u}));const ct=(0,n.M)(I,e.type),ut=(0,D.Qi)(e),yt=(0,D.lz)(e,u).color;if(f.addScale($({scaleKey:ct,orientation:_?i.Lt.Vertical:i.Lt.Horizontal,direction:_?i.ON.Up:i.ON.Right,distribution:o.scaleDistribution?.type,log:o.scaleDistribution?.log,linearThreshold:o.scaleDistribution?.linearThreshold,min:e.config.min,max:e.config.max,softMin:o.axisSoftMin,softMax:o.axisSoftMax,centeredZero:o.axisCenteredZero,stackingMode:o.stacking?.mode,range:e.type===R.PU.enum?(K,rt,nt)=>[-1,e.config.type.enum.text.length]:void 0,decimals:e.config.decimals},e)),ot||(ot=ct),o.axisPlacement!==i.vM.Hidden){let K;o.axisColorMode===i.Y$.Series&&(ut.isByValue&&e.config.custom?.gradientMode===i.on.Scheme&&ut.id===U.Y.Thresholds?K=(0,a.pl)(1,u,ut,e.config.thresholds):K=yt);const rt={border:{show:o.axisBorderShow||!1,width:1/devicePixelRatio,stroke:K||u.colors.text.primary},ticks:{show:o.axisBorderShow||!1,stroke:K||u.colors.text.primary},color:K||u.colors.text.primary};let nt,z,w;if(r.has(I.unit))nt=d;else if(e.type===R.PU.enum){let N=e.config.type.enum.text;w=N.map((G,V)=>V),z=N}f.addAxis(k({scaleKey:ct,label:o.axisLabel,size:o.axisWidth,placement:_?o.axisPlacement??i.vM.Auto:i.vM.Bottom,formatValue:(N,G)=>(0,Z.cN)(st(N,G)),theme:u,grid:{show:o.axisGridShow},decimals:e.config.decimals,distr:o.scaleDistribution?.type,splits:w,values:z,incrs:nt,...rt},e))}const Mt=o.drawStyle===i.GR.Points?i.yL.Always:o.showPoints;let Et=()=>null;o.spanNulls!==!0&&Mt===i.yL.Auto&&(Et=(K,rt,nt,z)=>{let w=[];if(!nt){const N=K.data[rt];if(z&&z.length){const G=K.posToIdx(z[0][0],!0);N[G-1]==null&&w.push(G);for(let ft=0;ft<z.length;ft++){let ht=z[ft],gt=z[ft+1];if(gt&&ht[1]===gt[0]){let X=K.posToIdx(ht[1],!0);if(N[X]==null)for(let lt=1;lt<100;lt++){if(N[X+lt]!=null){X+=lt;break}if(N[X-lt]!=null){X-=lt;break}}w.push(X)}}const V=K.posToIdx(z[z.length-1][1],!0);N[V+1]==null&&w.push(V)}else{let G=0;for(;N[G]===null;)G++;let V=N.length-1;for(;V>=G&&N[V]===null;)V--;G===V&&w.push(G)}}return w.length?w:null});let{fillOpacity:mt}=o,xt=null,Pt=null;if(e.state?.origin){tt||(tt=g(h,C));const K=C[e.state.origin.frameIndex],rt=K?.fields[e.state.origin.fieldIndex],nt=(0,E.Ct)(rt??e,K,C);if(pt.indexOf(nt)>=0)xt=()=>null,Pt=()=>{};else if(o.transform===i.NU.Constant){const z=O.A.paths.linear();xt=(w,N)=>{const G=w._data,V=p();let ft=[V.from.valueOf(),V.to.valueOf()],ht=G[N].find(lt=>lt!=null),gt=[ht,ht],X=G.slice();return X[0]=ft,X[N]=gt,z({...w,_data:X},N,0,1)}}if(o.fillBelowTo){const z=h.fields.find(V=>o.fillBelowTo===V.name||o.fillBelowTo===V.config?.displayNameFromDS||o.fillBelowTo===(0,E.Ct)(V,h,C)),w=z?(0,E.Ct)(z,h,C):o.fillBelowTo,N=tt.get(nt),G=tt.get(w);(0,F.isNumber)(G)&&(0,F.isNumber)(N)?(f.addBand({series:[N,G],fill:void 0}),mt||(mt=35)):mt=0}}let vt;ut.id===U.Y.Thresholds&&(vt=K=>(0,D.lz)(v.fields[K],u).color),f.addSeries({pathBuilder:xt,pointsBuilder:Pt,scaleKey:ct,showPoints:Mt,pointsFilter:Et,colorMode:ut,fillOpacity:mt,theme:u,dynamicSeriesColor:vt,drawStyle:o.drawStyle,lineColor:o.lineColor??yt,lineWidth:o.lineWidth,lineInterpolation:o.lineInterpolation,lineStyle:o.lineStyle,barAlignment:o.barAlignment,barWidthFactor:o.barWidthFactor,barMaxWidth:o.barMaxWidth,pointSize:o.pointSize,spanNulls:o.spanNulls||!1,show:!o.hideFrom?.viz,gradientMode:o.gradientMode,thresholds:I.thresholds,hardMin:e.config.min,hardMax:e.config.max,softMin:o.axisSoftMin,softMax:o.axisSoftMax,dataFrameFieldIndex:e.state?.origin}),o.thresholdsStyle&&I.thresholds&&(o.thresholdsStyle.mode??i.Ly.Off)!==i.Ly.Off&&f.addThresholds({config:o.thresholdsStyle,thresholds:I.thresholds,scaleKey:ct,theme:u,hardMin:e.config.min,hardMax:e.config.max,softMin:o.axisSoftMin,softMax:o.axisSoftMax})}let Ot=(0,l.ro)(h);f.setStackingGroups(Ot),S?.forEach(B=>{tt||(tt=g(h,C));let e={};for(let I in B.fieldMap){let o=B.fieldMap[I];e[I]=tt.get(o)}B.init(f,e)});const Dt=15;let St={hover:{prox:(B,e,I)=>q??(B.data[e][I]===null?Dt:null),skip:[null]},focus:{prox:q??30},points:{one:!0}};return f.setCursor(St),f};function g(h,u){const c=new Map;return h.fields.forEach((p,C)=>{const S=p.state?.origin;if(S){const $=u[S.frameIndex]?.fields[S.fieldIndex];$&&c.set((0,E.Ct)($,u[S.frameIndex],u),C)}}),c}const j=["legend","options","theme"];class M extends H.Component{constructor(){super(...arguments),this.prepConfig=(u,c,p)=>{const{theme:C,timeZone:S,options:$,renderers:k,tweakAxis:q,tweakScale:et}=this.props;return x({frame:u,theme:C,timeZones:Array.isArray(S)?S:[S],getTimeRange:p,allFrames:c,renderers:k,tweakScale:et,tweakAxis:q,hoverProximity:$?.tooltip?.hoverProximity,orientation:$?.orientation})},this.renderLegend=u=>{const{legend:c,frames:p}=this.props;return!u||c&&!c.showLegend||!(0,b.t)(u,p)?null:(0,A.jsx)(b.$,{data:p,config:u,...c})}}render(){return(0,A.jsx)(Y.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:j,renderLegend:this.renderLegend})}}const W=(0,T.cV)(M);W.displayName="TimeSeries"},78308:(dt,Q,t)=>{t.d(Q,{k:()=>E});var A=t(74848),H=t(55386),T=t(95004),b=t(739),Y=t(55302),F=t(39064),O=t(61048),R=t(41530),Z=t(47466),m=t(16913),D=t(74542),U=t(76234);const E=({series:i,_rest:s,dataIdxs:l,seriesIdx:n,mode:a=b.$N.Single,sortOrder:r=b.xB.None,isPinned:d,annotate:P,maxHeight:y,replaceVariables:x=M=>M,dataLinks:g,hideZeros:j})=>{const M=i.fields[0],W=(0,H.cN)(M.display(M.values[l[0]])),h=(0,Y.cp)(i.fields,M,l,n,a,r,p=>p.type===T.PU.number||p.type===T.PU.enum,j);s?.forEach(p=>{p.config.custom?.hideFrom?.tooltip||h.push({label:p.state?.displayName??p.name,value:(0,D.Sc)(p,p.values[l[0]])})});let u;if(n!=null){const p=i.fields[n],C=g.some(S=>S.oneClick===!0);if(d||C){const S=l[n],$=(0,m.OG)(i,p,x,S);u=(0,A.jsx)(F.S,{dataLinks:g,actions:$,annotate:P})}}const c=M.config.custom?.hideFrom?.tooltip?null:{label:M.type===T.PU.time?"":M.state?.displayName??M.name,value:W};return(0,A.jsxs)(O.i,{children:[c!=null&&(0,A.jsx)(R.A,{item:c,isPinned:d}),(0,A.jsx)(Z.o,{items:h,isPinned:d,scrollable:(0,U.T5)({mode:a,maxHeight:y}),maxHeight:y}),u]})}},99914:(dt,Q,t)=>{t.d(Q,{Oq:()=>T,QB:()=>Y,it:()=>H,uZ:()=>A});var A=(O=>(O.Circle="circle",O.Square="square",O))(A||{}),H=(O=>(O.Auto="auto",O.Manual="manual",O))(H||{}),T=(O=>(O.Lines="lines",O.Points="points",O.PointsAndLines="points+lines",O))(T||{});const b={id:""},Y={fillOpacity:50,show:"points"},F={series:[]}},74542:(dt,Q,t)=>{t.d(Q,{Sc:()=>m,hV:()=>U,rE:()=>i});var A=t(55386),H=t(57866),T=t(16515),b=t(36638),Y=t(95004),F=t(64394),O=t(43173),R=t(739),Z=t(99914);function m(l,n){return l.display?(0,A.cN)(l.display(n)):`${n}`}function D(l){return l.id===H.jR.byIndex?(n,a)=>a===l.options:()=>!1}function U(l,n,a,r){(0,T.Fm)(a),(0,T.j2)(a,r);let d=[];n.length===0&&(n=[{}]);const{palette:P,getColorByName:y}=O.$.theme2.visualization;if(n.forEach((x,g)=>{if(l===Z.it.Manual&&(x.frame?.matcher==null||x.x?.matcher==null||x.y?.matcher==null))return;let j=(0,b.NS)(x.x?.matcher??{id:H.Ct.byTypes,options:new Set(["number","time"])}),M=(0,b.NS)(x.y?.matcher??{id:H.Ct.byType,options:"number"}),W=x.color?(0,b.NS)(x.color.matcher):null,h=x.size?(0,b.NS)(x.size.matcher):null,u=x.frame?D(x.frame.matcher):null;a.forEach((c,p)=>{if(u!=null&&!u(c,p))return;let C=[],S=[],$=c.fields.filter(f=>f.type===Y.PU.number||f.type===Y.PU.time),k=$.find(f=>j(f,c,a)),q=$.filter(f=>f.type===Y.PU.number),et=W!=null?q.find(f=>f!==k&&W(f,c,a)):void 0,_=h!=null?q.find(f=>f!==k&&f!==et&&h(f,c,a)):void 0;k!=null&&(q.forEach(f=>{if(f!==k&&!(l===Z.it.Auto&&(f===et||f===_))&&!(l===Z.it.Manual&&S.length>0)&&M(f,c,a)&&!f.config.custom?.hideFrom?.viz){let v=f,L=x.name?.fixed;if(L==null){const ot=a.length>1&&(c.name!=null||Object.keys(v.labels??{}).length>0),{displayName:it,displayNameFromDS:at}=v.config,pt=it!=null||at!=null;if(ot&&pt){const tt=v.state.displayName;v.config.displayName=v.config.displayNameFromDS=v.state.displayName=void 0,L=(0,T.Ct)(v,c,a),L=L.replace(v.name,at??it),v.config.displayName=it,v.config.displayNameFromDS=at,v.state.displayName=tt}else L=(0,T.Ct)(v,c,a)}let J={name:{value:L},showPoints:v.config.custom.show===Z.Oq.Lines?R.yL.Never:R.yL.Always,pointShape:v.config.custom.pointShape,pointStrokeWidth:v.config.custom.pointStrokeWidth,fillOpacity:v.config.custom.fillOpacity,showLine:v.config.custom.show!==Z.Oq.Points,lineWidth:v.config.custom.lineWidth??2,lineStyle:v.config.custom.lineStyle,x:{field:k},y:{field:v},color:{},size:{},_rest:C};et!=null&&(J.color.field=et),_!=null&&(J.size.field=_,J.size.min=_.config.custom.pointSize?.min??5,J.size.max=_.config.custom.pointSize?.max??100),S.push(J)}}),S.length,c.fields.forEach(f=>{S.some(({x:L,y:J,color:ot,size:it})=>L.field===f||J.field===f||ot.field===f||it.field===f)||C.push(f)}),d.push(...S))})}),d.length!==0){let x=0;d.forEach((g,j)=>{if(g.color.field==null){let M=g.y.field.config.color??{mode:F.Y.PaletteClassic},W="";M.mode===F.Y.PaletteClassic?W=y(P[x++%P.length]):M.mode===F.Y.Fixed&&(W=y(M.fixedColor)),g.color.fixed=W}g.size.field==null&&(g.size.fixed=g.y.field.config.custom.pointSize?.fixed??5)}),E(d)}return d}function E(l){let n=l.map(d=>d.name.value.split(/\s+/g));const{prefix:a,suffix:r}=s(n);(a<1/0||r<1/0)&&l.forEach((d,P)=>{d.name.value=n[P].slice(a,n[P].length-r).join(" ")})}function i(l){let n=l.map(y=>y.split(/\s+/g)),{prefix:a,suffix:r}=s(n),d=n[0];if(d.length===1&&a===1&&r===1)return"";let P=[];return a>0&&P.push(...d.slice(0,a)),r>0&&P.push(...d.slice(-r)),P.join(" ")}function s(l){let n=1/0,a=1/0,r=l[0];for(let d=1;d<l.length;d++)l[d].length<r.length&&(r=l[d]);for(let d=1;d<l.length;d++){let P=l[d];if(P!==r){let y=0;for(let g=0;g<r.length&&P[g]===r[g];g++)y++;y<n&&(n=y);let x=0;for(let g=r.length-1;g>=0&&P[g]===r[g];g--)x++;x<a&&(a=x)}}return{prefix:n,suffix:a}}}}]);

//# sourceMappingURL=5428.470bb07332c6b32e21d6.js.map