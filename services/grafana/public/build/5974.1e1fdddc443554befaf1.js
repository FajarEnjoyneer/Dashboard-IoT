"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5974],{77239:(V,R,e)=>{e.d(R,{B:()=>c});var a=e(74848),r=e(22803),h=e(96540),M=e(63142),y=e(53371),C=e(45967),I=e(64394),x=e(71479),E=e(55978),f=e(55302),g=(n=>(n[n.Leading=0]="Leading",n[n.Trailing=1]="Trailing",n))(g||{});const p=({color:n=I.F,colorIndicator:_=E.Ev,position:u=0,lineStyle:P})=>{const v=(0,M.of)(s);return _===E.fX.series?(0,a.jsx)(x.p,{color:n,lineStyle:P,className:u===0?v.leading:v.trailing}):(0,a.jsx)("span",{style:{backgroundColor:n},className:(0,r.cx)(u===0?v.leading:v.trailing,(0,f.L$)(_,v))})},s=n=>({leading:(0,r.css)({marginRight:n.spacing(.5)}),trailing:(0,r.css)({marginLeft:n.spacing(.5)}),value:(0,r.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,r.css)({}),pie_1_4:(0,r.css)({}),pie_2_4:(0,r.css)({}),pie_3_4:(0,r.css)({}),marker_sm:(0,r.css)({width:"4px",height:"4px",borderRadius:n.shape.radius.circle,minWidth:"4px"}),marker_md:(0,r.css)({width:"8px",height:"8px",borderRadius:n.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,r.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.circle,minWidth:"12px"})});var o=(n=>(n.label="label",n.value="value",n))(o||{});const t="Copied to clipboard",l=2*1e3,i=7,c=({label:n,value:_,color:u,colorIndicator:P,colorPlacement:v=E.lJ.first,justify:m="flex-start",isActive:D=!1,marginRight:B="0px",isPinned:S,lineStyle:W,showValueScroll:L})=>{const O=(0,M.of)(d,m,B),T=L?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"pre-line",wordBreak:"break-word",lineHeight:1.2},[K,U]=(0,h.useState)(!1),[j,F]=(0,h.useState)(null),[N,Z]=(0,h.useState)(!1),$=(0,h.useRef)(null),z=(0,h.useRef)(null);(0,h.useEffect)(()=>{let A;return N&&(A=setTimeout(()=>{Z(!1)},l)),()=>{window.clearTimeout(A)}},[N]);const J=async(A,H)=>{if(!(navigator?.clipboard&&window.isSecureContext)){w(A,H);return}try{await navigator.clipboard.writeText(A),F({[`${H}`]:A}),Z(!0)}catch{F(null)}},w=(A,H)=>{const G=document.createElement("textarea");$.current?.appendChild(G),G.value=A,G.focus(),G.select();try{document.execCommand("copy")&&(F({[`${H}`]:A}),Z(!0))}catch(Y){console.error("Unable to copy to clipboard",Y)}G.remove()},X=A=>{A.currentTarget.offsetWidth<A.currentTarget.scrollWidth&&U(!0)},Q=()=>U(!1);return n.length*i>window.innerWidth/2&&(n=n.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,a.jsxs)("div",{className:O.contentWrapper,children:[(u||n)&&(0,a.jsxs)("div",{className:O.valueWrapper,children:[u&&v===E.lJ.first&&(0,a.jsx)(p,{color:u,colorIndicator:P,lineStyle:W}),S?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(C.m,{content:n,interactive:!1,show:K,children:(0,a.jsxs)(a.Fragment,{children:[N&&j?.label&&(0,a.jsx)(y.r,{placement:"top",referenceElement:$.current,children:t}),(0,a.jsx)("div",{className:(0,r.cx)(O.label,D&&O.activeSeries,navigator?.clipboard&&O.copy),onMouseEnter:X,onMouseLeave:Q,onClick:()=>J(n,"label"),ref:$,children:n})]})})}):(0,a.jsx)("div",{className:(0,r.cx)(O.label,D&&O.activeSeries),children:n})]}),(0,a.jsxs)("div",{className:O.valueWrapper,children:[u&&v===E.lJ.leading&&(0,a.jsx)(p,{color:u,colorIndicator:P,position:g.Leading,lineStyle:W}),S?(0,a.jsxs)(a.Fragment,{children:[N&&j?.value&&(0,a.jsx)(y.r,{placement:"top",referenceElement:z.current,children:t}),(0,a.jsx)("div",{className:(0,r.cx)(O.value,D,navigator?.clipboard&&O.copy),style:T,onClick:()=>J(_?_.toString():"","value"),ref:z,children:_})]}):(0,a.jsx)("div",{className:(0,r.cx)(O.value,D),style:T,children:_}),u&&v===E.lJ.trailing&&(0,a.jsx)(p,{color:u,colorIndicator:P,position:g.Trailing,lineStyle:W})]})]})},d=(n,_,u)=>({contentWrapper:(0,r.css)({display:"flex",alignItems:"start",justifyContent:_,marginRight:u}),label:(0,r.css)({color:n.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:n.spacing(2)}),value:(0,r.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,r.css)({display:"flex",alignItems:"center"}),activeSeries:(0,r.css)({fontWeight:n.typography.fontWeightBold,color:n.colors.text.maxContrast}),copy:(0,r.css)({cursor:"pointer"})})},47220:(V,R,e)=>{e.d(R,{o:()=>s});var a=e(74848),r=e(96540),h=e(36638),M=e(57866),y=e(95004),C=e(60519),I=e(54735),x=e(36192),E=e(92790),f=e(17669);function g(o,t,l=[]){for(const i of l)if(typeof i=="function"){if(!i(o,t))return!1}else if(t[i]!==o[i])return!1;return!0}const p={x:h.sJ.get(M.Ct.firstTimeField).get({}),y:h.sJ.get(M.Ct.byTypes).get(new Set([y.PU.number,y.PU.enum]))};class s extends r.Component{constructor(t){super(t),this.getTimeRange=()=>this.props.timeRange;let l=this.prepState(t);l.alignedData=l.config.prepData([l.alignedFrame]),this.state=l,this.plotInstance=r.createRef()}prepState(t,l=!0){let i=null;const{frames:c,fields:d=p,preparePlotFrame:n,replaceVariables:_,dataLinkPostProcessor:u}=t,P=n??f.m,v=c.some(D=>D.fields.some(B=>(B.config.links?.length??0)>0)),m=P(c,{...d,y:v?()=>!0:d.y},t.timeRange);if((0,x.uY)("GraphNG",!1,"data aligned",m),m){let D=m;if(v){const S=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;let W=c.map((L,O)=>({...L,fields:m.fields.filter((T,K)=>K===0||T.state?.origin?.frameIndex===O),length:m.length}));W.forEach((L,O)=>{L.fields.forEach(T=>{T.getLinks=(0,C._M)(L,T,{...T.state?.scopedVars,__dataContext:{value:{data:W,field:T,frame:L,frameIndex:O}}},_,S,u)})}),D={...m,fields:m.fields.filter((L,O)=>O===0||d.y(L,m,[m]))}}if(t.omitHideFromViz){const S=D.fields.filter(W=>W.config.custom?.hideFrom?.viz!==!0);D={...D,fields:S,length:S.length}}let B=this.state?.config;l&&(B=t.prepConfig(D,this.props.frames,this.getTimeRange),(0,x.uY)("GraphNG",!1,"config prepared",B)),i={alignedFrame:D,config:B},(0,x.uY)("GraphNG",!1,"data prepared",i.alignedData)}return i}componentDidUpdate(t){const{frames:l,structureRev:i,timeZone:c,cursorSync:d,propsToDiff:n}=this.props,_=!g(t,this.props,n);if(l!==t.frames||_||c!==t.timeZone||d!==t.cursorSync){let u=this.prepState(this.props,!1);u&&((this.state.config===void 0||c!==t.timeZone||d!==t.cursorSync||i!==t.structureRev||!i||_)&&(u.config=this.props.prepConfig(u.alignedFrame,this.props.frames,this.getTimeRange),(0,x.uY)("GraphNG",!1,"config recreated",u.config)),u.alignedData=u.config.prepData([u.alignedFrame]),this.setState(u))}}render(){const{width:t,height:l,children:i,renderLegend:c}=this.props,{config:d,alignedFrame:n,alignedData:_}=this.state;return d?(0,a.jsx)(I.KU,{width:t,height:l,legend:c(d),children:(u,P)=>(0,a.jsx)(E.Z,{config:d,data:_,width:u,height:P,plotRef:v=>this.plotInstance.current=v,children:i?i(d,n):null})}):null}}},17669:(V,R,e)=>{e.d(R,{m:()=>E});var a=e(95004),r=e(63409),h=e(8721);function M(f,g,p){let s,o;for(let t=0;t<g.length;t++)if(g[t]==null)o==null&&s!=null&&(o=t);else{if(o!=null&&s!=null){if(f[t]-s<p)for(;o<t;)g[o++]=void 0;o=null}s=f[t]}return g}var y=e(739);function C(f){return f.type===a.PU.number&&f.config.custom?.drawStyle===y.GR.Bars&&!f.config.custom?.hideFrom?.viz}function I(f,g){return f.fields.find(p=>g!=null?p.name===g:p.type===a.PU.time)}function x(f,g){const p=I(f,g);let s=p?.values;for(let o=0;o<f.fields.length;o++){let t=f.fields[o];if(t===p||C(t))continue;let l=t.config.custom?.spanNulls;typeof l=="number"&&l!==-1&&s&&(t.values=M(s,t.values,l))}return f}function E(f,g,p){let s;e:for(let i of f)for(let c of i.fields)if(g.x(c,i,f)){s=c;break e}f=f.map(i=>s?.state?.nullThresholdApplied?i:(0,r.M)({frame:i,refFieldName:s.name,refFieldPseudoMin:p?.from.valueOf(),refFieldPseudoMax:p?.to.valueOf()}));let o=f.reduce((i,c)=>i+c.fields.reduce((d,n)=>d+(C(n)?1:0),0),0),t=1/0;o>1&&f.forEach(i=>{if(!i.fields.some(C))return;const c=s.values;for(let d=0;d<c.length;d++)d>0&&(t=Math.min(t,c[d]-c[d-1]))});let l=(0,h.Fd)({frames:f,joinBy:g.x,keep:g.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:i=>{if(C(i))return h.WO;let c=i.config.custom?.spanNulls;return c===!0?h.RC:c===-1?h.WO:h.JI}});return l?(l=x(l,s.name),t!==1/0&&(l.fields.forEach((i,c)=>{let d=i.values;if(c===0){let n=d[d.length-1];d.push(n+t,n+2*t)}else C(i)?d.push(null,null):d.push(void 0,void 0)}),l.length+=2),l):null}},16608:(V,R,e)=>{e.d(R,{I:()=>g});var a=e(74848),r=e(96540),h=e(64394),M=e(95004),y=e(739),C=e(54735),I=e(4268),x=e(47220),E=e(68706);const f=["rowHeight","colWidth","showValue","mergeValues","alignValue","tooltip","paginationRev"];class g extends r.Component{constructor(){super(...arguments),this.getValueColor=(s,o,t)=>{const l=this.props.frames[s]?.fields[o];if(l?.display){const i=l.display(t);if(i.color)return i.color}return h.F},this.prepConfig=(s,o,t)=>(0,E.iE)({frame:s,getTimeRange:t,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:s.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor,hoverMulti:this.props.tooltip?.mode===y.$N.Multi}),this.renderLegend=s=>{const{legend:o,legendItems:t}=this.props;return!s||!t||!o||o.showLegend===!1?null:(0,a.jsx)(C.KU.Legend,{placement:o.placement,children:(0,a.jsx)(I.t,{placement:o.placement,items:t,displayMode:o.displayMode,readonly:!0})})}}render(){return(0,a.jsx)(x.o,{...this.props,fields:{x:s=>s.type===M.PU.time,y:s=>s.type===M.PU.number||s.type===M.PU.boolean||s.type===M.PU.string||s.type===M.PU.enum},prepConfig:this.prepConfig,propsToDiff:f,renderLegend:this.renderLegend,omitHideFromViz:!0})}}},44391:(V,R,e)=>{e.d(R,{K:()=>p});var a=e(74848),r=e(95004),h=e(739),M=e(55302),y=e(39064),C=e(61048),I=e(41530),x=e(47466),E=e(68706),f=e(16913),g=e(76234);const p=({series:s,dataIdxs:o,seriesIdx:t,mode:l=h.$N.Single,sortOrder:i=h.xB.None,isPinned:c,annotate:d,timeRange:n,withDuration:_,maxHeight:u,replaceVariables:P,dataLinks:v})=>{const m=s.fields[0],D=t!=null?o[t]:o.find(T=>T!=null),B=m.display(m.values[D]).text;l=c?h.$N.Single:l;const S=(0,M.cp)(s.fields,m,o,t,l,i);let W=null;if(_&&l===h.$N.Single){const T=s.fields[t],K=(0,E.GY)(T,D);let U;K&&(U=m.values[K]);const j=m.values[D];let F;if(U)F=U&&(0,E.c5)(U-j),W=U;else{const N=n.to.valueOf();F=(0,E.c5)(N-j),W=N}S.push({label:"Duration",value:F})}let L;if(t!=null){const T=s.fields[t],K=v.some(U=>U.oneClick===!0);if(c||K){const U=o[t],j=(0,f.OG)(s,T,P,U);L=(0,a.jsx)(y.S,{dataLinks:v,actions:j,annotate:d})}}const O={label:m.type===r.PU.time?"":m.state?.displayName??m.name,value:W?B+` - 
`+m.display(W).text:B};return(0,a.jsxs)(C.i,{children:[(0,a.jsx)(I.A,{item:O,isPinned:c}),(0,a.jsx)(x.o,{items:S,isPinned:c,scrollable:(0,g.T5)({mode:l,maxHeight:u}),maxHeight:u}),L]})}},11686:(V,R,e)=>{e.d(R,{K:()=>r,Q:()=>h});var a=e(739);const r={alignValue:"left",mergeValues:!0,perPage:20,rowHeight:.9,showValue:a.yL.Auto},h={fillOpacity:70,lineWidth:0}},28343:(V,R,e)=>{e.d(R,{W:()=>f,i:()=>x});var a=e(74848),r=e(22803),h=e(96540),M=e(49185),y=e(34213),C=e(68706),I=e(11686);const x={container:(0,r.css)({display:"flex",flexDirection:"column"})},E={paginationContainer:(0,r.css)({display:"flex",justifyContent:"center",width:"100%"}),paginationElement:(0,r.css)({marginTop:"8px"})};function f(g,p){const[s,o]=(0,h.useState)(1),[t,{height:l,width:i}]=(0,M.A)(),c=(0,h.useMemo)(()=>!p||g==null?g:(0,C.be)(g),[g,p]);if(!p||c==null)return{paginatedFrames:c,paginationRev:"disabled",paginationElement:void 0,paginationHeight:0};p||=I.K.perPage;const d=Math.ceil(c.length/p),n=Math.min(s,d),_=(n-1)*p,u=c.slice(_,_+p),P=`${n}/${p}`,v=i<550,m=(0,a.jsx)("div",{className:E.paginationContainer,ref:t,children:(0,a.jsx)(y.d,{className:E.paginationElement,currentPage:n,numberOfPages:d,showSmallVersion:v,onNavigate:o})});return{paginatedFrames:u,paginationRev:P,paginationElement:m,paginationHeight:l}}}}]);

//# sourceMappingURL=5974.1e1fdddc443554befaf1.js.map