"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8347],{58102:(L,f,s)=>{s.d(f,{GU:()=>c,YO:()=>u,qm:()=>p});var n=s(74848),i=s(22803),e=s(96540),x=s(92745),l=s(63142),a=s(92948),P=s(10388);const p=({children:o,enterAnimation:t=!0})=>{const E=(0,l.of)(u);return(0,n.jsx)("div",{className:(0,i.cx)(E.loginInnerBox,t&&E.enterAnimation),children:o})},c=({children:o,branding:t,isChangingPassword:E})=>{const r=(0,l.of)(u),[M,h]=(0,e.useState)(!1),O=t?.loginSubtitle??a.M.GetLoginSubTitle(),_=t?.loginTitle??a.M.LoginTitle,m=t?.loginBoxBackground||a.M.LoginBoxBackground(),D=t?.loginLogo,j=t?.hideEdition??a.M.HideEdition;return(0,e.useEffect)(()=>h(!0),[]),(0,n.jsxs)(a.M.LoginBackground,{className:(0,i.cx)(r.container,M&&r.loginAnim,t?.loginBackground),children:[(0,n.jsx)("div",{className:r.loginMain,children:(0,n.jsxs)("div",{className:(0,i.cx)(r.loginContent,m,"login-content-box"),children:[(0,n.jsxs)("div",{className:r.loginLogoWrapper,children:[(0,n.jsx)(a.M.LoginLogo,{className:r.loginLogo,logo:D}),(0,n.jsx)("div",{className:r.titleWrapper,children:E?(0,n.jsx)("h1",{className:r.mainTitle,children:(0,n.jsx)(x.x6,{i18nKey:"login.layout.update-password",children:"Update your password"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:r.mainTitle,children:_}),O&&(0,n.jsx)("h3",{className:r.subTitle,children:O})]})})]}),(0,n.jsx)("div",{className:r.loginOuterBox,children:o})]})}),t?.hideFooter?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(P.wi,{hideEdition:j,customLinks:t?.footerLinks})]})},g=(0,i.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,u=o=>({loginMain:(0,i.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,i.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,i.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,i.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,i.css)({width:"100%",maxWidth:60,marginBottom:o.spacing(2),[o.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,i.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:o.spacing(3)}),titleWrapper:(0,i.css)({textAlign:"center"}),mainTitle:(0,i.css)({fontSize:22,[o.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,i.css)({fontSize:o.typography.size.md,color:o.colors.text.secondary}),loginContent:(0,i.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:o.shape.radius.default,padding:o.spacing(2,0),opacity:0,[o.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[o.breakpoints.up("sm")]:{minHeight:o.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,i.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,i.css)({padding:o.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[o.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,i.css)({[o.transitions.handleMotion("no-preference")]:{animation:`${g} ease-out 0.2s`}})})},10180:(L,f,s)=>{s.d(f,{s:()=>P});var n=s(74848),i=s(96540),e=s(51898),x=s(92745),l=s(63527),a=s(76319);const P=(0,i.forwardRef)((p,c)=>{const[g,u]=(0,i.useState)(!1);return(0,n.jsx)(l.p,{...p,type:g?"text":"password","data-testid":e.Tp.pages.Login.password,ref:c,suffix:(0,n.jsx)(a.K,{name:g?"eye-slash":"eye","aria-controls":p.id,role:"switch","aria-checked":g,onClick:()=>{u(!g)},tooltip:g?(0,x.t)("grafana-ui.password-field.tooltip-hide","Hide password"):(0,x.t)("grafana-ui.password-field.tooltip-show","Show password")})})});P.displayName="PasswordField"},98347:(L,f,s)=>{s.r(f),s.d(f,{SignupPage:()=>E,default:()=>r});var n=s(74848),i=s(49785),e=s(92745),x=s(68143),l=s(37386),a=s(63527),P=s(41654),p=s(45861),c=s(65642),g=s(64762),u=s(42939),o=s(58102),t=s(10180);const E=({queryParams:M})=>{const h=(0,g._2)(),{handleSubmit:O,formState:{errors:_},register:m,getValues:D}=(0,i.mN)({defaultValues:{email:M.email,code:M.code}}),j=async d=>{d.name===""&&delete d.name,delete d.confirm,(await(0,x.AI)().post("/api/user/signup/step2",{email:d.email,code:d.code,username:d.email,orgName:d.orgName,password:d.password,name:d.name}).catch(y=>{const B=y.data?.message||y;h.warning(B)})).code==="redirect-to-select-org"&&window.location.assign((0,c.zj)().appSubUrl+"/profile/select-org?signup=1"),window.location.assign((0,c.zj)().appSubUrl+"/")};return(0,n.jsx)(o.GU,{children:(0,n.jsx)(o.qm,{children:(0,n.jsxs)("form",{onSubmit:O(j),style:{width:"100%"},children:[(0,n.jsx)(l.D,{label:(0,e.t)("sign-up.user-name-label","Your name"),children:(0,n.jsx)(a.p,{id:"user-name",...m("name"),placeholder:(0,e.t)("sign-up.user-name-placeholder","(optional)")})}),(0,n.jsx)(l.D,{label:(0,e.t)("sign-up.email-label","Email"),invalid:!!_.email,error:_.email?.message,children:(0,n.jsx)(a.p,{id:"email",...m("email",{required:"Email is required",pattern:{value:u.pL,message:"Email is invalid"}}),type:"email"})}),!(0,c.zj)().autoAssignOrg&&(0,n.jsx)(l.D,{label:(0,e.t)("sign-up.org-name-label","Org. name"),children:(0,n.jsx)(a.p,{id:"org-name",...m("orgName")})}),(0,c.zj)().verifyEmailEnabled&&(0,n.jsx)(l.D,{label:(0,e.t)("sign-up.verification-code-label","Email verification code (sent to your email)"),children:(0,n.jsx)(a.p,{id:"verification-code",...m("code")})}),(0,n.jsx)(l.D,{label:(0,e.t)("sign-up.password-label","Password"),invalid:!!_.password,error:_?.password?.message,children:(0,n.jsx)(t.s,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...m("password",{required:"Password is required"})})}),(0,n.jsx)(l.D,{label:(0,e.t)("sign-up.confirm-password-label","Confirm password"),invalid:!!_.confirm,error:_?.confirm?.message,children:(0,n.jsx)(t.s,{id:"confirm-new-password",autoComplete:"new-password",...m("confirm",{required:"Confirmed password is required",validate:d=>d===D().password||"Passwords must match!"})})}),(0,n.jsxs)(P.B,{children:[(0,n.jsx)(p.$n,{type:"submit",children:(0,n.jsx)(e.x6,{i18nKey:"sign-up.submit-button",children:"Submit"})}),(0,n.jsx)(p.z9,{fill:"text",href:(0,c.zj)().appSubUrl+"/login",children:(0,n.jsx)(e.x6,{i18nKey:"sign-up.back-button",children:"Back to login"})})]})]})})})},r=E}}]);

//# sourceMappingURL=8347.e0e511b226d34105ea55.js.map