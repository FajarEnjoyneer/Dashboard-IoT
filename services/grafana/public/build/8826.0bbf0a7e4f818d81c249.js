(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8826],{79100:(K,v,_)=>{"use strict";_.d(v,{_:()=>x});var O=_(38729),T=function(c,f){var l=typeof Symbol=="function"&&c[Symbol.iterator];if(!l)return c;var d=l.call(c),S,P=[],m;try{for(;(f===void 0||f-- >0)&&!(S=d.next()).done;)P.push(S.value)}catch(y){m={error:y}}finally{try{S&&!S.done&&(l=d.return)&&l.call(d)}finally{if(m)throw m.error}}return P},M=function(c,f,l){if(l||arguments.length===2)for(var d=0,S=f.length,P;d<S;d++)(P||!(d in f))&&(P||(P=Array.prototype.slice.call(f,0,d)),P[d]=f[d]);return c.concat(P||Array.prototype.slice.call(f))},I=function(){function c(){}return c.prototype.active=function(){return O.l},c.prototype.with=function(f,l,d){for(var S=[],P=3;P<arguments.length;P++)S[P-3]=arguments[P];return l.call.apply(l,M([d],T(S),!1))},c.prototype.bind=function(f,l){return l},c.prototype.enable=function(){return this},c.prototype.disable=function(){return this},c}(),b=_(75158),L=_(44892),A=function(c,f){var l=typeof Symbol=="function"&&c[Symbol.iterator];if(!l)return c;var d=l.call(c),S,P=[],m;try{for(;(f===void 0||f-- >0)&&!(S=d.next()).done;)P.push(S.value)}catch(y){m={error:y}}finally{try{S&&!S.done&&(l=d.return)&&l.call(d)}finally{if(m)throw m.error}}return P},N=function(c,f,l){if(l||arguments.length===2)for(var d=0,S=f.length,P;d<S;d++)(P||!(d in f))&&(P||(P=Array.prototype.slice.call(f,0,d)),P[d]=f[d]);return c.concat(P||Array.prototype.slice.call(f))},R="context",g=new I,x=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(f){return(0,b.$G)(R,f,L.K.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(f,l,d){for(var S,P=[],m=3;m<arguments.length;m++)P[m-3]=arguments[m];return(S=this._getContextManager()).with.apply(S,N([f,l,d],A(P),!1))},c.prototype.bind=function(f,l){return this._getContextManager().bind(f,l)},c.prototype._getContextManager=function(){return(0,b.mS)(R)||g},c.prototype.disable=function(){this._getContextManager().disable(),(0,b.kv)(R,L.K.instance())},c}()},44892:(K,v,_)=>{"use strict";_.d(v,{K:()=>x});var O=_(75158),T=function(c,f){var l=typeof Symbol=="function"&&c[Symbol.iterator];if(!l)return c;var d=l.call(c),S,P=[],m;try{for(;(f===void 0||f-- >0)&&!(S=d.next()).done;)P.push(S.value)}catch(y){m={error:y}}finally{try{S&&!S.done&&(l=d.return)&&l.call(d)}finally{if(m)throw m.error}}return P},M=function(c,f,l){if(l||arguments.length===2)for(var d=0,S=f.length,P;d<S;d++)(P||!(d in f))&&(P||(P=Array.prototype.slice.call(f,0,d)),P[d]=f[d]);return c.concat(P||Array.prototype.slice.call(f))},I=function(){function c(f){this._namespace=f.namespace||"DiagComponentLogger"}return c.prototype.debug=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];return b("debug",this._namespace,f)},c.prototype.error=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];return b("error",this._namespace,f)},c.prototype.info=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];return b("info",this._namespace,f)},c.prototype.warn=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];return b("warn",this._namespace,f)},c.prototype.verbose=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];return b("verbose",this._namespace,f)},c}();function b(c,f,l){var d=(0,O.mS)("diag");if(d)return l.unshift(f),d[c].apply(d,M([],T(l),!1))}var L=_(76733);function A(c,f){c<L.u.NONE?c=L.u.NONE:c>L.u.ALL&&(c=L.u.ALL),f=f||{};function l(d,S){var P=f[d];return typeof P=="function"&&c>=S?P.bind(f):function(){}}return{error:l("error",L.u.ERROR),warn:l("warn",L.u.WARN),info:l("info",L.u.INFO),debug:l("debug",L.u.DEBUG),verbose:l("verbose",L.u.VERBOSE)}}var N=function(c,f){var l=typeof Symbol=="function"&&c[Symbol.iterator];if(!l)return c;var d=l.call(c),S,P=[],m;try{for(;(f===void 0||f-- >0)&&!(S=d.next()).done;)P.push(S.value)}catch(y){m={error:y}}finally{try{S&&!S.done&&(l=d.return)&&l.call(d)}finally{if(m)throw m.error}}return P},R=function(c,f,l){if(l||arguments.length===2)for(var d=0,S=f.length,P;d<S;d++)(P||!(d in f))&&(P||(P=Array.prototype.slice.call(f,0,d)),P[d]=f[d]);return c.concat(P||Array.prototype.slice.call(f))},g="diag",x=function(){function c(){function f(S){return function(){for(var P=[],m=0;m<arguments.length;m++)P[m]=arguments[m];var y=(0,O.mS)("diag");if(y)return y[S].apply(y,R([],N(P),!1))}}var l=this,d=function(S,P){var m,y,C;if(P===void 0&&(P={logLevel:L.u.INFO}),S===l){var H=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((m=H.stack)!==null&&m!==void 0?m:H.message),!1}typeof P=="number"&&(P={logLevel:P});var Y=(0,O.mS)("diag"),At=A((y=P.logLevel)!==null&&y!==void 0?y:L.u.INFO,S);if(Y&&!P.suppressOverrideMessage){var ft=(C=new Error().stack)!==null&&C!==void 0?C:"<failed to generate stacktrace>";Y.warn("Current logger will be overwritten from "+ft),At.warn("Current logger will overwrite one already registered from "+ft)}return(0,O.$G)("diag",At,l,!0)};l.setLogger=d,l.disable=function(){(0,O.kv)(g,l)},l.createComponentLogger=function(S){return new I(S)},l.verbose=f("verbose"),l.debug=f("debug"),l.info=f("info"),l.warn=f("warn"),l.error=f("error")}return c.instance=function(){return this._instance||(this._instance=new c),this._instance},c}()},11616:(K,v,_)=>{"use strict";_.d(v,{B:()=>N,L:()=>A});var O=_(44892),T=function(R,g){var x=typeof Symbol=="function"&&R[Symbol.iterator];if(!x)return R;var c=x.call(R),f,l=[],d;try{for(;(g===void 0||g-- >0)&&!(f=c.next()).done;)l.push(f.value)}catch(S){d={error:S}}finally{try{f&&!f.done&&(x=c.return)&&x.call(c)}finally{if(d)throw d.error}}return l},M=function(R){var g=typeof Symbol=="function"&&Symbol.iterator,x=g&&R[g],c=0;if(x)return x.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&c>=R.length&&(R=void 0),{value:R&&R[c++],done:!R}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},I=function(){function R(g){this._entries=g?new Map(g):new Map}return R.prototype.getEntry=function(g){var x=this._entries.get(g);if(x)return Object.assign({},x)},R.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(g){var x=T(g,2),c=x[0],f=x[1];return[c,f]})},R.prototype.setEntry=function(g,x){var c=new R(this._entries);return c._entries.set(g,x),c},R.prototype.removeEntry=function(g){var x=new R(this._entries);return x._entries.delete(g),x},R.prototype.removeEntries=function(){for(var g,x,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var l=new R(this._entries);try{for(var d=M(c),S=d.next();!S.done;S=d.next()){var P=S.value;l._entries.delete(P)}}catch(m){g={error:m}}finally{try{S&&!S.done&&(x=d.return)&&x.call(d)}finally{if(g)throw g.error}}return l},R.prototype.clear=function(){return new R},R}(),b=Symbol("BaggageEntryMetadata"),L=O.K.instance();function A(R){return R===void 0&&(R={}),new I(new Map(Object.entries(R)))}function N(R){return typeof R!="string"&&(L.error("Cannot create baggage metadata from unknown type: "+typeof R),R=""),{__TYPE__:b,toString:function(){return R}}}},41844:(K,v,_)=>{"use strict";_.d(v,{_:()=>T});var O=_(79100),T=O._.getInstance()},38729:(K,v,_)=>{"use strict";_.d(v,{l:()=>M,n:()=>O});function O(I){return Symbol.for(I)}var T=function(){function I(b){var L=this;L._currentContext=b?new Map(b):new Map,L.getValue=function(A){return L._currentContext.get(A)},L.setValue=function(A,N){var R=new I(L._currentContext);return R._currentContext.set(A,N),R},L.deleteValue=function(A){var N=new I(L._currentContext);return N._currentContext.delete(A),N}}return I}(),M=new T},78758:(K,v,_)=>{"use strict";_.d(v,{s:()=>T});var O=_(44892),T=O.K.instance()},76733:(K,v,_)=>{"use strict";_.d(v,{u:()=>O});var O;(function(T){T[T.NONE=0]="NONE",T[T.ERROR=30]="ERROR",T[T.WARN=50]="WARN",T[T.INFO=60]="INFO",T[T.DEBUG=70]="DEBUG",T[T.VERBOSE=80]="VERBOSE",T[T.ALL=9999]="ALL"})(O||(O={}))},75158:(K,v,_)=>{"use strict";_.d(v,{mS:()=>g,$G:()=>R,kv:()=>x});var O=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof _.g=="object"?_.g:{},T="1.9.0",M=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function I(c){var f=new Set([c]),l=new Set,d=c.match(M);if(!d)return function(){return!1};var S={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(S.prerelease!=null)return function(C){return C===c};function P(y){return l.add(y),!1}function m(y){return f.add(y),!0}return function(C){if(f.has(C))return!0;if(l.has(C))return!1;var H=C.match(M);if(!H)return P(C);var Y={major:+H[1],minor:+H[2],patch:+H[3],prerelease:H[4]};return Y.prerelease!=null||S.major!==Y.major?P(C):S.major===0?S.minor===Y.minor&&S.patch<=Y.patch?m(C):P(C):S.minor<=Y.minor?m(C):P(C)}}var b=I(T),L=T.split(".")[0],A=Symbol.for("opentelemetry.js.api."+L),N=O;function R(c,f,l,d){var S;d===void 0&&(d=!1);var P=N[A]=(S=N[A])!==null&&S!==void 0?S:{version:T};if(!d&&P[c]){var m=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+c);return l.error(m.stack||m.message),!1}if(P.version!==T){var m=new Error("@opentelemetry/api: Registration of version v"+P.version+" for "+c+" does not match previously registered API v"+T);return l.error(m.stack||m.message),!1}return P[c]=f,l.debug("@opentelemetry/api: Registered a global for "+c+" v"+T+"."),!0}function g(c){var f,l,d=(f=N[A])===null||f===void 0?void 0:f.version;if(!(!d||!b(d)))return(l=N[A])===null||l===void 0?void 0:l[c]}function x(c,f){f.debug("@opentelemetry/api: Unregistering a global for "+c+" v"+T+".");var l=N[A];l&&delete l[c]}},48131:(K,v,_)=>{"use strict";_.d(v,{$:()=>P});var O=_(75158),T=function(){function m(){}return m.prototype.inject=function(y,C){},m.prototype.extract=function(y,C){return y},m.prototype.fields=function(){return[]},m}(),M={get:function(m,y){if(m!=null)return m[y]},keys:function(m){return m==null?[]:Object.keys(m)}},I={set:function(m,y,C){m!=null&&(m[y]=C)}},b=_(79100),L=_(38729),A=(0,L.n)("OpenTelemetry Baggage Key");function N(m){return m.getValue(A)||void 0}function R(){return N(b._.getInstance().active())}function g(m,y){return m.setValue(A,y)}function x(m){return m.deleteValue(A)}var c=_(11616),f=_(44892),l="propagation",d=new T,S=function(){function m(){this.createBaggage=c.L,this.getBaggage=N,this.getActiveBaggage=R,this.setBaggage=g,this.deleteBaggage=x}return m.getInstance=function(){return this._instance||(this._instance=new m),this._instance},m.prototype.setGlobalPropagator=function(y){return(0,O.$G)(l,y,f.K.instance())},m.prototype.inject=function(y,C,H){return H===void 0&&(H=I),this._getGlobalPropagator().inject(y,C,H)},m.prototype.extract=function(y,C,H){return H===void 0&&(H=M),this._getGlobalPropagator().extract(y,C,H)},m.prototype.fields=function(){return this._getGlobalPropagator().fields()},m.prototype.disable=function(){(0,O.kv)(l,f.K.instance())},m.prototype._getGlobalPropagator=function(){return(0,O.mS)(l)||d},m}(),P=S.getInstance()},73096:(K,v,_)=>{"use strict";_.d(v,{u:()=>ft});var O=_(75158),T=_(79100),M=_(38729),I=_(31440),b=(0,M.n)("OpenTelemetry Context Key SPAN");function L(F){return F.getValue(b)||void 0}function A(){return L(T._.getInstance().active())}function N(F,j){return F.setValue(b,j)}function R(F){return F.deleteValue(b)}function g(F,j){return N(F,new I.d(j))}function x(F){var j;return(j=L(F))===null||j===void 0?void 0:j.spanContext()}var c=_(67823),f=T._.getInstance(),l=function(){function F(){}return F.prototype.startSpan=function(j,D,k){k===void 0&&(k=f.active());var W=!!D?.root;if(W)return new I.d;var q=k&&x(k);return d(q)&&(0,c.YA)(q)?new I.d(q):new I.d},F.prototype.startActiveSpan=function(j,D,k,W){var q,nt,ct;if(!(arguments.length<2)){arguments.length===2?ct=D:arguments.length===3?(q=D,ct=k):(q=D,nt=k,ct=W);var _t=nt??f.active(),Nt=this.startSpan(j,q,_t),lt=N(_t,Nt);return f.with(lt,ct,void 0,Nt)}},F}();function d(F){return typeof F=="object"&&typeof F.spanId=="string"&&typeof F.traceId=="string"&&typeof F.traceFlags=="number"}var S=new l,P=function(){function F(j,D,k,W){this._provider=j,this.name=D,this.version=k,this.options=W}return F.prototype.startSpan=function(j,D,k){return this._getTracer().startSpan(j,D,k)},F.prototype.startActiveSpan=function(j,D,k,W){var q=this._getTracer();return Reflect.apply(q.startActiveSpan,q,arguments)},F.prototype._getTracer=function(){if(this._delegate)return this._delegate;var j=this._provider.getDelegateTracer(this.name,this.version,this.options);return j?(this._delegate=j,this._delegate):S},F}(),m=function(){function F(){}return F.prototype.getTracer=function(j,D,k){return new l},F}(),y=new m,C=function(){function F(){}return F.prototype.getTracer=function(j,D,k){var W;return(W=this.getDelegateTracer(j,D,k))!==null&&W!==void 0?W:new P(this,j,D,k)},F.prototype.getDelegate=function(){var j;return(j=this._delegate)!==null&&j!==void 0?j:y},F.prototype.setDelegate=function(j){this._delegate=j},F.prototype.getDelegateTracer=function(j,D,k){var W;return(W=this._delegate)===null||W===void 0?void 0:W.getTracer(j,D,k)},F}(),H=_(44892),Y="trace",At=function(){function F(){this._proxyTracerProvider=new C,this.wrapSpanContext=c.IP,this.isSpanContextValid=c.YA,this.deleteSpan=R,this.getSpan=L,this.getActiveSpan=A,this.getSpanContext=x,this.setSpan=N,this.setSpanContext=g}return F.getInstance=function(){return this._instance||(this._instance=new F),this._instance},F.prototype.setGlobalTracerProvider=function(j){var D=(0,O.$G)(Y,this._proxyTracerProvider,H.K.instance());return D&&this._proxyTracerProvider.setDelegate(j),D},F.prototype.getTracerProvider=function(){return(0,O.mS)(Y)||this._proxyTracerProvider},F.prototype.getTracer=function(j,D){return this.getTracerProvider().getTracer(j,D)},F.prototype.disable=function(){(0,O.kv)(Y,H.K.instance()),this._proxyTracerProvider=new C},F}(),ft=At.getInstance()},31440:(K,v,_)=>{"use strict";_.d(v,{d:()=>T});var O=_(97872),T=function(){function M(I){I===void 0&&(I=O.dM),this._spanContext=I}return M.prototype.spanContext=function(){return this._spanContext},M.prototype.setAttribute=function(I,b){return this},M.prototype.setAttributes=function(I){return this},M.prototype.addEvent=function(I,b){return this},M.prototype.addLink=function(I){return this},M.prototype.addLinks=function(I){return this},M.prototype.setStatus=function(I){return this},M.prototype.updateName=function(I){return this},M.prototype.end=function(I){},M.prototype.isRecording=function(){return!1},M.prototype.recordException=function(I,b){},M}()},97872:(K,v,_)=>{"use strict";_.d(v,{RH:()=>M,dM:()=>I,w9:()=>T});var O=_(47397),T="0000000000000000",M="00000000000000000000000000000000",I={traceId:M,spanId:T,traceFlags:O.X.NONE}},67823:(K,v,_)=>{"use strict";_.d(v,{IP:()=>N,YA:()=>A,hX:()=>b});var O=_(97872),T=_(31440),M=/^([0-9a-f]{32})$/i,I=/^[0-9a-f]{16}$/i;function b(R){return M.test(R)&&R!==O.RH}function L(R){return I.test(R)&&R!==O.w9}function A(R){return b(R.traceId)&&L(R.spanId)}function N(R){return new T.d(R)}},11908:(K,v,_)=>{"use strict";_.d(v,{s:()=>O});var O;(function(T){T[T.UNSET=0]="UNSET",T[T.OK=1]="OK",T[T.ERROR=2]="ERROR"})(O||(O={}))},47397:(K,v,_)=>{"use strict";_.d(v,{X:()=>O});var O;(function(T){T[T.NONE=0]="NONE",T[T.SAMPLED=1]="SAMPLED"})(O||(O={}))},92068:(K,v,_)=>{"use strict";_.d(v,{V:()=>O});var O;(function(T){T[T.SUCCESS=0]="SUCCESS",T[T.FAILED=1]="FAILED"})(O||(O={}))},82711:(K,v,_)=>{"use strict";_.d(v,{EC:()=>M,KV:()=>L,QC:()=>b,hN:()=>T,kI:()=>A,r_:()=>I,un:()=>O});const O="=",T=";",M=",",I="baggage",b=180,L=4096,A=8192},75477:(K,v,_)=>{"use strict";_.d(v,{t:()=>b});var O=_(48131),T=_(4445),M=_(82711),I=_(98151);class b{inject(A,N,R){const g=O.$.getBaggage(A);if(!g||(0,T.Zf)(A))return;const x=(0,I.pX)(g).filter(f=>f.length<=M.KV).slice(0,M.QC),c=(0,I.L7)(x);c.length>0&&R.set(N,M.r_,c)}extract(A,N,R){const g=R.get(N,M.r_),x=Array.isArray(g)?g.join(M.EC):g;if(!x)return A;const c={};return x.length===0||(x.split(M.EC).forEach(l=>{const d=(0,I.Qd)(l);if(d){const S={value:d.value};d.metadata&&(S.metadata=d.metadata),c[d.key]=S}}),Object.entries(c).length===0)?A:O.$.setBaggage(A,O.$.createBaggage(c))}fields(){return[M.r_]}}},98151:(K,v,_)=>{"use strict";_.d(v,{L7:()=>M,Qd:()=>b,hD:()=>L,pX:()=>I});var O=_(11616),T=_(82711);function M(A){return A.reduce((N,R)=>{const g=`${N}${N!==""?T.EC:""}${R}`;return g.length>T.kI?N:g},"")}function I(A){return A.getAllEntries().map(([N,R])=>{let g=`${encodeURIComponent(N)}=${encodeURIComponent(R.value)}`;return R.metadata!==void 0&&(g+=T.hN+R.metadata.toString()),g})}function b(A){const N=A.split(T.hN);if(N.length<=0)return;const R=N.shift();if(!R)return;const g=R.indexOf(T.un);if(g<=0)return;const x=decodeURIComponent(R.substring(0,g).trim()),c=decodeURIComponent(R.substring(g+1).trim());let f;return N.length>0&&(f=(0,O.B)(N.join(T.hN))),{key:x,value:c,metadata:f}}function L(A){const N={};return typeof A=="string"&&A.length>0&&A.split(T.EC).forEach(R=>{const g=b(R);g!==void 0&&g.value.length>0&&(N[g.key]=g.value)}),N}},80788:(K,v,_)=>{"use strict";_.d(v,{L:()=>T,m:()=>I});var O=_(78758);function T(A){const N={};if(typeof A!="object"||A==null)return N;for(const[R,g]of Object.entries(A)){if(!M(R)){O.s.warn(`Invalid attribute key: ${R}`);continue}if(!I(g)){O.s.warn(`Invalid attribute value set for key: ${R}`);continue}Array.isArray(g)?N[R]=g.slice():N[R]=g}return N}function M(A){return typeof A=="string"&&A.length>0}function I(A){return A==null?!0:Array.isArray(A)?b(A):L(A)}function b(A){let N;for(const R of A)if(R!=null){if(!N){if(L(R)){N=typeof R;continue}return!1}if(typeof R!==N)return!1}return!0}function L(A){switch(typeof A){case"number":case"boolean":case"string":return!0}return!1}},78044:(K,v,_)=>{"use strict";_.d(v,{s:()=>I,u:()=>M});var O=_(11590);let T=(0,O.o)();function M(b){T=b}function I(b){try{T(b)}catch{}}},11590:(K,v,_)=>{"use strict";_.d(v,{o:()=>T});var O=_(78758);function T(){return b=>{O.s.error(M(b))}}function M(b){return typeof b=="string"?b:JSON.stringify(I(b))}function I(b){const L={};let A=b;for(;A!==null;)Object.getOwnPropertyNames(A).forEach(N=>{if(L[N])return;const R=A[N];R&&(L[N]=String(R))}),A=Object.getPrototypeOf(A);return L}},65864:(K,v,_)=>{"use strict";_.d(v,{Ir:()=>S,JU:()=>f,KJ:()=>R,VL:()=>d,W5:()=>g,_5:()=>N,lg:()=>L,mw:()=>P,tq:()=>x,u5:()=>c,uc:()=>A,w_:()=>l});var O=_(75026);const T=9,I=Math.pow(10,6),b=Math.pow(10,T);function L(m){const y=m/1e3,C=Math.trunc(y),H=Math.round(m%1e3*I);return[C,H]}function A(){let m=O.u.timeOrigin;if(typeof m!="number"){const y=O.u;m=y.timing&&y.timing.fetchStart}return m}function N(m){const y=L(A()),C=L(typeof m=="number"?m:O.u.now());return P(y,C)}function R(m){if(d(m))return m;if(typeof m=="number")return m<A()?N(m):L(m);if(m instanceof Date)return L(m.getTime());throw TypeError("Invalid input type")}function g(m,y){let C=y[0]-m[0],H=y[1]-m[1];return H<0&&(C-=1,H+=b),[C,H]}function x(m){const y=T,C=`${"0".repeat(y)}${m[1]}Z`,H=C.substring(C.length-y-1);return new Date(m[0]*1e3).toISOString().replace("000Z",H)}function c(m){return m[0]*b+m[1]}function f(m){return m[0]*1e3+m[1]/1e6}function l(m){return m[0]*1e6+m[1]/1e3}function d(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}function S(m){return d(m)||typeof m=="number"||m instanceof Date}function P(m,y){const C=[m[0]+y[0],m[1]+y[1]];return C[1]>=b&&(C[1]-=b,C[0]+=1),C}},83303:(K,v,_)=>{"use strict";_.r(v),_.d(v,{AnchoredClock:()=>T,BindOnceFuture:()=>k.I,CompositePropagator:()=>l.n,ExportResultCode:()=>A.V,RPCType:()=>m,SDK_INFO:()=>R.q,TRACE_PARENT_HEADER:()=>d.ZS,TRACE_STATE_HEADER:()=>d.UD,TimeoutError:()=>F,TraceState:()=>At.n,W3CBaggagePropagator:()=>O.t,W3CTraceContextPropagator:()=>d.lm,_globalThis:()=>g.X,addHrTimes:()=>L.mw,callWithTimeout:()=>j,deleteRPCMetadata:()=>C,diagLogLevelFromString:()=>ct,getBooleanFromEnv:()=>x.Ix,getNumberFromEnv:()=>x.Jk,getRPCMetadata:()=>H,getStringFromEnv:()=>x.HF,getStringListFromEnv:()=>x.f7,getTimeOrigin:()=>L.uc,globalErrorHandler:()=>I.s,hrTime:()=>L._5,hrTimeDuration:()=>L.W5,hrTimeToMicroseconds:()=>L.w_,hrTimeToMilliseconds:()=>L.JU,hrTimeToNanoseconds:()=>L.u5,hrTimeToTimeStamp:()=>L.tq,internal:()=>lt,isAttributeValue:()=>M.m,isTimeInput:()=>L.Ir,isTimeInputHrTime:()=>L.VL,isTracingSuppressed:()=>Y.Zf,isUrlIgnored:()=>D.K,loggingErrorHandler:()=>b.o,merge:()=>ft.h,millisToHrTime:()=>L.lg,otperformance:()=>c.u,parseKeyPairsIntoRecord:()=>N.hD,parseTraceParent:()=>d.ZI,sanitizeAttributes:()=>M.L,setGlobalErrorHandler:()=>I.u,setRPCMetadata:()=>y,suppressTracing:()=>Y.M1,timeInputToHrTime:()=>L.KJ,unrefTimer:()=>f.K,unsuppressTracing:()=>Y.FU,urlMatches:()=>D.f});var O=_(75477);class T{_monotonicClock;_epochMillis;_performanceMillis;constructor(pt,vt){this._monotonicClock=vt,this._epochMillis=pt.now(),this._performanceMillis=vt.now()}now(){const pt=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+pt}}var M=_(80788),I=_(78044),b=_(11590),L=_(65864),A=_(92068),N=_(98151),R=_(15347),g=_(89869),x=_(41257),c=_(75026),f=_(5446),l=_(22721),d=_(2240),S=_(38729);const P=(0,S.n)("OpenTelemetry SDK Context Key RPC_METADATA");var m;(function(ot){ot.HTTP="http"})(m||(m={}));function y(ot,pt){return ot.setValue(P,pt)}function C(ot){return ot.deleteValue(P)}function H(ot){return ot.getValue(P)}var Y=_(4445),At=_(59406),ft=_(31194);class F extends Error{constructor(pt){super(pt),Object.setPrototypeOf(this,F.prototype)}}function j(ot,pt){let vt;const yt=new Promise(function(ae,fe){vt=setTimeout(function(){fe(new F("Operation timed out."))},pt)});return Promise.race([ot,yt]).then(Ut=>(clearTimeout(vt),Ut),Ut=>{throw clearTimeout(vt),Ut})}var D=_(78047),k=_(99756),W=_(76733),q=_(78758);const nt={ALL:W.u.ALL,VERBOSE:W.u.VERBOSE,DEBUG:W.u.DEBUG,INFO:W.u.INFO,WARN:W.u.WARN,ERROR:W.u.ERROR,NONE:W.u.NONE};function ct(ot){if(ot==null)return;const pt=nt[ot.toUpperCase()];return pt??(q.s.warn(`Unknown log level "${ot}", expected one of ${Object.keys(nt)}, using default`),W.u.INFO)}var _t=_(41844);function Nt(ot,pt){return new Promise(vt=>{_t._.with((0,Y.M1)(_t._.active()),()=>{ot.export(pt,yt=>{vt(yt)})})})}const lt={_export:Nt}},41257:(K,v,_)=>{"use strict";_.d(v,{HF:()=>O,Ix:()=>T,Jk:()=>M,f7:()=>I});function O(b){}function T(b){}function M(b){}function I(b){}},89869:(K,v,_)=>{"use strict";_.d(v,{X:()=>O});const O=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof _.g=="object"?_.g:{}},75026:(K,v,_)=>{"use strict";_.d(v,{u:()=>O});const O=performance},15347:(K,v,_)=>{"use strict";_.d(v,{q:()=>I});const O="2.0.1";var T=_(27608);const M="process.runtime.name",I={[T.aO]:"opentelemetry",[M]:"browser",[T.E$]:T.qV,[T.aJ]:O}},5446:(K,v,_)=>{"use strict";_.d(v,{K:()=>O});function O(T){}},22721:(K,v,_)=>{"use strict";_.d(v,{n:()=>T});var O=_(78758);class T{_propagators;_fields;constructor(I={}){this._propagators=I.propagators??[],this._fields=Array.from(new Set(this._propagators.map(b=>typeof b.fields=="function"?b.fields():[]).reduce((b,L)=>b.concat(L),[])))}inject(I,b,L){for(const A of this._propagators)try{A.inject(I,b,L)}catch(N){O.s.warn(`Failed to inject with ${A.constructor.name}. Err: ${N.message}`)}}extract(I,b,L){return this._propagators.reduce((A,N)=>{try{return N.extract(A,b,L)}catch(R){O.s.warn(`Failed to extract with ${N.constructor.name}. Err: ${R.message}`)}return A},I)}fields(){return this._fields.slice()}}},59406:(K,v,_)=>{"use strict";_.d(v,{n:()=>f});const O="[_0-9a-z-*/]",T=`[a-z]${O}{0,255}`,M=`[a-z0-9]${O}{0,240}@[a-z]${O}{0,13}`,I=new RegExp(`^(?:${T}|${M})$`),b=/^[ -~]{0,255}[!-~]$/,L=/,|=/;function A(l){return I.test(l)}function N(l){return b.test(l)&&!L.test(l)}const R=32,g=512,x=",",c="=";class f{_internalState=new Map;constructor(d){d&&this._parse(d)}set(d,S){const P=this._clone();return P._internalState.has(d)&&P._internalState.delete(d),P._internalState.set(d,S),P}unset(d){const S=this._clone();return S._internalState.delete(d),S}get(d){return this._internalState.get(d)}serialize(){return this._keys().reduce((d,S)=>(d.push(S+c+this.get(S)),d),[]).join(x)}_parse(d){d.length>g||(this._internalState=d.split(x).reverse().reduce((S,P)=>{const m=P.trim(),y=m.indexOf(c);if(y!==-1){const C=m.slice(0,y),H=m.slice(y+1,P.length);A(C)&&N(H)&&S.set(C,H)}return S},new Map),this._internalState.size>R&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,R))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const d=new f;return d._internalState=new Map(this._internalState),d}}},2240:(K,v,_)=>{"use strict";_.d(v,{UD:()=>A,ZI:()=>l,ZS:()=>L,lm:()=>d});var O=_(73096),T=_(67823),M=_(47397),I=_(4445),b=_(59406);const L="traceparent",A="tracestate",N="00",R="(?!ff)[\\da-f]{2}",g="(?![0]{32})[\\da-f]{32}",x="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",f=new RegExp(`^\\s?(${R})-(${g})-(${x})-(${c})(-.*)?\\s?$`);function l(S){const P=f.exec(S);return!P||P[1]==="00"&&P[5]?null:{traceId:P[2],spanId:P[3],traceFlags:parseInt(P[4],16)}}class d{inject(P,m,y){const C=O.u.getSpanContext(P);if(!C||(0,I.Zf)(P)||!(0,T.YA)(C))return;const H=`${N}-${C.traceId}-${C.spanId}-0${Number(C.traceFlags||M.X.NONE).toString(16)}`;y.set(m,L,H),C.traceState&&y.set(m,A,C.traceState.serialize())}extract(P,m,y){const C=y.get(m,L);if(!C)return P;const H=Array.isArray(C)?C[0]:C;if(typeof H!="string")return P;const Y=l(H);if(!Y)return P;Y.isRemote=!0;const At=y.get(m,A);if(At){const ft=Array.isArray(At)?At.join(","):At;Y.traceState=new b.n(typeof ft=="string"?ft:void 0)}return O.u.setSpanContext(P,Y)}fields(){return[L,A]}}},4445:(K,v,_)=>{"use strict";_.d(v,{FU:()=>I,M1:()=>M,Zf:()=>b});var O=_(38729);const T=(0,O.n)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function M(L){return L.setValue(T,!0)}function I(L){return L.deleteValue(T)}function b(L){return L.getValue(T)===!0}},99756:(K,v,_)=>{"use strict";_.d(v,{I:()=>T});class O{_promise;_resolve;_reject;constructor(){this._promise=new Promise((I,b)=>{this._resolve=I,this._reject=b})}get promise(){return this._promise}resolve(I){this._resolve(I)}reject(I){this._reject(I)}}class T{_callback;_that;_isCalled=!1;_deferred=new O;constructor(I,b){this._callback=I,this._that=b}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...I){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...I)).then(b=>this._deferred.resolve(b),b=>this._deferred.reject(b))}catch(b){this._deferred.reject(b)}}return this._deferred.promise}}},31194:(K,v,_)=>{"use strict";_.d(v,{h:()=>m});const O="[object Object]",T="[object Null]",M="[object Undefined]",b=Function.prototype.toString,L=b.call(Object),A=Object.getPrototypeOf,N=Object.prototype,R=N.hasOwnProperty,g=Symbol?Symbol.toStringTag:void 0,x=N.toString;function c(D){if(!f(D)||l(D)!==O)return!1;const k=A(D);if(k===null)return!0;const W=R.call(k,"constructor")&&k.constructor;return typeof W=="function"&&W instanceof W&&b.call(W)===L}function f(D){return D!=null&&typeof D=="object"}function l(D){return D==null?D===void 0?M:T:g&&g in Object(D)?d(D):S(D)}function d(D){const k=R.call(D,g),W=D[g];let q=!1;try{D[g]=void 0,q=!0}catch{}const nt=x.call(D);return q&&(k?D[g]=W:delete D[g]),nt}function S(D){return x.call(D)}const P=20;function m(...D){let k=D.shift();const W=new WeakMap;for(;D.length>0;)k=C(k,D.shift(),0,W);return k}function y(D){return Y(D)?D.slice():D}function C(D,k,W=0,q){let nt;if(!(W>P)){if(W++,F(D)||F(k)||At(k))nt=y(k);else if(Y(D)){if(nt=D.slice(),Y(k))for(let ct=0,_t=k.length;ct<_t;ct++)nt.push(y(k[ct]));else if(ft(k)){const ct=Object.keys(k);for(let _t=0,Nt=ct.length;_t<Nt;_t++){const lt=ct[_t];nt[lt]=y(k[lt])}}}else if(ft(D))if(ft(k)){if(!j(D,k))return k;nt=Object.assign({},D);const ct=Object.keys(k);for(let _t=0,Nt=ct.length;_t<Nt;_t++){const lt=ct[_t],ot=k[lt];if(F(ot))typeof ot>"u"?delete nt[lt]:nt[lt]=ot;else{const pt=nt[lt],vt=ot;if(H(D,lt,q)||H(k,lt,q))delete nt[lt];else{if(ft(pt)&&ft(vt)){const yt=q.get(pt)||[],Ut=q.get(vt)||[];yt.push({obj:D,key:lt}),Ut.push({obj:k,key:lt}),q.set(pt,yt),q.set(vt,Ut)}nt[lt]=C(nt[lt],ot,W,q)}}}}else nt=k;return nt}}function H(D,k,W){const q=W.get(D[k])||[];for(let nt=0,ct=q.length;nt<ct;nt++){const _t=q[nt];if(_t.key===k&&_t.obj===D)return!0}return!1}function Y(D){return Array.isArray(D)}function At(D){return typeof D=="function"}function ft(D){return!F(D)&&!Y(D)&&!At(D)&&typeof D=="object"}function F(D){return typeof D=="string"||typeof D=="number"||typeof D=="boolean"||typeof D>"u"||D instanceof Date||D instanceof RegExp||D===null}function j(D,k){return!(!c(D)||!c(k))}},78047:(K,v,_)=>{"use strict";_.d(v,{K:()=>T,f:()=>O});function O(M,I){return typeof I=="string"?M===I:!!M.match(I)}function T(M,I){if(!I)return!1;for(const b of I)if(O(M,b))return!0;return!1}},77805:(K,v)=>{"use strict";var _;_={value:!0},v.ds=v.XV=v.a3=v.v8=_=v.z4=v.Me=v.rp=v.Mm=void 0,v.Mm="http.host",v.rp="http.method",v.Me="http.request.body.size",v.z4="http.request_content_length_uncompressed",_="http.response_content_length",v.v8="http.scheme",v.a3="http.status_code",v.XV="http.url",v.ds="http.user_agent"},70373:(K,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.hexToBinary=void 0;function _(T){return T>=48&&T<=57?T-48:T>=97&&T<=102?T-87:T-55}function O(T){const M=new Uint8Array(T.length/2);let I=0;for(let b=0;b<T.length;b+=2){const L=_(T.charCodeAt(b)),A=_(T.charCodeAt(b+1));M[I++]=L<<4|A}return M}v.hexToBinary=O},9603:(K,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.toAnyValue=v.toKeyValue=v.toAttributes=v.createInstrumentationScope=v.createResource=void 0;function _(b){return{attributes:T(b.attributes),droppedAttributesCount:0}}v.createResource=_;function O(b){return{name:b.name,version:b.version}}v.createInstrumentationScope=O;function T(b){return Object.keys(b).map(L=>M(L,b[L]))}v.toAttributes=T;function M(b,L){return{key:b,value:I(L)}}v.toKeyValue=M;function I(b){const L=typeof b;return L==="string"?{stringValue:b}:L==="number"?Number.isInteger(b)?{intValue:b}:{doubleValue:b}:L==="boolean"?{boolValue:b}:b instanceof Uint8Array?{bytesValue:b}:Array.isArray(b)?{arrayValue:{values:b.map(I)}}:L==="object"&&b!=null?{kvlistValue:{values:Object.entries(b).map(([A,N])=>M(A,N))}}:{}}v.toAnyValue=I},56861:(K,v,_)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.getOtlpEncoder=v.encodeAsString=v.encodeAsLongBits=v.toLongBits=v.hrTimeToNanos=void 0;const O=_(83303),T=_(70373);function M(c){const f=BigInt(1e9);return BigInt(c[0])*f+BigInt(c[1])}v.hrTimeToNanos=M;function I(c){const f=Number(BigInt.asUintN(32,c)),l=Number(BigInt.asUintN(32,c>>BigInt(32)));return{low:f,high:l}}v.toLongBits=I;function b(c){const f=M(c);return I(f)}v.encodeAsLongBits=b;function L(c){return M(c).toString()}v.encodeAsString=L;const A=typeof BigInt<"u"?L:O.hrTimeToNanoseconds;function N(c){return c}function R(c){if(c!==void 0)return(0,T.hexToBinary)(c)}const g={encodeHrTime:b,encodeSpanContext:T.hexToBinary,encodeOptionalSpanContext:R};function x(c){if(c===void 0)return g;const f=c.useLongBits??!0,l=c.useHex??!1;return{encodeHrTime:f?b:A,encodeSpanContext:l?N:T.hexToBinary,encodeOptionalSpanContext:l?N:R}}v.getOtlpEncoder=x},99525:(K,v)=>{"use strict";var _;_={value:!0},v.i=void 0;var O;(function(T){T[T.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",T[T.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",T[T.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",T[T.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",T[T.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",T[T.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"})(O=v.i||(v.i={}))},94989:(K,v,_)=>{"use strict";var O;O={value:!0},v.sJ=O=O=O=void 0;const T=_(9603),M=_(56861);function I(g,x){const c=g.spanContext(),f=g.status,l=g.parentSpanContext?.spanId?x.encodeSpanContext(g.parentSpanContext?.spanId):void 0;return{traceId:x.encodeSpanContext(c.traceId),spanId:x.encodeSpanContext(c.spanId),parentSpanId:l,traceState:c.traceState?.serialize(),name:g.name,kind:g.kind==null?0:g.kind+1,startTimeUnixNano:x.encodeHrTime(g.startTime),endTimeUnixNano:x.encodeHrTime(g.endTime),attributes:(0,T.toAttributes)(g.attributes),droppedAttributesCount:g.droppedAttributesCount,events:g.events.map(d=>L(d,x)),droppedEventsCount:g.droppedEventsCount,status:{code:f.code,message:f.message},links:g.links.map(d=>b(d,x)),droppedLinksCount:g.droppedLinksCount}}O=I;function b(g,x){return{attributes:g.attributes?(0,T.toAttributes)(g.attributes):[],spanId:x.encodeSpanContext(g.context.spanId),traceId:x.encodeSpanContext(g.context.traceId),traceState:g.context.traceState?.serialize(),droppedAttributesCount:g.droppedAttributesCount||0}}O=b;function L(g,x){return{attributes:g.attributes?(0,T.toAttributes)(g.attributes):[],name:g.name,timeUnixNano:x.encodeHrTime(g.time),droppedAttributesCount:g.droppedAttributesCount||0}}O=L;function A(g,x){const c=(0,M.getOtlpEncoder)(x);return{resourceSpans:R(g,c)}}v.sJ=A;function N(g){const x=new Map;for(const c of g){let f=x.get(c.resource);f||(f=new Map,x.set(c.resource,f));const l=`${c.instrumentationScope.name}@${c.instrumentationScope.version||""}:${c.instrumentationScope.schemaUrl||""}`;let d=f.get(l);d||(d=[],f.set(l,d)),d.push(c)}return x}function R(g,x){const c=N(g),f=[],l=c.entries();let d=l.next();for(;!d.done;){const[S,P]=d.value,m=[],y=P.values();let C=y.next();for(;!C.done;){const Y=C.value;if(Y.length>0){const At=Y.map(ft=>I(ft,x));m.push({scope:(0,T.createInstrumentationScope)(Y[0].instrumentationScope),spans:At,schemaUrl:Y[0].instrumentationScope.schemaUrl})}C=y.next()}const H={resource:(0,T.createResource)(S),scopeSpans:m,schemaUrl:void 0};f.push(H),d=l.next()}return f}},27608:(K,v,_)=>{"use strict";_.d(v,{A2:()=>Zn,E$:()=>sr,HZ:()=>tr,Mb:()=>it,Mz:()=>Le,OR:()=>Z,UX:()=>qn,WQ:()=>hn,aJ:()=>Sn,aO:()=>je,d6:()=>Re,kS:()=>Qn,n4:()=>Jt,nW:()=>Tt,oJ:()=>Ct,qV:()=>Tn,wL:()=>Xt});const O="aspnetcore.diagnostics.exception.result",T="aborted",M="handled",I="skipped",b="unhandled",L="aspnetcore.diagnostics.handler.type",A="aspnetcore.rate_limiting.policy",N="aspnetcore.rate_limiting.result",R="acquired",g="endpoint_limiter",x="global_limiter",c="request_canceled",f="aspnetcore.request.is_unhandled",l="aspnetcore.routing.is_fallback",d="aspnetcore.routing.match_status",S="failure",P="success",m="client.address",y="client.port",C="code.column.number",H="code.file.path",Y="code.function.name",At="code.line.number",ft="code.stacktrace",F="db.collection.name",j="db.namespace",D="db.operation.batch.size",k="db.operation.name",W="db.query.summary",q="db.query.text",nt="db.response.status_code",ct="db.stored_procedure.name",_t="db.system.name",Nt="mariadb",lt="microsoft.sql_server",ot="mysql",pt="postgresql",vt="dotnet.gc.heap.generation",yt="gen0",Ut="gen1",ae="gen2",fe="loh",be="poh",Ct="error.type",_n="_OTHER",Ht="exception.escaped",Xt="exception.message",it="exception.stacktrace",Re="exception.type",Lt=Yt=>`http.request.header.${Yt}`,Jt="http.request.method",qt="_OTHER",Oe="CONNECT",Pe="DELETE",Me="GET",Rt="HEAD",Ft="OPTIONS",wt="PATCH",X="POST",tt="PUT",$="TRACE",Tt="http.request.method_original",Q="http.request.resend_count",pe=Yt=>`http.response.header.${Yt}`,Z="http.response.status_code",jt="http.route",Pt="jvm.gc.action",Ne="jvm.gc.name",Kt="jvm.memory.pool.name",te="jvm.memory.type",ro="heap",io="non_heap",so="jvm.thread.daemon",Qr="jvm.thread.state",He="blocked",En="new",Zr="runnable",qr="terminated",oo="timed_waiting",fn="waiting",Fe="network.local.address",Wn="network.local.port",pn="network.peer.address",Yn="network.peer.port",zn="network.protocol.name",ti="network.protocol.version",Dt="network.transport",Wt="pipe",$n="quic",Xn="tcp",ei="udp",ni="unix",ri="network.type",ii="ipv4",si="ipv6",oi="otel.scope.name",ai="otel.scope.version",Jn="otel.status_code",ee="ERROR",ui="OK",ci="otel.status_description",Qn="server.address",Zn="server.port",qn="service.name",tr="service.version",li="signalr.connection.status",er="app_shutdown",nr="normal_closure",di="timeout",rr="signalr.transport",_i="long_polling",Ei="server_sent_events",ir="web_sockets",sr="telemetry.sdk.language",fi="cpp",pi="dotnet",or="erlang",Ti="go",Si="java",hi="nodejs",mi="php",ar="python",ur="ruby",Ai="rust",cr="swift",Tn="webjs",je="telemetry.sdk.name",Sn="telemetry.sdk.version",lr="url.fragment",hn="url.full",gi="url.path",vi="url.query",dr="url.scheme",Le="user_agent.original"},18826:(K,v,_)=>{"use strict";_.d(v,{GrafanaJavascriptAgentBackend:()=>Z_});var O=_(8934);function T(){}var M;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.VERBOSE=4]="VERBOSE"})(M||(M={}));const b={debug:T,error:T,info:T,prefix:"Faro",warn:T},L=M.ERROR,A=Object.assign({},console);class N{constructor(){this.unpatchedConsole=A,this.internalLogger=b,this.config={},this.metas={}}logDebug(...t){this.internalLogger.debug(`${this.name}
`,...t)}logInfo(...t){this.internalLogger.info(`${this.name}
`,...t)}logWarn(...t){this.internalLogger.warn(`${this.name}
`,...t)}logError(...t){this.internalLogger.error(`${this.name}
`,...t)}}class R extends N{isBatched(){return!1}getIgnoreUrls(){return[]}}const g="1.18.2";function x(e){const{size:t,concurrency:n}=e,r=[];let i=0;const s=()=>{if(i<n&&r.length){const{producer:a,resolve:u,reject:E}=r.shift();i++,a().then(p=>{i--,s(),u(p)},p=>{i--,s(),E(p)})}};return{add:a=>{if(r.length+i>=t)throw new Error("Task buffer full");return new Promise((u,E)=>{r.push({producer:a,resolve:u,reject:E}),s()})}}}var c;(function(e){e.EXCEPTION="exception",e.LOG="log",e.MEASUREMENT="measurement",e.TRACE="trace",e.EVENT="event"})(c||(c={}));const f={[c.EXCEPTION]:"exceptions",[c.LOG]:"logs",[c.MEASUREMENT]:"measurements",[c.TRACE]:"traces",[c.EVENT]:"events"};function l(e,t){var n,r;if(t===void 0)return e;if(e===void 0)return{resourceSpans:t};const i=(n=e.resourceSpans)===null||n===void 0?void 0:n[0];if(i===void 0)return e;const s=i?.scopeSpans||[],o=((r=t?.[0])===null||r===void 0?void 0:r.scopeSpans)||[];return Object.assign(Object.assign({},e),{resourceSpans:[Object.assign(Object.assign({},i),{scopeSpans:[...s,...o]})]})}function d(e){let t={meta:{}};return e[0]!==void 0&&(t.meta=e[0].meta),e.forEach(n=>{switch(n.type){case c.LOG:case c.EVENT:case c.EXCEPTION:case c.MEASUREMENT:const r=f[n.type],i=t[r];t=Object.assign(Object.assign({},t),{[r]:i===void 0?[n.payload]:[...i,n.payload]});break;case c.TRACE:t=Object.assign(Object.assign({},t),{traces:l(t.traces,n.payload.resourceSpans)});break}}),t}function S(e,t){return typeof e===t}function P(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function m(e,t){try{return e instanceof t}catch{return!1}}const y=e=>S(e,"undefined"),C=e=>S(e,"null"),H=e=>S(e,"string"),Y=e=>S(e,"number")&&!isNaN(e)||S(e,"bigint"),At=e=>Y(e)&&Number.isInteger(e),ft=e=>S(e,"boolean"),F=e=>S(e,"symbol"),j=e=>!C(e)&&S(e,"object"),D=e=>S(e,"function"),k=e=>P(e,"Array"),W=e=>P(e,"RegExp"),q=e=>D(e?.then),nt=e=>!j(e)&&!D(e),ct=typeof Event<"u",_t=e=>ct&&m(e,Event),Nt=typeof Error<"u",lt=e=>Nt&&m(e,Error),ot=e=>P(e,"ErrorEvent"),pt=e=>P(e,"DOMError"),vt=e=>P(e,"DOMException"),yt=typeof Element<"u",Ut=e=>yt&&m(e,Element),ae=typeof Map<"u",fe=e=>ae&&m(e,Map),be=e=>j(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e;function Ct(e){return e==null?!0:k(e)||H(e)?e.length===0:j(e)?Object.keys(e).length===0:!1}function _n(){const e=new WeakSet;return function(t,n){if(j(n)&&n!==null){if(e.has(n))return null;e.add(n)}return n}}function Ht(e={}){return JSON.stringify(e??{},_n())}function Xt(e={}){const t={};for(const[n,r]of Object.entries(e))t[n]=j(r)&&r!==null?Ht(r):String(r);return t}var it=_(32631);function Re(e,t){let n=!1,r;const i=()=>{if(r==null){n=!1;return}e(...r),r=null,setTimeout(i,t)};return(...s)=>{if(n){r=s;return}e(...s),n=!0,setTimeout(i,t)}}const Lt={session:"sessionStorage",local:"localStorage"};function Jt(e){var t;try{let n;n=window[e];const r="__faro_storage_test__";return n.setItem(r,r),n.removeItem(r),!0}catch(n){return(t=it.P.internalLogger)===null||t===void 0||t.info(`Web storage of type ${e} is not available. Reason: ${n}`),!1}}function qt(e,t){return Ft(t)?window[t].getItem(e):null}function Oe(e,t,n){if(Ft(n))try{window[n].setItem(e,t)}catch{}}function Pe(e,t){Ft(t)&&window[t].removeItem(e)}const Me=Jt(Lt.local),Rt=Jt(Lt.session);function Ft(e){return e===Lt.local?Me:e===Lt.session?Rt:!1}const wt="com.grafana.faro.session",X=4*60*60*1e3,tt=15*60*1e3,$=1*1e3,Tt=null,pe={enabled:!0,persistent:!1,maxSessionPersistenceTime:tt};function Z(){return Date.now()}function jt(){return new Date().toISOString()}function Pt(e){return new Date(e).toISOString()}const Ne="abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789";function Kt(e=10){return Array.from(Array(e)).map(()=>Ne[Math.floor(Math.random()*Ne.length)]).join("")}function te(e,t){if(e===t)return!0;if(S(e,"number")&&isNaN(e))return S(t,"number")&&isNaN(t);const n=k(e),r=k(t);if(n!==r)return!1;if(n&&r){const o=e.length;if(o!==t.length)return!1;for(let a=o;a--!==0;)if(!te(e[a],t[a]))return!1;return!0}const i=j(e),s=j(t);if(i!==s)return!1;if(e&&t&&i&&s){const o=Object.keys(e),a=Object.keys(t),u=o.length,E=a.length;if(u!==E)return!1;for(let p of o)if(!a.includes(p))return!1;for(let p of o)if(!te(e[p],t[p]))return!1;return!0}return!1}const ro={EventNames:{CLICK:"click",NAVIGATION:"navigation",SESSION_START:"session_start",VIEW_CHANGED:"view_changed"}},io="click",so="navigation",Qr="view_changed",He="session_start",En="session_resume",Zr="session_extend",qr="service_name_override",oo="route_change";function fn(){var e,t,n;const i=it.P.config.sessionTracking;let s=(n=(t=(e=i?.sampler)===null||e===void 0?void 0:e.call(i,{metas:it.P.metas.value}))!==null&&t!==void 0?t:i?.samplingRate)!==null&&n!==void 0?n:1;return typeof s!="number"&&(s=0),Math.random()<s}function Fe({sessionId:e,started:t,lastActivity:n,isSampled:r=!0}={}){var i,s;const o=Z(),a=(s=(i=it.P.config)===null||i===void 0?void 0:i.sessionTracking)===null||s===void 0?void 0:s.generateSessionId;return e==null&&(e=typeof a=="function"?a():Kt()),{sessionId:e,lastActivity:n??o,started:t??o,isSampled:r}}function Wn(e){if(e==null)return!1;const t=Z();return t-e.started<X?t-e.lastActivity<tt:!1}function pn({fetchUserSession:e,storeUserSession:t}){return function({forceSessionExtend:r}={forceSessionExtend:!1}){var i,s,o;if(!e||!t)return;const a=it.P.config.sessionTracking,u=a?.persistent;if(u&&!Me||!u&&!Rt)return;const E=e();if(r===!1&&Wn(E))t(Object.assign(Object.assign({},E),{lastActivity:Z()}));else{let p=Yn(Fe({isSampled:fn()}),E);t(p),(i=it.P.api)===null||i===void 0||i.setSession(p.sessionMeta),(s=a?.onSessionChange)===null||s===void 0||s.call(a,(o=E?.sessionMeta)!==null&&o!==void 0?o:null,p.sessionMeta)}}}function Yn(e,t){var n,r,i,s,o,a,u;const E=Object.assign(Object.assign({},e),{sessionMeta:{id:e.sessionId,attributes:Object.assign(Object.assign(Object.assign({},(r=(n=it.P.config.sessionTracking)===null||n===void 0?void 0:n.session)===null||r===void 0?void 0:r.attributes),(s=(i=it.P.metas.value.session)===null||i===void 0?void 0:i.attributes)!==null&&s!==void 0?s:{}),{isSampled:e.isSampled.toString()})}}),p=(a=(o=it.P.metas.value.session)===null||o===void 0?void 0:o.overrides)!==null&&a!==void 0?a:(u=t?.sessionMeta)===null||u===void 0?void 0:u.overrides;Ct(p)||(E.sessionMeta.overrides=p);const h=t?.sessionId;return h!=null&&(E.sessionMeta.attributes.previousSession=h),E}function zn({fetchUserSession:e,storeUserSession:t}){return function(r){const i=r.session,s=e();let o=i?.id;const a=i?.attributes,u=i?.overrides,E=s?.sessionMeta,p=E?.overrides,h=!!u&&!te(u,p),U=!!a&&!te(a,E?.attributes);if(!!i&&o!==s?.sessionId||U||h){const V=Yn(Fe({sessionId:o,isSampled:fn()}),s);t(V),ti(h,u,p),it.P.api.setSession(V.sessionMeta)}}}function ti(e,t={},n={}){var r,i,s;if(!e)return;const o=t.serviceName,a=(s=(r=n.serviceName)!==null&&r!==void 0?r:(i=it.P.metas.value.app)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"";o&&o!==a&&it.P.api.pushEvent(qr,{serviceName:o,previousServiceName:a})}class Dt{constructor(){this.updateSession=Re(()=>this.updateUserSession(),$),this.updateUserSession=pn({fetchUserSession:Dt.fetchUserSession,storeUserSession:Dt.storeUserSession}),this.init()}static removeUserSession(){Pe(wt,Dt.storageTypeLocal)}static storeUserSession(t){Oe(wt,Ht(t),Dt.storageTypeLocal)}static fetchUserSession(){const t=qt(wt,Dt.storageTypeLocal);return t?JSON.parse(t):null}init(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.updateSession()}),it.P.metas.addListener(zn({fetchUserSession:Dt.fetchUserSession,storeUserSession:Dt.storeUserSession}))}}Dt.storageTypeLocal=Lt.local;class Wt{constructor(){this.updateSession=Re(()=>this.updateUserSession(),$),this.updateUserSession=pn({fetchUserSession:Wt.fetchUserSession,storeUserSession:Wt.storeUserSession}),this.init()}static removeUserSession(){Pe(wt,Wt.storageTypeSession)}static storeUserSession(t){Oe(wt,Ht(t),Wt.storageTypeSession)}static fetchUserSession(){const t=qt(wt,Wt.storageTypeSession);return t?JSON.parse(t):null}init(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.updateSession()}),it.P.metas.addListener(zn({fetchUserSession:Wt.fetchUserSession,storeUserSession:Wt.storeUserSession}))}}Wt.storageTypeSession=Lt.session;function $n(e){return e?.persistent?Dt:Wt}var Xn=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{E(r.next(p))}catch(h){o(h)}}function u(p){try{E(r.throw(p))}catch(h){o(h)}}function E(p){p.done?s(p.value):i(p.value).then(a,u)}E((r=r.apply(e,t||[])).next())})},ei=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ni=30,ri=5,ii=5e3,si=6e4,oi=429,ai=202;class Jn extends R{constructor(t){var n,r,i,s;super(),this.options=t,this.name="@grafana/faro-web-sdk:transport-fetch",this.version=g,this.disabledUntil=new Date,this.rateLimitBackoffMs=(n=t.defaultRateLimitBackoffMs)!==null&&n!==void 0?n:ii,this.getNow=(r=t.getNow)!==null&&r!==void 0?r:()=>Date.now(),this.promiseBuffer=x({size:(i=t.bufferSize)!==null&&i!==void 0?i:ni,concurrency:(s=t.concurrency)!==null&&s!==void 0?s:ri})}send(t){return Xn(this,void 0,void 0,function*(){try{if(this.disabledUntil>new Date(this.getNow()))return this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`),Promise.resolve();yield this.promiseBuffer.add(()=>{const n=JSON.stringify(d(t)),{url:r,requestOptions:i,apiKey:s}=this.options,o=i??{},{headers:a}=o,u=ei(o,["headers"]);let E;const p=this.metas.value.session;return p!=null&&(E=p.id),fetch(r,Object.assign({method:"POST",headers:Object.assign(Object.assign(Object.assign({"Content-Type":"application/json"},a??{}),s?{"x-api-key":s}:{}),E?{"x-faro-session-id":E}:{}),body:n,keepalive:n.length<=si},u??{})).then(h=>Xn(this,void 0,void 0,function*(){return h.status===ai&&h.headers.get("X-Faro-Session-Status")==="invalid"&&this.extendFaroSession(this.config,this.logDebug),h.status===oi&&(this.disabledUntil=this.getRetryAfterDate(h),this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`)),h.text().catch(T),h})).catch(h=>{this.logError(`Failed sending payload to the receiver
`,JSON.parse(n),h)})})}catch(n){this.logError(n)}})}getIgnoreUrls(){var t;return[this.options.url].concat((t=this.config.ignoreUrls)!==null&&t!==void 0?t:[])}isBatched(){return!0}getRetryAfterDate(t){const n=this.getNow(),r=t.headers.get("Retry-After");if(r){const i=Number(r);if(!isNaN(i))return new Date(i*1e3+n);const s=Date.parse(r);if(!isNaN(s))return new Date(s)}return new Date(n+this.rateLimitBackoffMs)}extendFaroSession(t,n){const r="Session expired",i=t.sessionTracking;if(i?.enabled){const{fetchUserSession:s,storeUserSession:o}=$n(i);pn({fetchUserSession:s,storeUserSession:o})({forceSessionExtend:!0}),n(`${r} created new session.`)}else n(`${r}.`)}}class ee extends N{constructor(){super(...arguments),this.api={},this.transports={}}}const ui="Non-Error promise rejection captured with value:",ci="UnhandledRejection",Qn="DOMError",Zn="DOMException",qn="Non-Error exception captured with keys:",tr="?",li=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,er="Error",nr=e=>e.map(t=>j(t)?Ht(t):String(t)).join(" ");function di(e){var t,n;const r=e.match(li),i=(t=r?.[1])!==null&&t!==void 0?t:er;return[(n=r?.[2])!==null&&n!==void 0?n:e,i]}const rr=`
`,_i="eval",Ei="?",ir="@",sr=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,fi=/\((\S*)(?::(\d+))(?::(\d+))\)/,pi="eval",or="address at ",Ti=or.length,Si=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,hi=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,mi=" > eval",ar="safari-extension",ur="safari-web-extension",Ai=/Minified React error #\d+;/i;function cr(e,t,n,r){const i={filename:e||document.location.href,function:t||Ei};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}function Tn(e,t){const n=e?.includes(ar),r=!n&&e?.includes(ur);return!n&&!r?[e,t]:[e?.includes(ir)?e.split(ir)[0]:e,n?`${ar}:${t}`:`${ur}:${t}`]}function je(e){let t=[];e.stacktrace?t=e.stacktrace.split(rr).filter((r,i)=>i%2===0):e.stack&&(t=e.stack.split(rr));const n=t.reduce((r,i,s)=>{let o,a,u,E,p;if(o=sr.exec(i)){if(a=o[1],u=o[2],E=o[3],p=o[4],u?.startsWith(pi)){const h=fi.exec(u);h&&(u=h[1],E=h[2],p=h[3])}u=u?.startsWith(or)?u.substring(Ti):u,[a,u]=Tn(a,u)}else if(o=Si.exec(i)){if(a=o[1],u=o[3],E=o[4],p=o[5],u&&u.includes(mi)){const h=hi.exec(u);h&&(a=a||_i,u=h[1],E=h[2])}else s===0&&!p&&Y(e.columnNumber)&&(p=String(e.columnNumber+1));[a,u]=Tn(a,u)}return(u||a)&&r.push(cr(u,a,E?Number(E):void 0,p?Number(p):void 0)),r},[]);return Ai.test(e.message)?n.slice(1):n}function Sn(e){let t,n,r=[],i,s;if(ot(e)&&e.error)t=e.error.message,n=e.error.name,r=je(e.error);else if((i=pt(e))||vt(e)){const{name:o,message:a}=e;n=o??(i?Qn:Zn),t=a?`${n}: ${a}`:n}else lt(e)?(t=e.message,r=je(e)):(j(e)||(s=_t(e)))&&(n=s?e.constructor.name:void 0,t=`${qn} ${Object.keys(e)}`);return[t,n,r]}function lr(e){const[t,n,r,i,s]=e;let o,a,u=[];const E=H(t),p=cr(n,tr,r,i);return s||!E?([o,a,u]=Sn(s??t),u.length===0&&(u=[p])):E&&([o,a]=di(t),u=[p]),{value:o,type:a,stackFrames:u}}function hn(e,t){return lt(e[0])?lr(e):{value:t(e)}}function gi(e){const t=window.onerror;window.onerror=(...n)=>{try{const{value:r,type:i,stackFrames:s}=lr(n),o=n[4];if(r){const a={type:i,stackFrames:s};o!=null&&(a.originalError=o),e.pushError(new Error(r),a)}}finally{t?.apply(window,n)}}}function vi(e){window.addEventListener("unhandledrejection",t=>{var n,r;let i=t;i.reason?i=t.reason:!((n=t.detail)===null||n===void 0)&&n.reason&&(i=(r=t.detail)===null||r===void 0?void 0:r.reason);let s,o,a=[];nt(i)?(s=`${ui} ${String(i)}`,o=ci):[s,o,a]=Sn(i),s&&e.pushError(new Error(s),{type:o,stackFrames:a})})}class dr extends ee{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-errors",this.version=g}initialize(){this.logDebug("Initializing"),gi(this.api),vi(this.api)}}const Le=e=>e.map(t=>{try{return String(t)}catch{return""}}).join(" ");var Yt=_(37930);class ne extends ee{constructor(t={}){super(),this.options=t,this.name="@grafana/faro-web-sdk:instrumentation-console",this.version=g,this.errorSerializer=Le}initialize(){var t,n,r,i;this.options=Object.assign(Object.assign({},this.options),this.config.consoleInstrumentation);const s=((t=this.options)===null||t===void 0?void 0:t.serializeErrors)||!!(!((n=this.options)===null||n===void 0)&&n.errorSerializer);this.errorSerializer=s?(i=(r=this.options)===null||r===void 0?void 0:r.errorSerializer)!==null&&i!==void 0?i:nr:Le,Yt.HT.filter(o=>{var a,u;return!((u=(a=this.options)===null||a===void 0?void 0:a.disabledLevels)!==null&&u!==void 0?u:ne.defaultDisabledLevels).includes(o)}).forEach(o=>{console[o]=(...a)=>{var u,E;try{if(o===Yt.$b.ERROR&&!(!((u=this.options)===null||u===void 0)&&u.consoleErrorAsLog)){const{value:p,type:h,stackFrames:U}=hn(a,this.errorSerializer);if(p&&!h&&!U){this.api.pushError(new Error(ne.consoleErrorPrefix+p));return}this.api.pushError(new Error(ne.consoleErrorPrefix+p),{type:h,stackFrames:U})}else if(o===Yt.$b.ERROR&&(!((E=this.options)===null||E===void 0)&&E.consoleErrorAsLog)){const{value:p,type:h,stackFrames:U}=hn(a,this.errorSerializer);this.api.pushLog(p?[ne.consoleErrorPrefix+p]:a,{level:o,context:{value:p??"",type:h??"",stackFrames:U?.length?nr(U):""}})}else this.api.pushLog(a,{level:o})}catch(p){this.logError(p)}finally{this.unpatchedConsole[o](...a)}}})}}ne.defaultDisabledLevels=[Yt.$b.DEBUG,Yt.$b.TRACE,Yt.$b.LOG],ne.consoleErrorPrefix="console.error: ";var _r,ue,Ke,bi,mn,Ri=-1,Te=function(e){addEventListener("pageshow",function(t){t.persisted&&(Ri=t.timeStamp,e(t))},!0)},Er=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},An=function(){var e=Er();return e&&e.activationStart||0},Vt=function(e,t){var n=Er(),r="navigate";return Ri>=0?r="back-forward-cache":n&&(document.prerendering||An()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},ye=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){t(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},xt=function(e,t,n,r){var i,s;return function(o){t.value>=0&&(o||r)&&((s=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=s,t.rating=function(a,u){return a>u[1]?"poor":a>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},fr=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},We=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},gn=function(e){var t=!1;return function(){t||(e(),t=!0)}},Ce=-1,Oi=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},vn=function(e){document.visibilityState==="hidden"&&Ce>-1&&(Ce=e.type==="visibilitychange"?e.timeStamp:0,ao())},Pi=function(){addEventListener("visibilitychange",vn,!0),addEventListener("prerenderingchange",vn,!0)},ao=function(){removeEventListener("visibilitychange",vn,!0),removeEventListener("prerenderingchange",vn,!0)},pr=function(){return Ce<0&&(Ce=Oi(),Pi(),Te(function(){setTimeout(function(){Ce=Oi(),Pi()},0)})),{get firstHiddenTime(){return Ce}}},Ye=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},Mi=[1800,3e3],Ni=function(e,t){t=t||{},Ye(function(){var n,r=pr(),i=Vt("FCP"),s=ye("paint",function(o){o.forEach(function(a){a.name==="first-contentful-paint"&&(s.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-An(),0),i.entries.push(a),n(!0)))})});s&&(n=xt(e,i,Mi,t.reportAllChanges),Te(function(o){i=Vt("FCP"),n=xt(e,i,Mi,t.reportAllChanges),fr(function(){i.value=performance.now()-o.timeStamp,n(!0)})}))})},Li=[.1,.25],uo=function(e,t){t=t||{},Ni(gn(function(){var n,r=Vt("CLS",0),i=0,s=[],o=function(u){u.forEach(function(E){if(!E.hadRecentInput){var p=s[0],h=s[s.length-1];i&&E.startTime-h.startTime<1e3&&E.startTime-p.startTime<5e3?(i+=E.value,s.push(E)):(i=E.value,s=[E])}}),i>r.value&&(r.value=i,r.entries=s,n())},a=ye("layout-shift",o);a&&(n=xt(e,r,Li,t.reportAllChanges),We(function(){o(a.takeRecords()),n(!0)}),Te(function(){i=0,r=Vt("CLS",0),n=xt(e,r,Li,t.reportAllChanges),fr(function(){return n()})}),setTimeout(n,0))}))},yi=0,Tr=1/0,bn=0,co=function(e){e.forEach(function(t){t.interactionId&&(Tr=Math.min(Tr,t.interactionId),bn=Math.max(bn,t.interactionId),yi=bn?(bn-Tr)/7+1:0)})},Ci=function(){return _r?yi:performance.interactionCount||0},lo=function(){"interactionCount"in performance||_r||(_r=ye("event",co,{type:"event",buffered:!0,durationThreshold:0}))},Qt=[],Rn=new Map,Ii=0,_o=function(){var e=Math.min(Qt.length-1,Math.floor((Ci()-Ii)/50));return Qt[e]},Eo=[],fo=function(e){if(Eo.forEach(function(i){return i(e)}),e.interactionId||e.entryType==="first-input"){var t=Qt[Qt.length-1],n=Rn.get(e.interactionId);if(n||Qt.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Rn.set(r.id,r),Qt.push(r)}Qt.sort(function(i,s){return s.latency-i.latency}),Qt.length>10&&Qt.splice(10).forEach(function(i){return Rn.delete(i.id)})}}},Ui=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=gn(e),document.visibilityState==="hidden"?e():(n=t(e),We(e)),n},wi=[200,500],po=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Ye(function(){var n;lo();var r,i=Vt("INP"),s=function(a){Ui(function(){a.forEach(fo);var u=_o();u&&u.latency!==i.value&&(i.value=u.latency,i.entries=u.entries,r())})},o=ye("event",s,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});r=xt(e,i,wi,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),We(function(){s(o.takeRecords()),r(!0)}),Te(function(){Ii=Ci(),Qt.length=0,Rn.clear(),i=Vt("INP"),r=xt(e,i,wi,t.reportAllChanges)}))}))},Di=[2500,4e3],Sr={},To=function(e,t){t=t||{},Ye(function(){var n,r=pr(),i=Vt("LCP"),s=function(u){t.reportAllChanges||(u=u.slice(-1)),u.forEach(function(E){E.startTime<r.firstHiddenTime&&(i.value=Math.max(E.startTime-An(),0),i.entries=[E],n())})},o=ye("largest-contentful-paint",s);if(o){n=xt(e,i,Di,t.reportAllChanges);var a=gn(function(){Sr[i.id]||(s(o.takeRecords()),o.disconnect(),Sr[i.id]=!0,n(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return Ui(a)},!0)}),We(a),Te(function(u){i=Vt("LCP"),n=xt(e,i,Di,t.reportAllChanges),fr(function(){i.value=performance.now()-u.timeStamp,Sr[i.id]=!0,n(!0)})})}})},Vi=[800,1800],So=function e(t){document.prerendering?Ye(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},ho=function(e,t){t=t||{};var n=Vt("TTFB"),r=xt(e,n,Vi,t.reportAllChanges);So(function(){var i=Er();i&&(n.value=Math.max(i.responseStart-An(),0),n.entries=[i],r(!0),Te(function(){n=Vt("TTFB",0),(r=xt(e,n,Vi,t.reportAllChanges))(!0)}))})},ze={passive:!0,capture:!0},mo=new Date,xi=function(e,t){ue||(ue=t,Ke=e,bi=new Date,Gi(removeEventListener),Bi())},Bi=function(){if(Ke>=0&&Ke<bi-mo){var e={entryType:"first-input",name:ue.type,target:ue.target,cancelable:ue.cancelable,startTime:ue.timeStamp,processingStart:ue.timeStamp+Ke};mn.forEach(function(t){t(e)}),mn=[]}},Ao=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var i=function(){xi(n,r),o()},s=function(){o()},o=function(){removeEventListener("pointerup",i,ze),removeEventListener("pointercancel",s,ze)};addEventListener("pointerup",i,ze),addEventListener("pointercancel",s,ze)}(t,e):xi(t,e)}},Gi=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Ao,ze)})},ki=[100,300],go=function(e,t){t=t||{},Ye(function(){var n,r=pr(),i=Vt("FID"),s=function(u){u.startTime<r.firstHiddenTime&&(i.value=u.processingStart-u.startTime,i.entries.push(u),n(!0))},o=function(u){u.forEach(s)},a=ye("first-input",o);n=xt(e,i,ki,t.reportAllChanges),a&&(We(gn(function(){o(a.takeRecords()),a.disconnect()})),Te(function(){var u;i=Vt("FID"),n=xt(e,i,ki,t.reportAllChanges),mn=[],Ke=-1,ue=null,Gi(addEventListener),u=s,mn.push(u),Bi()}))})};class On{constructor(t,n){this.pushMeasurement=t,this.webVitalConfig=n}initialize(){Object.entries(On.mapping).forEach(([t,n])=>{var r;n(i=>{this.pushMeasurement({type:"web-vitals",values:{[t]:i.value}})},{reportAllChanges:(r=this.webVitalConfig)===null||r===void 0?void 0:r.reportAllChanges})})}}On.mapping={cls:uo,fcp:Ni,fid:go,inp:po,lcp:To,ttfb:ho};var hr,Hi,mr,Ie=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},$e=function(e){if(document.readyState==="loading")return"loading";var t=Ie();if(t){if(e<t.domInteractive)return"loading";if(t.domContentLoadedEventStart===0||e<t.domContentLoadedEventStart)return"dom-interactive";if(t.domComplete===0||e<t.domComplete)return"dom-content-loaded"}return"complete"},vo=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},Pn=function(e,t){var n="";try{for(;e&&e.nodeType!==9;){var r=e,i=r.id?"#"+r.id:vo(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch{}return n},Fi=-1,ji=function(){return Fi},Se=function(e){addEventListener("pageshow",function(t){t.persisted&&(Fi=t.timeStamp,e(t))},!0)},Mn=function(){var e=Ie();return e&&e.activationStart||0},Bt=function(e,t){var n=Ie(),r="navigate";return ji()>=0?r="back-forward-cache":n&&(document.prerendering||Mn()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},he=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){t(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},Gt=function(e,t,n,r){var i,s;return function(o){t.value>=0&&(o||r)&&((s=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=s,t.rating=function(a,u){return a>u[1]?"poor":a>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Ar=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},Xe=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},Nn=function(e){var t=!1;return function(){t||(e(),t=!0)}},Ue=-1,Ki=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Ln=function(e){document.visibilityState==="hidden"&&Ue>-1&&(Ue=e.type==="visibilitychange"?e.timeStamp:0,bo())},Wi=function(){addEventListener("visibilitychange",Ln,!0),addEventListener("prerenderingchange",Ln,!0)},bo=function(){removeEventListener("visibilitychange",Ln,!0),removeEventListener("prerenderingchange",Ln,!0)},gr=function(){return Ue<0&&(Ue=Ki(),Wi(),Se(function(){setTimeout(function(){Ue=Ki(),Wi()},0)})),{get firstHiddenTime(){return Ue}}},Je=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},Yi=[1800,3e3],zi=function(e,t){t=t||{},Je(function(){var n,r=gr(),i=Bt("FCP"),s=he("paint",function(o){o.forEach(function(a){a.name==="first-contentful-paint"&&(s.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-Mn(),0),i.entries.push(a),n(!0)))})});s&&(n=Gt(e,i,Yi,t.reportAllChanges),Se(function(o){i=Bt("FCP"),n=Gt(e,i,Yi,t.reportAllChanges),Ar(function(){i.value=performance.now()-o.timeStamp,n(!0)})}))})},$i=[.1,.25],Ro=function(e,t){(function(n,r){r=r||{},zi(Nn(function(){var i,s=Bt("CLS",0),o=0,a=[],u=function(p){p.forEach(function(h){if(!h.hadRecentInput){var U=a[0],w=a[a.length-1];o&&h.startTime-w.startTime<1e3&&h.startTime-U.startTime<5e3?(o+=h.value,a.push(h)):(o=h.value,a=[h])}}),o>s.value&&(s.value=o,s.entries=a,i())},E=he("layout-shift",u);E&&(i=Gt(n,s,$i,r.reportAllChanges),Xe(function(){u(E.takeRecords()),i(!0)}),Se(function(){o=0,s=Bt("CLS",0),i=Gt(n,s,$i,r.reportAllChanges),Ar(function(){return i()})}),setTimeout(i,0))}))})(function(n){var r=function(i){var s,o={};if(i.entries.length){var a=i.entries.reduce(function(E,p){return E&&E.value>p.value?E:p});if(a&&a.sources&&a.sources.length){var u=(s=a.sources).find(function(E){return E.node&&E.node.nodeType===1})||s[0];u&&(o={largestShiftTarget:Pn(u.node),largestShiftTime:a.startTime,largestShiftValue:a.value,largestShiftSource:u,largestShiftEntry:a,loadState:$e(a.startTime)})}}return Object.assign(i,{attribution:o})}(n);e(r)},t)},Oo=function(e,t){zi(function(n){var r=function(i){var s={timeToFirstByte:0,firstByteToFCP:i.value,loadState:$e(ji())};if(i.entries.length){var o=Ie(),a=i.entries[i.entries.length-1];if(o){var u=o.activationStart||0,E=Math.max(0,o.responseStart-u);s={timeToFirstByte:E,firstByteToFCP:i.value-E,loadState:$e(i.entries[0].startTime),navigationEntry:o,fcpEntry:a}}}return Object.assign(i,{attribution:s})}(n);e(r)},t)},Xi=0,vr=1/0,yn=0,Po=function(e){e.forEach(function(t){t.interactionId&&(vr=Math.min(vr,t.interactionId),yn=Math.max(yn,t.interactionId),Xi=yn?(yn-vr)/7+1:0)})},Ji=function(){return hr?Xi:performance.interactionCount||0},Mo=function(){"interactionCount"in performance||hr||(hr=he("event",Po,{type:"event",buffered:!0,durationThreshold:0}))},zt=[],Qe=new Map,Qi=0,No=function(){var e=Math.min(zt.length-1,Math.floor((Ji()-Qi)/50));return zt[e]},Zi=[],Lo=function(e){if(Zi.forEach(function(i){return i(e)}),e.interactionId||e.entryType==="first-input"){var t=zt[zt.length-1],n=Qe.get(e.interactionId);if(n||zt.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Qe.set(r.id,r),zt.push(r)}zt.sort(function(i,s){return s.latency-i.latency}),zt.length>10&&zt.splice(10).forEach(function(i){return Qe.delete(i.id)})}}},br=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=Nn(e),document.visibilityState==="hidden"?e():(n=t(e),Xe(e)),n},qi=[200,500],yo=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Je(function(){var n;Mo();var r,i=Bt("INP"),s=function(a){br(function(){a.forEach(Lo);var u=No();u&&u.latency!==i.value&&(i.value=u.latency,i.entries=u.entries,r())})},o=he("event",s,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});r=Gt(e,i,qi,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Xe(function(){s(o.takeRecords()),r(!0)}),Se(function(){Qi=Ji(),zt.length=0,Qe.clear(),i=Bt("INP"),r=Gt(e,i,qi,t.reportAllChanges)}))}))},we=[],ce=[],Rr=new WeakMap,De=new Map,Or=-1,Co=function(e){we=we.concat(e),ts()},ts=function(){Or<0&&(Or=br(Io))},Io=function(){De.size>10&&De.forEach(function(a,u){Qe.has(u)||De.delete(u)});var e=zt.map(function(a){return Rr.get(a.entries[0])}),t=ce.length-50;ce=ce.filter(function(a,u){return u>=t||e.includes(a)});for(var n=new Set,r=0;r<ce.length;r++){var i=ce[r];ns(i.startTime,i.processingEnd).forEach(function(a){n.add(a)})}for(var s=0;s<50;s++){var o=we[we.length-1-s];if(!o||o.startTime<mr)break;n.add(o)}we=Array.from(n),Or=-1};Zi.push(function(e){e.interactionId&&e.target&&!De.has(e.interactionId)&&De.set(e.interactionId,e.target)},function(e){var t,n=e.startTime+e.duration;mr=Math.max(mr,e.processingEnd);for(var r=ce.length-1;r>=0;r--){var i=ce[r];if(Math.abs(n-i.renderTime)<=8){(t=i).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},ce.push(t)),(e.interactionId||e.entryType==="first-input")&&Rr.set(e,t),ts()});var le,Ze,es,Cn,ns=function(e,t){for(var n,r=[],i=0;n=we[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},Uo=function(e,t){Hi||(Hi=he("long-animation-frame",Co)),yo(function(n){var r=function(i){var s=i.entries[0],o=Rr.get(s),a=s.processingStart,u=o.processingEnd,E=o.entries.sort(function(G,J){return G.processingStart-J.processingStart}),p=ns(s.startTime,u),h=i.entries.find(function(G){return G.target}),U=h&&h.target||De.get(s.interactionId),w=[s.startTime+s.duration,u].concat(p.map(function(G){return G.startTime+G.duration})),V=Math.max.apply(Math,w),B={interactionTarget:Pn(U),interactionTargetElement:U,interactionType:s.name.startsWith("key")?"keyboard":"pointer",interactionTime:s.startTime,nextPaintTime:V,processedEventEntries:E,longAnimationFrameEntries:p,inputDelay:a-s.startTime,processingDuration:u-a,presentationDelay:Math.max(V-u,0),loadState:$e(s.startTime)};return Object.assign(i,{attribution:B})}(n);e(r)},t)},rs=[2500,4e3],Pr={},wo=function(e,t){(function(n,r){r=r||{},Je(function(){var i,s=gr(),o=Bt("LCP"),a=function(p){r.reportAllChanges||(p=p.slice(-1)),p.forEach(function(h){h.startTime<s.firstHiddenTime&&(o.value=Math.max(h.startTime-Mn(),0),o.entries=[h],i())})},u=he("largest-contentful-paint",a);if(u){i=Gt(n,o,rs,r.reportAllChanges);var E=Nn(function(){Pr[o.id]||(a(u.takeRecords()),u.disconnect(),Pr[o.id]=!0,i(!0))});["keydown","click"].forEach(function(p){addEventListener(p,function(){return br(E)},!0)}),Xe(E),Se(function(p){o=Bt("LCP"),i=Gt(n,o,rs,r.reportAllChanges),Ar(function(){o.value=performance.now()-p.timeStamp,Pr[o.id]=!0,i(!0)})})}})})(function(n){var r=function(i){var s={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:i.value};if(i.entries.length){var o=Ie();if(o){var a=o.activationStart||0,u=i.entries[i.entries.length-1],E=u.url&&performance.getEntriesByType("resource").filter(function(V){return V.name===u.url})[0],p=Math.max(0,o.responseStart-a),h=Math.max(p,E?(E.requestStart||E.startTime)-a:0),U=Math.max(h,E?E.responseEnd-a:0),w=Math.max(U,u.startTime-a);s={element:Pn(u.element),timeToFirstByte:p,resourceLoadDelay:h-p,resourceLoadDuration:U-h,elementRenderDelay:w-U,navigationEntry:o,lcpEntry:u},u.url&&(s.url=u.url),E&&(s.lcpResourceEntry=E)}}return Object.assign(i,{attribution:s})}(n);e(r)},t)},is=[800,1800],Do=function e(t){document.prerendering?Je(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},Vo=function(e,t){t=t||{};var n=Bt("TTFB"),r=Gt(e,n,is,t.reportAllChanges);Do(function(){var i=Ie();i&&(n.value=Math.max(i.responseStart-Mn(),0),n.entries=[i],r(!0),Se(function(){n=Bt("TTFB",0),(r=Gt(e,n,is,t.reportAllChanges))(!0)}))})},xo=function(e,t){Vo(function(n){var r=function(i){var s={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(i.entries.length){var o=i.entries[0],a=o.activationStart||0,u=Math.max((o.workerStart||o.fetchStart)-a,0),E=Math.max(o.domainLookupStart-a,0),p=Math.max(o.connectStart-a,0),h=Math.max(o.connectEnd-a,0);s={waitingDuration:u,cacheDuration:E-u,dnsDuration:p-E,connectionDuration:h-p,requestDuration:i.value-h,navigationEntry:o}}return Object.assign(i,{attribution:s})}(n);e(r)},t)},qe={passive:!0,capture:!0},Bo=new Date,ss=function(e,t){le||(le=t,Ze=e,es=new Date,as(removeEventListener),os())},os=function(){if(Ze>=0&&Ze<es-Bo){var e={entryType:"first-input",name:le.type,target:le.target,cancelable:le.cancelable,startTime:le.timeStamp,processingStart:le.timeStamp+Ze};Cn.forEach(function(t){t(e)}),Cn=[]}},Go=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var i=function(){ss(n,r),o()},s=function(){o()},o=function(){removeEventListener("pointerup",i,qe),removeEventListener("pointercancel",s,qe)};addEventListener("pointerup",i,qe),addEventListener("pointercancel",s,qe)}(t,e):ss(t,e)}},as=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Go,qe)})},us=[100,300],ko=function(e,t){t=t||{},Je(function(){var n,r=gr(),i=Bt("FID"),s=function(u){u.startTime<r.firstHiddenTime&&(i.value=u.processingStart-u.startTime,i.entries.push(u),n(!0))},o=function(u){u.forEach(s)},a=he("first-input",o);n=Gt(e,i,us,t.reportAllChanges),a&&(Xe(Nn(function(){o(a.takeRecords()),a.disconnect()})),Se(function(){var u;i=Bt("FID"),n=Gt(e,i,us,t.reportAllChanges),Cn=[],Ze=-1,le=null,as(addEventListener),u=s,Cn.push(u),os()}))})},Ho=function(e,t){ko(function(n){var r=function(i){var s=i.entries[0],o={eventTarget:Pn(s.target),eventType:s.name,eventTime:s.startTime,eventEntry:s,loadState:$e(s.startTime)};return Object.assign(i,{attribution:o})}(n);e(r)},t)};const It="unknown",Mr="com.grafana.faro.lastNavigationId",In="load_state",cs="time_to_first_byte";class Fo{constructor(t,n){this.corePushMeasurement=t,this.webVitalConfig=n}initialize(){this.measureCLS(),this.measureFCP(),this.measureFID(),this.measureINP(),this.measureLCP(),this.measureTTFB()}measureCLS(){var t;Ro(n=>{const{loadState:r,largestShiftValue:i,largestShiftTime:s,largestShiftTarget:o}=n.attribution,a=this.buildInitialValues(n);this.addIfPresent(a,"largest_shift_value",i),this.addIfPresent(a,"largest_shift_time",s);const u=this.buildInitialContext(n);this.addIfPresent(u,In,r),this.addIfPresent(u,"largest_shift_target",o),this.pushMeasurement(a,u)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureFCP(){var t;Oo(n=>{const{firstByteToFCP:r,timeToFirstByte:i,loadState:s}=n.attribution,o=this.buildInitialValues(n);this.addIfPresent(o,"first_byte_to_fcp",r),this.addIfPresent(o,cs,i);const a=this.buildInitialContext(n);this.addIfPresent(a,In,s),this.pushMeasurement(o,a)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureFID(){var t;Ho(n=>{const{eventTime:r,eventTarget:i,eventType:s,loadState:o}=n.attribution,a=this.buildInitialValues(n);this.addIfPresent(a,"event_time",r);const u=this.buildInitialContext(n);this.addIfPresent(u,"event_target",i),this.addIfPresent(u,"event_type",s),this.addIfPresent(u,In,o),this.pushMeasurement(a,u)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureINP(){var t;Uo(n=>{const{interactionTime:r,presentationDelay:i,inputDelay:s,processingDuration:o,nextPaintTime:a,loadState:u,interactionTarget:E,interactionType:p}=n.attribution,h=this.buildInitialValues(n);this.addIfPresent(h,"interaction_time",r),this.addIfPresent(h,"presentation_delay",i),this.addIfPresent(h,"input_delay",s),this.addIfPresent(h,"processing_duration",o),this.addIfPresent(h,"next_paint_time",a);const U=this.buildInitialContext(n);this.addIfPresent(U,In,u),this.addIfPresent(U,"interaction_target",E),this.addIfPresent(U,"interaction_type",p),this.pushMeasurement(h,U)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureLCP(){var t;wo(n=>{const{elementRenderDelay:r,resourceLoadDelay:i,resourceLoadDuration:s,timeToFirstByte:o,element:a}=n.attribution,u=this.buildInitialValues(n);this.addIfPresent(u,"element_render_delay",r),this.addIfPresent(u,"resource_load_delay",i),this.addIfPresent(u,"resource_load_duration",s),this.addIfPresent(u,cs,o);const E=this.buildInitialContext(n);this.addIfPresent(E,"element",a),this.pushMeasurement(u,E)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureTTFB(){var t;xo(n=>{const{dnsDuration:r,connectionDuration:i,requestDuration:s,waitingDuration:o,cacheDuration:a}=n.attribution,u=this.buildInitialValues(n);this.addIfPresent(u,"dns_duration",r),this.addIfPresent(u,"connection_duration",i),this.addIfPresent(u,"request_duration",s),this.addIfPresent(u,"waiting_duration",o),this.addIfPresent(u,"cache_duration",a);const E=this.buildInitialContext(n);this.pushMeasurement(u,E)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}buildInitialValues(t){return{[t.name.toLowerCase()]:t.value,delta:t.delta}}buildInitialContext(t){var n;const r=(n=qt(Mr,Lt.session))!==null&&n!==void 0?n:It;return{id:t.id,rating:t.rating,navigation_type:t.navigationType,navigation_entry_id:r}}pushMeasurement(t,n){this.corePushMeasurement({type:"web-vitals",values:t},{context:n})}addIfPresent(t,n,r){r&&(t[n]=r)}}class ls extends ee{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-web-vitals",this.version=g}initialize(){this.logDebug("Initializing"),this.intializeWebVitalsInstrumentation().initialize()}intializeWebVitalsInstrumentation(){var t,n,r;return((t=this.config)===null||t===void 0?void 0:t.trackWebVitalsAttribution)===!1||((r=(n=this.config)===null||n===void 0?void 0:n.webVitalsInstrumentation)===null||r===void 0?void 0:r.trackAttribution)===!1?new On(this.api.pushMeasurement,this.config.webVitalsInstrumentation):new Fo(this.api.pushMeasurement,this.config.webVitalsInstrumentation)}}function jo(e){var t,n,r,i;return{id:(i=(r=(n=(t=it.P.config)===null||t===void 0?void 0:t.sessionTracking)===null||n===void 0?void 0:n.generateSessionId)===null||r===void 0?void 0:r.call(n))!==null&&i!==void 0?i:Kt(),attributes:e}}class ds extends ee{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-session",this.version=g}sendSessionStartEvent(t){var n,r;const i=t.session;if(i&&i.id!==((n=this.notifiedSession)===null||n===void 0?void 0:n.id)){if(this.notifiedSession&&this.notifiedSession.id===((r=i.attributes)===null||r===void 0?void 0:r.previousSession)){this.api.pushEvent(Zr,{},void 0,{skipDedupe:!0}),this.notifiedSession=i;return}this.notifiedSession=i,this.api.pushEvent(He,{},void 0,{skipDedupe:!0})}}createInitialSession(t,n){var r,i,s,o,a,u;let E=t.fetchUserSession();if(n.persistent&&n.maxSessionPersistenceTime&&E){const U=Z();E.lastActivity<U-n.maxSessionPersistenceTime&&(Dt.removeUserSession(),E=null)}let p,h;if(Wn(E)){const U=E?.sessionId;h=Fe({sessionId:U,isSampled:E.isSampled||!1,started:E?.started});const w=E?.sessionMeta,V=Object.assign(Object.assign({},(r=n.session)===null||r===void 0?void 0:r.overrides),w?.overrides);h.sessionMeta=Object.assign(Object.assign({},n.session),{id:U,attributes:Object.assign(Object.assign(Object.assign({},(i=n.session)===null||i===void 0?void 0:i.attributes),w?.attributes),{isSampled:h.isSampled.toString()}),overrides:V}),p=En}else{const U=(o=(s=n.session)===null||s===void 0?void 0:s.id)!==null&&o!==void 0?o:jo().id;h=Fe({sessionId:U,isSampled:fn()});const w=(a=n.session)===null||a===void 0?void 0:a.overrides;h.sessionMeta=Object.assign({id:U,attributes:Object.assign({isSampled:h.isSampled.toString()},(u=n.session)===null||u===void 0?void 0:u.attributes)},w?{overrides:w}:{}),p=He}return{initialSession:h,lifecycleType:p}}registerBeforeSendHook(t){var n;const{updateSession:r}=new t;(n=this.transports)===null||n===void 0||n.addBeforeSendHooks(i=>{var s,o,a;r();const u=(s=i.meta.session)===null||s===void 0?void 0:s.attributes;if(u&&u?.isSampled==="true"){let E=JSON.parse(JSON.stringify(i));const p=(o=E.meta.session)===null||o===void 0?void 0:o.attributes;return p==null||delete p.isSampled,Object.keys(p??{}).length===0&&((a=E.meta.session)===null||a===void 0||delete a.attributes),E}return null})}initialize(){this.logDebug("init session instrumentation");const t=this.config.sessionTracking;if(t?.enabled){const n=$n(t);this.registerBeforeSendHook(n);const{initialSession:r,lifecycleType:i}=this.createInitialSession(n,t);n.storeUserSession(r);const s=r.sessionMeta;this.notifiedSession=s,this.api.setSession(s),i===He&&this.api.pushEvent(He,{},void 0,{skipDedupe:!0}),i===En&&this.api.pushEvent(En,{},void 0,{skipDedupe:!0})}this.metas.addListener(this.sendSessionStartEvent.bind(this))}}class $t{constructor(){this.subscribers=[]}subscribe(t){return this.subscribers.push(t),{unsubscribe:()=>this.unsubscribe(t)}}unsubscribe(t){this.subscribers=this.subscribers.filter(n=>n!==t)}notify(t){this.subscribers.forEach(n=>n(t))}first(){const t=new $t,n=s=>{t.notify(s),r.unsubscribe()},r=this.subscribe(n),i=t.unsubscribe.bind(t);return this.withUnsubscribeOverride(t,i,n)}takeWhile(t){const n=new $t,r=s=>{t(s)?n.notify(s):n.unsubscribe(r)};this.subscribe(r);const i=n.unsubscribe.bind(n);return this.withUnsubscribeOverride(n,i,r)}filter(t){const n=new $t,r=s=>{t(s)&&n.notify(s)};this.subscribe(r);const i=n.unsubscribe.bind(n);return this.withUnsubscribeOverride(n,i,r)}merge(...t){const n=new $t,r=[];t.forEach(s=>{const o=s.subscribe(a=>{n.notify(a)});r.push(o)});const i=n.unsubscribeAll.bind(n);return n.unsubscribe=()=>{r.forEach(s=>s.unsubscribe()),i()},n}withUnsubscribeOverride(t,n,r){return t.unsubscribe=i=>{n(i),this.unsubscribe(r)},t}unsubscribeAll(){this.subscribers=[]}}const me="user-action-start",Nr="user-action-end",Lr="user-action-cancel",yr="user-action-halt";function Ko({internalLogger:e,config:t,metas:n,transports:r,tracesApi:i,actionBuffer:s,getMessage:o}){let a=null;return{pushEvent:(E,p,h,{skipDedupe:U,spanContext:w,timestampOverwriteMs:V,customPayloadTransformer:B=G=>G}={})=>{try{const G=Xt(p),J={meta:n.value,payload:B({name:E,domain:h??t.eventDomain,attributes:Ct(G)?void 0:G,timestamp:V?Pt(V):jt(),trace:w?{trace_id:w.traceId,span_id:w.spanId}:i.getTraceContext()}),type:c.EVENT},st={name:J.payload.name,attributes:J.payload.attributes,domain:J.payload.domain};if(!U&&t.dedupe&&!C(a)&&te(st,a)){e.debug(`Skipping event push because it is the same as the last one
`,J.payload);return}a=st,e.debug(`Pushing event
`,J);const Ot=o();Ot&&Ot.type===me?s.addItem(J):r.execute(J)}catch(G){e.error("Error pushing event",G)}}}}function Wo(e,t){return e.some(n=>H(n)?t.includes(n):!!t.match(n))}let de;function Yo({internalLogger:e,config:t,metas:n,transports:r,tracesApi:i,actionBuffer:s,getMessage:o}){var a;e.debug("Initializing exceptions API");let u=null;de=(a=t.parseStacktrace)!==null&&a!==void 0?a:de;const E=V=>{e.debug("Changing stacktrace parser"),de=V??de},p=()=>de,{ignoreErrors:h=[],preserveOriginalError:U}=t,w=(V,{skipDedupe:B,stackFrames:G,type:J,context:st,spanContext:Ot,timestampOverwriteMs:mt,originalError:et}={})=>{if(!$o(h,et??V))try{const z=Xt(Object.assign(Object.assign({},zo(et??V)),st??{})),ut={meta:n.value,payload:Object.assign(Object.assign({type:J||V.name||er,value:V.message,timestamp:mt?Pt(mt):jt(),trace:Ot?{trace_id:Ot.traceId,span_id:Ot.spanId}:i.getTraceContext()},Ct(z)?{}:{context:z}),U?{originalError:et}:{}),type:c.EXCEPTION};G=G??(V.stack?de?.(V).frames:void 0),G?.length&&(ut.payload.stacktrace={frames:G});const kt={type:ut.payload.type,value:ut.payload.value,stackTrace:ut.payload.stacktrace,context:ut.payload.context};if(!B&&t.dedupe&&!C(u)&&te(kt,u)){e.debug(`Skipping error push because it is the same as the last one
`,ut.payload);return}u=kt,e.debug(`Pushing exception
`,ut);const oe=o();oe&&oe.type===me?s.addItem(ut):r.execute(ut)}catch(z){e.error("Error pushing event",z)}};return E(t.parseStacktrace),{changeStacktraceParser:E,getStacktraceParser:p,pushError:w}}function zo(e){let t=e.cause;return lt(t)?t=e.cause.toString():t!==null&&(j(e.cause)||k(e.cause))?t=Ht(e.cause):t!=null&&(t=e.cause.toString()),t==null?{}:{cause:t}}function $o(e,t){const{message:n,name:r,stack:i}=t;return Wo(e,n+" "+r+" "+i)}function Xo({internalLogger:e,config:t,metas:n,transports:r,tracesApi:i,actionBuffer:s,getMessage:o}){var a;e.debug("Initializing logs API");let u=null;const E=(a=t.logArgsSerializer)!==null&&a!==void 0?a:Le;return{pushLog:(h,{context:U,level:w,skipDedupe:V,spanContext:B,timestampOverwriteMs:G}={})=>{try{const J=Xt(U),st={type:c.LOG,payload:{message:E(h),level:w??Yt.Ic,context:Ct(J)?void 0:J,timestamp:G?Pt(G):jt(),trace:B?{trace_id:B.traceId,span_id:B.spanId}:i.getTraceContext()},meta:n.value},Ot={message:st.payload.message,level:st.payload.level,context:st.payload.context};if(!V&&t.dedupe&&!C(u)&&te(Ot,u)){e.debug(`Skipping log push because it is the same as the last one
`,st.payload);return}u=Ot,e.debug(`Pushing log
`,st);const mt=o();mt&&mt.type===me?s.addItem(st):r.execute(st)}catch(J){e.error(`Error pushing log
`,J)}}}}function Jo({internalLogger:e,config:t,metas:n,transports:r,tracesApi:i,actionBuffer:s,getMessage:o}){e.debug("Initializing measurements API");let a=null;return{pushMeasurement:(E,{skipDedupe:p,context:h,spanContext:U,timestampOverwriteMs:w}={})=>{try{const V=Xt(h),B={type:c.MEASUREMENT,payload:Object.assign(Object.assign({},E),{trace:U?{trace_id:U.traceId,span_id:U.spanId}:i.getTraceContext(),timestamp:w?Pt(w):jt(),context:Ct(V)?void 0:V}),meta:n.value},G={type:B.payload.type,values:B.payload.values,context:B.payload.context};if(!p&&t.dedupe&&!C(a)&&te(G,a)){e.debug(`Skipping measurement push because it is the same as the last one
`,B.payload);return}a=G,e.debug(`Pushing measurement
`,B);const J=o();J&&J.type===me?s.addItem(B):r.execute(B)}catch(V){e.error(`Error pushing measurement
`,V)}}}}function Qo({internalLogger:e,metas:t}){e.debug("Initializing meta API");let n,r,i,s;const o=w=>{r&&t.remove(r),r={user:w},t.add(r)},a=(w,V)=>{var B;const G=V?.overrides,J=G?{overrides:Object.assign(Object.assign({},(B=n?.session)===null||B===void 0?void 0:B.overrides),G)}:{};n&&t.remove(n),n={session:Object.assign(Object.assign({},Ct(w)?void 0:w),J)},t.add(n)},u=()=>t.value.session,E=(w,V)=>{var B;if(V?.overrides&&a(u(),{overrides:V.overrides}),((B=i?.view)===null||B===void 0?void 0:B.name)===w?.name)return;const G=i;i={view:w},t.add(i),G&&t.remove(G)},p=()=>t.value.view,h=w=>{var V;const B=H(w)?Object.assign(Object.assign({},(V=s?.page)!==null&&V!==void 0?V:U()),{id:w}):w;s&&t.remove(s),s={page:B},t.add(s)},U=()=>t.value.page;return{setUser:o,resetUser:o,setSession:a,resetSession:a,getSession:u,setView:E,getView:p,setPage:h,getPage:U}}function Zo(e,t,n,r,i){t.debug("Initializing traces API");let s;return{getOTEL:()=>s,getTraceContext:()=>{const h=s?.trace.getSpanContext(s.context.active());return h?{trace_id:h.traceId,span_id:h.spanId}:void 0},initOTEL:(h,U)=>{t.debug("Initializing OpenTelemetry"),s={trace:h,context:U}},isOTELInitialized:()=>!!s,pushTraces:h=>{try{const U={type:c.TRACE,payload:h,meta:r.value};t.debug(`Pushing trace
`,U),i.execute(U)}catch(U){t.error(`Error pushing trace
`,U)}}}}class qo{constructor(){this.buffer=[]}addItem(t){this.buffer.push(t)}flushBuffer(t){if(D(t))for(const n of this.buffer)t(n);this.buffer.length=0}size(){return this.buffer.length}}function ta({apiMessageBus:e,transports:t,config:n}){const r=new qo,i=n.trackUserActionsExcludeItem;let s;return e.subscribe(a=>{if(me===a.type||yr===a.type){s=a;return}if(a.type===Nr){const{id:u,name:E}=a;r.flushBuffer(p=>{if(ea(p,i)){t.execute(p);return}const h=Object.assign(Object.assign({},p),{payload:Object.assign(Object.assign({},p.payload),{action:{parentId:u,name:E}})});t.execute(h)}),s=void 0;return}a.type===Lr&&(s=void 0,r.flushBuffer(u=>{t.execute(u)}))}),{actionBuffer:r,getMessage:()=>s}}function ea(e,t){return t?.(e)||e.type===c.MEASUREMENT&&e.payload.type==="web-vitals"}const Ve=new $t;function na(e,t,n,r,i){t.debug("Initializing API");const{actionBuffer:s,getMessage:o}=ta({apiMessageBus:Ve,transports:i,config:n}),a=Zo(e,t,n,r,i),u={unpatchedConsole:e,internalLogger:t,config:n,metas:r,transports:i,tracesApi:a,actionBuffer:s,getMessage:o};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),Yo(u)),Qo(u)),Xo(u)),Jo(u)),Ko(u))}const ra="resource-entry",_s="http-request-start",Es="http-request-end",ia="dom-mutation",sa="faroUserActionName",oa="data-faro-user-action-name";function aa(){const e=new $t;return new MutationObserver((n,r)=>{e.notify({type:ia})}).observe(document,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),e}function ua(){return it.P.transports.transports.flatMap(e=>e.getIgnoreUrls())}function Un(e=""){return ua().some(t=>e&&e.match(t)!=null)}function fs(e){if(H(e))return e;if(e instanceof URL)return e.href;if(!Ct(e)&&D(e?.toString))return e.toString()}const Cr="fetch",wn="xhr";function ca(){const e=new $t;function t(r){e.notify({type:_s,request:r})}function n(r){e.notify({type:Es,request:r})}return da({onRequestStart:t,onRequestEnd:n}),la({onRequestStart:t,onRequestEnd:n}),e}function la({onRequestStart:e,onRequestEnd:t}){const n=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){const r=arguments[1],i=Un(r),s=arguments[0],o=Kt();this.addEventListener("loadstart",function(){i||e({url:r,method:s,requestId:o,apiType:wn})}),this.addEventListener("load",function(){i||t({url:r,method:s,requestId:o,apiType:wn})}),this.addEventListener("error",function(){i||t({url:r,method:s,requestId:o,apiType:wn})}),this.addEventListener("abort",function(){i||t({url:r,method:s,requestId:o,apiType:wn})}),n.apply(this,arguments)}}function da({onRequestEnd:e,onRequestStart:t}){const n=window.fetch;window.fetch=function(){var r,i;const s=(r=fs(arguments[0]))!==null&&r!==void 0?r:"",o=Un(s),a=((i=arguments[1])!==null&&i!==void 0?i:{}).method,u=Kt();return o||t({url:s,method:a,requestId:u,apiType:Cr}),n.apply(this,arguments).then(E=>(o||e({url:s,method:a,requestId:u,apiType:Cr}),E)).catch(E=>{throw o||e({url:s,method:a,requestId:u,apiType:Cr}),E})}}const _a="navigation",Ir="resource",Ea=/^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;function ps(e=[]){for(const t of e)if(t.name==="traceparent"){if(!Ea.test(t.description))continue;const[,n,r]=t.description.split("-");if(n!=null&&r!=null)return{traceId:n,spanId:r};break}}function fa(){return"PerformanceObserver"in window}function pa(e){if(document.readyState==="complete")e();else{const t=()=>{document.readyState==="complete"&&(e(),document.removeEventListener("readystatechange",t))};document.addEventListener("readystatechange",t)}}function Ta(e,t={}){for(const[n,r]of Object.entries(t)){const i=e[n];return i==null?!1:k(r)?r.includes(i):i===r}return!0}function Ts(e){const{connectEnd:t,connectStart:n,decodedBodySize:r,domainLookupEnd:i,domainLookupStart:s,duration:o,encodedBodySize:a,fetchStart:u,initiatorType:E,name:p,nextHopProtocol:h,redirectEnd:U,redirectStart:w,renderBlockingStatus:V,requestStart:B,responseEnd:G,responseStart:J,responseStatus:st,secureConnectionStart:Ot,transferSize:mt,workerStart:et}=e;return{name:p,duration:gt(o),tcpHandshakeTime:gt(t-n),dnsLookupTime:gt(i-s),tlsNegotiationTime:gt(t-Ot),responseStatus:gt(st),redirectTime:gt(U-w),requestTime:gt(J-B),responseTime:gt(G-J),fetchTime:gt(G-u),serviceWorkerTime:gt(u-et),decodedBodySize:gt(r),encodedBodySize:gt(a),cacheHitStatus:z(),renderBlockingStatus:gt(V),protocol:h,initiatorType:E,visibilityState:document.visibilityState,ttfb:gt(J-B),transferSize:gt(mt)};function z(){let ut="fullLoad";return mt===0?r>0&&(ut="cache"):st!=null?st===304&&(ut="conditionalFetch"):a>0&&mt<a&&(ut="conditionalFetch"),ut}}function Sa(e){const{activationStart:t,domComplete:n,domContentLoadedEventEnd:r,domContentLoadedEventStart:i,domInteractive:s,fetchStart:o,loadEventEnd:a,loadEventStart:u,responseStart:E,type:p}=e,h=ha();return Object.assign(Object.assign({},Ts(e)),{pageLoadTime:gt(n-o),documentParsingTime:gt(h?s-h:null),domProcessingTime:gt(n-s),domContentLoadHandlerTime:gt(r-i),onLoadTime:gt(a-u),ttfb:gt(Math.max(E-(t??0),0)),type:p})}function ha(){var e;return((e=performance.timing)===null||e===void 0?void 0:e.domLoading)!=null?performance.timing.domLoading-performance.timeOrigin:null}function gt(e){return e==null?It:typeof e=="number"?Math.round(e>0?e:0).toString():e.toString()}function ma(e){let t;const n=new Promise(i=>{t=i});return new PerformanceObserver(i=>{var s;const[o]=i.getEntries();if(o==null||Un(o.name))return;const a=o.toJSON();let u=ps(a?.serverTiming);const E=(s=qt(Mr,Lt.session))!==null&&s!==void 0?s:It,p=Object.assign(Object.assign({},Sa(a)),{faroNavigationId:Kt(),faroPreviousNavigationId:E});Oe(Mr,p.faroNavigationId,Lt.session),e("faro.performance.navigation",p,void 0,{spanContext:u,timestampOverwriteMs:performance.timeOrigin+a.startTime}),t(p)}).observe({type:_a,buffered:!0}),n}const Aa={initiatorType:["xmlhttprequest","fetch"]};function ga(e,t,n){const r=it.P.config.trackResources;new PerformanceObserver(s=>{const o=s.getEntries();for(const a of o){if(Un(a.name))return;const u=a.toJSON();let E=ps(u?.serverTiming);if(r==null&&Ta(u,Aa)||r){const p=Object.assign(Object.assign({},Ts(u)),{faroNavigationId:e,faroResourceId:Kt()});it.P.config.trackUserActionsPreview&&n?.notify({type:Ir}),t("faro.performance.resource",p,void 0,{spanContext:E,timestampOverwriteMs:performance.timeOrigin+u.startTime})}}}).observe({type:Ir,buffered:!0})}var va=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{E(r.next(p))}catch(h){o(h)}}function u(p){try{E(r.throw(p))}catch(h){o(h)}}function E(p){p.done?s(p.value):i(p.value).then(a,u)}E((r=r.apply(e,t||[])).next())})};const Ss=new $t;class ba extends ee{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-performance",this.version=g}initialize(){if(!fa()){this.logDebug("performance observer not supported. Disable performance instrumentation.");return}pa(()=>va(this,void 0,void 0,function*(){const t=this.api.pushEvent,{faroNavigationId:n}=yield ma(t);n!=null&&ga(n,t,Ss)}))}}function Ra(){const e=new $t;return Ss.subscribe(t=>{t.type===Ir&&e.notify({type:ra})}),e}function Oa(e){const t=e.split("data-")[1],n=t?.replace(/-(.)/g,(r,i)=>i.toUpperCase());return n?.replace(/-/g,"")}const hs=100;function Pa(e){const{api:t,config:n}=e,r=ca(),i=aa(),s=Ra();let o,a=!1;function u(E){var p;let h;const U=ya(E);if(U?h=E.name:h=Ma(E.target,(p=n.trackUserActionsDataAttributeName)!==null&&p!==void 0?p:sa),a||h==null)return;a=!0;const w=Z();let V;const B=Kt();Ve.notify({type:me,name:h,startTime:w,parentId:B}),o=Ur(o,()=>{V=Z(),a=!1,Na(h,B)},hs);const G=new Map;let J=!1,st;const Ot=new $t().merge(r,i,s).takeWhile(()=>a).filter(mt=>!(J&&!(gs(mt)&&G.has(mt.request.requestId)))).subscribe(mt=>{La(mt)&&G.set(mt.request.requestId,mt.request),gs(mt)&&G.delete(mt.request.requestId),o=Ur(o,()=>{V=Z();const et=Object.assign({api:t,userActionName:h,startTime:w,endTime:V,actionId:B,event:E},U?{attributes:E.attributes}:{}),z=G.size>0;J&&!z&&(clearTimeout(st),J=!1),z?(J=!0,Ve.notify({type:yr,name:h,parentId:B,reason:"pending-requests",haltTime:Z()}),st=Ur(void 0,()=>{As(Ot),ms(et),a=!1,J=!1},1e3*10)):(As(Ot),ms(et),a=!1,J=!1)},hs)})}return u}function ms(e){const{api:t,userActionName:n,startTime:r,endTime:i,actionId:s,event:o,attributes:a}=e,u=i-r,E=o.type;Ve.notify({type:Nr,name:n,id:s,startTime:r,endTime:i,duration:u,eventType:E}),t.pushEvent(n,Object.assign({userActionStartTime:r.toString(),userActionEndTime:i.toString(),userActionDuration:u.toString(),userActionEventType:E},Xt(a)),void 0,{timestampOverwriteMs:r,customPayloadTransformer:p=>(p.action={id:s,name:n},p)})}function Ma(e,t){const n=Oa(t),r=e.dataset;for(const i in r)if(i===n)return r[i]}function Ur(e,t,n){return e&&clearTimeout(e),e=setTimeout(()=>{t()},n),e}function Na(e,t){Ve.notify({type:Lr,name:e,parentId:t})}function As(e){e?.unsubscribe(),e=void 0}function La(e){return e.type===_s}function gs(e){return e.type===Es}function ya(e){return e.type==="apiEvent"&&typeof e.name=="string"}let xe;class Ca extends ee{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-user-action",this.version=g}initialize(){xe=Pa(it.P),window.addEventListener("pointerdown",xe),window.addEventListener("keydown",xe)}}function q_(e,t){xe?.(Ia(e,t))}function Ia(e,t){return{name:e,attributes:t,type:"apiEvent"}}class Ua extends ee{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-view",this.version=g}sendViewChangedEvent(t){var n,r,i,s;const o=t.view;o&&o.name!==((n=this.notifiedView)===null||n===void 0?void 0:n.name)&&(this.api.pushEvent(Qr,{fromView:(i=(r=this.notifiedView)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:It,toView:(s=o.name)!==null&&s!==void 0?s:It},void 0,{skipDedupe:!0}),this.notifiedView=o)}initialize(){this.metas.addListener(this.sendViewChangedEvent.bind(this))}}function vs(e={}){const t=[new Ca,new dr,new ls,new ds,new Ua];return e.enablePerformanceInstrumentation!==!1&&t.unshift(new ba),e.captureConsole!==!1&&t.push(new ne({disabledLevels:e.captureConsoleDisabledLevels})),t}function wa(e,t,n,r,i,s){t.debug("Initializing instrumentations");const o=[];return{add:(...E)=>{t.debug("Adding instrumentations"),E.forEach(p=>{if(t.debug(`Adding "${p.name}" instrumentation`),o.some(U=>U.name===p.name)){t.warn(`Instrumentation ${p.name} is already added`);return}p.unpatchedConsole=e,p.internalLogger=t,p.config=n,p.metas=r,p.transports=i,p.api=s,o.push(p),p.initialize()})},get instrumentations(){return[...o]},remove:(...E)=>{t.debug("Removing instrumentations"),E.forEach(p=>{var h,U;t.debug(`Removing "${p.name}" instrumentation`);const w=o.reduce((V,B,G)=>V===null&&B.name===p.name?G:null,null);if(!w){t.warn(`Instrumentation "${p.name}" is not added`);return}(U=(h=o[w]).destroy)===null||U===void 0||U.call(h),o.splice(w,1)})}}}function Da(e){e.instrumentations.add(...e.config.instrumentations)}function bs(e=A,t=L){const n=b;return t>M.OFF&&(n.error=t>=M.ERROR?function(...r){e.error(`${n.prefix}
`,...r)}:T,n.warn=t>=M.WARN?function(...r){e.warn(`${n.prefix}
`,...r)}:T,n.info=t>=M.INFO?function(...r){e.info(`${n.prefix}
`,...r)}:T,n.debug=t>=M.VERBOSE?function(...r){e.debug(`${n.prefix}
`,...r)}:T),n}let Rs=b;function Va(e,t){return Rs=bs(e,t.internalLoggerLevel),Rs}function xa(e,t,n){let r=[],i=[];const s=()=>r.reduce((h,U)=>Object.assign(h,D(U)?U():U),{}),o=()=>{if(i.length){const h=s();i.forEach(U=>U(h))}};return{add:(...h)=>{t.debug(`Adding metas
`,h),r.push(...h),o()},remove:(...h)=>{t.debug(`Removing metas
`,h),r=r.filter(U=>!h.includes(U)),o()},addListener:h=>{t.debug(`Adding metas listener
`,h),i.push(h)},removeListener:h=>{t.debug(`Removing metas listener
`,h),i=i.filter(U=>U!==h)},get value(){return s()}}}var wr=_(30736);function Ba(e){return wr.J===null||wr.J===void 0?void 0:wr.J[`__faroBundleId_${e}`]}function Ga(e){var t,n;const r={sdk:{version:g},app:{bundleId:e.config.app.name&&Ba(e.config.app.name)}},i=(t=e.config.sessionTracking)===null||t===void 0?void 0:t.session;i&&e.api.setSession(i),e.config.app&&(r.app=Object.assign(Object.assign({},e.config.app),r.app)),e.config.user&&(r.user=e.config.user),e.config.view&&(r.view=e.config.view),e.metas.add(r,...(n=e.config.metas)!==null&&n!==void 0?n:[])}var ka=_(4756);const Ha=250,Fa=50;class ja{constructor(t,n){var r,i;this.signalBuffer=[],this.itemLimit=(r=n?.itemLimit)!==null&&r!==void 0?r:Fa,this.sendTimeout=(i=n?.sendTimeout)!==null&&i!==void 0?i:Ha,this.paused=n?.paused||!1,this.sendFn=t,this.flushInterval=-1,this.paused||this.start(),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&this.flush()})}addItem(t){this.paused||(this.signalBuffer.push(t),this.signalBuffer.length>=this.itemLimit&&this.flush())}start(){this.paused=!1,this.sendTimeout>0&&(this.flushInterval=window.setInterval(()=>this.flush(),this.sendTimeout))}pause(){this.paused=!0,clearInterval(this.flushInterval)}groupItems(t){const n=new Map;return t.forEach(r=>{const i=JSON.stringify(r.meta);let s=n.get(i);s===void 0?s=[r]:s=[...s,r],n.set(i,s)}),Array.from(n.values())}flush(){if(this.paused||this.signalBuffer.length===0)return;this.groupItems(this.signalBuffer).forEach(this.sendFn),this.signalBuffer=[]}}function Ka(e,t,n,r){var i;t.debug("Initializing transports");const s=[];let o=n.paused,a=[];const u=(...et)=>{t.debug("Adding transports"),et.forEach(z=>{if(t.debug(`Adding "${z.name}" transport`),s.some(kt=>kt===z)){t.warn(`Transport ${z.name} is already added`);return}z.unpatchedConsole=e,z.internalLogger=t,z.config=n,z.metas=r,s.push(z)})},E=(...et)=>{t.debug(`Adding beforeSendHooks
`,a),et.forEach(z=>{z&&a.push(z)})},p=et=>{let z=et;for(const ut of a){const kt=z.map(ut).filter(Boolean);if(kt.length===0)return[];z=Wa(kt,n)}return z},h=et=>{const z=p(et);if(z.length!==0)for(const ut of s)t.debug(`Transporting item using ${ut.name}
`,z),ut.isBatched()&&ut.send(z)},U=et=>{var z,ut;if(!((z=n.batching)===null||z===void 0)&&z.enabled&&s.every(oe=>oe.isBatched()))return;const[kt]=p([et]);if(kt!==void 0)for(const oe of s)t.debug(`Transporting item using ${oe.name}
`,kt),oe.isBatched()?!((ut=n.batching)===null||ut===void 0)&&ut.enabled||oe.send([kt]):oe.send(kt)};let w;return!((i=n.batching)===null||i===void 0)&&i.enabled&&(w=new ja(h,{sendTimeout:n.batching.sendTimeout,itemLimit:n.batching.itemLimit,paused:o})),{add:u,addBeforeSendHooks:E,getBeforeSendHooks:()=>[...a],execute:et=>{var z;o||(!((z=n.batching)===null||z===void 0)&&z.enabled&&w?.addItem(et),U(et))},isPaused:()=>o,pause:()=>{t.debug("Pausing transports"),w?.pause(),o=!0},remove:(...et)=>{t.debug("Removing transports"),et.forEach(z=>{t.debug(`Removing "${z.name}" transport`);const ut=s.indexOf(z);if(ut===-1){t.warn(`Transport "${z.name}" is not added`);return}s.splice(ut,1)})},removeBeforeSendHooks:(...et)=>{a.filter(z=>!et.includes(z))},get transports(){return[...s]},unpause:()=>{t.debug("Unpausing transports"),w?.start(),o=!1}}}function Wa(e,t){if(t.preserveOriginalError)for(const n of e)n.type===c.EXCEPTION&&delete n.payload.originalError;return e}function Ya(e){e.transports.add(...e.config.transports),e.transports.addBeforeSendHooks(e.config.beforeSend)}let Dr=A;function za(e){var t;return Dr=(t=e.unpatchedConsole)!==null&&t!==void 0?t:Dr,Dr}function $a(e){const t=za(e),n=Va(t,e);if((0,ka.rI)()&&!e.isolate){n.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the "isolate" property');return}n.debug("Initializing");const r=xa(t,n,e),i=Ka(t,n,e,r),s=na(t,n,e,r,i),o=wa(t,n,e,r,i,s),a=(0,it.A)(t,n,e,r,i,s,o);return Ga(a),Ya(a),Da(a),a}const Xa="faro",Ja={enabled:!0,sendTimeout:250,itemLimit:50},Qa="browser";function Za(e){return{frames:je(e)}}var qa=_(77232);const tu=()=>{const e=new qa.UAParser,{name:t,version:n}=e.getBrowser(),{name:r,version:i}=e.getOS(),s=e.getUA(),o=navigator.language,a=navigator.userAgent.includes("Mobi"),u=E();return{browser:{name:t??It,version:n??It,os:`${r??It} ${i??It}`,userAgent:s??It,language:o??It,mobile:a,brands:u??It,viewportWidth:`${window.innerWidth}`,viewportHeight:`${window.innerHeight}`}};function E(){if(!(!t||!n)&&"userAgentData"in navigator&&navigator.userAgentData)return navigator.userAgentData.brands}},eu=()=>{const e=window.k6;return{k6:Object.assign({isK6Browser:!0},e?.testRunId&&{testRunId:e?.testRunId})}};let Os,Vr;function nu({generatePageId:e,initialPageMeta:t}={}){return()=>{const r=location.href;return D(e)&&Os!==r&&(Os=r,Vr=e(location)),{page:Object.assign(Object.assign({url:r},Vr?{id:Vr}:{}),t)}}}var ru=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function iu(e){var t;const n=[],r=bs(e.unpatchedConsole,e.internalLoggerLevel);e.transports?((e.url||e.apiKey)&&r.error('if "transports" is defined, "url" and "apiKey" should not be defined'),n.push(...e.transports)):e.url?n.push(new Jn({url:e.url,apiKey:e.apiKey})):r.error('either "url" or "transports" must be defined');const{dedupe:i=!0,eventDomain:s=Qa,globalObjectKey:o=Xa,instrumentations:a=vs(),internalLoggerLevel:u=L,isolate:E=!1,logArgsSerializer:p=Le,metas:h=ou(e),paused:U=!1,preventGlobalExposure:w=!1,unpatchedConsole:V=A,trackUserActionsPreview:B=!1,trackUserActionsDataAttributeName:G=oa}=e,J=ru(e,["dedupe","eventDomain","globalObjectKey","instrumentations","internalLoggerLevel","isolate","logArgsSerializer","metas","paused","preventGlobalExposure","unpatchedConsole","trackUserActionsPreview","trackUserActionsDataAttributeName"]);return Object.assign(Object.assign({},J),{batching:Object.assign(Object.assign({},Ja),e.batching),dedupe:i,globalObjectKey:o,instrumentations:su(a,e),internalLoggerLevel:u,isolate:E,logArgsSerializer:p,metas:h,parseStacktrace:Za,paused:U,preventGlobalExposure:w,transports:n,unpatchedConsole:V,eventDomain:s,ignoreUrls:((t=e.ignoreUrls)!==null&&t!==void 0?t:[]).concat([/\/collect(?:\/[\w]*)?$/]),sessionTracking:Object.assign(Object.assign(Object.assign({},pe),e.sessionTracking),au({trackGeolocation:e.trackGeolocation,sessionTracking:e.sessionTracking})),trackUserActionsPreview:B,trackUserActionsDataAttributeName:G})}function su(e,{trackUserActionsPreview:t}){return e.filter(n=>!(n.name==="@grafana/faro-web-sdk:instrumentation-user-action"&&!t))}function ou(e){var t,n;const{page:r,generatePageId:i}=(t=e?.pageTracking)!==null&&t!==void 0?t:{},s=[tu,nu({generatePageId:i,initialPageMeta:r}),...(n=e.metas)!==null&&n!==void 0?n:[]];return j(window.k6)?[...s,eu]:s}function au({trackGeolocation:e,sessionTracking:t}){var n;const r={};return ft(e)&&(r.geoLocationTrackingEnabled=e),Ct(r)?{}:{session:Object.assign(Object.assign({},(n=t?.session)!==null&&n!==void 0?n:{}),{overrides:r})}}function uu(e){const t=iu(e);if(t)return $a(t)}var Mt=_(73096),ht=_(41844),Ps=_(2240),Ae=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cu=function(){function e(){}return e.prototype.createGauge=function(t,n){return hu},e.prototype.createHistogram=function(t,n){return mu},e.prototype.createCounter=function(t,n){return Su},e.prototype.createUpDownCounter=function(t,n){return Au},e.prototype.createObservableGauge=function(t,n){return vu},e.prototype.createObservableCounter=function(t,n){return gu},e.prototype.createObservableUpDownCounter=function(t,n){return bu},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),Dn=function(){function e(){}return e}(),lu=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(Dn),du=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(Dn),_u=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(Dn),Eu=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(Dn),xr=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),fu=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xr),pu=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xr),Tu=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xr),Ms=new cu,Su=new lu,hu=new _u,mu=new Eu,Au=new du,gu=new fu,vu=new pu,bu=new Tu;function tE(){return Ms}var Ru=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return Ms},e}(),Ou=new Ru,Br=_(75158),Ns=_(44892),Gr="metrics",Pu=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return(0,Br.$G)(Gr,t,Ns.K.instance())},e.prototype.getMeterProvider=function(){return(0,Br.mS)(Gr)||Ou},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){(0,Br.kv)(Gr,Ns.K.instance())},e}(),Ls=Pu.getInstance();const Mu=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof _.g=="object"?_.g:{},Vn=Symbol.for("io.opentelemetry.js.api.logs"),tn=Mu;function Nu(e,t,n){return r=>r===e?t:n}const ys=1;class Cs{emit(t){}}const Lu=new Cs;class yu{getLogger(t,n,r){return new Cs}}const Is=new yu;class Cu{constructor(t,n,r,i){this._provider=t,this.name=n,this.version=r,this.options=i}emit(t){this._getLogger().emit(t)}_getLogger(){if(this._delegate)return this._delegate;const t=this._provider.getDelegateLogger(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Lu}}class Us{getLogger(t,n,r){var i;return(i=this.getDelegateLogger(t,n,r))!==null&&i!==void 0?i:new Cu(this,t,n,r)}getDelegate(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Is}setDelegate(t){this._delegate=t}getDelegateLogger(t,n,r){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getLogger(t,n,r)}}class kr{constructor(){this._proxyLoggerProvider=new Us}static getInstance(){return this._instance||(this._instance=new kr),this._instance}setGlobalLoggerProvider(t){return tn[Vn]?this.getLoggerProvider():(tn[Vn]=Nu(ys,t,Is),this._proxyLoggerProvider.setDelegate(t),t)}getLoggerProvider(){var t,n;return(n=(t=tn[Vn])===null||t===void 0?void 0:t.call(tn,ys))!==null&&n!==void 0?n:this._proxyLoggerProvider}getLogger(t,n,r){return this.getLoggerProvider().getLogger(t,n,r)}disable(){delete tn[Vn],this._proxyLoggerProvider=new Us}}const ws=kr.getInstance();function Iu(e,t,n,r){for(let i=0,s=e.length;i<s;i++){const o=e[i];t&&o.setTracerProvider(t),n&&o.setMeterProvider(n),r&&o.setLoggerProvider&&o.setLoggerProvider(r),o.getConfig().enabled||o.enable()}}function Uu(e){e.forEach(t=>t.disable())}function wu(e){const t=e.tracerProvider||Mt.u.getTracerProvider(),n=e.meterProvider||Ls.getMeterProvider(),r=e.loggerProvider||ws.getLoggerProvider(),i=e.instrumentations?.flat()??[];return Iu(i,t,n,r),()=>{Uu(i)}}var Et=_(78758),Hr=_(15347),rt=_(27608);function Du(){return"unknown_service"}const en=e=>e!==null&&typeof e=="object"&&typeof e.then=="function";function eE(e){return e}class nn{_rawAttributes;_asyncAttributesPending=!1;_memoizedAttributes;static FromAttributeList(t){const n=new nn({});return n._rawAttributes=Vs(t),n._asyncAttributesPending=t.filter(([r,i])=>en(i)).length>0,n}constructor(t){const n=t.attributes??{};this._rawAttributes=Object.entries(n).map(([r,i])=>(en(i)&&(this._asyncAttributesPending=!0),[r,i])),this._rawAttributes=Vs(this._rawAttributes)}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let t=0;t<this._rawAttributes.length;t++){const[n,r]=this._rawAttributes[t];this._rawAttributes[t]=[n,en(r)?await r:r]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&Et.s.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;const t={};for(const[n,r]of this._rawAttributes){if(en(r)){Et.s.debug(`Unsettled resource attribute ${n} skipped`);continue}r!=null&&(t[n]??=r)}return this._asyncAttributesPending||(this._memoizedAttributes=t),t}getRawAttributes(){return this._rawAttributes}merge(t){return t==null?this:nn.FromAttributeList([...t.getRawAttributes(),...this.getRawAttributes()])}}function Fr(e){return nn.FromAttributeList(Object.entries(e))}function nE(e){return new nn(e)}function rE(){return Fr({})}function Ds(){return Fr({[rt.UX]:Du(),[rt.E$]:Hr.q[rt.E$],[rt.aO]:Hr.q[rt.aO],[rt.aJ]:Hr.q[rt.aJ]})}function Vs(e){return e.map(([t,n])=>en(n)?[t,n.catch(r=>{Et.s.debug("promise rejection for resource attribute: %s - %s",t,r)})]:[t,n])}var Vu=_(31194),xu=_(97872),Be;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Be||(Be={}));var xn;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(xn||(xn={}));var rn=_(47397),xs=_(4445),sn=_(80788),on=_(11908),an=_(75026),at=_(65864);const Bu="exception";class Gu{_spanContext;kind;parentSpanContext;attributes={};links=[];events=[];startTime;resource;instrumentationScope;_droppedAttributesCount=0;_droppedEventsCount=0;_droppedLinksCount=0;name;status={code:on.s.UNSET};endTime=[0,0];_ended=!1;_duration=[-1,-1];_spanProcessor;_spanLimits;_attributeValueLengthLimit;_performanceStartTime;_performanceOffset;_startTimeProvided;constructor(t){const n=Date.now();this._spanContext=t.spanContext,this._performanceStartTime=an.u.now(),this._performanceOffset=n-(this._performanceStartTime+(0,at.uc)()),this._startTimeProvided=t.startTime!=null,this._spanLimits=t.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=t.spanProcessor,this.name=t.name,this.parentSpanContext=t.parentSpanContext,this.kind=t.kind,this.links=t.links||[],this.startTime=this._getTime(t.startTime??n),this.resource=t.resource,this.instrumentationScope=t.scope,t.attributes!=null&&this.setAttributes(t.attributes),this._spanProcessor.onStart(this,t.context)}spanContext(){return this._spanContext}setAttribute(t,n){if(n==null||this._isSpanEnded())return this;if(t.length===0)return Et.s.warn(`Invalid attribute key: ${t}`),this;if(!(0,sn.m)(n))return Et.s.warn(`Invalid attribute value set for key: ${t}`),this;const{attributeCountLimit:r}=this._spanLimits;return r!==void 0&&Object.keys(this.attributes).length>=r&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(n),this)}setAttributes(t){for(const[n,r]of Object.entries(t))this.setAttribute(n,r);return this}addEvent(t,n,r){if(this._isSpanEnded())return this;const{eventCountLimit:i}=this._spanLimits;if(i===0)return Et.s.warn("No events allowed."),this._droppedEventsCount++,this;i!==void 0&&this.events.length>=i&&(this._droppedEventsCount===0&&Et.s.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,at.Ir)(n)&&((0,at.Ir)(r)||(r=n),n=void 0);const s=(0,sn.L)(n);return this.events.push({name:t,attributes:s,time:this._getTime(r),droppedAttributesCount:0}),this}addLink(t){return this.links.push(t),this}addLinks(t){return this.links.push(...t),this}setStatus(t){return this._isSpanEnded()?this:(this.status={...t},this.status.message!=null&&typeof t.message!="string"&&(Et.s.warn(`Dropping invalid status.message of type '${typeof t.message}', expected 'string'`),delete this.status.message),this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t){if(this._isSpanEnded()){Et.s.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=!0,this.endTime=this._getTime(t),this._duration=(0,at.W5)(this.startTime,this.endTime),this._duration[0]<0&&(Et.s.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Et.s.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(t){if(typeof t=="number"&&t<=an.u.now())return(0,at._5)(t+this._performanceOffset);if(typeof t=="number")return(0,at.lg)(t);if(t instanceof Date)return(0,at.lg)(t.getTime());if((0,at.VL)(t))return t;if(this._startTimeProvided)return(0,at.lg)(Date.now());const n=an.u.now()-this._performanceStartTime;return(0,at.mw)(this.startTime,(0,at.lg)(n))}isRecording(){return this._ended===!1}recordException(t,n){const r={};typeof t=="string"?r[rt.wL]=t:t&&(t.code?r[rt.d6]=t.code.toString():t.name&&(r[rt.d6]=t.name),t.message&&(r[rt.wL]=t.message),t.stack&&(r[rt.Mb]=t.stack)),r[rt.d6]||r[rt.wL]?this.addEvent(Bu,r,n):Et.s.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){const t=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);Et.s.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,t)}return this._ended}_truncateToLimitUtil(t,n){return t.length<=n?t:t.substring(0,n)}_truncateToSize(t){const n=this._attributeValueLengthLimit;return n<=0?(Et.s.warn(`Attribute value limit must be positive, got ${n}`),t):typeof t=="string"?this._truncateToLimitUtil(t,n):Array.isArray(t)?t.map(r=>typeof r=="string"?this._truncateToLimitUtil(r,n):r):t}}var bt=_(41257),_e;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(_e||(_e={}));class Bn{shouldSample(){return{decision:_e.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class Ge{shouldSample(){return{decision:_e.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}var Bs=_(67823),ke=_(78044);class Gn{_root;_remoteParentSampled;_remoteParentNotSampled;_localParentSampled;_localParentNotSampled;constructor(t){this._root=t.root,this._root||((0,ke.s)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ge),this._remoteParentSampled=t.remoteParentSampled??new Ge,this._remoteParentNotSampled=t.remoteParentNotSampled??new Bn,this._localParentSampled=t.localParentSampled??new Ge,this._localParentNotSampled=t.localParentNotSampled??new Bn}shouldSample(t,n,r,i,s,o){const a=Mt.u.getSpanContext(t);return!a||!(0,Bs.YA)(a)?this._root.shouldSample(t,n,r,i,s,o):a.isRemote?a.traceFlags&rn.X.SAMPLED?this._remoteParentSampled.shouldSample(t,n,r,i,s,o):this._remoteParentNotSampled.shouldSample(t,n,r,i,s,o):a.traceFlags&rn.X.SAMPLED?this._localParentSampled.shouldSample(t,n,r,i,s,o):this._localParentNotSampled.shouldSample(t,n,r,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}class Gs{_ratio;_upperBound;constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,n){return{decision:(0,Bs.hX)(n)&&this._accumulate(n)<this._upperBound?_e.RECORD_AND_SAMPLED:_e.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let n=0;for(let r=0;r<t.length/8;r++){const i=r*8,s=parseInt(t.slice(i,i+8),16);n=(n^s)>>>0}return n}}const kn=1;function ks(){return{sampler:Hs(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,bt.Jk)("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:(0,bt.Jk)("OTEL_ATTRIBUTE_COUNT_LIMIT")??128},spanLimits:{attributeValueLengthLimit:(0,bt.Jk)("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:(0,bt.Jk)("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??128,linkCountLimit:(0,bt.Jk)("OTEL_SPAN_LINK_COUNT_LIMIT")??128,eventCountLimit:(0,bt.Jk)("OTEL_SPAN_EVENT_COUNT_LIMIT")??128,attributePerEventCountLimit:(0,bt.Jk)("OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT")??128,attributePerLinkCountLimit:(0,bt.Jk)("OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT")??128}}}function Hs(){const e=(0,bt.HF)("OTEL_TRACES_SAMPLER")??"parentbased_always_on";switch(e){case"always_on":return new Ge;case"always_off":return new Bn;case"parentbased_always_on":return new Gn({root:new Ge});case"parentbased_always_off":return new Gn({root:new Bn});case"traceidratio":return new Gs(Fs());case"parentbased_traceidratio":return new Gn({root:new Gs(Fs())});default:return Et.s.error(`OTEL_TRACES_SAMPLER value "${e}" invalid, defaulting to "parentbased_always_on".`),new Gn({root:new Ge})}}function Fs(){const e=(0,bt.Jk)("OTEL_TRACES_SAMPLER_ARG");return e==null?(Et.s.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${kn}.`),kn):e<0||e>1?(Et.s.error(`OTEL_TRACES_SAMPLER_ARG=${e} was given, but it is out of range ([0..1]), defaulting to ${kn}.`),kn):e}const ku=128,Hu=1/0;function Fu(e){const t={sampler:Hs()},n=ks(),r=Object.assign({},n,t,e);return r.generalLimits=Object.assign({},n.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,e.spanLimits||{}),r}function ju(e){const t=Object.assign({},e.spanLimits);return t.attributeCountLimit=e.spanLimits?.attributeCountLimit??e.generalLimits?.attributeCountLimit??(0,bt.Jk)("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??(0,bt.Jk)("OTEL_ATTRIBUTE_COUNT_LIMIT")??ku,t.attributeValueLengthLimit=e.spanLimits?.attributeValueLengthLimit??e.generalLimits?.attributeValueLengthLimit??(0,bt.Jk)("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??(0,bt.Jk)("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??Hu,Object.assign({},e,{spanLimits:t})}const Ku=8,Wu=16;class Yu{generateTraceId=js(Wu);generateSpanId=js(Ku)}const Hn=Array(32);function js(e){return function(){for(let n=0;n<e*2;n++)Hn[n]=Math.floor(Math.random()*16)+48,Hn[n]>=58&&(Hn[n]+=39);return String.fromCharCode.apply(null,Hn.slice(0,e*2))}}class zu{_sampler;_generalLimits;_spanLimits;_idGenerator;instrumentationScope;_resource;_spanProcessor;constructor(t,n,r,i){const s=Fu(n);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=n.idGenerator||new Yu,this._resource=r,this._spanProcessor=i,this.instrumentationScope=t}startSpan(t,n={},r=ht._.active()){n.root&&(r=Mt.u.deleteSpan(r));const i=Mt.u.getSpan(r);if((0,xs.Zf)(r))return Et.s.debug("Instrumentation suppressed, returning Noop Span"),Mt.u.wrapSpanContext(xu.dM);const s=i?.spanContext(),o=this._idGenerator.generateSpanId();let a,u,E;!s||!Mt.u.isSpanContextValid(s)?u=this._idGenerator.generateTraceId():(u=s.traceId,E=s.traceState,a=s);const p=n.kind??Be.INTERNAL,h=(n.links??[]).map(st=>({context:st.context,attributes:(0,sn.L)(st.attributes)})),U=(0,sn.L)(n.attributes),w=this._sampler.shouldSample(r,u,t,p,U,h);E=w.traceState??E;const V=w.decision===xn.RECORD_AND_SAMPLED?rn.X.SAMPLED:rn.X.NONE,B={traceId:u,spanId:o,traceFlags:V,traceState:E};if(w.decision===xn.NOT_RECORD)return Et.s.debug("Recording is off, propagating context in a non-recording span"),Mt.u.wrapSpanContext(B);const G=(0,sn.L)(Object.assign(U,w.attributes));return new Gu({resource:this._resource,scope:this.instrumentationScope,context:r,spanContext:B,name:t,kind:p,links:h,parentSpanContext:a,attributes:G,startTime:n.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(t,n,r,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=n:arguments.length===3?(s=n,a=r):(s=n,o=r,a=i);const u=o??ht._.active(),E=this.startSpan(t,s,u),p=Mt.u.setSpan(u,E);return ht._.with(p,a,void 0,E)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class $u{_spanProcessors;constructor(t){this._spanProcessors=t}forceFlush(){const t=[];for(const n of this._spanProcessors)t.push(n.forceFlush());return new Promise(n=>{Promise.all(t).then(()=>{n()}).catch(r=>{(0,ke.s)(r||new Error("MultiSpanProcessor: forceFlush failed")),n()})})}onStart(t,n){for(const r of this._spanProcessors)r.onStart(t,n)}onEnd(t){for(const n of this._spanProcessors)n.onEnd(t)}shutdown(){const t=[];for(const n of this._spanProcessors)t.push(n.shutdown());return new Promise((n,r)=>{Promise.all(t).then(()=>{n()},r)})}}var ge;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(ge||(ge={}));class Xu{_config;_tracers=new Map;_resource;_activeSpanProcessor;constructor(t={}){const n=(0,Vu.h)({},ks(),ju(t));this._resource=n.resource??Ds(),this._config=Object.assign({},n,{resource:this._resource});const r=[];t.spanProcessors?.length&&r.push(...t.spanProcessors),this._activeSpanProcessor=new $u(r)}getTracer(t,n,r){const i=`${t}@${n||""}:${r?.schemaUrl||""}`;return this._tracers.has(i)||this._tracers.set(i,new zu({name:t,version:n,schemaUrl:r?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(i)}forceFlush(){const t=this._config.forceFlushTimeoutMillis,n=this._activeSpanProcessor._spanProcessors.map(r=>new Promise(i=>{let s;const o=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),s=ge.timeout},t);r.forceFlush().then(()=>{clearTimeout(o),s!==ge.timeout&&(s=ge.resolved,i(s))}).catch(a=>{clearTimeout(o),s=ge.error,i(a)})}));return new Promise((r,i)=>{Promise.all(n).then(s=>{const o=s.filter(a=>a!==ge.resolved);o.length>0?i(o):r()}).catch(s=>i([s]))})}shutdown(){return this._activeSpanProcessor.shutdown()}}var un=_(38729);class Ju{_enabled=!1;_currentContext=un.l;_bindFunction(t=un.l,n){const r=this,i=function(...s){return r.with(t,()=>n.apply(this,s))};return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),i}active(){return this._currentContext}bind(t,n){return t===void 0&&(t=this.active()),typeof n=="function"?this._bindFunction(t,n):n}disable(){return this._currentContext=un.l,this._enabled=!1,this}enable(){return this._enabled?this:(this._enabled=!0,this._currentContext=un.l,this)}with(t,n,r,...i){const s=this._currentContext;this._currentContext=t||un.l;try{return n.call(r,...i)}finally{this._currentContext=s}}}var re=_(48131),Qu=_(22721),Zu=_(75477);function qu(e){if(e!==null){if(e===void 0){const t=new Ju;t.enable(),ht._.setGlobalContextManager(t);return}e.enable(),ht._.setGlobalContextManager(e)}}function tc(e){if(e!==null){if(e===void 0){re.$.setGlobalPropagator(new Qu.n({propagators:[new Ps.lm,new Zu.t]}));return}re.$.setGlobalPropagator(e)}}class ec extends Xu{constructor(t={}){super(t)}register(t={}){Mt.u.setGlobalTracerProvider(this),tc(t.propagator),qu(t.contextManager)}}var nc=_(99756),Ks=_(92068),rc=_(5446);class ic{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_isExporting=!1;_finishedSpans=[];_timer;_shutdownOnce;_droppedSpansCount=0;constructor(t,n){this._exporter=t,this._maxExportBatchSize=typeof n?.maxExportBatchSize=="number"?n.maxExportBatchSize:(0,bt.Jk)("OTEL_BSP_MAX_EXPORT_BATCH_SIZE")??512,this._maxQueueSize=typeof n?.maxQueueSize=="number"?n.maxQueueSize:(0,bt.Jk)("OTEL_BSP_MAX_QUEUE_SIZE")??2048,this._scheduledDelayMillis=typeof n?.scheduledDelayMillis=="number"?n.scheduledDelayMillis:(0,bt.Jk)("OTEL_BSP_SCHEDULE_DELAY")??5e3,this._exportTimeoutMillis=typeof n?.exportTimeoutMillis=="number"?n.exportTimeoutMillis:(0,bt.Jk)("OTEL_BSP_EXPORT_TIMEOUT")??3e4,this._shutdownOnce=new nc.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Et.s.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,n){}onEnd(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&rn.X.SAMPLED)!==0&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Et.s.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Et.s.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise((t,n)=>{const r=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,o=i;s<o;s++)r.push(this._flushOneBatch());Promise.all(r).then(()=>{t()}).catch(n)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,n)=>{const r=setTimeout(()=>{n(new Error("Timeout"))},this._exportTimeoutMillis);ht._.with((0,xs.M1)(ht._.active()),()=>{let i;this._finishedSpans.length<=this._maxExportBatchSize?(i=this._finishedSpans,this._finishedSpans=[]):i=this._finishedSpans.splice(0,this._maxExportBatchSize);const s=()=>this._exporter.export(i,a=>{clearTimeout(r),a.code===Ks.V.SUCCESS?t():n(a.error??new Error("BatchSpanProcessor: span export failed"))});let o=null;for(let a=0,u=i.length;a<u;a++){const E=i[a];E.resource.asyncAttributesPending&&E.resource.waitForAsyncAttributes&&(o??=[],o.push(E.resource.waitForAsyncAttributes()))}o===null?s():Promise.all(o).then(s,a=>{(0,ke.s)(a),n(a)})})})}_maybeStartTimer(){if(this._isExporting)return;const t=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(n=>{this._isExporting=!1,(0,ke.s)(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(()=>t(),this._scheduledDelayMillis),(0,rc.K)(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}}class sc extends ic{_visibilityChangeListener;_pageHideListener;constructor(t,n){super(t,n),this.onInit(n)}onInit(t){t?.disableAutoFlushOnDocumentHide!==!0&&typeof document<"u"&&(this._visibilityChangeListener=()=>{document.visibilityState==="hidden"&&this.forceFlush().catch(n=>{(0,ke.s)(n)})},this._pageHideListener=()=>{this.forceFlush().catch(n=>{(0,ke.s)(n)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}}function ve(e){let t={};const n=e.length;for(let r=0;r<n;r++){const i=e[r];i&&(t[String(i).toUpperCase().replace(/[-.]/g,"_")]=i)}return t}const oc="cloud.provider",ac="cloud.account.id",uc="cloud.region",cc="cloud.availability_zone",lc="cloud.platform",dc="aws.ecs.container.arn",_c="aws.ecs.cluster.arn",Ec="aws.ecs.launchtype",fc="aws.ecs.task.arn",pc="aws.ecs.task.family",Tc="aws.ecs.task.revision",Sc="aws.eks.cluster.arn",hc="aws.log.group.names",mc="aws.log.group.arns",Ac="aws.log.stream.names",gc="aws.log.stream.arns",vc="container.name",bc="container.id",Rc="container.runtime",Oc="container.image.name",Pc="container.image.tag",Ws="deployment.environment",Mc="device.id",Nc="device.model.identifier",Lc="device.model.name",yc="faas.name",Cc="faas.id",Ic="faas.version",Uc="faas.instance",wc="faas.max_memory",Dc="host.id",Vc="host.name",xc="host.type",Bc="host.arch",Gc="host.image.name",kc="host.image.id",Hc="host.image.version",Fc="k8s.cluster.name",jc="k8s.node.name",Kc="k8s.node.uid",Wc="k8s.namespace.name",Yc="k8s.pod.uid",zc="k8s.pod.name",$c="k8s.container.name",Xc="k8s.replicaset.uid",Jc="k8s.replicaset.name",Qc="k8s.deployment.uid",Zc="k8s.deployment.name",qc="k8s.statefulset.uid",tl="k8s.statefulset.name",el="k8s.daemonset.uid",nl="k8s.daemonset.name",rl="k8s.job.uid",il="k8s.job.name",sl="k8s.cronjob.uid",ol="k8s.cronjob.name",al="os.type",ul="os.description",cl="os.name",ll="os.version",dl="process.pid",_l="process.executable.name",El="process.executable.path",fl="process.command",pl="process.command_line",Tl="process.command_args",Sl="process.owner",hl="process.runtime.name",ml="process.runtime.version",Al="process.runtime.description",gl="service.name",vl="service.namespace",bl="service.instance.id",Rl="service.version",Ol="telemetry.sdk.name",Pl="telemetry.sdk.language",Ml="telemetry.sdk.version",Nl="telemetry.auto.version",Ll="webengine.name",yl="webengine.version",Cl="webengine.description",iE=null,sE=null,oE=null,aE=null,uE=null,cE=null,lE=null,dE=null,_E=null,EE=null,fE=null,pE=null,TE=null,SE=null,hE=null,mE=null,AE=null,gE=null,vE=null,bE=null,RE=null,Il=Ws,OE=null,PE=null,ME=null,NE=null,LE=null,yE=null,CE=null,IE=null,UE=null,wE=null,DE=null,VE=null,xE=null,BE=null,GE=null,kE=null,HE=null,FE=null,jE=null,KE=null,WE=null,YE=null,zE=null,$E=null,XE=null,JE=null,QE=null,ZE=null,qE=null,tf=null,ef=null,nf=null,rf=null,sf=null,of=null,af=null,uf=null,cf=null,lf=null,df=null,_f=null,Ef=null,ff=null,pf=null,Tf=null,Sf=null,hf=null,mf=null,Af=null,gf=null,vf=null,bf=null,Rf=null,Of=null,Pf=null,Mf=null,Nf=null,Lf=null,yf=null,Cf=ve([oc,ac,uc,cc,lc,dc,_c,Ec,fc,pc,Tc,Sc,hc,mc,Ac,gc,vc,bc,Rc,Oc,Pc,Ws,Mc,Nc,Lc,yc,Cc,Ic,Uc,wc,Dc,Vc,xc,Bc,Gc,kc,Hc,Fc,jc,Kc,Wc,Yc,zc,$c,Xc,Jc,Qc,Zc,qc,tl,el,nl,rl,il,sl,ol,al,ul,cl,ll,dl,_l,El,fl,pl,Tl,Sl,hl,ml,Al,gl,vl,bl,Rl,Ol,Pl,Ml,Nl,Ll,yl,Cl]),Ul="alibaba_cloud",wl="aws",Dl="azure",Vl="gcp",If=null,Uf=null,wf=null,Df=null,Vf=ve([Ul,wl,Dl,Vl]),xl="alibaba_cloud_ecs",Bl="alibaba_cloud_fc",Gl="aws_ec2",kl="aws_ecs",Hl="aws_eks",Fl="aws_lambda",jl="aws_elastic_beanstalk",Kl="azure_vm",Wl="azure_container_instances",Yl="azure_aks",zl="azure_functions",$l="azure_app_service",Xl="gcp_compute_engine",Jl="gcp_cloud_run",Ql="gcp_kubernetes_engine",Zl="gcp_cloud_functions",ql="gcp_app_engine",xf=null,Bf=null,Gf=null,kf=null,Hf=null,Ff=null,jf=null,Kf=null,Wf=null,Yf=null,zf=null,$f=null,Xf=null,Jf=null,Qf=null,Zf=null,qf=null,tp=ve([xl,Bl,Gl,kl,Hl,Fl,jl,Kl,Wl,Yl,zl,$l,Xl,Jl,Ql,Zl,ql]),td="ec2",ed="fargate",ep=null,np=null,rp=ve([td,ed]),nd="amd64",rd="arm32",id="arm64",sd="ia64",od="ppc32",ad="ppc64",ud="x86",ip=null,sp=null,op=null,ap=null,up=null,cp=null,lp=null,dp=ve([nd,rd,id,sd,od,ad,ud]),cd="windows",ld="linux",dd="darwin",_d="freebsd",Ed="netbsd",fd="openbsd",pd="dragonflybsd",Td="hpux",Sd="aix",hd="solaris",md="z_os",_p=null,Ep=null,fp=null,pp=null,Tp=null,Sp=null,hp=null,mp=null,Ap=null,gp=null,vp=null,bp=ve([cd,ld,dd,_d,Ed,fd,pd,Td,Sd,hd,md]),Ad="cpp",gd="dotnet",vd="erlang",bd="go",Rd="java",Od="nodejs",Pd="php",Md="python",Nd="ruby",Ld="webjs",Rp=null,Op=null,Pp=null,Mp=null,Np=null,Lp=null,yp=null,Cp=null,Ip=null,Up=null,wp=ve([Ad,gd,vd,bd,Rd,Od,Pd,Md,Nd,Ld]),yd="session.id",Cd="deployment.environment.name",Id="service.namespace",Ud="process.runtime.name",wd="process.runtime.version",Dd="telemetry.distro.name",Vd="telemetry.distro.version",xd="browser.brands",Bd="browser.language",Gd="browser.mobile",kd="browser.platform";class Hd{constructor(t,n){this.processor=t,this.metas=n}forceFlush(){return this.processor.forceFlush()}onStart(t,n){var r;const i=this.metas.value.session;i?.id&&(t.attributes[yd]=i.id,t.attributes.session_id=i.id);const s=(r=this.metas.value.user)!==null&&r!==void 0?r:{};s.email&&(t.attributes["user.email"]=s.email),s.id&&(t.attributes["user.id"]=s.id),s.username&&(t.attributes["user.name"]=s.username),s.fullName&&(t.attributes["user.full_name"]=s.fullName),s.roles&&(t.attributes["user.roles"]=s.roles.split(",").map(o=>o.trim())),s.hash&&(t.attributes["user.hash"]=s.hash),this.processor.onStart(t,n)}onEnd(t){this.processor.onEnd(t)}shutdown(){return this.processor.shutdown()}}var Fd=_(94989),jd=_(99525);const Kd="duration_ns";function Wd(e=[]){var t,n;for(const r of e){const{scopeSpans:i}=r;for(const s of i){const{scope:o,spans:a=[]}=s;for(const u of a){if(u.kind!==jd.i.SPAN_KIND_CLIENT)continue;const E={traceId:u.traceId.toString(),spanId:u.spanId.toString()},p={};for(const w of u.attributes)p[w.key]=String(Object.values(w.value)[0]);!Number.isNaN(u.endTimeUnixNano)&&!Number.isNaN(u.startTimeUnixNano)&&(p[Kd]=String(Number(u.endTimeUnixNano)-Number(u.startTimeUnixNano)));const h=((t=o?.name)!==null&&t!==void 0?t:"").indexOf("-");let U=It;o?.name&&(h===-1&&(U=(n=o.name.split("/")[1])!==null&&n!==void 0?n:o.name),h>-1&&(U=o?.name.substring(h+1))),it.P.api.pushEvent(`faro.tracing.${U}`,p,void 0,{spanContext:E,timestampOverwriteMs:Number(u.endTimeUnixNano)/1e6,customPayloadTransformer:w=>{var V,B;return p["faro.action.user.name"]!=null&&p["faro.action.user.parentId"]!=null&&(w.action={name:p["faro.action.user.name"],parentId:p["faro.action.user.parentId"]},(V=w.attributes)===null||V===void 0||delete V["faro.action.user.name"],(B=w.attributes)===null||B===void 0||delete B["faro.action.user.parentId"]),w}})}}}}class Yd{constructor(t){this.config=t}export(t,n){const r=(0,Fd.sJ)(t,{useHex:!0,useLongBits:!1});this.config.api.pushTraces(r),Wd(r.resourceSpans),n({code:Ks.V.SUCCESS})}shutdown(){return Promise.resolve(void 0)}}class zd{constructor(t){this.processor=t,Ve.subscribe(n=>{if(n.type===me){this.message=n;return}[Nr,yr,Lr].includes(n.type)&&(this.message=void 0)})}forceFlush(){return this.processor.forceFlush()}onStart(t,n){var r,i;t.kind===Be.CLIENT&&this.message&&(t.attributes["faro.action.user.name"]=(r=this.message)===null||r===void 0?void 0:r.name,t.attributes["faro.action.user.parentId"]=(i=this.message)===null||i===void 0?void 0:i.parentId),this.processor.onStart(t,n)}onEnd(t){this.processor.onEnd(t)}shutdown(){return this.processor.shutdown()}}var Fn=_(81132);class $d{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(t,n,r){this.instrumentationName=t,this.instrumentationVersion=n,this.setConfig(r),this._diag=Et.s.createComponentLogger({namespace:t}),this._tracer=Mt.u.getTracer(t,n),this._meter=Ls.getMeter(t,n),this._logger=ws.getLogger(t,n),this._updateMetricInstruments()}_wrap=Fn.wrap;_unwrap=Fn.unwrap;_massWrap=Fn.massWrap;_massUnwrap=Fn.massUnwrap;get meter(){return this._meter}setMeterProvider(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(t){this._logger=t.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){const t=this.init()??[];return Array.isArray(t)?t:[t]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(t){this._config={enabled:!0,...t}}setTracerProvider(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(t,n,r,i){if(t)try{t(r,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:n},s)}}}class Ys extends $d{constructor(t,n,r){super(t,n,r),this._config.enabled&&this.enable()}}var St;(function(e){e[e.STABLE=1]="STABLE",e[e.OLD=2]="OLD",e[e.DUPLICATE=3]="DUPLICATE"})(St||(St={}));function zs(e,t){let n=St.OLD;const r=t?.split(",").map(i=>i.trim()).filter(i=>i!=="");for(const i of r??[])if(i.toLowerCase()===e+"/dup"){n=St.DUPLICATE;break}else i.toLowerCase()===e&&(n=St.STABLE);return n}function jr(e,t,n){let r,i;try{i=e()}catch(s){r=s}finally{if(t(r,i),r&&!n)throw r;return i}}async function Dp(e,t,n){let r,i;try{i=await e()}catch(s){r=s}finally{if(t(r,i),r&&!n)throw r;return i}}function Kr(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}var Wr=_(78047),dt;(function(e){e.CONNECT_END="connectEnd",e.CONNECT_START="connectStart",e.DECODED_BODY_SIZE="decodedBodySize",e.DOM_COMPLETE="domComplete",e.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",e.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",e.DOM_INTERACTIVE="domInteractive",e.DOMAIN_LOOKUP_END="domainLookupEnd",e.DOMAIN_LOOKUP_START="domainLookupStart",e.ENCODED_BODY_SIZE="encodedBodySize",e.FETCH_START="fetchStart",e.LOAD_EVENT_END="loadEventEnd",e.LOAD_EVENT_START="loadEventStart",e.NAVIGATION_START="navigationStart",e.REDIRECT_END="redirectEnd",e.REDIRECT_START="redirectStart",e.REQUEST_START="requestStart",e.RESPONSE_END="responseEnd",e.RESPONSE_START="responseStart",e.SECURE_CONNECTION_START="secureConnectionStart",e.START_TIME="startTime",e.UNLOAD_EVENT_END="unloadEventEnd",e.UNLOAD_EVENT_START="unloadEventStart"})(dt||(dt={}));const Xd="http.response_content_length",Jd="http.response_content_length_uncompressed";let Yr;function Qd(){return Yr||(Yr=document.createElement("a")),Yr}function Zd(e,t){return t in e}function ie(e,t,n,r=!0){if(Zd(n,t)&&typeof n[t]=="number"&&!(r&&n[t]===0))return e.addEvent(t,n[t])}function jn(e,t,n=!1,r,i){if(r===void 0&&(r=t[dt.START_TIME]!==0),n||(ie(e,dt.FETCH_START,t,r),ie(e,dt.DOMAIN_LOOKUP_START,t,r),ie(e,dt.DOMAIN_LOOKUP_END,t,r),ie(e,dt.CONNECT_START,t,r),ie(e,dt.SECURE_CONNECTION_START,t,r),ie(e,dt.CONNECT_END,t,r),ie(e,dt.REQUEST_START,t,r),ie(e,dt.RESPONSE_START,t,r),ie(e,dt.RESPONSE_END,t,r)),!i){const s=t[dt.ENCODED_BODY_SIZE];s!==void 0&&e.setAttribute(Xd,s);const o=t[dt.DECODED_BODY_SIZE];o!==void 0&&s!==o&&e.setAttribute(Jd,o)}}function qd(e){return e.slice().sort((t,n)=>{const r=t[dt.FETCH_START],i=n[dt.FETCH_START];return r>i?1:r<i?-1:0})}function $s(){return typeof location<"u"?location.origin:void 0}function Xs(e,t,n,r,i=new WeakSet,s){const o=Zt(e);e=o.toString();const a=e_(e,t,n,r,i,s);if(a.length===0)return{mainRequest:void 0};if(a.length===1)return{mainRequest:a[0]};const u=qd(a);if(o.origin!==$s()&&u.length>1){let E=u[0],p=t_(u,E[dt.RESPONSE_END],n);const h=E[dt.RESPONSE_END];return p[dt.FETCH_START]<h&&(p=E,E=void 0),{corsPreFlightRequest:E,mainRequest:p}}else return{mainRequest:a[0]}}function t_(e,t,n){const r=(0,at.u5)(n),i=(0,at.u5)((0,at.KJ)(t));let s=e[1],o;const a=e.length;for(let u=1;u<a;u++){const E=e[u],p=(0,at.u5)((0,at.KJ)(E[dt.FETCH_START])),h=(0,at.u5)((0,at.KJ)(E[dt.RESPONSE_END])),U=r-h;p>=i&&(!o||U<o)&&(o=U,s=E)}return s}function e_(e,t,n,r,i,s){const o=(0,at.u5)(t),a=(0,at.u5)(n);let u=r.filter(E=>{const p=(0,at.u5)((0,at.KJ)(E[dt.FETCH_START])),h=(0,at.u5)((0,at.KJ)(E[dt.RESPONSE_END]));return E.initiatorType.toLowerCase()===(s||"xmlhttprequest")&&E.name===e&&p>=o&&h<=a});return u.length>0&&(u=u.filter(E=>!i.has(E))),u}function Zt(e){if(typeof URL=="function")return new URL(e,typeof document<"u"?document.baseURI:typeof location<"u"?location.href:void 0);const t=Qd();return t.href=e,t}function Vp(e){return Zt(e).href}function n_(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return"/";const n=i_(e,t);if(t&&n.indexOf("@id")>0)return n;let r="";return e.parentNode&&(r+=n_(e.parentNode,!1)),r+=n,r}function r_(e){if(!e.parentNode)return 0;const t=[e.nodeType];e.nodeType===Node.CDATA_SECTION_NODE&&t.push(Node.TEXT_NODE);let n=Array.from(e.parentNode.childNodes);return n=n.filter(r=>{const i=r.localName;return t.indexOf(r.nodeType)>=0&&i===e.localName}),n.length>=1?n.indexOf(e)+1:0}function i_(e,t){const n=e.nodeType,r=r_(e);let i="";if(n===Node.ELEMENT_NODE){const s=e.getAttribute("id");if(t&&s)return`//*[@id="${s}"]`;i=e.localName}else if(n===Node.TEXT_NODE||n===Node.CDATA_SECTION_NODE)i="text()";else if(n===Node.COMMENT_NODE)i="comment()";else return"";return i&&r>1?`/${i}[${r}]`:`/${i}`}function Js(e,t){let n=t||[];return(typeof n=="string"||n instanceof RegExp)&&(n=[n]),Zt(e).origin===$s()?!0:n.some(i=>(0,Wr.f)(e,i))}var Kn;(function(e){e.COMPONENT="component",e.HTTP_STATUS_TEXT="http.status_text"})(Kn||(Kn={}));var Ee=_(77805);const Qs=Et.s.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function s_(...e){if(e[0]instanceof URL||typeof e[0]=="string"){const t=e[1];if(!t?.body)return Promise.resolve();if(t.body instanceof ReadableStream){const{body:n,length:r}=o_(t.body);return t.body=n,r}else return Promise.resolve(u_(t.body))}else{const t=e[0];return t?.body?t.clone().text().then(n=>zr(n)):Promise.resolve()}}function o_(e){if(!e.pipeThrough)return Qs.warn("Platform has ReadableStream but not pipeThrough!"),{body:e,length:Promise.resolve(void 0)};let t=0,n;const r=new Promise(s=>{n=s}),i=new TransformStream({start(){},async transform(s,o){const a=await s;t+=a.byteLength,o.enqueue(s)},flush(){n(t)}});return{body:e.pipeThrough(i),length:r}}function a_(e){return typeof Document<"u"&&e instanceof Document}function u_(e){if(a_(e))return new XMLSerializer().serializeToString(document).length;if(typeof e=="string")return zr(e);if(e instanceof Blob)return e.size;if(e instanceof FormData)return l_(e);if(e instanceof URLSearchParams)return zr(e.toString());if(e.byteLength!==void 0)return e.byteLength;Qs.warn("unknown body type")}const c_=new TextEncoder;function zr(e){return c_.encode(e).byteLength}function l_(e){let t=0;for(const[n,r]of e.entries())t+=n.length,r instanceof Blob?t+=r.size:t+=r.length;return t}function d_(e){const t=E_(),n=e.toUpperCase();return n in t?n:"_OTHER"}const __={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0};let cn;function E_(){if(cn===void 0){const e=(0,bt.f7)("OTEL_INSTRUMENTATION_HTTP_KNOWN_METHODS");e&&e.length>0?(cn={},e.forEach(t=>{cn[t]=!0})):cn=__}return cn}const f_={"https:":"443","http:":"80"};function p_(e){const t=Number(e.port||f_[e.protocol]);if(t&&!isNaN(t))return t}const Zs="0.201.1";var $r=_(89869);const T_=300,qs=typeof process=="object"&&process.release?.name==="node";class S_ extends Ys{component="fetch";version=Zs;moduleName=this.component;_usedResources=new WeakSet;_tasksCount=0;_semconvStability;constructor(t={}){super("@opentelemetry/instrumentation-fetch",Zs,t),this._semconvStability=zs("http",t?.semconvStabilityOptIn)}init(){}_addChildSpan(t,n){const r=this.tracer.startSpan("CORS Preflight",{startTime:n[dt.FETCH_START]},Mt.u.setSpan(ht._.active(),t)),i=!(this._semconvStability&St.OLD);jn(r,n,this.getConfig().ignoreNetworkEvents,void 0,i),r.end(n[dt.RESPONSE_END])}_addFinalSpanAttributes(t,n){const r=Zt(n.url);if(this._semconvStability&St.OLD&&(t.setAttribute(Ee.a3,n.status),n.statusText!=null&&t.setAttribute(Kn.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(Ee.Mm,r.host),t.setAttribute(Ee.v8,r.protocol.replace(":","")),typeof navigator<"u"&&t.setAttribute(Ee.ds,navigator.userAgent)),this._semconvStability&St.STABLE){t.setAttribute(rt.OR,n.status),t.setAttribute(rt.kS,r.hostname);const i=p_(r);i&&t.setAttribute(rt.A2,i)}}_addHeaders(t,n){if(!Js(n,this.getConfig().propagateTraceHeaderCorsUrls)){const r={};re.$.inject(ht._.active(),r),Object.keys(r).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(t instanceof Request)re.$.inject(ht._.active(),t.headers,{set:(r,i,s)=>r.set(i,typeof s=="string"?s:String(s))});else if(t.headers instanceof Headers)re.$.inject(ht._.active(),t.headers,{set:(r,i,s)=>r.set(i,typeof s=="string"?s:String(s))});else if(t.headers instanceof Map)re.$.inject(ht._.active(),t.headers,{set:(r,i,s)=>r.set(i,typeof s=="string"?s:String(s))});else{const r={};re.$.inject(ht._.active(),r),t.headers=Object.assign({},r,t.headers||{})}}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)}_createSpan(t,n={}){if(Wr.K(t,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let r="";const i={};if(this._semconvStability&St.OLD){const s=(n.method||"GET").toUpperCase();r=`HTTP ${s}`,i[Kn.COMPONENT]=this.moduleName,i[Ee.rp]=s,i[Ee.XV]=t}if(this._semconvStability&St.STABLE){const s=n.method,o=d_(n.method||"GET");r||(r=o),i[rt.n4]=o,o!==s&&(i[rt.nW]=s),i[rt.WQ]=t}return this.tracer.startSpan(r,{kind:Be.CLIENT,attributes:i})}_findResourceAndAddNetworkEvents(t,n,r){let i=n.entries;if(!i.length){if(!performance.getEntriesByType)return;i=performance.getEntriesByType("resource")}const s=Xs(n.spanUrl,n.startTime,r,i,this._usedResources,"fetch");if(s.mainRequest){const o=s.mainRequest;this._markResourceAsUsed(o);const a=s.corsPreFlightRequest;a&&(this._addChildSpan(t,a),this._markResourceAsUsed(a));const u=!(this._semconvStability&St.OLD);jn(t,o,this.getConfig().ignoreNetworkEvents,void 0,u)}}_markResourceAsUsed(t){this._usedResources.add(t)}_endSpan(t,n,r){const i=at.lg(Date.now()),s=at._5();this._addFinalSpanAttributes(t,r),this._semconvStability&St.STABLE&&r.status>=400&&(t.setStatus({code:on.s.ERROR}),t.setAttribute(rt.oJ,String(r.status))),setTimeout(()=>{n.observer?.disconnect(),this._findResourceAndAddNetworkEvents(t,n,s),this._tasksCount--,this._clearResources(),t.end(i)},T_)}_patchConstructor(){return t=>{const n=this;return function(...i){const s=this,o=Zt(i[0]instanceof Request?i[0].url:String(i[0])).href,a=i[0]instanceof Request?i[0]:i[1]||{},u=n._createSpan(o,a);if(!u)return t.apply(this,i);const E=n._prepareSpanData(o);n.getConfig().measureRequestSize&&s_(...i).then(V=>{V&&(n._semconvStability&St.OLD&&u.setAttribute(Ee.z4,V),n._semconvStability&St.STABLE&&u.setAttribute(Ee.Me,V))}).catch(V=>{n._diag.warn("getFetchBodyLength",V)});function p(V,B){n._applyAttributesAfterFetch(V,a,B),n._endSpan(V,E,{status:B.status||0,statusText:B.message,url:o})}function h(V,B){n._applyAttributesAfterFetch(V,a,B),B.status>=200&&B.status<400?n._endSpan(V,E,B):n._endSpan(V,E,{status:B.status,statusText:B.statusText,url:o})}function U(V,B,G){try{const st=G.clone().body;if(st){const Ot=st.getReader(),mt=()=>{Ot.read().then(({done:et})=>{et?h(V,G):mt()},et=>{p(V,et)})};mt()}else h(V,G)}finally{B(G)}}function w(V,B,G){try{p(V,G)}finally{B(G)}}return new Promise((V,B)=>ht._.with(Mt.u.setSpan(ht._.active(),u),()=>(n._addHeaders(a,o),n._callRequestHook(u,a),n._tasksCount++,t.apply(s,a instanceof Request?[a]:[o,a]).then(U.bind(s,u,V),w.bind(s,u,B)))))}}}_applyAttributesAfterFetch(t,n,r){const i=this.getConfig().applyCustomAttributesOnSpan;i&&jr(()=>i(t,n,r),s=>{s&&this._diag.error("applyCustomAttributesOnSpan",s)},!0)}_callRequestHook(t,n){const r=this.getConfig().requestHook;r&&jr(()=>r(t,n),i=>{i&&this._diag.error("requestHook",i)},!0)}_prepareSpanData(t){const n=at._5(),r=[];if(typeof PerformanceObserver!="function")return{entries:r,startTime:n,spanUrl:t};const i=new PerformanceObserver(s=>{s.getEntries().forEach(a=>{a.initiatorType==="fetch"&&a.name===t&&r.push(a)})});return i.observe({entryTypes:["resource"]}),{entries:r,observer:i,startTime:n,spanUrl:t}}enable(){if(qs){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}Kr(fetch)&&(this._unwrap($r.X,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap($r.X,"fetch",this._patchConstructor())}disable(){qs||(this._unwrap($r.X,"fetch"),this._usedResources=new WeakSet)}}const h_="http.host",m_="http.method",A_="http.request.body.size",g_="http.request_content_length_uncompressed",xp="http.response_content_length",v_="http.scheme",b_="http.status_code",R_="http.url",O_="http.user_agent";var se;(function(e){e.METHOD_OPEN="open",e.METHOD_SEND="send",e.EVENT_ABORT="abort",e.EVENT_ERROR="error",e.EVENT_LOAD="loaded",e.EVENT_TIMEOUT="timeout"})(se||(se={}));const P_=Et.s.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"});function M_(e){return typeof Document<"u"&&e instanceof Document}function N_(e){if(M_(e))return new XMLSerializer().serializeToString(document).length;if(typeof e=="string")return to(e);if(e instanceof Blob)return e.size;if(e instanceof FormData)return y_(e);if(e instanceof URLSearchParams)return to(e.toString());if(e.byteLength!==void 0)return e.byteLength;P_.warn("unknown body type")}const L_=new TextEncoder;function to(e){return L_.encode(e).byteLength}function y_(e){let t=0;for(const[n,r]of e.entries())t+=n.length,r instanceof Blob?t+=r.size:t+=r.length;return t}function C_(e){const t=U_(),n=e.toUpperCase();return n in t?n:"_OTHER"}const I_={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0};let ln;function U_(){if(ln===void 0){const e=(0,bt.f7)("OTEL_INSTRUMENTATION_HTTP_KNOWN_METHODS");e&&e.length>0?(ln={},e.forEach(t=>{ln[t]=!0})):ln=I_}return ln}const w_={"https:":"443","http:":"80"};function D_(e){const t=Number(e.port||w_[e.protocol]);if(t&&!isNaN(t))return t}const eo="0.201.1";var Xr;(function(e){e.HTTP_STATUS_TEXT="http.status_text"})(Xr||(Xr={}));const V_=300;class x_ extends Ys{component="xml-http-request";version=eo;moduleName=this.component;_tasksCount=0;_xhrMem=new WeakMap;_usedResources=new WeakSet;_semconvStability;constructor(t={}){super("@opentelemetry/instrumentation-xml-http-request",eo,t),this._semconvStability=zs("http",t?.semconvStabilityOptIn)}init(){}_addHeaders(t,n){const r=Zt(n).href;if(!Js(r,this.getConfig().propagateTraceHeaderCorsUrls)){const s={};re.$.inject(ht._.active(),s),Object.keys(s).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}const i={};re.$.inject(ht._.active(),i),Object.keys(i).forEach(s=>{t.setRequestHeader(s,String(i[s]))})}_addChildSpan(t,n){ht._.with(Mt.u.setSpan(ht._.active(),t),()=>{const r=this.tracer.startSpan("CORS Preflight",{startTime:n[dt.FETCH_START]}),i=!(this._semconvStability&St.OLD);jn(r,n,this.getConfig().ignoreNetworkEvents,void 0,i),r.end(n[dt.RESPONSE_END])})}_addFinalSpanAttributes(t,n,r){if(this._semconvStability&St.OLD){if(n.status!==void 0&&t.setAttribute(b_,n.status),n.statusText!==void 0&&t.setAttribute(Xr.HTTP_STATUS_TEXT,n.statusText),typeof r=="string"){const i=Zt(r);t.setAttribute(h_,i.host),t.setAttribute(v_,i.protocol.replace(":",""))}t.setAttribute(O_,navigator.userAgent)}this._semconvStability&St.STABLE&&n.status&&t.setAttribute(rt.OR,n.status)}_applyAttributesAfterXHR(t,n){const r=this.getConfig().applyCustomAttributesOnSpan;typeof r=="function"&&jr(()=>r(t,n),i=>{i&&this._diag.error("applyCustomAttributesOnSpan",i)},!0)}_addResourceObserver(t,n){const r=this._xhrMem.get(t);!r||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(r.createdResources={observer:new PerformanceObserver(i=>{const s=i.getEntries(),o=Zt(n);s.forEach(a=>{a.initiatorType==="xmlhttprequest"&&a.name===o.href&&r.createdResources&&r.createdResources.entries.push(a)})}),entries:[]},r.createdResources.observer.observe({entryTypes:["resource"]}))}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(an.u.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)}_findResourceAndAddNetworkEvents(t,n,r,i,s){if(!r||!i||!s||!t.createdResources)return;let o=t.createdResources.entries;(!o||!o.length)&&(o=an.u.getEntriesByType("resource"));const a=Xs(Zt(r).href,i,s,o,this._usedResources);if(a.mainRequest){const u=a.mainRequest;this._markResourceAsUsed(u);const E=a.corsPreFlightRequest;E&&(this._addChildSpan(n,E),this._markResourceAsUsed(E));const p=!(this._semconvStability&St.OLD);jn(n,u,this.getConfig().ignoreNetworkEvents,void 0,p)}}_cleanPreviousSpanInformation(t){const n=this._xhrMem.get(t);if(n){const r=n.callbackToRemoveEvents;r&&r(),this._xhrMem.delete(t)}}_createSpan(t,n,r){if((0,Wr.K)(n,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let i="";const s=Zt(n),o={};if(this._semconvStability&St.OLD&&(i=r.toUpperCase(),o[m_]=r,o[R_]=s.toString()),this._semconvStability&St.STABLE){const u=r,E=C_(r);i||(i=E),o[rt.n4]=E,E!==u&&(o[rt.nW]=u),o[rt.WQ]=s.toString(),o[rt.kS]=s.hostname;const p=D_(s);p&&(o[rt.A2]=p)}const a=this.tracer.startSpan(i,{kind:Be.CLIENT,attributes:o});return a.addEvent(se.METHOD_OPEN),this._cleanPreviousSpanInformation(t),this._xhrMem.set(t,{span:a,spanUrl:n}),a}_markResourceAsUsed(t){this._usedResources.add(t)}_patchOpen(){return t=>{const n=this;return function(...i){const s=i[0],o=i[1];return n._createSpan(this,o,s),t.apply(this,i)}}}_patchSend(){const t=this;function n(E,p,h,U){const w=p.callbackToRemoveEvents;typeof w=="function"&&w();const{span:V,spanUrl:B,sendStartTime:G}=p;V&&(t._findResourceAndAddNetworkEvents(p,V,B,G,h),V.addEvent(E,U),t._addFinalSpanAttributes(V,p,B),V.end(U),t._tasksCount--),t._clearResources()}function r(E,p,h,U){const w=t._xhrMem.get(p);if(!w)return;if(w.status=p.status,w.statusText=p.statusText,t._xhrMem.delete(p),w.span){const G=w.span;t._applyAttributesAfterXHR(G,p),t._semconvStability&St.STABLE&&(h?U&&(G.setStatus({code:on.s.ERROR,message:U}),G.setAttribute(rt.oJ,U)):w.status&&w.status>=400&&(G.setStatus({code:on.s.ERROR}),G.setAttribute(rt.oJ,String(w.status))))}const V=(0,at._5)(),B=Date.now();setTimeout(()=>{n(E,w,V,B)},V_)}function i(){r(se.EVENT_ERROR,this,!0,"error")}function s(){r(se.EVENT_ABORT,this,!1)}function o(){r(se.EVENT_TIMEOUT,this,!0,"timeout")}function a(){this.status<299?r(se.EVENT_LOAD,this,!1):r(se.EVENT_ERROR,this,!1)}function u(E){E.removeEventListener("abort",s),E.removeEventListener("error",i),E.removeEventListener("load",a),E.removeEventListener("timeout",o);const p=t._xhrMem.get(E);p&&(p.callbackToRemoveEvents=void 0)}return E=>function(...h){const U=t._xhrMem.get(this);if(!U)return E.apply(this,h);const w=U.span,V=U.spanUrl;if(w&&V){if(t.getConfig().measureRequestSize&&h?.[0]){const B=h[0],G=N_(B);G!==void 0&&(t._semconvStability&St.OLD&&w.setAttribute(g_,G),t._semconvStability&St.STABLE&&w.setAttribute(A_,G))}ht._.with(Mt.u.setSpan(ht._.active(),w),()=>{t._tasksCount++,U.sendStartTime=(0,at._5)(),w.addEvent(se.METHOD_SEND),this.addEventListener("abort",s),this.addEventListener("error",i),this.addEventListener("load",a),this.addEventListener("timeout",o),U.callbackToRemoveEvents=()=>{u(this),U.createdResources&&U.createdResources.observer.disconnect()},t._addHeaders(this,V),t._addResourceObserver(this,V)})}return E.apply(this,h)}}enable(){this._diag.debug("applying patch to",this.moduleName,this.version),Kr(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),Kr(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())}disable(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet}}class B_ extends x_{constructor(t={}){super(t);const n=this;this.parentCreateSpan=n._createSpan.bind(this)}_patchOpen(){return t=>{const n=this;return function(...i){try{const s=i[0];let o=fs(i[1]);n.parentCreateSpan(this,o,s)}catch(s){it.P.internalLogger.error(s)}return t.apply(this,i)}}}}function G_(e,t,n){const r=n instanceof Error?0:n.status;no(e,r)}function k_(e,t){no(e,t.status)}function no(e,t){if(t==null)return;const n=t===0,r=t>=400&&t<600;(n||r)&&e.setStatus({code:on.s.ERROR})}function H_(e){return(t,n,r)=>{G_(t,n,r),e?.(t,n,r)}}function F_(e){return(t,n)=>{k_(t,n),e?.(t,n)}}var j_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function K_(e={}){const{fetchInstrumentationOptions:t,xhrInstrumentationOptions:n}=e,r=j_(e,["fetchInstrumentationOptions","xhrInstrumentationOptions"]),i=W_(t,r),s=Y_(n,r);return[new S_(i),new B_(s)]}function W_(e,t){return Object.assign(Object.assign(Object.assign(Object.assign({},t),{ignoreNetworkEvents:!0}),e),{applyCustomAttributesOnSpan:H_(e?.applyCustomAttributesOnSpan)})}function Y_(e,t){return Object.assign(Object.assign(Object.assign(Object.assign({},t),{ignoreNetworkEvents:!0}),e),{applyCustomAttributesOnSpan:F_(e?.applyCustomAttributesOnSpan)})}function z_(e={}){var t;return((t=e.attributes)===null||t===void 0?void 0:t.isSampled)==="true"?_e.RECORD_AND_SAMPLED:_e.NOT_RECORD}class dn extends ee{constructor(t={}){super(),this.options=t,this.name="@grafana/faro-web-tracing",this.version=g}initialize(){var t,n,r,i,s;const o=this.options,a={};this.config.app.name&&(a[rt.UX]=this.config.app.name),this.config.app.namespace&&(a[Id]=this.config.app.namespace),this.config.app.version&&(a[rt.HZ]=this.config.app.version),this.config.app.environment&&(a[Cd]=this.config.app.environment,a[Il]=this.config.app.environment);const u=this.metas.value.browser;k(u?.brands)&&(a[xd]=u.brands.map(V=>V.brand)),u?.language&&(a[Bd]=u.language),typeof u?.mobile=="boolean"&&(a[Gd]=!!u.mobile),u?.os&&(a[kd]=u.os),u?.userAgent&&(a[rt.Mz]=u.userAgent),a[Ud]="browser",a[wd]=(t=this.metas.value.browser)===null||t===void 0?void 0:t.userAgent,a[Dd]="faro-web-sdk",a[Vd]=g,Object.assign(a,o.resourceAttributes);const E=Ds().merge(Fr(a));new ec({resource:E,sampler:{shouldSample:()=>({decision:z_(this.api.getSession())})},spanProcessors:[(n=o.spanProcessor)!==null&&n!==void 0?n:new zd(new Hd(new sc(new Yd({api:this.api}),{scheduledDelayMillis:dn.SCHEDULED_BATCH_DELAY_MS,maxExportBatchSize:30}),this.metas))]}).register({propagator:(r=o.propagator)!==null&&r!==void 0?r:new Ps.lm,contextManager:o.contextManager});const{propagateTraceHeaderCorsUrls:h,fetchInstrumentationOptions:U,xhrInstrumentationOptions:w}=(i=this.options.instrumentationOptions)!==null&&i!==void 0?i:{};wu({instrumentations:(s=o.instrumentations)!==null&&s!==void 0?s:K_({ignoreUrls:this.getIgnoreUrls(),propagateTraceHeaderCorsUrls:h,fetchInstrumentationOptions:U,xhrInstrumentationOptions:w})}),this.api.initOTEL(Mt.u,ht._)}getIgnoreUrls(){return this.transports.transports.flatMap(t=>t.getIgnoreUrls())}}dn.SCHEDULED_BATCH_DELAY_MS=1e3;var Jr=_(78646),$_=_(43173);class X_ extends R{constructor(t){super(),this.name="EchoSrvTransport",this.version=$_.$.buildInfo.version,this.ignoreUrls=[],this.ignoreUrls=t?.ignoreUrls??[]}send(t){(0,Jr.x$)().addEvent({type:Jr.on.GrafanaJavascriptAgent,payload:t})}isBatched(){return!0}getIgnoreUrls(){return this.ignoreUrls}}function J_(){try{return document.location.hostname!==window.parent.location.hostname}catch{return!0}}const Q_=[/\.(google-analytics|googletagmanager)\.com/,/frontend-metrics/,/\/collect(?:\/[\w]*)?$/];class Z_{constructor(t){this.options=t,this.supportedEvents=[Jr.on.GrafanaJavascriptAgent],this.addEvent=a=>{},this.flush=()=>{};const n=[],r=[new RegExp(`.*${(0,O.$f)(t.customEndpoint)}.*`),...Q_,...t.ignoreUrls],i=[new X_({ignoreUrls:r})],s=t.allInstrumentationsEnabled||t.consoleInstrumentalizationEnabled?{serializeErrors:!0}:{};t.customEndpoint&&!J_()&&i.push(new Jn({url:t.customEndpoint,apiKey:t.apiKey})),t.errorInstrumentalizationEnabled&&n.push(new dr),t.consoleInstrumentalizationEnabled&&n.push(new ne),t.webVitalsInstrumentalizationEnabled&&n.push(new ls),t.tracingInstrumentalizationEnabled&&n.push(new dn),n.push(new ds);const o={globalObjectKey:t.globalObjectKey||"faro",preventGlobalExposure:t.preventGlobalExposure||!1,app:{name:"grafana-frontend",version:t.buildInfo.version,environment:t.buildInfo.env},instrumentations:t.allInstrumentationsEnabled?[...vs(),new dn]:n,consoleInstrumentation:s,trackWebVitalsAttribution:t.webVitalsInstrumentalizationEnabled||t.allInstrumentationsEnabled,transports:i,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys","Failed sending payload to the receiver"],ignoreUrls:r,sessionTracking:{persistent:!0},batching:{sendTimeout:1e3},internalLoggerLevel:t.internalLoggerLevel||L};this.faroInstance=uu(o),t.user&&this.faroInstance.api.setUser({id:t.user.id,attributes:{orgId:String(t.user.orgId)||""}})}}},81132:K=>{"use strict";function v(A){return typeof A=="function"}var _=console.error.bind(console);function O(A,N,R){var g=!!A[N]&&A.propertyIsEnumerable(N);Object.defineProperty(A,N,{configurable:!0,enumerable:g,writable:!0,value:R})}function T(A){A&&A.logger&&(v(A.logger)?_=A.logger:_("new logger isn't a function, not replacing"))}function M(A,N,R){if(!A||!A[N]){_("no original function "+N+" to wrap");return}if(!R){_("no wrapper function"),_(new Error().stack);return}if(!v(A[N])||!v(R)){_("original object and wrapper must be functions");return}var g=A[N],x=R(g,N);return O(x,"__original",g),O(x,"__unwrap",function(){A[N]===x&&O(A,N,g)}),O(x,"__wrapped",!0),O(A,N,x),x}function I(A,N,R){if(A)Array.isArray(A)||(A=[A]);else{_("must provide one or more modules to patch"),_(new Error().stack);return}if(!(N&&Array.isArray(N))){_("must provide one or more functions to wrap on modules");return}A.forEach(function(g){N.forEach(function(x){M(g,x,R)})})}function b(A,N){if(!A||!A[N]){_("no function to unwrap."),_(new Error().stack);return}if(!A[N].__unwrap)_("no original to unwrap to -- has "+N+" already been unwrapped?");else return A[N].__unwrap()}function L(A,N){if(A)Array.isArray(A)||(A=[A]);else{_("must provide one or more modules to patch"),_(new Error().stack);return}if(!(N&&Array.isArray(N))){_("must provide one or more functions to unwrap on modules");return}A.forEach(function(R){N.forEach(function(g){b(R,g)})})}T.wrap=M,T.massWrap=I,T.unwrap=b,T.massUnwrap=L,K.exports=T},77232:function(K,v,_){var O;(function(T,M){"use strict";var I="1.0.33",b="",L="?",A="function",N="undefined",R="object",g="string",x="major",c="model",f="name",l="type",d="vendor",S="version",P="architecture",m="console",y="mobile",C="tablet",H="smarttv",Y="wearable",At="embedded",ft=350,F="Amazon",j="Apple",D="ASUS",k="BlackBerry",W="Browser",q="Chrome",nt="Edge",ct="Firefox",_t="Google",Nt="Huawei",lt="LG",ot="Microsoft",pt="Motorola",vt="Opera",yt="Samsung",Ut="Sharp",ae="Sony",fe="Xiaomi",be="Zebra",Ct="Facebook",_n=function(X,tt){var $={};for(var Tt in X)tt[Tt]&&tt[Tt].length%2===0?$[Tt]=tt[Tt].concat(X[Tt]):$[Tt]=X[Tt];return $},Ht=function(X){for(var tt={},$=0;$<X.length;$++)tt[X[$].toUpperCase()]=X[$];return tt},Xt=function(X,tt){return typeof X===g?it(tt).indexOf(it(X))!==-1:!1},it=function(X){return X.toLowerCase()},Re=function(X){return typeof X===g?X.replace(/[^\d\.]/g,b).split(".")[0]:M},Lt=function(X,tt){if(typeof X===g)return X=X.replace(/^\s\s*/,b),typeof tt===N?X:X.substring(0,ft)},Jt=function(X,tt){for(var $=0,Tt,Q,pe,Z,jt,Pt;$<tt.length&&!jt;){var Ne=tt[$],Kt=tt[$+1];for(Tt=Q=0;Tt<Ne.length&&!jt;)if(jt=Ne[Tt++].exec(X),jt)for(pe=0;pe<Kt.length;pe++)Pt=jt[++Q],Z=Kt[pe],typeof Z===R&&Z.length>0?Z.length===2?typeof Z[1]==A?this[Z[0]]=Z[1].call(this,Pt):this[Z[0]]=Z[1]:Z.length===3?typeof Z[1]===A&&!(Z[1].exec&&Z[1].test)?this[Z[0]]=Pt?Z[1].call(this,Pt,Z[2]):M:this[Z[0]]=Pt?Pt.replace(Z[1],Z[2]):M:Z.length===4&&(this[Z[0]]=Pt?Z[3].call(this,Pt.replace(Z[1],Z[2])):M):this[Z]=Pt||M;$+=2}},qt=function(X,tt){for(var $ in tt)if(typeof tt[$]===R&&tt[$].length>0){for(var Tt=0;Tt<tt[$].length;Tt++)if(Xt(tt[$][Tt],X))return $===L?M:$}else if(Xt(tt[$],X))return $===L?M:$;return X},Oe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Pe={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Me={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[S,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[S,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,S],[/opios[\/ ]+([\w\.]+)/i],[S,[f,vt+" Mini"]],[/\bopr\/([\w\.]+)/i],[S,[f,vt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[f,S],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[S,[f,"UC"+W]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[S,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[S,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[S,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[S,[f,"IE"]],[/yabrowser\/([\w\.]+)/i],[S,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+W],S],[/\bfocus\/([\w\.]+)/i],[S,[f,ct+" Focus"]],[/\bopt\/([\w\.]+)/i],[S,[f,vt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[S,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[S,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[S,[f,vt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[S,[f,"MIUI "+W]],[/fxios\/([-\w\.]+)/i],[S,[f,ct]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+W]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+W],S],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],S],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,S],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,Ct],S],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[f,S],[/\bgsa\/([\w\.]+) .*safari\//i],[S,[f,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[S,[f,q+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,q+" WebView"],S],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[S,[f,"Android "+W]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,S],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[S,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[S,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[S,qt,Oe]],[/(webkit|khtml)\/([\w\.]+)/i],[f,S],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],S],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[S,[f,ct+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[f,S],[/(cobalt)\/([\w\.]+)/i],[f,[S,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[P,"amd64"]],[/(ia32(?=;))/i],[[P,it]],[/((?:i[346]|x)86)[;\)]/i],[[P,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[P,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[P,"armhf"]],[/windows (ce|mobile); ppc;/i],[[P,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[P,/ower/,b,it]],[/(sun4\w)[;\)]/i],[[P,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[P,it]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[d,yt],[l,C]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[d,yt],[l,y]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[d,j],[l,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[d,j],[l,C]],[/(macintosh);/i],[c,[d,j]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[d,Nt],[l,C]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[d,Nt],[l,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[d,fe],[l,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[d,fe],[l,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[d,"OPPO"],[l,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[d,"Vivo"],[l,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[d,"Realme"],[l,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[d,pt],[l,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[d,pt],[l,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[d,lt],[l,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[d,lt],[l,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[d,"Lenovo"],[l,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[d,"Nokia"],[l,y]],[/(pixel c)\b/i],[c,[d,_t],[l,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[d,_t],[l,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,ae],[l,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[d,ae],[l,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[d,"OnePlus"],[l,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[d,F],[l,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[d,F],[l,y]],[/(playbook);[-\w\),; ]+(rim)/i],[c,d,[l,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[d,k],[l,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[d,D],[l,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[d,D],[l,y]],[/(nexus 9)/i],[c,[d,"HTC"],[l,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[c,/_/g," "],[l,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[d,"Acer"],[l,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[d,"Meizu"],[l,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[d,Ut],[l,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,c,[l,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,c,[l,C]],[/(surface duo)/i],[c,[d,ot],[l,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[d,"Fairphone"],[l,y]],[/(u304aa)/i],[c,[d,"AT&T"],[l,y]],[/\bsie-(\w*)/i],[c,[d,"Siemens"],[l,y]],[/\b(rct\w+) b/i],[c,[d,"RCA"],[l,C]],[/\b(venue[\d ]{2,7}) b/i],[c,[d,"Dell"],[l,C]],[/\b(q(?:mv|ta)\w+) b/i],[c,[d,"Verizon"],[l,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[d,"Barnes & Noble"],[l,C]],[/\b(tm\d{3}\w+) b/i],[c,[d,"NuVision"],[l,C]],[/\b(k88) b/i],[c,[d,"ZTE"],[l,C]],[/\b(nx\d{3}j) b/i],[c,[d,"ZTE"],[l,y]],[/\b(gen\d{3}) b.+49h/i],[c,[d,"Swiss"],[l,y]],[/\b(zur\d{3}) b/i],[c,[d,"Swiss"],[l,C]],[/\b((zeki)?tb.*\b) b/i],[c,[d,"Zeki"],[l,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],c,[l,C]],[/\b(ns-?\w{0,9}) b/i],[c,[d,"Insignia"],[l,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[d,"NextBook"],[l,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],c,[l,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],c,[l,y]],[/\b(ph-1) /i],[c,[d,"Essential"],[l,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[d,"Envizen"],[l,C]],[/\b(trio[-\w\. ]+) b/i],[c,[d,"MachSpeed"],[l,C]],[/\btu_(1491) b/i],[c,[d,"Rotor"],[l,C]],[/(shield[\w ]+) b/i],[c,[d,"Nvidia"],[l,C]],[/(sprint) (\w+)/i],[d,c,[l,y]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,ot],[l,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[d,be],[l,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[d,be],[l,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,c,[l,m]],[/droid.+; (shield) bui/i],[c,[d,"Nvidia"],[l,m]],[/(playstation [345portablevi]+)/i],[c,[d,ae],[l,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[d,ot],[l,m]],[/smart-tv.+(samsung)/i],[d,[l,H]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,yt],[l,H]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,lt],[l,H]],[/(apple) ?tv/i],[d,[c,j+" TV"],[l,H]],[/crkey/i],[[c,q+"cast"],[d,_t],[l,H]],[/droid.+aft(\w)( bui|\))/i],[c,[d,F],[l,H]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[d,Ut],[l,H]],[/(bravia[\w ]+)( bui|\))/i],[c,[d,ae],[l,H]],[/(mitv-\w{5}) bui/i],[c,[d,fe],[l,H]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,Lt],[c,Lt],[l,H]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,H]],[/((pebble))app/i],[d,c,[l,Y]],[/droid.+; (glass) \d/i],[c,[d,_t],[l,Y]],[/droid.+; (wt63?0{2,3})\)/i],[c,[d,be],[l,Y]],[/(quest( 2)?)/i],[c,[d,Ct],[l,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,At]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[l,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[l,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,y]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[S,[f,nt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[S,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[f,S],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[S,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,S],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[S,qt,Pe]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[S,qt,Pe]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[S,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,"Mac OS"],[S,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[S,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,S],[/\(bb(10);/i],[S,[f,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[S,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[S,[f,ct+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[S,[f,"webOS"]],[/crkey\/([\d\.]+)/i],[S,[f,q+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[f,"Chromium OS"],S],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,S],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],S],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[f,S]]},Rt=function(X,tt){if(typeof X===R&&(tt=X,X=M),!(this instanceof Rt))return new Rt(X,tt).getResult();var $=X||(typeof T!==N&&T.navigator&&T.navigator.userAgent?T.navigator.userAgent:b),Tt=tt?_n(Me,tt):Me;return this.getBrowser=function(){var Q={};return Q[f]=M,Q[S]=M,Jt.call(Q,$,Tt.browser),Q.major=Re(Q.version),Q},this.getCPU=function(){var Q={};return Q[P]=M,Jt.call(Q,$,Tt.cpu),Q},this.getDevice=function(){var Q={};return Q[d]=M,Q[c]=M,Q[l]=M,Jt.call(Q,$,Tt.device),Q},this.getEngine=function(){var Q={};return Q[f]=M,Q[S]=M,Jt.call(Q,$,Tt.engine),Q},this.getOS=function(){var Q={};return Q[f]=M,Q[S]=M,Jt.call(Q,$,Tt.os),Q},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return $},this.setUA=function(Q){return $=typeof Q===g&&Q.length>ft?Lt(Q,ft):Q,this},this.setUA($),this};Rt.VERSION=I,Rt.BROWSER=Ht([f,S,x]),Rt.CPU=Ht([P]),Rt.DEVICE=Ht([c,d,l,m,y,H,C,Y,At]),Rt.ENGINE=Rt.OS=Ht([f,S]),typeof v!==N?(N!=="object"&&K.exports&&(v=K.exports=Rt),v.UAParser=Rt):A==="function"&&_.amdO?(O=function(){return Rt}.call(v,_,v,K),O!==M&&(K.exports=O)):typeof T!==N&&(T.UAParser=Rt);var Ft=typeof T!==N&&(T.jQuery||T.Zepto);if(Ft&&!Ft.ua){var wt=new Rt;Ft.ua=wt.getResult(),Ft.ua.get=function(){return wt.getUA()},Ft.ua.set=function(X){wt.setUA(X);var tt=wt.getResult();for(var $ in tt)Ft.ua[$]=tt[$]}}})(typeof window=="object"?window:this)}}]);

//# sourceMappingURL=8826.0bbf0a7e4f818d81c249.js.map