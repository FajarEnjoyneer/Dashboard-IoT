"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[906],{65064:(W,D,a)=>{a.d(D,{A:()=>v});var e=a(74848),l=a(96540),d=a(18027),h=a(12737),p=a(45861),f=a(18552);class v extends l.PureComponent{render(){const{searchQuery:S,linkButton:P,setSearchQuery:c,target:r,placeholder:w="Search by name or type",sortPicker:O}=this.props,C={href:P?.href,disabled:P?.disabled};return r&&(C.target=r),(0,e.jsxs)("div",{className:"page-action-bar",children:[(0,e.jsx)(d.I,{grow:!0,children:(0,e.jsx)(h.Z,{value:S,onChange:c,placeholder:w})}),O&&(0,e.jsx)(f.r,{onChange:O.onChange,value:O.value,getSortOptions:O.getSortOptions}),P&&(0,e.jsx)(p.z9,{...C,children:P.title})]})}}},8525:(W,D,a)=>{a.r(D),a.d(D,{default:()=>js});var e=a(74848),l=a(54148),d=a(52763),h=a(26437),p=a(96540),f=a(11594),v=a(13791),I=a(6650),S=a(65223),P=a(23691),c=a(22803),r=a(92745),w=a(36490),O=a(27489),C=a(63142),G=a(37386),V=a(77824),A=a(45967),B=a(43243),q=a(6975),Q=a(50201),X=a(73427),pe=a(70958),j=a(40203),N=a(42135),U=a(84969),M=a(4476),k=a(81687),y=a(11257),L=a(62061),_=a(99887),H=a(13943),T=a(8073),R=a(41654),se=a(99946),ne=a(1299),xe=a(74814),me=a(27589),be=a(93984);const Se=s=>({heading:(0,c.css)({fontSize:s.typography.h5.fontSize,fontWeight:"inherit"}),figure:(0,c.css)({width:"inherit",marginRight:"0px","> img":{width:s.spacing(7)}}),meta:(0,c.css)({marginTop:"6px",position:"relative"}),description:(0,c.css)({margin:"0px",fontSize:s.typography.bodySmall.fontSize}),card:(0,c.css)({gridTemplateAreas:`
        "Figure   Heading   Actions"
        "Figure Description Actions"
        "Figure    Meta     Actions"
        "Figure     -       Actions"`}),logo:(0,c.css)({marginRight:s.spacing(3),marginLeft:s.spacing(1),width:s.spacing(7),maxHeight:s.spacing(7)})});function Ie(){const s=(0,C.of)(be.X);return(0,L.a)("enterprise.plugins")?(0,e.jsx)(_.E,{text:(0,r.t)("get-enterprise.title","Enterprise"),color:"blue"}):(0,e.jsx)(_.E,{icon:"lock",role:"img","aria-label":(0,r.t)("lock-icon","lock icon"),text:(0,r.t)("get-enterprise.title","Enterprise"),color:"darkgrey",className:s,title:(0,r.t)("get-enterprise.requires-license","Requires a Grafana Enterprise license")})}const Pe=({items:s,onClickItem:n})=>{const o=(0,C.of)(Se);return(0,e.jsx)(H.x,{gap:1.5,minColumnWidth:44,children:s.map(i=>(0,e.jsxs)(T.Z,{className:o.card,href:i.url,onClick:u=>{n&&n(u,i)},children:[(0,e.jsx)(T.Z.Heading,{className:o.heading,children:i.name}),(0,e.jsx)(T.Z.Figure,{align:"center",className:o.figure,children:(0,e.jsx)("img",{className:o.logo,src:i.logo,alt:""})}),(0,e.jsx)(T.Z.Meta,{className:o.meta,children:(0,e.jsxs)(R.B,{height:"auto",wrap:"wrap",children:[i.isEnterprise&&(0,e.jsx)(Ie,{}),i.isDeprecated&&(0,e.jsx)(se.y,{}),i.isInstalled&&(0,e.jsx)(xe.J,{}),i.isDisabled&&(0,e.jsx)(ne.D,{error:i.error}),(0,M.wD)(i)&&(0,e.jsx)(me.z,{plugin:i})]})})]},i.id))})};var E=a(30703);const K=s=>({categoryHeader:(0,c.css)({alignItems:"center",display:"flex",marginBottom:s.spacing(3)}),categoryLabel:(0,c.css)({marginBottom:0,marginLeft:s.spacing(1)})}),J=({iconName:s,label:n})=>{const o=(0,C.of)(K);return(0,e.jsxs)("div",{className:o.categoryHeader,children:[(0,e.jsx)(E.I,{name:s,size:"xl"}),(0,e.jsx)("h3",{className:o.categoryLabel,children:n})]})};var Xe=a(22787),fe=a(89640),Z=a(45861);const Ke=s=>({modal:(0,c.css)({width:"500px"}),modalContent:(0,c.css)({overflow:"visible",color:s.colors.text.secondary,a:{color:s.colors.text.link}}),description:(0,c.css)({marginBottom:s.spacing(2)}),bottomSection:(0,c.css)({display:"flex",borderTop:`1px solid ${s.colors.border.weak}`,paddingTop:s.spacing(3),marginTop:s.spacing(3)}),actionsSection:(0,c.css)({display:"flex",justifyContent:"end",marginTop:s.spacing(3)}),warningIcon:(0,c.css)({color:s.colors.warning.main,paddingRight:s.spacing(),marginTop:s.spacing(.25)}),header:(0,c.css)({display:"flex",alignItems:"center"}),headerTitle:(0,c.css)({margin:0}),headerLogo:(0,c.css)({marginRight:s.spacing(2),width:"32px",height:"32px"})});function ke({item:s,isOpen:n,onDismiss:o}){const i=(0,C.of)(Ke);return(0,e.jsx)(Xe.a,{className:i.modal,contentClassName:i.modalContent,title:(0,e.jsx)(_e,{item:s}),isOpen:n,onDismiss:o,children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[s.description&&(0,e.jsx)("div",{className:i.description,children:s.description}),(0,e.jsxs)("div",{children:[(0,e.jsx)(r.x6,{i18nKey:"connections.no-access-modal.links",children:"Links"}),(0,e.jsx)("br",{}),(0,e.jsx)(fe.Y,{href:`https://grafana.com/grafana/plugins/${s.id}`,external:!0,children:s.name})]})]}),(0,e.jsxs)("div",{className:i.bottomSection,children:[(0,e.jsx)("div",{className:i.warningIcon,children:(0,e.jsx)(E.I,{name:"exclamation-triangle"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:(0,e.jsxs)(r.x6,{i18nKey:"connections.no-access-modal.editor-warning",children:["Editors cannot add new connections. You may check to see if it is already configured in"," ",(0,e.jsx)("a",{href:"/connections/datasources",children:"Data sources"}),"."]})}),(0,e.jsx)("p",{children:(0,e.jsx)(r.x6,{i18nKey:"connections.no-access-modal.connection-contact-grafana-admin",children:"To add a new connection, contact your Grafana admin."})})]})]}),(0,e.jsx)("div",{className:i.actionsSection,children:(0,e.jsx)(Z.$n,{onClick:o,children:(0,e.jsx)(r.x6,{i18nKey:"connections.no-access-modal.okay",children:"Okay"})})})]})})}function _e({item:s}){const n=(0,C.of)(Ke);return(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:n.header,children:[s.logo&&(0,e.jsx)("img",{className:n.headerLogo,src:s.logo,alt:`logo of ${s.name}`}),(0,e.jsx)("h4",{className:n.headerTitle,children:s.name})]})})}const qe=s=>({spacer:(0,c.css)({height:s.spacing(2)}),modal:(0,c.css)({width:"500px"}),modalContent:(0,c.css)({overflow:"visible"}),actionBar:(0,c.css)({[s.breakpoints.up("xl")]:{marginLeft:"auto"}})});function ea(){const[s,n]=(0,pe.s)(),o=s.search?String(s.search):"",[i,u]=(0,p.useState)(!1),[x,m]=(0,p.useState)(null),g=(0,l.zy)(),$=(0,k.W)(),Y=(0,w.SE)(g.search),te=Y.sortBy||M.by.nameAsc,oe=Y.filterBy?.toString()||"all",le=X.TP.hasPermission(y.w.DataSourcesCreate),De=(0,C.of)(qe),ee=b=>{n({search:b})},Le=(0,P.pw)(),{error:ae,plugins:re,isLoading:ye}=(0,P.PW)({keyword:o,type:f.QE.datasource,isInstalled:oe==="installed"?!0:void 0,hasUpdate:oe==="has-update"?!0:void 0},te),Ce=[{value:"all",label:(0,r.t)("connections.add-new-connection.filter-by-options.label.all","All")},{value:"installed",label:(0,r.t)("connections.add-new-connection.filter-by-options.label.installed","Installed")},{value:"has-update",label:(0,r.t)("connections.add-new-connection.filter-by-options.label.new-updates","New Updates")}],Me=(b,ce)=>{le||(b.preventDefault(),b.stopPropagation(),Re(ce),(0,O.rR)("connections_plugin_card_clicked",{plugin_id:ce.id,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"}))},Re=b=>{u(!0),m(b)},ge=()=>{u(!1),m(null)},he=(0,p.useMemo)(()=>re.map(b=>({...b,logo:b.info.logos.small,url:h.b.DataSourcesDetails.replace(":id",b.id)})),[re]),Ue=b=>{$.push({query:{sortBy:b.value}})},Ae=b=>{$.push({query:{filterBy:b}})},Ee=(0,p.useMemo)(()=>!ye&&!ae&&re.length<1,[ye,ae,re]),Te=(0,r.t)("connections.connect-data.category-header-label","Data sources");return(0,e.jsxs)(e.Fragment,{children:[x&&(0,e.jsx)(ke,{item:x,isOpen:i,onDismiss:ge}),(0,e.jsxs)(j.G,{wrap:!0,children:[(0,e.jsx)(G.D,{label:(0,r.t)("common.search","Search"),children:(0,e.jsx)(U.L,{value:o,onSearch:ee})}),(0,e.jsxs)(j.G,{className:De.actionBar,children:[Le?(0,e.jsx)(G.D,{label:(0,r.t)("plugins.filter.state","State"),children:(0,e.jsx)(V.z,{value:oe,onChange:Ae,options:Ce})}):(0,e.jsx)(A.m,{content:(0,r.t)("plugins.filter.disabled","This filter has been disabled because the Grafana server cannot access grafana.com"),placement:"top",children:(0,e.jsx)("div",{children:(0,e.jsx)(G.D,{label:(0,r.t)("plugins.filter.state","State"),children:(0,e.jsx)(V.z,{disabled:!0,value:oe,onChange:Ae,options:Ce})})})}),(0,e.jsx)(G.D,{label:(0,r.t)("plugins.filter.sort","Sort"),children:(0,e.jsx)(B.G,{"aria-label":(0,r.t)("plugins.filter.sort-list","Sort Plugins List"),width:24,value:te?.toString(),onChange:Ue,options:[{value:"nameAsc",label:(0,r.t)("connections.add-new-connection.label.by-name-az","By name (A-Z)")},{value:"nameDesc",label:(0,r.t)("connections.add-new-connection.label.by-name-za","By name (Z-A)")},{value:"updated",label:(0,r.t)("connections.add-new-connection.label.by-updated-date","By updated date")},{value:"published",label:(0,r.t)("connections.add-new-connection.label.by-published-date","By published date")},{value:"downloads",label:(0,r.t)("connections.add-new-connection.label.by-downloads","By downloads")}]})})]})]}),(0,e.jsx)(J,{iconName:"database",label:Te}),ye?(0,e.jsx)(q._,{text:(0,r.t)("common.loading","Loading...")}):ae?(0,e.jsxs)(r.x6,{i18nKey:"alerting.policies.update-errors.error-code",values:{error:ae.message},children:['Error message: "',{error:ae.message},'"']}):(0,e.jsx)(Pe,{items:he,onClickItem:Me}),Ee&&(0,e.jsx)(Q.p,{variant:"not-found",message:(0,r.t)("connections.connect-data.empty-message","No results matching your query were found")}),(0,e.jsx)(N.E,{})]})}function aa(){const{isLoading:s,updatablePlugins:n}=(0,P.sM)(),o=n.filter($=>$.type===f.QE.datasource),[i,u]=(0,p.useState)(!1),x=o.length<=0||s,m=()=>{u(!0)},g=(0,e.jsx)(I.A,{disabled:x,onUpdateAll:m,updatablePluginsLength:o.length});return(0,e.jsx)(v.Y,{navId:"connections-add-new-connection",actions:g,children:(0,e.jsxs)(v.Y.Contents,{children:[(0,e.jsx)(ea,{}),(0,e.jsx)(S.A,{isOpen:i,isLoading:s,onDismiss:()=>u(!1),plugins:o})]})})}var Oe=a(11098),We=a(85680),sa=a(37256),ta=a(32837),z=a(52045);function na({uid:s}){(0,z.oU)(s);const n=(0,d.wA)(),o=(0,d.d4)(g=>g.dataSources.dataSource),i=(0,d.d4)(g=>g.plugins.dashboards),u=(0,d.d4)(g=>g.plugins.isLoadingPluginDashboards);(0,p.useEffect)(()=>{o.id>0&&n((0,sa.h9)())},[n,o.id]);const x=(g,$)=>{n((0,We.Q9)({pluginId:g.pluginId,path:g.path,overwrite:$,inputs:[{name:"*",type:"datasource",pluginId:o.type,value:o.name}]},g.title))},m=({uid:g})=>{n((0,We.TA)(g))};return(0,e.jsx)(oa,{dashboards:i,isLoading:u,onImportDashboard:x,onRemoveDashboard:m})}const oa=({isLoading:s,dashboards:n,onImportDashboard:o,onRemoveDashboard:i})=>s?(0,e.jsx)(Oe.A,{}):(0,e.jsx)(ta.A,{dashboards:n,onImport:o,onRemove:i});var we=a(49095);function ra(){const{uid:s=""}=(0,l.g)(),{navId:n,pageNav:o}=(0,we.n)("dashboards");return(0,e.jsx)(v.Y,{navId:n,pageNav:o,children:(0,e.jsx)(v.Y.Contents,{children:(0,e.jsx)(na,{uid:s})})})}var ve=a(34999),ia=a(91308),la=a(96221);function ca(){const s="standalone-plugin-page-/connections/add-new-connection",{id:n=""}=(0,l.g)(),u=!!(0,d.d4)(x=>x.navIndex)[s]?s:"connections-add-new-connection";return(0,e.jsx)(ia.V,{pluginId:n,navId:u,notFoundComponent:(0,e.jsx)(da,{}),notFoundNavModel:{text:(0,r.t)("connections.data-source-details-page.text.unknown-datasource","Unknown datasource"),subTitle:(0,r.t)("connections.data-source-details-page.subTitle.datasource-could-found","No datasource with this ID could be found."),active:!0}})}function da(){const{id:s}=(0,l.g)();return(0,e.jsx)(ve.F,{severity:la.Qd.Warning,title:"",children:(0,e.jsxs)(r.x6,{i18nKey:"connections.not-found-datasource.body",children:["Maybe you mistyped the URL or the plugin with the id ",(0,e.jsx)(_.E,{text:s,color:"orange"})," is unavailable.",(0,e.jsx)("br",{}),"To see a list of available datasources please ",(0,e.jsx)(fe.Y,{href:h.b.AddNewConnection,children:"click here"}),"."]})})}var ua=a(51026),je=a(43173),F=a(30918);function ga(){const s=X.TP.hasPermission(y.w.DataSourcesCreate),n=(0,p.useCallback)(()=>{(0,F.DO)({path:window.location.pathname})},[]);return s?(0,e.jsx)(Z.z9,{icon:"plus",href:je.$.appSubUrl+h.b.DataSourcesNew,onClick:n,children:(0,e.jsx)(r.x6,{i18nKey:"data-sources.datasource-add-button.label",children:"Add new data source"})}):null}var de=a(64003),ze=a(64048),ha=a(2543),pa=a(65064),ue=a(18548);const Be="alpha-asc",Fe="alpha-desc",xa=[{label:"Sort by A\u2013Z",value:Be},{label:"Sort by Z\u2013A",value:Fe}];function ma(){const s=(0,d.wA)(),n=(0,p.useMemo)(()=>(0,ha.debounce)(g=>{(0,F.ov)({query:g})},300),[]),o=(0,p.useCallback)(g=>{s((0,ue.Bs)(g)),g&&n(g)},[s,n]),i=(0,d.d4)(({dataSources:g})=>(0,de.xs)(g)),u=(0,p.useCallback)(g=>s((0,ue.Tk)(g.value===Be)),[s]),x=(0,d.d4)(({dataSources:g})=>(0,de.lv)(g)),m={onChange:u,value:x?Be:Fe,getSortOptions:()=>Promise.resolve(xa)};return(0,e.jsx)(pa.A,{searchQuery:i,setSearchQuery:o,sortPicker:m},"action-bar")}function fa(){const{isLoading:s}=(0,z.US)(),n=(0,d.d4)(m=>(0,de.zC)(m.dataSources)),o=(0,d.d4)(({dataSources:m})=>(0,de.wC)(m)),i=X.TP.hasPermission(y.w.DataSourcesCreate),u=X.TP.hasPermission(y.w.DataSourcesWrite),x=X.TP.hasAccessToExplore();return(0,e.jsx)(va,{dataSources:n,dataSourcesCount:o,isLoading:s,hasCreateRights:i,hasWriteRights:u,hasExploreRights:x})}function va({dataSources:s,dataSourcesCount:n,isLoading:o,hasCreateRights:i,hasWriteRights:u,hasExploreRights:x}){const m=(0,C.of)(ja),g=(0,l.zy)();if((0,p.useEffect)(()=>{(0,F.kg)({grafana_version:je.$.buildInfo.version,path:g.pathname})},[g]),!o&&n===0)return(0,e.jsx)(Q.p,{variant:"call-to-action",button:(0,e.jsx)(Z.z9,{disabled:!i,href:h.b.DataSourcesNew,icon:"database",size:"lg",children:(0,e.jsx)(r.x6,{i18nKey:"data-source-list.empty-state.button-title",children:"Add data source"})}),message:(0,r.t)("data-source-list.empty-state.title","No data sources defined"),children:(0,e.jsxs)(r.x6,{i18nKey:"data-source-list.empty-state.pro-tip",children:["You can also define data sources through configuration files."," ",(0,e.jsx)(fe.Y,{external:!0,href:"http://docs.grafana.org/administration/provisioning/?utm_source=grafana_ds_list#data-sources",children:"Learn more"})]})});const $=()=>o?new Array(20).fill(null).map((Y,te)=>(0,e.jsx)(ze.N.Skeleton,{hasExploreRights:x},te)):s.map(Y=>(0,e.jsx)("li",{children:(0,e.jsx)(ze.N,{dataSource:Y,hasWriteRights:u,hasExploreRights:x})},Y.uid));return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ma,{}),s.length===0&&!o?(0,e.jsx)(Q.p,{variant:"not-found",message:(0,r.t)("data-sources.empty-state.message","No data sources found")}):(0,e.jsx)("ul",{className:m.list,children:$()})]})}const ja=s=>({list:(0,c.css)({listStyle:"none",display:"grid"})});function Da(){const n=(0,d.d4)(({dataSources:o})=>(0,de.wC)(o))>0?(0,e.jsx)(ga,{}):void 0;return(0,e.jsx)(v.Y,{navId:"connections-datasources",actions:n,children:(0,e.jsxs)(v.Y.Contents,{children:[(0,e.jsx)(ua.l,{}),(0,e.jsx)(fa,{})]})})}var ya=a(57852),$e=a(62392),Ea=a(54092),Sa=a(78282),Pa=a(33604),Ca=a(45229),ie=a(51898),Ye=a(18027),Ma=a(63527),Aa=a(21285);function Ta({dataSourceName:s,isDefault:n,onDefaultChange:o,onNameChange:i,disabled:u}){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"gf-form-group","aria-label":(0,r.t)("datasources.basic-settings.aria-label-datasource-settings-page-basic","Datasource settings page basic settings"),children:(0,e.jsxs)("div",{className:"gf-form-inline",children:[(0,e.jsx)("div",{className:"gf-form max-width-30",children:(0,e.jsx)(Ye.I,{label:(0,r.t)("datasources.basic-settings.label-name","Name"),tooltip:(0,r.t)("datasources.basic-serttings.tooltip-name","The name is used when you select the data source in panels. The default data source is preselected in new panels."),grow:!0,disabled:u,labelWidth:14,children:(0,e.jsx)(Ma.p,{id:"basic-settings-name",type:"text",value:s,placeholder:(0,r.t)("datasources.basic-settings.basic-settings-name-placeholder-name","Name"),onChange:x=>i(x.currentTarget.value),required:!0,"data-testid":ie.Tp.pages.DataSource.name})})}),(0,e.jsx)(Ye.I,{label:(0,r.t)("datasources.basic-settings.label-default","Default"),labelWidth:8,disabled:u,children:(0,e.jsx)(Aa.K,{id:"basic-settings-default",value:n,onChange:x=>{o(x.currentTarget.checked)}})})]})})})}function Ds({enabled:s}){const n=useStyles2(ba);return jsx("div",{className:n.badge,children:s?jsx(Badge,{color:"green",icon:"check-circle",text:t("datasources.alerting-enabled.text-alerting-supported","Alerting supported")}):jsx(Badge,{color:"orange",icon:"exclamation-triangle",text:t("datasources.alerting-enabled.text-alerting-not-supported","Alerting not supported")})})}const ba=s=>({badge:css({marginBottom:s.spacing(2)})});function Ia({canSave:s,canDelete:n,onDelete:o,onSubmit:i,onTest:u}){return(0,e.jsxs)("div",{className:"gf-form-button-row",children:[(0,e.jsx)(Z.$n,{type:"button",variant:"destructive",disabled:!n,onClick:o,"data-testid":ie.Tp.pages.DataSource.delete,children:(0,e.jsx)(r.x6,{i18nKey:"datasources.button-row.delete",children:"Delete"})}),s&&(0,e.jsx)(Z.$n,{type:"submit",variant:"primary",disabled:!s,onClick:i,"data-testid":ie.Tp.pages.DataSource.saveAndTest,id:ie.Tp.pages.DataSource.saveAndTest,children:(0,e.jsx)(r.x6,{i18nKey:"datasources.button-row.save-and-test",children:"Save & test"})}),!s&&(0,e.jsx)(Z.$n,{variant:"primary",onClick:u,children:(0,e.jsx)(r.x6,{i18nKey:"datasources.button-row.test",children:"Test"})})]})}var Oa=a(41607),Ba=a(36321),Na=a(65642);const La="datasources.settings.cloudInfoBox.isDismissed";function Ra({dataSource:s}){let n="",o="";if(s.readOnly||(s.version??0)>2||Na.$W.buildInfo.edition!==Oa.r.OpenSource)return null;switch(s.type){case"prometheus":n="Prometheus",o="Loki";break;case"loki":n="Loki",o="Prometheus";break;default:return null}return(0,e.jsx)(Ba.b,{storageKey:La,defaultValue:!1,children:(i,u)=>i?null:(0,e.jsx)(ve.F,{title:(0,r.t)("datasources.cloud-info-box.title-alert","Configure your {{mainDS}} data source below",{mainDS:n}),severity:"info",bottomSpacing:4,onRemove:()=>{u(!0)},children:(0,e.jsxs)(r.x6,{i18nKey:"datasources.cloud-info-box.body-alert",children:["Or skip the effort and get ",{mainDS:n}," (and ",{extraDS:o},") as fully-managed, scalable, and hosted data sources from Grafana Labs with the"," ",(0,e.jsx)(fe.Y,{href:`https://grafana.com/signup/cloud/connect-account?src=grafana-oss&cnt=${s.type}-settings`,external:!0,children:"free-forever Grafana Cloud plan"}),"."]})})})}var Ge=a(77418);function Ua({dataSourceRights:s,onDelete:n}){const{readOnly:o,hasDeleteRights:i}=s,u=!o&&i,x=()=>window.history.back();return(0,e.jsxs)(e.Fragment,{children:[o&&(0,e.jsx)(Ge.r,{}),(0,e.jsxs)("div",{className:"gf-form-button-row",children:[u&&(0,e.jsx)(Z.$n,{type:"submit",variant:"destructive",onClick:n,children:(0,e.jsx)(r.x6,{i18nKey:"datasources.data-source-load-error.delete",children:"Delete"})}),(0,e.jsx)(Z.$n,{variant:"secondary",fill:"outline",type:"button",onClick:x,children:(0,e.jsx)(r.x6,{i18nKey:"datasources.data-source-load-error.back",children:"Back"})})]})]})}const Ka="You are not allowed to modify this data source. Please contact your server admin to update this data source.";function Wa(){return(0,e.jsx)(ve.F,{severity:"info",title:(0,r.t)("datasources.data-source-missing-rights-message.title-missing-rights","Missing rights"),children:Ka})}function wa({plugin:s,pageId:n}){if(!s||!s.configPages)return null;const o=s.configPages.find(({id:i})=>i===n);return o?(0,e.jsx)(o.body,{plugin:s,query:{}}):(0,e.jsx)("div",{children:(0,e.jsxs)(r.x6,{i18nKey:"datasources.data-source-plugin-config-page.page-not-found",children:["Page not found: ",{page:o}]})})}var za=a(3260);class Fa extends p.PureComponent{constructor(n){super(n),this.onModelChanged=o=>{this.props.onModelChange(o)},this.onModelChanged=this.onModelChanged.bind(this)}render(){const{plugin:n,dataSource:o}=this.props;return n?(0,e.jsx)("div",{children:n.components.ConfigEditor&&(0,p.createElement)(n.components.ConfigEditor,{options:(0,za.J7)(o,{source:"datasource",pluginId:n.meta?.id}),onOptionsChange:this.onModelChanged})}):null}}var $a=a(85622);function Ya({state:s}){return(0,e.jsxs)("div",{className:"gf-form",children:[(0,e.jsx)("div",{className:"gf-form-label width-10",children:(0,e.jsx)(r.x6,{i18nKey:"datasources.data-source-plugin-state.plugin-state",children:"Plugin state"})}),(0,e.jsx)("div",{className:"gf-form-label gf-form-label--transparent",children:(0,e.jsx)($a.p,{state:s})})]})}var Ne=a(20941);const Ga=(s,n)=>({content:(0,c.css)({color:s.colors.text.secondary,paddingTop:n?s.spacing(1):0,maxHeight:"50vh",overflowY:"auto"}),disabled:(0,c.css)({pointerEvents:"none",color:s.colors.text.secondary})}),Ve=({title:s,exploreUrl:n,dataSourceId:o,onDashboardLinkClicked:i})=>{const u=(0,C.$j)(),m=Ga(u,!!s),g=X.TP.hasAccessToExplore();return(0,e.jsx)("div",{className:m.content,children:(0,e.jsxs)(r.x6,{i18nKey:"data-source-testing-status-page.success-more-details-links",children:["Next, you can start to visualize data by"," ",(0,e.jsx)(Ne.N,{"aria-label":(0,r.t)("datasources.alert-success-message.aria-label-create-a-dashboard","Create a dashboard"),href:`/dashboard/new-with-ds/${o}`,className:"external-link",onClick:i,children:"building a dashboard"}),", or by querying data in the"," ",(0,e.jsx)(Ne.N,{"aria-label":(0,r.t)("datasources.alert-success-message.aria-label-explore-data","Explore data"),className:(0,c.cx)("external-link",{[`${m.disabled}`]:!g,"test-disabled":!g}),href:n,children:"Explore view"}),"."]})})};Ve.displayName="AlertSuccessMessage";const He=({link:s})=>{const n=(0,C.$j)(),o={content:(0,c.css)({color:n.colors.text.secondary,paddingBlock:n.spacing(1),maxHeight:"50vh",overflowY:"auto"})};return s?/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(s)?(0,e.jsx)("div",{className:o.content,children:(0,e.jsxs)(r.x6,{i18nKey:"data-source-testing-status-page.error-more-details-link",children:["Click"," ",(0,e.jsx)(Ne.N,{"aria-label":(0,r.t)("datasources.error-details-link.aria-label-more-details-about-the-error","More details about the error"),className:"external-link",href:s,target:"_blank",rel:"noreferrer",children:"here"})," ","to learn more about this error."]})}):(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(e.Fragment,{})};He.displayName="ErrorDetailsLink";const Va=new Set(["success","info","warning","error"]),Ha=s=>Va.has(s),Za=s=>s.toLowerCase()==="ok"?"success":Ha(s)?s:"info";function Qa({testingStatus:s,exploreUrl:n,dataSource:o}){const i=Za(s?.status??"error"),u=s?.message,x=s?.details?.message,m=s?.details?.verboseMessage,g=s?.details?.errorDetailsLink,$=()=>{(0,F.TR)({grafana_version:je.$.buildInfo.version,datasource_uid:o.uid,plugin_name:o.typeName,path:window.location.pathname})},Y=(0,C.of)(Ja);return u?(0,e.jsx)("div",{className:(0,c.cx)("gf-form-group",Y.container),children:(0,e.jsx)(ve.F,{severity:i,title:u,"data-testid":ie.Tp.pages.DataSource.alert,children:s?.details&&(0,e.jsxs)(e.Fragment,{children:[x?(0,e.jsx)(e.Fragment,{children:String(x)}):null,i==="success"?(0,e.jsx)(Ve,{title:u,exploreUrl:n,dataSourceId:o.uid,onDashboardLinkClicked:$}):null,i==="error"&&g?(0,e.jsx)(He,{link:String(g)}):null,m?(0,e.jsx)("details",{style:{whiteSpace:"pre-wrap"},children:String(m)}):null]})})}):null}const Ja=s=>({container:(0,c.css)({paddingTop:s.spacing(3)}),moreLink:(0,c.css)({marginBlock:s.spacing(1)})});function Xa({uid:s,pageId:n}){(0,z.oU)(s);const o=(0,d.wA)(),i=(0,z.xw)(s),u=(0,z.S4)(i.type),x=(0,z._e)(),m=(0,z.u1)(s),g=(0,z.Tn)(s),$=(0,z.$k)(),Y=(0,z.BY)(s),te=(0,z.k9)(),oe=ee=>o((0,ue.C_)(ee)),le=ee=>o((0,ue.rb)(ee)),De=ee=>o((0,ue.jz)(ee));return(0,e.jsx)(ka,{pageId:n,dataSource:i,dataSourceMeta:u,dataSourceSettings:x,dataSourceRights:m,exploreUrl:g,onDelete:$,onDefaultChange:oe,onNameChange:le,onOptionsChange:De,onTest:Y,onUpdate:te})}function ka({pageId:s,dataSource:n,dataSourceMeta:o,dataSourceSettings:i,dataSourceRights:u,exploreUrl:x,onDelete:m,onDefaultChange:g,onNameChange:$,onOptionsChange:Y,onTest:te,onUpdate:oe}){const{plugin:le,loadError:De,testingStatus:ee,loading:Le}=i,{readOnly:ae,hasWriteRights:re,hasDeleteRights:ye}=u,Ce=n.id>0,{components:Me,isLoading:Re}=_a();let ge=n.jsonData,he=n.secureJsonData;const Ue=Me.some(b=>b.meta.pluginId==="grafana-pdc-app"),Ae={...n,jsonData:{...n.jsonData,pdcInjected:Ue}},Ee=(0,Sa.l)()?.getInstanceSettings(n.uid),Te=async b=>{b.preventDefault(),(0,F._i)("save_and_test");try{await oe({...n}),(0,F.m3)({item:"success"}),Ca.A.publish(new ya.wE)}catch{(0,F.m3)({item:"fail"});return}te()};return De?(0,e.jsx)(Ua,{dataSourceRights:u,onDelete:()=>{(0,F._i)("delete"),m()}}):Le||Re?(0,e.jsx)(Oe.A,{}):!Ce||!Ee?null:s?(0,e.jsx)($e.p,{instanceSettings:Ee,children:(0,e.jsx)(wa,{pageId:s,plugin:le})}):(0,e.jsxs)("form",{onSubmit:Te,children:[!re&&(0,e.jsx)(Wa,{}),ae&&(0,e.jsx)(Ge.r,{}),o.state&&(0,e.jsx)(Ya,{state:o.state}),(0,e.jsx)(Ra,{dataSource:n}),(0,e.jsx)(Ta,{dataSourceName:n.name,isDefault:n.isDefault,onDefaultChange:g,onNameChange:$,disabled:ae||!re}),le&&(0,e.jsx)($e.p,{instanceSettings:Ee,children:(0,e.jsx)(Fa,{plugin:le,dataSource:Ae,dataSourceMeta:o,onModelChange:Y})}),Me.map(b=>(0,e.jsx)("div",{children:(0,e.jsx)(b,{context:{dataSource:n,dataSourceMeta:o,testingStatus:ee,setJsonData:ce=>{ge={...ge,...ce},Y({...n,secureJsonData:{...he},jsonData:ge})},setSecureJsonData:ce=>{he={...he,...ce},Y({...n,jsonData:{...ge},secureJsonData:he})}}})},b.meta.id)),(0,e.jsx)(Qa,{testingStatus:ee,exploreUrl:x,dataSource:n}),(0,e.jsx)(Ia,{onSubmit:Te,onDelete:()=>{(0,F._i)("delete"),m()},onTest:()=>{(0,F._i)("test"),te()},canDelete:!ae&&ye,canSave:!ae&&re})]})}function _a(){const{components:s,isLoading:n}=(0,Pa.f)({extensionPointId:Ea.S.DataSourceConfig});return(0,p.useMemo)(()=>({components:s.filter(i=>{switch(i.meta.pluginId){case"grafana-pdc-app":case"grafana-auth-app":return!0;default:return!1}}),isLoading:n}),[s,n])}var qa=a(62054);function es({uid:s}){const n=(0,z.xw)(s),o=X.TP.hasAccessToExplore();return(0,e.jsxs)(e.Fragment,{children:[o&&(0,e.jsx)(Z.z9,{variant:"secondary",size:"sm",href:(0,qa.h)(n),onClick:()=>{(0,F._i)("explore"),(0,F.M1)({grafana_version:je.$.buildInfo.version,datasource_uid:n.uid,plugin_name:n.typeName,path:window.location.pathname})},children:(0,e.jsx)(r.x6,{i18nKey:"datasources.edit-data-source-actions.explore-data",children:"Explore data"})}),(0,e.jsx)(Z.z9,{size:"sm",variant:"secondary",href:`dashboard/new-with-ds/${n.uid}`,onClick:()=>{(0,F._i)("build_a_dashboard"),(0,F.TR)({grafana_version:je.$.buildInfo.version,datasource_uid:n.uid,plugin_name:n.typeName,path:window.location.pathname})},children:(0,e.jsx)(r.x6,{i18nKey:"datasources.edit-data-source-actions.build-a-dashboard",children:"Build a dashboard"})})]})}const as=s=>{const n=[],o=s.alertingSupported;return n.push({label:(0,r.t)("datasources.use-data-source-info.label.type","Type"),value:s.dataSourcePluginName}),n.push({label:(0,r.t)("datasources.use-data-source-info.label.alerting","Alerting"),value:(0,e.jsx)(_.E,{color:o?"green":"red",text:o?(0,r.t)("datasources.use-data-source-info.badge-text-supported","Supported"):(0,r.t)("datasources.use-data-source-info.badge-text-not-supported","Not supported")})}),n};function ss({title:s}){const n=(0,C.of)(ts);return(0,e.jsx)("div",{className:n.container,children:(0,e.jsx)("h1",{className:n.title,children:s})})}const ts=s=>({container:(0,c.css)({marginBottom:s.spacing(2),h1:{display:"inline-block"}}),title:(0,c.css)({display:"inline-block",margin:"0 0 0 0",maxWidth:"40vw",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});function ns({uid:s,pageId:n}){const{navId:o,pageNav:i,dataSourceHeader:u}=(0,we.n)(),x=as({dataSourcePluginName:i.dataSourcePluginName,alertingSupported:u.alertingSupported});return(0,e.jsx)(v.Y,{navId:o,pageNav:i,renderTitle:m=>(0,e.jsx)(ss,{title:m}),info:x,actions:(0,e.jsx)(es,{uid:s}),children:(0,e.jsx)(v.Y.Contents,{children:(0,e.jsx)(Xa,{uid:s,pageId:n})})})}const os=ns;function rs(){const{uid:s=""}=(0,l.g)(),n=(0,l.zy)(),i=new URLSearchParams(n.search).get("page");return(0,e.jsx)(os,{uid:s,pageId:i})}var is=a(12737),Ze=a(5585),Qe=a(63509);function ls({filterByPluginType:s}){let n=(0,P.F9)(s);const{isLoading:o}=(0,P.m5)(),i=(0,C.of)(ds);return o||n.length===0?null:(0,e.jsxs)(ve.F,{title:(0,r.t)("plugins.plugins-errors-info.title-unsigned-plugins","Unsigned plugins were found during plugin initialization. Grafana Labs cannot guarantee the integrity of these plugins. We recommend only using signed plugins."),"data-testid":ie.Tp.pages.PluginsList.signatureErrorNotice,severity:"warning",children:[(0,e.jsx)("p",{children:(0,e.jsx)(r.x6,{i18nKey:"plugins.plugins-errors-info.disabled-list",children:"The following plugins are disabled and not shown in the list below:"})}),(0,e.jsx)(Ze.B,{items:n,className:i.list,renderItem:u=>(0,e.jsx)("div",{className:i.wrapper,children:(0,e.jsxs)(R.B,{justifyContent:"flex-start",alignItems:"center",children:[(0,e.jsx)("strong",{children:u.pluginId}),(0,e.jsx)(Qe.B,{status:cs(u.errorCode),className:i.badge})]})})}),(0,e.jsx)(fe.Y,{href:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",external:!0,className:i.docsLink,children:(0,e.jsx)(r.x6,{i18nKey:"plugins.plugins-errors-info.read-more-about-plugin-signing",children:"Read more about plugin signing"})})]})}function cs(s){switch(s){case f.ZK.invalidSignature:return f.Ac.invalid;case f.ZK.missingSignature:return f.Ac.missing;case f.ZK.modifiedSignature:return f.Ac.modified;default:return f.Ac.missing}}function ds(s){return{list:(0,c.css)({listStyleType:"circle"}),wrapper:(0,c.css)({marginTop:s.spacing(1)}),badge:(0,c.css)({marginTop:0}),docsLink:(0,c.css)({display:"inline-block",marginTop:s.spacing(2)})}}function us({onClick:s,dataSourcePlugin:n}){const o=n.module==="phantom",i=!o&&!n.unlicensed,u=n.info?.links?.length>0?n.info.links[0]:null,x=u?.target??"_blank",m=(0,C.of)(gs);return(0,e.jsxs)(T.Z,{className:(0,c.cx)(m.card,"card-parent"),onClick:i?s:()=>{},children:[(0,e.jsx)(T.Z.Heading,{className:m.heading,"aria-label":ie.Tp.pages.AddDataSource.dataSourcePluginsV2(n.name),children:n.name}),(0,e.jsx)(T.Z.Figure,{align:"center",className:m.figure,children:(0,e.jsx)("img",{className:m.logo,src:n.info.logos.small,alt:""})}),(0,e.jsx)(T.Z.Description,{className:m.description,children:n.info.description}),!o&&(0,e.jsx)(T.Z.Meta,{className:m.meta,children:(0,e.jsx)(Qe.B,{status:n.signature})}),(0,e.jsx)(T.Z.Actions,{className:m.actions,children:u&&(0,e.jsx)(Z.z9,{"aria-label":(0,r.t)("datasources.data-source-type-card.aria-label-learn-more","{{dataSourcePluginName}}, learn more.",{dataSourcePluginName:n.name}),href:`${u.url}?utm_source=grafana_add_ds`,onClick:g=>g.stopPropagation(),rel:"noopener",target:x,variant:"secondary",children:u.name})})]})}function gs(s){return{heading:(0,c.css)({fontSize:s.v1.typography.heading.h5,fontWeight:"inherit"}),figure:(0,c.css)({width:"inherit",marginRight:"0px","> img":{width:s.spacing(7)}}),meta:(0,c.css)({marginTop:"6px",position:"relative"}),description:(0,c.css)({margin:"0px",fontSize:s.typography.size.sm}),actions:(0,c.css)({position:"relative",alignSelf:"center",marginTop:"0px",opacity:0,".card-parent:hover &, .card-parent:focus-within &":{opacity:1}}),card:(0,c.css)({gridTemplateAreas:`
        "Figure   Heading   Actions"
        "Figure Description Actions"
        "Figure    Meta     Actions"
        "Figure     -       Actions"`}),logo:(0,c.css)({marginRight:s.v1.spacing.lg,marginLeft:s.v1.spacing.sm,width:s.spacing(7),maxHeight:s.spacing(7)})}}function Je({dataSourcePlugins:s,onClickDataSourceType:n}){return!s||!s.length?null:(0,e.jsx)(Ze.B,{items:s,getItemKey:o=>o.id.toString(),renderItem:o=>(0,e.jsx)(us,{dataSourcePlugin:o,onClick:()=>n(o)}),className:(0,c.css)({"> li":{marginBottom:"2px"}})})}function hs({categories:s,onClickDataSourceType:n}){const o=`${h.b.AddNewConnection}?cat=data-source`,i=(0,C.of)(ps),u=(0,p.useCallback)(()=>{(0,O.rR)("connections_add_datasource_find_more_ds_plugins_clicked",{targetPath:o,path:window.location.pathname,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"})},[o]);return(0,e.jsxs)(e.Fragment,{children:[s.map(({id:x,title:m,plugins:g})=>(0,e.jsxs)("div",{className:i.category,children:[(0,e.jsx)("div",{className:i.header,id:x,children:m}),(0,e.jsx)(Je,{dataSourcePlugins:g,onClickDataSourceType:n})]},x)),(0,e.jsx)("div",{className:i.more,children:(0,e.jsx)(Z.z9,{variant:"secondary",href:o,onClick:u,target:"_self",rel:"noopener",children:(0,e.jsx)(r.x6,{i18nKey:"datasources.data-source-categories.find-more-data-source-plugins",children:"Find more data source plugins"})})})]})}const ps=s=>({category:(0,c.css)({marginBottom:s.spacing(2)}),header:(0,c.css)({fontSize:s.typography.h5.fontSize,marginBottom:s.spacing(1)}),more:(0,c.css)({margin:s.spacing(4),textAlign:"center"})});function xs(){(0,z.hx)();const s=(0,d.wA)(),n=(0,d.d4)(g=>(0,de.hp)(g.dataSources)),o=(0,d.d4)(g=>g.dataSources.dataSourceTypeSearchQuery),i=(0,d.d4)(g=>g.dataSources.isLoadingDataSourcePlugins),u=(0,d.d4)(g=>g.dataSources.categories),x=(0,z.Um)(),m=g=>s((0,ue.eB)(g));return(0,e.jsx)(ms,{dataSources:n,dataSourceCategories:u,searchQuery:o,isLoading:i,onAddDataSource:x,onSetSearchQuery:m})}function ms({dataSources:s,dataSourceCategories:n,searchQuery:o,isLoading:i,onAddDataSource:u,onSetSearchQuery:x}){return i?(0,e.jsx)(Oe.A,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"page-action-bar",children:[(0,e.jsx)(is.Z,{value:o,onChange:x,placeholder:(0,r.t)("datasources.new-data-source-view.placeholder-filter-by-name-or-type","Filter by name or type")}),(0,e.jsx)("div",{className:"page-action-bar__spacer"}),(0,e.jsx)(Z.z9,{href:h.b.DataSources,fill:"outline",variant:"secondary",icon:"arrow-left",children:(0,e.jsx)(r.x6,{i18nKey:"datasources.new-data-source-view.cancel",children:"Cancel"})})]}),!o&&(0,e.jsx)(ls,{filterByPluginType:f.QE.datasource}),(0,e.jsxs)("div",{children:[o&&(0,e.jsx)(Je,{dataSourcePlugins:s,onClickDataSourceType:u}),!o&&(0,e.jsx)(hs,{categories:n,onClickDataSourceType:u})]})]})}function fs(){return(0,e.jsx)(v.Y,{navId:"connections-datasources",pageNav:{text:(0,r.t)("connections.new-data-source-page.text.add-data-source","Add data source"),subTitle:(0,r.t)("connections.new-data-source-page.subTitle.choose-a-data-source-type","Choose a data source type"),active:!0},children:(0,e.jsx)(v.Y.Contents,{children:(0,e.jsx)(xs,{})})})}function vs(){const{search:s}=(0,l.zy)();return(0,e.jsx)(l.C5,{replace:!0,to:{pathname:h.b.AddNewConnection,search:s}})}function js(){const n=!!(0,d.d4)(o=>o.navIndex)["standalone-plugin-page-/connections/add-new-connection"];return(0,e.jsxs)(l.BV,{children:[(0,e.jsx)(l.qh,{caseSensitive:!0,path:"/",element:(0,e.jsx)(l.C5,{replace:!0,to:h.b.AddNewConnection})}),(0,e.jsx)(l.qh,{caseSensitive:!0,path:h.b.DataSources.replace(h.b.Base,""),element:(0,e.jsx)(Da,{})}),(0,e.jsx)(l.qh,{caseSensitive:!0,path:h.b.DataSourcesNew.replace(h.b.Base,""),element:(0,e.jsx)(fs,{})}),(0,e.jsx)(l.qh,{caseSensitive:!0,path:h.b.DataSourcesDetails.replace(h.b.Base,""),element:(0,e.jsx)(ca,{})}),(0,e.jsx)(l.qh,{caseSensitive:!0,path:h.b.DataSourcesEdit.replace(h.b.Base,""),element:(0,e.jsx)(rs,{})}),(0,e.jsx)(l.qh,{caseSensitive:!0,path:h.b.DataSourcesDashboards.replace(h.b.Base,""),element:(0,e.jsx)(ra,{})}),!n&&(0,e.jsx)(l.qh,{caseSensitive:!0,path:h.b.AddNewConnection.replace(h.b.Base,""),element:(0,e.jsx)(aa,{})}),(0,e.jsx)(l.qh,{path:h.b.ConnectDataOutdated.replace(h.b.Base,""),element:(0,e.jsx)(vs,{})}),(0,e.jsx)(l.qh,{path:"/your-connections/:page",element:(0,e.jsx)(l.C5,{replace:!0,to:`${h.b.Base}/:page`})}),(0,e.jsx)(l.qh,{path:h.b.YourConnectionsOutdated.replace(h.b.Base,""),element:(0,e.jsx)(l.C5,{replace:!0,to:h.b.DataSources})}),(0,e.jsx)(l.qh,{element:(0,e.jsx)(l.C5,{replace:!0,to:"/notfound"})})]})}},51026:(W,D,a)=>{a.d(D,{l:()=>w});var e=a(74848),l=a(22803),d=a(96540),h=a(92745),p=a(43173),f=a(55315),v=a(63142),I=a(34999),S=a(45861),P=a(73427);const c=O=>({alertContent:(0,l.css)({display:"flex",flexDirection:"row",padding:0,justifyContent:"space-between",alignItems:"center"}),alertParagraph:(0,l.css)({margin:O.spacing(0,1,0,0),lineHeight:O.spacing(O.components.height.sm)})}),r=new f.X("advisor-redirect-notice");function w(){const O=(0,v.of)(c),C=P.TP.hasRole("Admin")||P.TP.isGrafanaAdmin,[G,V]=(0,d.useState)(!1),A=C&&p.$.featureToggles.grafanaAdvisor&&!!p.$.apps["grafana-advisor-app"];return(0,d.useEffect)(()=>{A&&r.getItem("showNotice").then(B=>{B!=="false"&&V(!0)})},[A]),G?(0,e.jsx)(I.F,{severity:"info",title:"",onRemove:()=>{r.setItem("showNotice","false"),V(!1)},children:(0,e.jsxs)("div",{className:O.alertContent,children:[(0,e.jsx)("p",{className:O.alertParagraph,children:(0,e.jsx)(h.x6,{i18nKey:"connections.advisor-redirect-notice.body",children:"Try the new Advisor to uncover potential issues with your data sources and plugins."})}),(0,e.jsx)(S.z9,{"aria-label":(0,h.t)("connections.advisor-redirect-notice.aria-label-link-to-advisor","Link to Advisor"),icon:"arrow-right",href:"/a/grafana-advisor-app",fill:"text",children:(0,e.jsx)(h.x6,{i18nKey:"connections.advisor-redirect-notice.go-to-advisor",children:"Go to Advisor"})})]})}):(0,e.jsx)(e.Fragment,{})}},49095:(W,D,a)=>{a.d(D,{n:()=>S});var e=a(54148),l=a(92745),d=a(78282),h=a(84057),p=a(52045),f=a(99723),v=a(23691),I=a(52763);function S(P){const{uid:c=""}=(0,e.g)(),r=(0,e.zy)(),w=(0,p.xw)(c),O=(0,p.S4)(w.type),C=(0,v.ob)(w.type),G=new URLSearchParams(r.search),V=P||G.get("page"),{plugin:A,loadError:B,loading:q}=(0,p._e)(),Q=(0,d.l)()?.getInstanceSettings(c),X=!!(Q?.meta?.alerting??!1),pe=Q?.type==="alertmanager",j=X||pe,N=(0,I.d4)(y=>y.navIndex),U=V?`datasource-${V}-${c}`:`datasource-settings-${c}`;let M={node:{text:(0,l.t)("connections.use-data-source-settings-nav.page-nav.text.data-source-nav-node","Data Source Nav Node")},main:{text:(0,l.t)("connections.use-data-source-settings-nav.page-nav.text.data-source-nav-node","Data Source Nav Node")}};if(B){const y={text:B,subTitle:(0,l.t)("connections.use-data-source-settings-nav.node.subTitle.data-source-error","Data Source Error"),icon:"exclamation-triangle"};M={node:y,main:y}}return(q||!A)&&(M=(0,h.tc)(N,U,(0,f.$m)("settings"))),A&&(M=(0,h.tc)(N,U,(0,f.Vh)((0,f.R4)(w,A),V||"settings"))),{navId:"connections-datasources",pageNav:{...M.main,dataSourcePluginName:C?.name||A?.meta.name||"",active:!0,text:w.name,subTitle:`Type: ${O.name}`,children:(M.main.children||[]).map(y=>({...y,url:y.url?.replace("datasources/edit/","/connections/datasources/edit/")}))},dataSourceHeader:{alertingSupported:j}}}},85680:(W,D,a)=>{a.d(D,{Bz:()=>C,Q9:()=>w,Ss:()=>V,TA:()=>O,lC:()=>G});var e=a(68143),l=a(6890),d=a(64762),h=a(13956),p=a(79718),f=a(89224),v=a(69289),I=a(37256),S=a(39167),P=a(22429),c=a(75421),r=a(37918);function w(A,B){return async q=>{await(0,e.AI)().post("/api/dashboards/import",A),q((0,l.dx)((0,d.tZ)("Dashboard Imported",B))),q((0,I.h9)())}}function O(A){return async B=>{await(0,h.n)().deleteDashboard(A,!1),B((0,I.h9)())}}const C=()=>(A,B)=>{const Q=B().dashboard.getModel();Q&&(Q.destroy(),A((0,S.Y7)(Q.uid))),(0,c.jG)().stopAutoRefresh(),A((0,r.p0)()),A((0,f.rG)()),p.t.leave(),(0,P.UA)().setCurrent(void 0)},G=A=>B=>{B((0,v.Cj)(A)),(0,c.jG)().refreshTimeModel()},V=A=>B=>{B((0,v.xu)(A)),(0,c.jG)().refreshTimeModel()}},77418:(W,D,a)=>{a.d(D,{r:()=>f});var e=a(74848),l=a(51898),d=a(92745),h=a(34999);const p="This data source was added by config and cannot be modified using the UI. Please contact your server admin to update this data source.";function f(){return(0,e.jsx)(h.F,{"data-testid":l.Tp.pages.DataSource.readOnly,severity:"info",title:(0,d.t)("datasources.data-source-read-only-message.title-provisioned-data-source","Provisioned data source"),children:p})}},99946:(W,D,a)=>{a.d(D,{y:()=>h});var e=a(74848),l=a(92745),d=a(99887);function h(){return(0,e.jsx)(d.E,{icon:"exclamation-triangle",text:(0,l.t)("plugins.plugin-deprecated-badge.text-deprecated","Deprecated"),color:"orange",tooltip:(0,l.t)("plugins.plugin-deprecated-badge.tooltip-plugin-deprecated-longer-receives-updates","This plugin is deprecated and no longer receives updates.")})}},74814:(W,D,a)=>{a.d(D,{J:()=>f});var e=a(74848),l=a(92745),d=a(63142),h=a(99887),p=a(93984);function f(){const v=(0,d.of)(p.X);return(0,e.jsx)(h.E,{text:(0,l.t)("plugins.plugin-installed-badge.text-installed","Installed"),color:"orange",className:v})}},27589:(W,D,a)=>{a.d(D,{z:()=>p});var e=a(74848),l=a(22803),d=a(92745),h=a(63142);function p({plugin:v}){const I=(0,h.of)(f);return(0,e.jsx)("p",{className:I.hasUpdate,children:(0,e.jsx)(d.x6,{i18nKey:"plugins.plugin-update-available-badge.update-available",children:"Update available!"})})}const f=v=>({hasUpdate:(0,l.css)({color:v.colors.text.secondary,fontSize:v.typography.bodySmall.fontSize,marginBottom:0})})},93984:(W,D,a)=>{a.d(D,{X:()=>l});var e=a(22803);const l=d=>(0,e.css)({background:d.colors.background.primary,borderColor:d.colors.border.strong,color:d.colors.text.secondary})},42135:(W,D,a)=>{a.d(D,{E:()=>f});var e=a(74848),l=a(92745),d=a(27489),h=a(35137),p=a(89640);const f=()=>(0,e.jsxs)("div",{children:[(0,e.jsx)(h.$,{v:2}),(0,e.jsx)(p.Y,{href:"https://github.com/grafana/grafana/issues/new?assignees=&labels=area%2Fdatasource%2Ctype%2Fnew-plugin-request&projects=&template=3-data_source_request.yaml&title=%5BNew+Data+Source%5D%3A+%3Cname-of-service%3E",onClick:()=>(0,d.rR)("connections_data_source_request_clicked"),external:!0,children:(0,e.jsx)(l.x6,{i18nKey:"connections.connect-data.request-data-source",children:"Request a new data source"})}),(0,e.jsx)("br",{}),(0,e.jsx)(p.Y,{href:"https://github.com/orgs/grafana/projects/619/views/1?pane=info",onClick:()=>(0,d.rR)("connections_data_source_roadmap_clicked"),external:!0,children:(0,e.jsx)(l.x6,{i18nKey:"connections.connect-data.roadmap",children:"View roadmap"})})]})},84969:(W,D,a)=>{a.d(D,{L:()=>v});var e=a(74848),l=a(96540),d=a(40996),h=a(92745),p=a(12737);const f=(I,S=0,P=[])=>{const c=(0,l.useRef)(!0),r=[...P,c];return(0,d.A)(()=>{if(c.current){c.current=!1;return}return I()},S,r)},v=({value:I,onSearch:S})=>{const[P,c]=(0,l.useState)(I);return f(()=>S(P??""),500,[P]),(0,e.jsx)(p.Z,{value:P,onKeyDown:r=>{(r.key==="Enter"||r.keyCode===13)&&S(r.currentTarget.value)},placeholder:(0,h.t)("plugins.search-field.placeholder-search-grafana-plugins","Search Grafana plugins"),onChange:r=>{c(r)},width:46})}},6650:(W,D,a)=>{a.d(D,{A:()=>p});var e=a(74848),l=a(92745),d=a(45861);const p=({disabled:f,onUpdateAll:v,updatablePluginsLength:I})=>(0,e.jsx)(d.$n,{disabled:f,onClick:v,children:f?(0,e.jsx)(l.x6,{i18nKey:"plugins.catalog.no-updates-available",children:"No updates available"}):(0,e.jsxs)(l.x6,{i18nKey:"plugins.catalog.update-all.button",values:{length:I},children:["Update all (","{{length}}",")"]})})},65223:(W,D,a)=>{a.d(D,{U:()=>q,A:()=>pe});var e=a(74848),l=a(96540),d=a(92745),h=a(27489),p=a(43173),f=a(71599),v=a(23691),I=a(13660),S=a(22803),P=a(63142),c=a(45967),r=a(30703),w=a(68079),O=a(50201),C=a(32635);const G=j=>({table:(0,S.css)({marginTop:j.spacing(2),width:"100%",borderCollapse:"collapse"}),tableRow:(0,S.css)({borderBottom:`1px solid ${j.colors.border.weak}`,td:{paddingRight:j.spacing(1)}}),icon:(0,S.css)({display:"flex",justifyContent:"center",alignItems:"center"}),header:(0,S.css)({textAlign:"left",padding:j.spacing(1),borderBottom:`2px solid ${j.colors.border.strong}`,th:{paddingRight:j.spacing(1)}}),data:(0,S.css)({padding:"10px"}),footer:(0,S.css)({fontSize:j.typography.bodySmall.fontSize,marginTop:j.spacing(3)}),noPluginsMessage:(0,S.css)({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}),tableContainer:(0,S.css)({overflowY:"auto",overflowX:"hidden",maxHeight:j.spacing(41),marginBottom:j.spacing(2)}),errorIcon:(0,S.css)({color:j.colors.error.main}),successIcon:(0,S.css)({color:j.colors.success.main}),pluginsInstalled:(0,S.css)({svg:{marginRight:j.spacing(1)}})}),V=({id:j,inProgress:N,isSelected:U,isInstalled:M,errorMap:k})=>{const y=(0,P.of)(G);return k&&k.has(j)?(0,e.jsx)(c.m,{content:(0,d.t)("plugins.catalog.update-all.error","Error updating plugin: {{errorMessage}}",{errorMessage:k.get(j)?.message}),children:(0,e.jsx)(r.I,{className:y.errorIcon,size:"xl",name:"exclamation-triangle"})}):M?(0,e.jsx)(r.I,{className:y.successIcon,size:"xl",name:"check"}):N&&U?(0,e.jsx)(w.y,{}):""},A=({plugins:j,pluginsNotInstalled:N,inProgress:U,selectedPlugins:M,onCheckboxChange:k,errorMap:y})=>{const L=(0,P.of)(G),_=j.length-N.size,H=j.length!==N.size&&!U;return(0,e.jsx)("div",{children:j.length===0?(0,e.jsx)(O.p,{variant:"completed",message:(0,d.t)("plugins.catalog.update-all.all-plugins-updated","All plugins updated!")}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:(0,e.jsx)(d.x6,{i18nKey:"plugins.catalog.update-all.header",children:"The following plugins have update available"})}),(0,e.jsx)("div",{className:L.tableContainer,children:(0,e.jsxs)("table",{className:L.table,children:[(0,e.jsx)("thead",{className:L.header,children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:(0,e.jsx)(d.x6,{i18nKey:"plugins.catalog.update-all.update-header",children:"Update"})}),(0,e.jsx)("th",{children:(0,e.jsx)(d.x6,{i18nKey:"plugins.catalog.update-all.name-header",children:"Name"})}),(0,e.jsx)("th",{children:(0,e.jsx)(d.x6,{i18nKey:"plugins.catalog.update-all.installed-header",children:"Installed"})}),(0,e.jsx)("th",{children:(0,e.jsx)(d.x6,{i18nKey:"plugins.catalog.update-all.available-header",children:"Available"})}),(0,e.jsx)("th",{})]})}),(0,e.jsx)("tbody",{children:j.map(({id:T,name:R,installedVersion:se,latestVersion:ne})=>(0,e.jsxs)("tr",{className:L.tableRow,children:[(0,e.jsx)("td",{children:(0,e.jsx)(C.S,{onChange:()=>k(T),value:M?.has(T),disabled:!N.has(T)})}),(0,e.jsx)("td",{children:R}),(0,e.jsx)("td",{children:se}),(0,e.jsx)("td",{children:ne}),(0,e.jsx)("td",{className:L.icon,children:(0,e.jsx)(V,{id:T,inProgress:U,isSelected:M?.has(T)??!1,isInstalled:!N.has(T),errorMap:y})})]},T))})]})}),_>0&&H&&(0,e.jsxs)("div",{className:L.pluginsInstalled,children:[(0,e.jsx)(r.I,{className:L.successIcon,size:"lg",name:"check"}),`${_} ${(0,d.t)("plugins.catalog.update-all.update-status-text","plugins updated")}`]}),y.size>0&&H&&(0,e.jsxs)("div",{className:L.pluginsInstalled,children:[(0,e.jsx)(r.I,{className:L.errorIcon,size:"lg",name:"exclamation-triangle"}),`${y.size} ${(0,d.t)("plugins.catalog.update-all.error-status-text","failed - see error messages")}`]}),p.$.pluginAdminExternalManageEnabled&&(0,e.jsx)("footer",{className:L.footer,children:(0,e.jsx)(d.x6,{i18nKey:"plugins.catalog.update-all.cloud-update-message",children:"* It may take a few minutes for the plugins to be available for usage."})})]})})},B="plugins_update_all_clicked",q=({isOpen:j,onDismiss:N,isLoading:U,plugins:M})=>{const k=(0,v.xX)(),{error:y}=(0,v.XN)(),[L,_]=(0,l.useState)(new Map),[H,T]=(0,l.useState)(!1),[R,se]=(0,l.useState)(),ne=(0,l.useRef)(M),xe=(0,l.useMemo)(()=>new Set(M.map(E=>E.id)),[M]),me=M.length;(0,l.useEffect)(()=>{ne.current.length===0&&(ne.current=[...M])},[M]),(0,l.useEffect)(()=>{H&&(R?.forEach(E=>{xe.has(E)||se(K=>{const J=new Set(K);return J.delete(E),J})}),R?.size===0&&T(!1))},[H,xe,R]),(0,l.useEffect)(()=>{if(R===void 0&&M.length>0&&!U){const E=new Set(M.map(K=>K.id));se(E)}},[U,M,R]),(0,l.useEffect)(()=>{H&&y&&!L.has(y.id)&&R?.has(y.id)&&(_(E=>{const K=new Map(E);return K.set(y.id,y),K}),se(E=>{const K=new Set(E);return K.delete(y.id),K}))},[y,L,H,R]);const be=async()=>{if(!H)if((0,h.rR)(B,{path:window.location.pathname,count:R?.size,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"}),T(!0),p.$.pluginAdminExternalManageEnabled)for(let E of M)R?.has(E.id)&&await k(E.id,E.latestVersion,I.u8.UPDATE);else M.forEach(E=>{R?.has(E.id)&&k(E.id,E.latestVersion,I.u8.UPDATE)})},Se=()=>{ne.current=[],_(new Map),T(!1),se(void 0),N()},Ie=E=>{se(K=>{const J=new Set(K);return J.has(E)?J.delete(E):J.add(E),J}),L.has(E)&&_(K=>{const J=new Map(K);return J.delete(E),J})},Pe=R?.size||0;return(0,e.jsx)(f.u,{isOpen:j,title:(0,d.t)("plugins.catalog.update-all.modal-title","Update Plugins"),body:(0,e.jsx)(A,{plugins:ne.current,pluginsNotInstalled:xe,inProgress:H,errorMap:L,onCheckboxChange:Ie,selectedPlugins:R}),onConfirm:me>0?be:Se,onDismiss:Se,disabled:X(H,me,Pe),confirmText:Q(me,H,Pe),confirmButtonVariant:"primary"})};function Q(j,N,U){return N?(0,d.t)("plugins.catalog.update-all.modal-in-progress","Updating..."):j>0?(0,d.t)("plugins.catalog.update-all.modal-confirmation","Update")+` (${U})`:(0,d.t)("plugins.catalog.update-all.modal-dismiss","Close")}function X(j,N,U){return!!(j||N>0&&U===0)}const pe=q},81687:(W,D,a)=>{a.d(D,{W:()=>l});var e=a(36490);const l=()=>({push:({query:d})=>{e.Ny.partial(d)}})}}]);

//# sourceMappingURL=906.46d763d26e87175c8a3c.js.map