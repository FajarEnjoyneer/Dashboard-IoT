"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5592],{53953:(de,w,i)=>{i.r(w),i.d(w,{AuthConfigPageUnconnected:()=>ie,default:()=>re});var t=i(74848),b=i(96540),G=i(71468),e=i(41607),h=i(92745),Ae=i(27489),K=i(89640),ce=i(7895),Se=i(13943),ae=i(13791),N=i(65642),P=i(22803),oe=i(63142),V=i(8207),k=i(66404),ue=i(21285),fe=i(45861),R=i(64762),_=i(35991);const Ie=u=>({allowInsecureEmail:u.authConfig.settings?.auth?.oauth_allow_insecure_email_lookup.toLowerCase()==="true"}),je={loadSettings:_.M5,saveSettings:_.DZ},Ce=(0,G.connect)(Ie,je)(({allowInsecureEmail:u,loadSettings:j,onClose:T,saveSettings:S})=>{const D=(0,R._2)(),E=async()=>{try{await S({updates:{auth:{oauth_allow_insecure_email_lookup:""+!u}}}),await j(!1),D.success("Settings saved")}catch{D.error("Failed to save settings")}},W=async()=>{try{await S({removals:{auth:["oauth_allow_insecure_email_lookup"]}}),await j(!1),D.success("Settings saved")}catch{D.error("Failed to save settings")}},U=(0,t.jsxs)(h.x6,{i18nKey:"auth-config.auth-drawer-unconneced.subtitle",children:["Configure auth settings. Find out more in our"," ",(0,t.jsx)(K.Y,{external:!0,href:"https://grafana.com/docs/grafana/next/setup-grafana/configure-security/configure-authentication/#settings",children:"documentation"}),"."]}),H=(0,oe.of)(Le);return(0,t.jsxs)(V._,{title:(0,h.t)("auth-config.auth-drawer-unconnected.title-auth-settings","Auth settings"),subtitle:U,size:"md",onClose:T,children:[(0,t.jsxs)("div",{className:H.advancedAuth,children:[(0,t.jsx)(k.E,{variant:"h4",children:(0,t.jsx)(h.x6,{i18nKey:"auth-config.auth-drawer-unconnected.advanced-auth",children:"Advanced Auth"})}),(0,t.jsx)(k.E,{variant:"h5",children:(0,t.jsx)(h.x6,{i18nKey:"auth-config.auth-drawer-unconnected.enable-insecure-email-lookup",children:"Enable insecure email lookup"})}),(0,t.jsx)(k.E,{variant:"body",color:"secondary",children:(0,t.jsx)(h.x6,{i18nKey:"auth-config.auth-drawer-unconnected.enable-insecure-email-lookup-description",children:"Allow users to use the same email address to log into Grafana with different identity providers."})}),(0,t.jsx)(ue.d,{value:u,onChange:E})]}),(0,t.jsx)(fe.$n,{size:"md",variant:"secondary",className:H.button,onClick:W,tooltip:(0,h.t)("auth-config.auth-drawer-unconnected.reset-tooltip","This action will disregard any saved changes and load the configuration from the configuration file."),children:(0,t.jsx)(h.x6,{i18nKey:"auth-config.auth-drawer-unconnected.reset",children:"Reset"})})]})}),Le=u=>({advancedAuth:(0,P.css)({display:"flex",flexDirection:"column",gap:u.spacing(1)}),button:(0,P.css)({marginTop:u.spacing(2)})});var we=i(41654),ee=i(30703);const Pe=()=>{const u=(0,oe.of)(he);return(0,t.jsxs)("div",{className:u.container,children:[(0,t.jsxs)(we.B,{gap:1,alignItems:"center",children:[(0,t.jsx)(ee.I,{name:"cog"}),(0,t.jsx)(k.E,{children:(0,t.jsx)(h.x6,{i18nKey:"auth-config.configure-auth-cta.configuration-required",children:"Configuration required"})})]}),(0,t.jsx)(k.E,{variant:"bodySmall",color:"secondary",children:(0,t.jsx)(h.x6,{i18nKey:"auth-config.configure-auth-cta.authentication-configuration-created-moment",children:"You have no authentication configuration created at the moment."})}),(0,t.jsx)(K.Y,{href:"https://grafana.com/docs/grafana/latest/auth/overview/",external:!0,children:(0,t.jsx)(h.x6,{i18nKey:"auth-config.configure-auth-cta.refer-documentation-configure-authentication",children:"Refer to the documentation on how to configure authentication"})})]})},he=u=>({container:(0,P.css)({display:"flex",flexDirection:"column",gap:u.spacing(2),backgroundColor:u.colors.background.secondary,borderRadius:u.shape.radius.default,padding:u.spacing(3),width:"max-content",margin:u.spacing(3,"auto")})}),Te=Pe;var De=i(30360),x=i(8073),ge=i(99887),te=i(22942),pe=i(22011),se=i(74997);function me({providerId:u,enabled:j,configPath:T,authType:S,onClick:D}){const E=(0,se.h)({configPath:T,id:u}),[W,U]=pe.L[u]||["lock",u.toUpperCase()];return(0,t.jsxs)(x.Z,{href:E,onClick:D,noMargin:!0,children:[(0,t.jsx)(x.Z.Heading,{children:U}),(0,t.jsx)(x.Z.Meta,{children:S}),(0,De.n6)(W)&&(0,t.jsx)(x.Z.Figure,{children:(0,t.jsx)(ee.I,{name:W,size:"xxxl"})}),(0,t.jsx)(x.Z.Actions,{children:(0,t.jsx)(ge.E,{text:j?(0,h.t)("auth-config.provider-card.text-badge-enabled","Enabled"):(0,h.t)("auth-config.provider-card.text-badge-not-enabled","Not enabled"),color:j?"green":"blue"})})]})}function $(){return(0,t.jsxs)(x.Z,{noMargin:!0,children:[(0,t.jsx)(x.Z.Heading,{children:"SAML"}),(0,t.jsx)(x.Z.Meta,{children:(0,t.jsx)(K.Y,{external:!0,variant:"bodySmall",color:"secondary",href:"https://grafana.com/auth/sign-up/create-user?cloud-auth=&redirectPath=cloud-auth&utm_source=oss-grafana&cnt=admin-authorization-saml",children:(0,h.t)("auth-config.provider-card.saml-learn-more","Single sign-on (SSO) with SAML.")})}),(0,t.jsx)(x.Z.Figure,{children:(0,t.jsx)(ee.I,{name:"lock",size:"xxxl"})}),(0,t.jsx)(x.Z.Actions,{children:(0,t.jsx)(te.q,{})})]})}function ke(){return(0,t.jsxs)(x.Z,{noMargin:!0,children:[(0,t.jsx)(x.Z.Heading,{children:"SCIM"}),(0,t.jsx)(x.Z.Meta,{children:(0,t.jsx)("div",{children:(0,t.jsx)(K.Y,{external:!0,variant:"bodySmall",color:"secondary",href:"https://grafana.com/auth/sign-up/create-user?cloud-auth=&redirectPath=cloud-auth&utm_source=oss-grafana&cnt=admin-authorization-scim",children:(0,h.t)("auth-config.provider-card.scim-learn-more"," Sync users and teams with SCIM.")})})}),(0,t.jsx)(x.Z.Figure,{children:(0,t.jsx)(ee.I,{name:"sync",size:"xxxl"})}),(0,t.jsx)(x.Z.Actions,{children:(0,t.jsx)(te.q,{})})]})}var Ue=i(69874);function Z(u){const{isLoading:j,providerStatuses:T,providers:S}=u.authConfig;return{isLoading:j,providerStatuses:T,providers:S}}const Re={loadSettings:_.M5},be=(0,G.connect)(Z,Re),ie=({providerStatuses:u,isLoading:j,loadSettings:T,providers:S})=>{(0,b.useEffect)(()=>{T()},[T]);const[D,E]=(0,b.useState)(!1),U=(0,Ue.getRegisteredAuthProviders)().filter(g=>!u[g.id]?.hide),H=(g,M)=>{(0,Ae.rR)("authentication_ui_provider_clicked",{provider:g,enabled:M})};S=S.filter(g=>g.provider!=="saml"),S=S.map(g=>g.provider==="ldap"?{...g,settings:{...g.settings,type:"LDAP"}}:g);const ne=U.length?[...U.map(g=>({provider:g.id,settings:{...u[g.id],configPath:g.configPath,type:g.type}})),...S]:S;return(0,t.jsx)(ae.Y,{navId:"authentication",subTitle:(0,t.jsxs)(h.x6,{i18nKey:"auth-config-auth-config-page-unconnected.subtitle",children:["Manage your auth settings and configure single sign-on. Find out more in our"," ",(0,t.jsx)(K.Y,{external:!0,href:"https://grafana.com/docs/grafana/next/setup-grafana/configure-security/configure-authentication",children:"documentation"}),"."]}),actions:N.$W.buildInfo.edition!==e.r.OpenSource&&(0,t.jsx)(ce.I,{icon:"cog",variant:"canvas",onClick:()=>E(!0),children:(0,t.jsx)(h.x6,{i18nKey:"auth-config.auth-config-page-unconnected.auth-settings",children:"Auth settings"})}),children:(0,t.jsx)(ae.Y.Contents,{isLoading:j,children:ne.length?(0,t.jsxs)(Se.x,{gap:3,minColumnWidth:34,children:[ne.filter(({provider:g})=>!["grafana_com"].includes(g)).map(({provider:g,settings:M})=>(0,t.jsx)(me,{authType:M.type||"OAuth",providerId:g,enabled:M.enabled,onClick:()=>H(g,M.enabled),configPath:M.configPath},g)),N.$W.buildInfo.edition===e.r.OpenSource&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($,{}),(0,t.jsx)(ke,{})]}),D&&(0,t.jsx)(Ce,{onClose:()=>E(!1)})]}):(0,t.jsx)(Te,{})})})},re=be(ie)},81172:(de,w,i)=>{i.r(w),i.d(w,{ProviderConfigPage:()=>Ne,default:()=>Qe});var t=i(74848),b=i(96540),G=i(54148),e=i(92745),h=i(41654),Ae=i(66404),K=i(99887),ce=i(13791),Se=i(86678),ae=i(52763),N=i(49785),P=i(32899),oe=i(75234),V=i(68143),k=i(27489),ue=i(36490),fe=i(87063),R=i(37386),_=i(21285),Ie=i(74475),je=i(31286),B=i(45861),Me=i(88559),Ce=i(76319),Le=i(71599),we=i(83813),ee=i(22803),Pe=i(63142),he=i(63527),Te=i(48767),De=i(18857),x=i(32635),ge=i(41391),te=i(43173),pe=i(89640),se=i(73427),me=i(22787),$=i(74997);const ke=({isOpen:n,onClose:a,onSuccess:r,isLoading:s})=>{const{handleSubmit:l,register:p,formState:{errors:d}}=(0,N.mN)({mode:"onBlur",defaultValues:{url:""}}),m=A=>A===""?"Please enter the .well-known/openid-configuration endpoint for your IdP":(0,$.K)(A)?!0:"Please enter a valid URL";return(0,t.jsx)(me.a,{title:(0,e.t)("auth-config.server-discovery-modal.title-open-id-connect-discovery-url","OpenID Connect Discovery URL"),onDismiss:a,onClickBackdrop:a,isOpen:n,children:(0,t.jsxs)("form",{onSubmit:A=>(A.stopPropagation(),l(r)(A)),children:[(0,t.jsx)(R.D,{label:(0,e.t)("auth-config.server-discovery-modal.label-the-wellknownopenidconfiguration-endpoint-for-your-id-p","The .well-known/openid-configuration endpoint for your IdP"),invalid:!!d.url,error:d.url?.message,htmlFor:"url",children:(0,t.jsx)(he.p,{...p("url",{validate:m}),width:80,id:"url"})}),(0,t.jsxs)(me.a.ButtonRow,{children:[(0,t.jsx)(B.$n,{type:"submit",variant:"primary",disabled:s,children:s?(0,t.jsx)(e.x6,{i18nKey:"oauth.form.server-discovery-modal-loading",children:"Loading..."}):(0,t.jsx)(e.x6,{i18nKey:"oauth.form.server-discovery-modal-submit",children:"Submit"})}),(0,t.jsx)(B.$n,{type:"button",variant:"secondary",onClick:a,children:(0,t.jsx)(e.x6,{i18nKey:"oauth.form.server-discovery-modal-close",children:"Close"})})]})]})})},Ue=({setValue:n})=>{const a=(0,oe.J7)(),[r,s]=(0,b.useState)(!1),[l,p]=(0,b.useState)(!1),d=()=>s(!1),m=async A=>{p(!0);try{const o="/.well-known/openid-configuration",v=new URL(A.url);v.pathname.includes(o)||(A.url=v.origin+o);const y=await(0,V.AI)().get(A.url);if(!y.token_endpoint||!y.authorization_endpoint){a.publish({type:P.r1.alertWarning.name,payload:["The URL provided is not a valid .well-known/openid-configuration endpoint"]});return}n("tokenUrl",y.token_endpoint),n("authUrl",y.authorization_endpoint),y.userinfo_endpoint&&n("apiUrl",y.userinfo_endpoint),a.publish({type:P.r1.alertSuccess.name,payload:["OpenID Connect Discovery URL has been successfully fetched."]})}catch{a.publish({type:P.r1.alertWarning.name,payload:["Failed to fetch URL or invalid content"]})}finally{d(),p(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.$n,{type:"button",variant:"secondary",onClick:()=>{s(!0)},children:(0,t.jsx)(e.x6,{i18nKey:"oauth.form.server-discovery-action-button",children:"Enter OpenID Connect Discovery URL"})}),(0,t.jsx)(ke,{isOpen:r,onClose:d,onSuccess:m,isLoading:l})]})};function Z(n){return Array.isArray(n)&&n.every(a=>typeof a=="object"&&a!==null&&"value"in a)}function Re(n){return typeof n=="object"&&n!==null&&"value"in n}const be=()=>{const n=(0,e.t)("auth-config.fields.section-general-settings","General settings"),a=(0,e.t)("auth-config.fields.section-user-mapping","User mapping"),r=(0,e.t)("auth-config.fields.section-extra-security","Extra security measures");return{azuread:[{name:n,id:"general",fields:["name","clientAuthentication","clientId","clientSecret","managedIdentityClientId","federatedCredentialAudience","scopes","authUrl","tokenUrl","allowSignUp","autoLogin","signoutRedirectUrl"]},{name:a,id:"user",fields:["roleAttributeStrict","orgMapping","allowAssignGrafanaAdmin","skipOrgRoleSync"]},{name:r,id:"extra",fields:["allowedOrganizations","allowedDomains","allowedGroups","forceUseGraphApi","usePkce","useRefreshToken","tlsSkipVerifyInsecure","tlsClientCert","tlsClientKey","tlsClientCa","workloadIdentityTokenFile"]}],generic_oauth:[{name:n,id:"general",fields:["name","clientId","clientSecret","authStyle","scopes","serverDiscoveryUrl","authUrl","tokenUrl","apiUrl","allowSignUp","autoLogin","signoutRedirectUrl"]},{name:a,id:"user",fields:["nameAttributePath","loginAttributePath","emailAttributeName","emailAttributePath","idTokenAttributeName","roleAttributePath","roleAttributeStrict","orgMapping","orgAttributePath","allowAssignGrafanaAdmin","skipOrgRoleSync"]},{name:r,id:"extra",fields:["allowedOrganizations","allowedDomains","defineAllowedGroups",{name:"allowedGroups",dependsOn:"defineAllowedGroups"},{name:"groupsAttributePath",dependsOn:"defineAllowedGroups"},"defineAllowedTeamsIds",{name:"teamIds",dependsOn:"defineAllowedTeamsIds"},{name:"teamsUrl",dependsOn:"defineAllowedTeamsIds"},{name:"teamIdsAttributePath",dependsOn:"defineAllowedTeamsIds"},"usePkce","useRefreshToken","tlsSkipVerifyInsecure","tlsClientCert","tlsClientKey","tlsClientCa"]}],google:[{name:n,id:"general",fields:["name","clientId","clientSecret","scopes","allowSignUp","autoLogin","signoutRedirectUrl"]},{name:a,id:"user",fields:["roleAttributePath","roleAttributeStrict","orgMapping","allowAssignGrafanaAdmin","skipOrgRoleSync"]},{name:r,id:"extra",fields:["validateHd","hostedDomain","allowedDomains","allowedGroups","usePkce","useRefreshToken","tlsSkipVerifyInsecure","tlsClientCert","tlsClientKey","tlsClientCa"]}],github:[{name:n,id:"general",fields:["name","clientId","clientSecret","scopes","allowSignUp","autoLogin","signoutRedirectUrl"]},{name:a,id:"user",fields:["roleAttributePath","roleAttributeStrict","orgMapping","allowAssignGrafanaAdmin","skipOrgRoleSync"]},{name:r,id:"extra",fields:["allowedOrganizations","allowedDomains","teamIds","usePkce","useRefreshToken","tlsSkipVerifyInsecure","tlsClientCert","tlsClientKey","tlsClientCa"]}],gitlab:[{name:n,id:"general",fields:["name","clientId","clientSecret","scopes","allowSignUp","autoLogin","signoutRedirectUrl"]},{name:a,id:"user",fields:["roleAttributePath","roleAttributeStrict","orgMapping","allowAssignGrafanaAdmin","skipOrgRoleSync"]},{name:r,id:"extra",fields:["allowedDomains","allowedGroups","usePkce","useRefreshToken","tlsSkipVerifyInsecure","tlsClientCert","tlsClientKey","tlsClientCa"]}],okta:[{name:n,id:"general",fields:["name","clientId","clientSecret","scopes","authUrl","tokenUrl","apiUrl","allowSignUp","autoLogin","signoutRedirectUrl"]},{name:a,id:"user",fields:["roleAttributePath","roleAttributeStrict","orgMapping","orgAttributePath","allowAssignGrafanaAdmin","skipOrgRoleSync"]},{name:r,id:"extra",fields:["allowedDomains","allowedGroups","usePkce","useRefreshToken","tlsSkipVerifyInsecure","tlsClientCert","tlsClientKey","tlsClientCa"]}]}},ie="Client ID",re="Client secret",u="Scopes",j="OpenID Connect Discovery URL",T="Auth URL",S="Token URL",D="API URL",E="JMESPath",W="Workload identity";function U(n){const a=(0,e.t)("auth-config.fields.organization-mapping-label","Organization mapping"),r=(0,e.t)("auth-config.fields.organization-attribute-path-label","Organization attribute path"),s=(0,e.t)("auth-config.fields.teams-url-label","Teams URL"),l=(0,e.t)("auth-config.fields.team-ids-attribute-path-label","Team IDs attribute path"),p=(0,e.t)("auth-config.fields.allowed-groups-label","Allowed groups"),d=(0,e.t)("auth-config.fields.groups-attribute-path-label","Groups attribute path"),m=(0,e.t)("auth-config.fields.team-ids-label","Team IDs"),A=(0,e.t)("auth-config.fields.allowed-domains-label","Allowed domains");return{clientAuthentication:{label:(0,e.t)("auth-config.fields.client-authentication-label","Client authentication"),type:"select",description:(0,e.t)("auth-config.fields.client-authentication-description","The client authentication method used to authenticate to the token endpoint."),multi:!1,options:g(n),defaultValue:{value:"none",label:(0,e.t)("auth-config.field-map.label.none","None")},validation:{required:!0,message:(0,e.t)("auth-config.fields.required","This field is required")}},clientId:{label:ie,type:"text",description:(0,e.t)("auth-config.fields.client-id-description","The {{ clientIDLabel }} of your OAuth2 app.",{clientIDLabel:ie}),validation:{required:!0,message:(0,e.t)("auth-config.fields.required","This field is required")}},clientSecret:{label:re,type:"secret",description:(0,e.t)("auth-config.fields.client-secret-description","The {{ clientSecretLabel }} of your OAuth2 app.",{clientSecretLabel:re})},managedIdentityClientId:{label:(0,e.t)("auth-config.fields.managed-identity-client-id-label","FIC managed identity client ID"),type:"text",description:(0,e.t)("auth-config.fields.managed-identity-client-id-description","The managed identity client ID of the federated identity credential of your OAuth2 app.")},federatedCredentialAudience:{label:(0,e.t)("auth-config.fields.federated-credential-audience-label","FIC audience"),type:"text",description:(0,e.t)("auth-config.fields.federated-credential-audience-description","The audience of the federated identity credential of your OAuth2 app.")},workloadIdentityTokenFile:{label:(0,e.t)("auth-config.fields.workload-identity-token-file-label","{{ workloadIdentityLabel }} token file",{workloadIdentityLabel:W}),type:"text",description:(0,e.t)("auth-config.fields.workload-identity-token-file-description",'The file path to the token file used to authenticate to the OAuth2 provider. This is only required when client authentication is set to "workload_identity". Defaults to /var/run/secrets/azure/tokens/azure-identity-token.'),validation:{validate:(o,v)=>{let y=v.clientAuthentication;return Re(y)&&(y=y.value),y==="workload_identity"?!!o:!0},message:(0,e.t)("auth-config.fields.workload-identity-token-file-required",'This field must be set when client authentication is set to "Workload identity".')}},allowedOrganizations:{label:(0,e.t)("auth-config.fields.allowed-organizations-label","Allowed organizations"),type:"select",description:(0,e.t)("auth-config.fields.allowed-organizations-description",`List of comma- or space-separated organizations. The user should be a member 
of at least one organization to log in.`),multi:!0,allowCustomValue:!0,options:[],placeholder:(0,e.t)("auth-config.fields.allowed-organizations-placeholder","Enter organizations (my-team, myteam...) and press Enter to add")},allowedDomains:{label:A,type:"select",description:(0,e.t)("auth-config.fields.allowed-domains-description",`List of comma- or space-separated domains. The user should belong to at least 
one domain to log in.`),multi:!0,allowCustomValue:!0,options:[]},authUrl:{label:T,type:"text",description:(0,e.t)("auth-config.fields.auth-url-description","The authorization endpoint of your OAuth2 provider."),validation:{required:!0,validate:o=>(0,$.K)(o),message:(0,e.t)("auth-config.fields.auth-url-required","This field is required and must be a valid URL.")}},authStyle:{label:(0,e.t)("auth-config.fields.auth-style-label","Auth style"),type:"select",description:(0,e.t)("auth-config.fields.auth-style-description",'It determines how "{{ clientIDLabel }}" and "{{ clientSecretLabel }}" are sent to Oauth2 provider. Default is AutoDetect.',{clientIDLabel:ie,clientSecretLabel:re}),multi:!1,options:[{value:"AutoDetect",label:"AutoDetect"},{value:"InParams",label:"InParams"},{value:"InHeader",label:"InHeader"}],defaultValue:{value:"AutoDetect",label:"AutoDetect"}},tokenUrl:{label:S,type:"text",description:(0,e.t)("auth-config.fields.token-url-description","The token endpoint of your OAuth2 provider."),validation:{required:!0,validate:o=>(0,$.K)(o),message:(0,e.t)("auth-config.fields.token-url-required","This field is required and must be a valid URL.")}},scopes:{label:u,type:"select",description:(0,e.t)("auth-config.fields.scopes-description","List of comma- or space-separated OAuth2 {{ scopesLabel }}.",{scopesLabel:u}),multi:!0,allowCustomValue:!0,options:[]},allowedGroups:{label:p,type:"select",description:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.x6,{i18nKey:"auth-config.fields.allowed-groups-description",children:"List of comma- or space-separated groups. The user should be a member of at least one group to log in."})," ",n==="generic_oauth"&&(0,e.t)("auth-config.fields.allowed-groups-description-oauth",'If you configure "{{ allowedGroupsLabel }}", you must also configure "{{ groupsAttributePathLabel }}".',{allowedGroupsLabel:p,groupsAttributePathLabel:d})]}),multi:!0,allowCustomValue:!0,options:[],validation:n==="azuread"?{validate:o=>typeof o=="string"?(0,ge.A)(o):Z(o)?o.every(v=>v?.value&&(0,ge.A)(v.value)):!0,message:(0,e.t)("auth-config.fields.allowed-groups-object-ids","{{ allowedGroupsLabel }} must be {{ objectIDsField }}.",{objectIDsField:"Object IDs"})}:void 0},apiUrl:{label:D,type:"text",description:(0,t.jsxs)(e.x6,{i18nKey:"auth-config.fields.api-url-description",children:["The user information endpoint of your OAuth2 provider. Information returned by this endpoint must be compatible with"," ",(0,t.jsx)(pe.Y,{href:"https://connect2id.com/products/server/docs/api/userinfo",external:!0,variant:"bodySmall",children:"OpenID UserInfo"}),"."]}),validation:{required:!1,validate:o=>typeof o!="string"?!1:o.length?(0,$.K)(o):!0,message:(0,e.t)("auth-config.fields.api-url-required","This field must be a valid URL if set.")}},roleAttributePath:{label:(0,e.t)("auth-config.fields.role-attribute-path-label","Role attribute path"),description:(0,e.t)("auth-config.fields.role-attribute-path-description","{{ jmesPathLabel }} expression to use for Grafana role lookup.",{jmesPathLabel:E}),type:"text",validation:{required:!1}},name:{label:(0,e.t)("auth-config.fields.display-name-label","Display name"),description:(0,e.t)("auth-config.fields.display-name-description",'Will be displayed on the login page as "Sign in with ...". Helpful if you use more than one identity providers or SSO protocols.'),type:"text"},allowSignUp:{label:(0,e.t)("auth-config.fields.allow-sign-up-label","Allow sign up"),description:(0,e.t)("auth-config.fields.allow-sign-up-description","If not enabled, only existing Grafana users can log in using OAuth."),type:"switch"},autoLogin:{label:(0,e.t)("auth-config.fields.auto-login-label","Auto login"),description:(0,e.t)("auth-config.fields.auto-login-description","Log in automatically, skipping the login screen."),type:"switch"},signoutRedirectUrl:{label:(0,e.t)("auth-config.fields.signout-redirect-url-label","Sign out redirect URL"),description:(0,e.t)("auth-config.fields.signout-redirect-url-description","The URL to redirect the user to after signing out from Grafana."),type:"text",validation:{required:!1}},emailAttributeName:{label:(0,e.t)("auth-config.fields.email-attribute-name-label","Email attribute name"),description:(0,e.t)("auth-config.fields.email-attribute-name-description","Name of the key to use for user email lookup within the attributes map of OAuth2 ID token."),type:"text"},emailAttributePath:{label:(0,e.t)("auth-config.fields.email-attribute-path-label","Email attribute path"),description:(0,e.t)("auth-config.fields.email-attribute-path-description","JMESPath expression to use for user email lookup from the user information."),type:"text"},nameAttributePath:{label:(0,e.t)("auth-config.fields.name-attribute-path-label","Name attribute path"),description:(0,e.t)("auth-config.fields.name-attribute-path-description",`JMESPath expression to use for user name lookup from the user ID token. 
This name will be used as the user's display name.`),type:"text"},loginAttributePath:{label:(0,e.t)("auth-config.fields.login-attribute-path-label","Login attribute path"),description:(0,e.t)("auth-config.fields.login-attribute-path-description","JMESPath expression to use for user login lookup from the user ID token."),type:"text"},idTokenAttributeName:{label:(0,e.t)("auth-config.fields.id-token-attribute-name-label","ID token attribute name"),description:(0,e.t)("auth-config.fields.id-token-attribute-name-description","The name of the key used to extract the ID token from the returned OAuth2 token."),type:"text"},roleAttributeStrict:{label:(0,e.t)("auth-config.fields.role-attribute-strict-label","Role attribute strict mode"),description:(0,e.t)("auth-config.fields.role-attribute-strict-description","If enabled, denies user login if the Grafana role cannot be extracted using Role attribute path."),type:"switch"},allowAssignGrafanaAdmin:{label:(0,e.t)("auth-config.fields.allow-assign-grafana-admin-label","Allow assign Grafana admin"),description:(0,e.t)("auth-config.fields.allow-assign-grafana-admin-description","If enabled, it will automatically sync the Grafana server administrator role."),type:"switch",hidden:!se.TP.isGrafanaAdmin},skipOrgRoleSync:{label:(0,e.t)("auth-config.fields.skip-org-role-sync-label","Skip organization role sync"),description:(0,e.t)("auth-config.fields.skip-org-role-sync-description","Prevent synchronizing users' organization roles from your IdP."),type:"switch"},orgMapping:{label:a,description:ne(n),type:"select",hidden:!se.TP.isGrafanaAdmin,multi:!0,allowCustomValue:!0,options:[],placeholder:(0,e.t)("auth-config.fields.organization-mapping-placeholder","Enter mappings (my-team:1:Viewer...) and press Enter to add")},orgAttributePath:{label:r,description:(0,e.t)("auth-config.fields.organization-attribute-path-description",'JMESPath expression to use for organization lookup. If you configure "{{ orgMappingLabel }}", you must also configure "{{ orgAttributePathLabel }}".',{orgMappingLabel:a,orgAttributePathLabel:r}),type:"text",hidden:!(["generic_oauth","okta"].includes(n)&&se.TP.isGrafanaAdmin)},defineAllowedGroups:{label:(0,e.t)("auth-config.fields.define-allowed-groups-label","Define allowed groups"),type:"switch"},defineAllowedTeamsIds:{label:(0,e.t)("auth-config.fields.define-allowed-teams-ids-label","Define allowed teams IDs"),type:"switch"},forceUseGraphApi:{label:(0,e.t)("auth-config.fields.force-use-graph-api-label","Force use Graph API"),description:(0,e.t)("auth-config.fields.force-use-graph-api-description","If enabled, Grafana will fetch the users' groups using the Microsoft Graph API."),type:"checkbox"},usePkce:{label:(0,e.t)("auth-config.fields.use-pkce-label","Use PKCE"),description:(0,t.jsxs)(e.x6,{i18nKey:"auth-config.fields.use-pkce-description",children:["If enabled, Grafana will use"," ",(0,t.jsx)(pe.Y,{external:!0,variant:"bodySmall",href:"https://datatracker.ietf.org/doc/html/rfc7636",children:"Proof Key for Code Exchange (PKCE)"})," ","with the OAuth2 Authorization Code Grant."]}),type:"checkbox"},useRefreshToken:{label:(0,e.t)("auth-config.fields.use-refresh-token-label","Use refresh token"),description:(0,e.t)("auth-config.fields.use-refresh-token-description","If enabled, Grafana will fetch a new access token using the refresh token provided by the OAuth2 provider."),type:"checkbox"},tlsClientCa:{label:(0,e.t)("auth-config.fields.tls-client-ca-label","TLS client CA"),description:(0,e.t)("auth-config.fields.tls-client-ca-description","The file path to the trusted certificate authority list. Is not applicable on Grafana Cloud."),type:"text",hidden:!te.$.localFileSystemAvailable},tlsClientCert:{label:(0,e.t)("auth-config.fields.tls-client-cert-label","TLS client cert"),description:(0,e.t)("auth-config.fields.tls-client-cert-description","The file path to the certificate. Is not applicable on Grafana Cloud."),type:"text",hidden:!te.$.localFileSystemAvailable},tlsClientKey:{label:(0,e.t)("auth-config.fields.tls-client-key-label","TLS client key"),description:(0,e.t)("auth-config.fields.tls-client-key-description","The file path to the key. Is not applicable on Grafana Cloud."),type:"text",hidden:!te.$.localFileSystemAvailable},tlsSkipVerifyInsecure:{label:(0,e.t)("auth-config.fields.tls-skip-verify-label","TLS skip verify"),description:(0,e.t)("auth-config.fields.tls-skip-verify-description",`If enabled, the client accepts any certificate presented by the server and any host 
name in that certificate. You should only use this for testing, because this mode leaves 
SSL/TLS susceptible to man-in-the-middle attacks.`),type:"switch"},groupsAttributePath:{label:d,description:(0,e.t)("auth-config.fields.groups-attribute-path-description",`JMESPath expression to use for user group lookup. If you configure "{{ allowedGroupsLabel }}", 
you must also configure "{{ groupsAttributePathLabel }}".`,{allowedGroupsLabel:p,groupsAttributePathLabel:d}),type:"text"},teamsUrl:{label:s,description:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.x6,{i18nKey:"auth-config.fields.teams-url-description",children:"The URL used to query for Team IDs. If not set, the default value is /teams."})," ",n==="generic_oauth"&&(0,e.t)("auth-config.fields.teams-url-description-oauth",'If you configure "{{ teamsURLLabel }}", you must also configure "{{ teamIDsAttributePathLabel }}".',{teamsURLLabel:s,teamIDsAttributePathLabel:l})]}),type:"text",validation:{validate:(o,v)=>{let y=!0;return v.teamIds.length&&(y=!!o),typeof o=="string"&&o.length&&(y=(0,$.K)(o)),y},message:(0,e.t)("auth-config.fields.teams-url-required",'This field must be set if "{{ teamIDsLabel }}" are configured and must be a valid URL.',{teamIDsLabel:m})}},teamIdsAttributePath:{label:l,description:(0,e.t)("auth-config.fields.team-ids-attribute-path-description",'The JMESPath expression to use for Grafana Team ID lookup within the results returned by the "{{ teamsURLLabel }}" endpoint.',{teamsURLLabel:s}),type:"text",validation:{validate:(o,v)=>v.teamIds.length?!!o:!0,message:(0,e.t)("auth-config.fields.team-ids-attribute-path-required",'This field must be set if "{{ teamIDsLabel }}" are configured.',{teamIDsLabel:m})}},teamIds:{label:m,type:"select",description:(0,t.jsxs)(t.Fragment,{children:[n==="github"?(0,e.t)("auth-config.fields.team-ids-github","Integer list of Team IDs."):(0,e.t)("auth-config.fields.team-ids-other","String list of Team IDs.")," ",(0,t.jsx)(e.x6,{i18nKey:"auth-config.fields.team-ids-description",children:"If set, the user must be a member of one of the given teams to log in."})," ",n==="generic_oauth"&&(0,e.t)("auth-config.fields.team-ids-description-oauth",'If you configure "{{ teamIDsLabel }}", you must also configure "{{ teamsURLLabel }}" and "{{ teamIDsAttributePathLabel }}".',{teamIDsLabel:m,teamsURLLabel:s,teamIDsAttributePathLabel:l})]}),multi:!0,allowCustomValue:!0,options:[],placeholder:(0,e.t)("auth-config.fields.team-ids-placeholder","Enter Team IDs and press Enter to add"),validation:n==="github"?{validate:o=>typeof o=="string"?H(o):Z(o)?o.every(v=>v?.value&&H(v.value)):!0,message:(0,e.t)("auth-config.fields.team-ids-numbers","Team IDs must be numbers.")}:void 0},hostedDomain:{label:(0,e.t)("auth-config.fields.hosted-domain-label","Hosted domain"),description:(0,e.t)("auth-config.fields.hosted-domain-description","The domain under which Grafana is hosted and accessible."),type:"text"},validateHd:{label:(0,e.t)("auth-config.fields.validate-hosted-domain-label","Validate hosted domain"),description:(0,e.t)("auth-config.fields.validate-hosted-domain-description",'If enabled, Grafana will match the Hosted Domain retrieved from the Google ID Token against the "{{ allowedDomainsLabel }}" list specified by the user.',{allowedDomainsLabel:A}),type:"checkbox"},serverDiscoveryUrl:{label:j,description:(0,e.t)("auth-config.fields.server-discovery-url-description",'The .well-known/openid-configuration endpoint for your IdP. The info extracted from this URL will be used to populate the "{{ authURLLabel }}", "{{ tokenURLLabel }}" and "{{ apiURLLabel }}" fields.',{authURLLabel:T,tokenURLLabel:S,apiURLLabel:D}),type:"custom",content:o=>(0,t.jsx)(Ue,{setValue:o})}}}function H(n){return/^-?\d+$/.test(n)}function ne(n){switch(n){case"azuread":return(0,e.t)("auth-config.fields.org-mapping-description-azuread",'List of "<GroupID>:<OrgIdOrName>:<Role>" mappings.');case"github":return(0,e.t)("auth-config.fields.org-mapping-description-github",'List of "<GitHubTeamName>:<OrgIdOrName>:<Role>" mappings.');case"gitlab":return(0,e.t)("auth-config.fields.org-mapping-description-gitlab",'List of "<GitlabGroupName>:<OrgIdOrName>:<Role>" mappings.');case"google":return(0,e.t)("auth-config.fields.org-mapping-description-google",'List of "<GoogleGroupName>:<OrgIdOrName>:<Role>" mappings.');default:return(0,e.t)("auth-config.fields.org-mapping-description-generic",'List of "<ExternalName>:<OrgIdOrName>:<Role>" mappings.')}}function g(n){switch(n){case"azuread":return[{value:"none",label:(0,e.t)("auth-config.fields.client-authentication-none","None")},{value:"client_secret_post",label:"Client secret"},{value:"managed_identity",label:"Managed identity"},{value:"workload_identity",label:"Workload identity"}];default:return[{value:"none",label:"None"},{value:"client_secret_post",label:"Client secret"}]}}const M=({field:n,register:a,errors:r,watch:s,setValue:l,getValues:p,control:d,unregister:m,secretConfigured:A,provider:o})=>{const[v,y]=(0,b.useState)(A),Y=typeof n!="string",c=Y?n.name:n,J=Y?s(n.dependsOn):null,f=U(o)[c],Oe=(0,Pe.$j)();(0,b.useEffect)(()=>{Y&&(J||m(c))},[m,c,J,Y]);const ve=C=>Array.isArray(C)&&C.length>0&&"value"in C[0];if((0,b.useEffect)(()=>{if(f.defaultValue){const C=p(c),Q=f.options?.find(X=>X.value===(ve(C)?C[0].value:void 0));l(c,Q?.value||f.defaultValue.value)}},[]),!n)return console.log("missing field:",c),null;if(f.hidden||Y&&!s(n.dependsOn))return null;const F={label:f.label,required:!!f.validation?.required,invalid:!!r[c],error:f.validation?.message,description:f.description,defaultValue:f.defaultValue?.value};switch(f.type){case"text":return(0,t.jsx)(R.D,{...F,children:(0,t.jsx)(he.p,{...a(c,f.validation),type:f.type,id:c,autoComplete:"off"})},c);case"secret":return(0,t.jsx)(R.D,{...F,htmlFor:c,children:(0,t.jsx)(N.xI,{name:c,control:d,rules:f.validation,render:({field:{ref:X,value:q,...le}})=>(0,t.jsx)(Te.L4,{...le,autoComplete:"off",id:c,value:typeof q=="string"?q:"",isConfigured:v,onReset:()=>{y(!1),l(c,"")}})})},c);case"select":const C=s(c);let Q=f.options;return f.options?.length||(Q=Z(C)?C:[]),(0,t.jsx)(R.D,{...F,htmlFor:c,children:(0,t.jsx)(N.xI,{rules:f.validation,name:c,control:d,render:({field:{ref:X,onChange:q,...le},fieldState:{invalid:Ge}})=>(0,t.jsx)(De.l6,{...le,placeholder:f.placeholder,isMulti:f.multi,invalid:Ge,inputId:c,options:Q,allowCustomValue:!!f.allowCustomValue,defaultValue:f.defaultValue,onChange:q,onCreateOption:O=>{const xe={value:O,label:O};q([...Q||[],xe])}})})},c);case"switch":return(0,t.jsx)(R.D,{...F,children:(0,t.jsx)(_.d,{...a(c),id:c})},c);case"checkbox":return(0,t.jsx)(x.S,{...a(c),id:c,...F,className:(0,ee.css)({marginBottom:Oe.spacing(2)})},c);case"custom":return(0,t.jsx)(R.D,{...F,children:f.content?f.content(l):(0,t.jsx)(t.Fragment,{})},c);default:return console.error(`Unknown field type: ${f.type}`),null}},Ve={allowAssignGrafanaAdmin:!1,allowSignUp:!1,allowedDomains:[],allowedGroups:[],allowedOrganizations:[],apiUrl:"",authStyle:"",authUrl:"",autoLogin:!1,clientAuthentication:"",clientId:"",clientSecret:"",managedIdentityClientId:"",federatedCredentialAudience:"",workloadIdentityTokenFile:"",emailAttributeName:"",emailAttributePath:"",emptyScopes:!1,enabled:!1,extra:{},groupsAttributePath:"",hostedDomain:"",icon:"shield",name:"",roleAttributePath:"",roleAttributeStrict:!1,scopes:[],signoutRedirectUrl:"",skipOrgRoleSync:!1,teamIds:[],teamIdsAttributePath:"",teamsUrl:"",tlsClientCa:"",tlsClientCert:"",tlsClientKey:"",tlsSkipVerify:!1,tokenUrl:"",type:"",usePkce:!1,useRefreshToken:!1},Be=n=>{if(!n?.length)return[];if(Array.isArray(n))return n.map(a=>({label:a,value:a}));if(n.startsWith("[")&&n.endsWith("]"))try{return JSON.parse(n).map(a=>({label:a,value:a}))}catch{}return n.split(/[\s,]/).map(a=>({label:a,value:a}))};function $e(n){if(!n)return Ve;const a=Fe(n.provider),r=ze(U(n.provider),a),s={...n.settings};for(const l of r)s[l]=Be(s[l]);return s}const Ze=n=>JSON.stringify(n.map(({value:a})=>a)),Fe=n=>{const a=be()[n],r=["enabled"];return Object.values(a).reduce((s,l)=>[...s,...l.fields.map(p=>typeof p=="string"?p:p.name)],r)};function We(n,a){let r=n;const s=Fe(a),l=ze(U(a),s),p=Object.keys(r).filter(d=>s.includes(d)).reduce((d,m)=>({...d,[m]:r[m]}),{});for(const d of l){const m=r[d];m&&(Z(m)?p[d]=Ze(m):Z([m])&&(p[d]=m.value))}return p}function ze(n,a){return Object.entries(n).filter(([r,s])=>a.includes(r)&&s.type==="select").map(([r])=>r)}const ye=(0,oe.J7)(),He=({config:n,provider:a,isLoading:r})=>{const{register:s,handleSubmit:l,control:p,reset:d,watch:m,setValue:A,getValues:o,unregister:v,formState:{errors:y,dirtyFields:Y,isSubmitted:c}}=(0,N.mN)({defaultValues:$e(n),mode:"onSubmit",reValidateMode:"onChange"}),[J,f]=(0,b.useState)(!1),[Oe,ve]=(0,b.useState)(!1),F=c&&!Oe,C=(0,b.useMemo)(()=>be()[a],[a]),[Q,X]=(0,b.useState)(!1),q=(0,t.jsx)(fe.W,{children:(0,t.jsx)(fe.W.Item,{label:(0,e.t)("auth-config.provider-config-form.additional-actions-menu.label-reset-to-default-values","Reset to default values"),icon:"history-alt",onClick:()=>{X(!0)}})}),le=async I=>{f(!0),ve(!1);const z=We(I,a);try{await(0,V.AI)().put(`/api/v1/sso-settings/${a}`,{id:n?.id,provider:n?.provider,settings:{...z}},{showErrorAlert:!1}),(0,k.rR)("grafana_authentication_ssosettings_saved",{provider:a,enabled:z.enabled}),ye.publish({type:P.r1.alertSuccess.name,payload:["Settings saved"]}),d(I),setTimeout(()=>{ue.Ny.push("/admin/authentication")},300)}catch(L){let Ee="";(0,V.NF)(L)?Ee=L.data.message:L instanceof Error&&(Ee=L.message),ye.publish({type:P.r1.alertError.name,payload:[Ee]}),ve(!0),f(!1)}},Ge=async()=>{try{await(0,V.AI)().delete(`/api/v1/sso-settings/${a}`,void 0,{showSuccessAlert:!1}),(0,k.rR)("grafana_authentication_ssosettings_removed",{provider:a}),ye.publish({type:P.r1.alertSuccess.name,payload:["Settings reset to defaults"]}),setTimeout(()=>{ue.Ny.push("/admin/authentication")})}catch(I){let z="";(0,V.NF)(I)?z=I.data.message:I instanceof Error&&(z=I.message),ye.publish({type:P.r1.alertError.name,payload:[z]})}},O=n?.settings.enabled,xe=I=>{(0,k.rR)("grafana_authentication_ssosettings_save_attempt",{provider:a,enabled:I?!O:O}),I&&A("enabled",!O)};return(0,t.jsxs)(ce.Y.Contents,{isLoading:r,children:[(0,t.jsxs)("form",{onSubmit:l(le),style:{maxWidth:"600px"},children:[(0,t.jsx)(we.F,{confirmRedirect:!!Object.keys(Y).length&&!F,onDiscard:()=>{(0,k.rR)("grafana_authentication_ssosettings_abandoned",{provider:a}),d()}}),(0,t.jsx)(R.D,{label:(0,e.t)("auth-config.provider-config-form.label-enabled","Enabled"),hidden:!0,children:(0,t.jsx)(_.d,{...s("enabled"),id:"enabled",label:(0,e.t)("auth-config.provider-config-form.enabled-label-enabled","Enabled")})}),(0,t.jsx)(h.B,{gap:2,direction:"column",children:C.filter(I=>!I.hidden).map((I,z)=>(0,t.jsx)(Ie.M,{label:I.name,isOpen:z===0,children:I.fields.filter(L=>typeof L!="string"?!L.hidden:!0).map(L=>(0,t.jsx)(M,{field:L,control:p,errors:y,setValue:A,getValues:o,register:s,watch:m,unregister:v,provider:a,secretConfigured:!!n?.settings.clientSecret},typeof L=="string"?L:L.name))},I.name))}),(0,t.jsx)(je.a,{display:"flex",gap:2,marginTop:5,children:(0,t.jsxs)(h.B,{alignItems:"center",gap:2,children:[(0,t.jsx)(B.$n,{type:"submit",disabled:J,onClick:()=>xe(!0),variant:O?"secondary":void 0,children:J?O?(0,e.t)("auth-config.provider-config-form.disabling","Disabling..."):(0,e.t)("auth-config.provider-config-form.saving","Saving..."):O?(0,e.t)("auth-config.provider-config-form.disable","Disable"):(0,e.t)("auth-config.provider-config-form.save-and-enable","Save and enable")}),(0,t.jsx)(B.$n,{type:"submit",disabled:J,variant:"secondary",onClick:()=>xe(!1),children:J?(0,e.t)("auth-config.provider-config-form.saving","Saving..."):(0,e.t)("auth-config.provider-config-form.save","Save")}),(0,t.jsx)(B.z9,{href:"/admin/authentication",variant:"secondary",children:(0,t.jsx)(e.x6,{i18nKey:"auth-config.provider-config-form.discard",children:"Discard"})}),(0,t.jsx)(Me.m,{overlay:q,placement:"bottom-start",children:(0,t.jsx)(Ce.K,{tooltip:(0,e.t)("auth-config.provider-config-form.tooltip-more-actions","More actions"),title:(0,e.t)("auth-config.provider-config-form.title-more-actions","More actions"),tooltipPlacement:"top",size:"md",variant:"secondary",name:"ellipsis-v",hidden:n?.source==="system"})})]})})]}),Q&&(0,t.jsx)(Le.u,{isOpen:!0,icon:"trash-alt",title:(0,e.t)("auth-config.provider-config-form.title-reset","Reset"),body:(0,t.jsxs)(h.B,{direction:"column",gap:3,children:[(0,t.jsx)("span",{children:(0,t.jsx)(e.x6,{i18nKey:"auth-config.provider-config-form.reset-configuration",children:"Are you sure you want to reset this configuration?"})}),(0,t.jsx)("small",{children:(0,t.jsx)(e.x6,{i18nKey:"auth-config.provider-config-form.reset-configuration-description",children:"After resetting these settings Grafana will use the provider configuration from the system (config file/environment variables) if any."})})]}),confirmText:(0,e.t)("auth-config.provider-config-form.confirmText-reset","Reset"),onDismiss:()=>X(!1),onConfirm:async()=>{await Ge(),X(!1)}})]})};var Ke=i(22011),Ye=i(35991);const Je=n=>{if(!n)return{text:(0,e.t)("auth-config.get-page-nav.text.authentication","Authentication"),subTitle:(0,e.t)("auth-config.get-page-nav.subTitle.configure-authentication-providers","Configure authentication providers"),icon:"shield",id:"authentication"};const a=Ke.L[n.provider][1]||n.provider.toUpperCase();return{text:a||"",subTitle:`To configure ${a} OAuth2 you must register your application with ${a}. The provider will generate a Client ID and Client Secret for you to use.`,icon:n.settings.icon||"shield",id:n.provider}},Ne=()=>{const n=(0,ae.wA)(),{isLoading:a,providers:r}=(0,ae.d4)(d=>d.authConfig),{provider:s=""}=(0,G.g)(),l=r.find(d=>d.provider===s);if((0,b.useEffect)(()=>{n((0,Ye.TD)(s))},[n,s]),!l||!l.provider||!Ke.L[l.provider])return(0,t.jsx)(Se.H,{});const p=Je(l);return(0,t.jsx)(ce.Y,{navId:"authentication",pageNav:p,renderTitle:d=>(0,t.jsxs)(h.B,{gap:2,alignItems:"center",children:[(0,t.jsx)(Ae.E,{variant:"h1",children:d}),(0,t.jsx)(K.E,{text:l.settings.enabled?(0,e.t)("auth-config.provider-config-page.text-badge-enabled","Enabled"):(0,e.t)("auth-config.provider-config-page.text-badge-not-enabled","Not enabled"),color:l.settings.enabled?"green":"blue",icon:l.settings.enabled?"check":void 0})]}),children:(0,t.jsx)(He,{config:l,isLoading:a,provider:s})})},Qe=Ne},22011:(de,w,i)=>{i.d(w,{L:()=>b,o:()=>t});const t="admin/authentication/",b={github:["github","GitHub"],gitlab:["gitlab","GitLab"],google:["google","Google"],generic_oauth:["lock","Generic OAuth"],grafana_com:["grafana","Grafana.com"],azuread:["microsoft","Azure AD"],okta:["okta","Okta"]}},74997:(de,w,i)=>{i.d(w,{K:()=>G,h:()=>b});var t=i(22011);function b(e){return t.o+(e.configPath||e.id)}const G=e=>{if(typeof e!="string")return!1;try{return new URL(e).protocol.includes("http")}catch{return!1}}},41391:(de,w,i)=>{i.d(w,{A:()=>G});const t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function b(e){return typeof e=="string"&&t.test(e)}const G=b}}]);

//# sourceMappingURL=AdminAuthentication.2af6ae274ad1d948c53a.js.map