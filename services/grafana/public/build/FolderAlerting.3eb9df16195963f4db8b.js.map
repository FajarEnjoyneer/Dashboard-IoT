{"version":3,"file":"FolderAlerting.3eb9df16195963f4db8b.js","mappings":"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","sources":["webpack://grafana/./public/app/features/alerting/unified/AlertsFolderView.tsx","webpack://grafana/./public/app/features/browse-dashboards/BrowseFolderAlertingPage.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/DeleteModal.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/MoveModal.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/DeleteProvisionedFolderForm.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/FolderActionsButton.tsx","webpack://grafana/./public/app/features/browse-dashboards/hooks/useProvisionedFolderFormData.ts","webpack://grafana/./public/app/features/browse-dashboards/permissions.ts"],"sourcesContent":["import { css } from '@emotion/css';\nimport { orderBy } from 'lodash';\nimport { useState } from 'react';\nimport { useDebounce } from 'react-use';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Card, FilterInput, Icon, Pagination, Select, Stack, TagList, useStyles2 } from '@grafana/ui';\nimport { DEFAULT_PER_PAGE_PAGINATION } from 'app/core/constants';\nimport { getQueryParamValue } from 'app/core/utils/query';\nimport { FolderDTO } from 'app/types/folders';\nimport { GrafanaRuleDefinition, RulerGrafanaRuleDTO } from 'app/types/unified-alerting-dto';\n\nimport { usePagination } from './hooks/usePagination';\nimport { useURLSearchParams } from './hooks/useURLSearchParams';\nimport { combineMatcherStrings, labelsMatchMatchers } from './utils/alertmanager';\nimport { GRAFANA_RULES_SOURCE_NAME } from './utils/datasource';\nimport { parsePromQLStyleMatcherLooseSafe } from './utils/matchers';\nimport { rulesNav } from './utils/navigation';\n\ninterface Props {\n  folder: FolderDTO;\n  rules: RulerGrafanaRuleDTO[];\n}\n\nenum SortOrder {\n  Ascending = 'alpha-asc',\n  Descending = 'alpha-desc',\n}\n\nconst sortOptions: Array<SelectableValue<SortOrder>> = [\n  { label: 'Alphabetically [A-Z]', value: SortOrder.Ascending },\n  { label: 'Alphabetically [Z-A]', value: SortOrder.Descending },\n];\n\nexport const AlertsFolderView = ({ folder, rules }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const onTagClick = (tagName: string) => {\n    const matchersString = combineMatcherStrings(labelFilter, tagName);\n    setLabelFilter(matchersString);\n  };\n\n  const { nameFilter, labelFilter, sortOrder, setNameFilter, setLabelFilter, setSortOrder } =\n    useAlertsFolderViewParams();\n\n  const filteredRules = filterAndSortRules(rules, nameFilter, labelFilter, sortOrder ?? SortOrder.Ascending);\n  const hasNoResults = filteredRules.length === 0;\n\n  const { page, numberOfPages, onPageChange, pageItems } = usePagination(filteredRules, 1, DEFAULT_PER_PAGE_PAGINATION);\n\n  return (\n    <div className={styles.container}>\n      <Stack direction=\"column\" gap={3}>\n        <FilterInput\n          value={nameFilter}\n          onChange={setNameFilter}\n          placeholder={t(\n            'alerting.alerts-folder-view.name-filter-placeholder-search-alert-rules-by-name',\n            'Search alert rules by name'\n          )}\n          data-testid=\"name-filter\"\n        />\n        <Stack direction=\"row\">\n          <Select<SortOrder>\n            value={sortOrder}\n            onChange={({ value }) => value && setSortOrder(value)}\n            options={sortOptions}\n            width={25}\n            aria-label={t('alerting.alerts-folder-view.aria-label-sort', 'Sort')}\n            placeholder={t('alerting.alerts-folder-view.placeholder-sort-default-az', 'Sort (Default A-Z)')}\n            prefix={<Icon name={sortOrder === SortOrder.Ascending ? 'sort-amount-up' : 'sort-amount-down'} />}\n          />\n          <FilterInput\n            value={labelFilter}\n            onChange={setLabelFilter}\n            placeholder={t(\n              'alerting.alerts-folder-view.label-filter-placeholder-search-alerts-by-labels',\n              'Search alerts by labels'\n            )}\n            className={styles.filterLabelsInput}\n            data-testid=\"label-filter\"\n          />\n        </Stack>\n\n        <Stack direction=\"column\" gap={1}>\n          {pageItems.map(({ grafana_alert, labels = {} }) => (\n            <Card\n              key={grafana_alert.uid}\n              href={createGrafanaRuleViewLink(grafana_alert)}\n              className={styles.card}\n              data-testid=\"alert-card-row\"\n            >\n              <Card.Heading>{grafana_alert.title}</Card.Heading>\n              <Card.Tags>\n                <TagList\n                  onClick={onTagClick}\n                  tags={Object.entries(labels).map(([label, value]) => `${label}=${value}`)}\n                />\n              </Card.Tags>\n              <Card.Meta>\n                <div>\n                  <Icon name=\"folder\" /> {folder.title}\n                </div>\n              </Card.Meta>\n            </Card>\n          ))}\n        </Stack>\n        {hasNoResults && (\n          <div className={styles.noResults}>\n            <Trans i18nKey=\"alerting.alerts-folder-view.no-alert-rules-found\">No alert rules found</Trans>\n          </div>\n        )}\n        <div className={styles.pagination}>\n          <Pagination\n            currentPage={page}\n            numberOfPages={numberOfPages}\n            onNavigate={onPageChange}\n            hideWhenSinglePage={true}\n          />\n        </div>\n      </Stack>\n    </div>\n  );\n};\n\nenum AlertFolderViewParams {\n  nameFilter = 'nameFilter',\n  labelFilter = 'labelFilter',\n  sortOrder = 'sort',\n}\n\nfunction useAlertsFolderViewParams() {\n  const [searchParams, setSearchParams] = useURLSearchParams();\n\n  const [nameFilter, setNameFilter] = useState(searchParams.get(AlertFolderViewParams.nameFilter) ?? '');\n  const [labelFilter, setLabelFilter] = useState(searchParams.get(AlertFolderViewParams.labelFilter) ?? '');\n\n  const sortParam = searchParams.get(AlertFolderViewParams.sortOrder);\n  const defaultSortOrder = (() => {\n    if (sortParam === SortOrder.Ascending) {\n      return SortOrder.Ascending;\n    }\n    if (sortParam === SortOrder.Descending) {\n      return SortOrder.Descending;\n    }\n    return undefined;\n  })();\n  const [sortOrder, setSortOrder] = useState<SortOrder | undefined>(defaultSortOrder);\n\n  useDebounce(\n    () =>\n      setSearchParams(\n        {\n          [AlertFolderViewParams.nameFilter]: getQueryParamValue(nameFilter),\n          [AlertFolderViewParams.labelFilter]: getQueryParamValue(labelFilter),\n          [AlertFolderViewParams.sortOrder]: getQueryParamValue(sortOrder),\n        },\n        true\n      ),\n    400,\n    [nameFilter, labelFilter, sortOrder]\n  );\n\n  return { nameFilter, labelFilter, sortOrder, setNameFilter, setLabelFilter, setSortOrder };\n}\n\nfunction filterAndSortRules(\n  originalRules: RulerGrafanaRuleDTO[],\n  nameFilter: string,\n  labelFilter: string,\n  sortOrder: SortOrder\n) {\n  const matchers = parsePromQLStyleMatcherLooseSafe(labelFilter);\n  const rules = originalRules.filter((rule) => {\n    const nameMatch = rule.grafana_alert.title.toLowerCase().includes(nameFilter.toLowerCase());\n    const labelMatch = labelsMatchMatchers(rule.labels ?? {}, matchers);\n    return nameMatch && labelMatch;\n  });\n\n  return orderBy(rules, (rule) => rule.grafana_alert.title.toLowerCase(), [\n    sortOrder === SortOrder.Ascending ? 'asc' : 'desc',\n  ]);\n}\n\nfunction createGrafanaRuleViewLink(ruleDefinition: GrafanaRuleDefinition): string {\n  return rulesNav.detailsPageLink(\n    GRAFANA_RULES_SOURCE_NAME,\n    {\n      uid: ruleDefinition.uid,\n      ruleSourceName: GRAFANA_RULES_SOURCE_NAME,\n    },\n    undefined\n  );\n}\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  container: css({\n    padding: theme.spacing(1),\n  }),\n  card: css({\n    gridTemplateColumns: 'auto 1fr 2fr',\n    margin: 0,\n  }),\n  pagination: css({\n    alignSelf: 'center',\n  }),\n  filterLabelsInput: css({\n    flex: 1,\n    width: 'auto',\n    minWidth: '240px',\n  }),\n  noResults: css({\n    padding: theme.spacing(2),\n    backgroundColor: theme.colors.background.secondary,\n    fontStyle: 'italic',\n  }),\n});\n","import { useMemo } from 'react';\nimport { useParams } from 'react-router-dom-v5-compat';\n\nimport { t } from '@grafana/i18n';\nimport { Alert } from '@grafana/ui';\nimport { Page } from 'app/core/components/Page/Page';\nimport { buildNavModel, getAlertingTabID } from 'app/features/folders/state/navModel';\n\nimport { AlertsFolderView } from '../alerting/unified/AlertsFolderView';\nimport { alertRuleApi } from '../alerting/unified/api/alertRuleApi';\nimport { GRAFANA_RULER_CONFIG } from '../alerting/unified/api/featureDiscoveryApi';\nimport { stringifyErrorLike } from '../alerting/unified/utils/misc';\nimport { rulerRuleType } from '../alerting/unified/utils/rules';\n\nimport { useGetFolderQuery, useSaveFolderMutation } from './api/browseDashboardsAPI';\nimport { FolderActionsButton } from './components/FolderActionsButton';\n\nconst { useRulerNamespaceQuery } = alertRuleApi;\n\nexport function BrowseFolderAlertingPage() {\n  const { uid: folderUID = '' } = useParams();\n  const { data: folderDTO, isLoading: isFolderLoading } = useGetFolderQuery(folderUID);\n\n  const {\n    data: rulerNamespace = {},\n    isLoading: isRulerNamespaceLoading,\n    error: rulerNamespaceError,\n  } = useRulerNamespaceQuery({\n    rulerConfig: GRAFANA_RULER_CONFIG,\n    namespace: folderUID,\n  });\n\n  const [saveFolder] = useSaveFolderMutation();\n\n  const navModel = useMemo(() => {\n    if (!folderDTO) {\n      return undefined;\n    }\n    const model = buildNavModel(folderDTO);\n\n    // Set the \"Alerting\" tab to active\n    const alertingTabID = getAlertingTabID(folderDTO.uid);\n    const alertingTab = model.children?.find((child) => child.id === alertingTabID);\n    if (alertingTab) {\n      alertingTab.active = true;\n    }\n    return model;\n  }, [folderDTO]);\n\n  const onEditTitle = folderUID\n    ? async (newValue: string) => {\n        if (folderDTO) {\n          const result = await saveFolder({\n            ...folderDTO,\n            title: newValue,\n          });\n          if ('error' in result) {\n            throw result.error;\n          }\n        }\n      }\n    : undefined;\n\n  const isLoading = isFolderLoading || isRulerNamespaceLoading;\n  const folderRules = Object.values(rulerNamespace)\n    .flatMap((group) => group)\n    .flatMap((group) => group.rules)\n    .filter(rulerRuleType.grafana.rule);\n\n  return (\n    <Page\n      navId=\"dashboards/browse\"\n      pageNav={navModel}\n      onEditTitle={onEditTitle}\n      actions={<>{folderDTO && <FolderActionsButton folder={folderDTO} />}</>}\n    >\n      <Page.Contents isLoading={isLoading}>\n        {!folderDTO && (\n          <Alert\n            title={t('browse-dashboards.browse-folder-alerting-page.title-folder-not-found', 'Folder not found')}\n          />\n        )}\n        {!!rulerNamespaceError && (\n          <Alert\n            title={t('browse-dashboards.browse-folder-alerting-page.title-ruler-namespace-error', 'Cannot load rules')}\n            severity=\"error\"\n          >\n            {stringifyErrorLike(rulerNamespaceError)}\n          </Alert>\n        )}\n        {folderDTO && <AlertsFolderView folder={folderDTO} rules={folderRules} />}\n      </Page.Contents>\n    </Page>\n  );\n}\n\nexport default BrowseFolderAlertingPage;\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { Alert, ConfirmModal, Text, Space } from '@grafana/ui';\n\nimport { useGetAffectedItemsQuery } from '../../api/browseDashboardsAPI';\nimport { DashboardTreeSelection } from '../../types';\n\nimport { DescendantCount } from './DescendantCount';\n\nexport interface Props {\n  isOpen: boolean;\n  onConfirm: () => Promise<void>;\n  onDismiss: () => void;\n  selectedItems: DashboardTreeSelection;\n}\n\nexport const DeleteModal = ({ onConfirm, onDismiss, selectedItems, ...props }: Props) => {\n  const { data } = useGetAffectedItemsQuery(selectedItems);\n  const deleteIsInvalid = Boolean(data && (data.alertRule || data.libraryPanel));\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const onDelete = async () => {\n    reportInteraction('grafana_manage_dashboards_delete_clicked', {\n      item_counts: {\n        dashboard: Object.keys(selectedItems.dashboard).length,\n        folder: Object.keys(selectedItems.folder).length,\n      },\n      source: 'browse_dashboards',\n      restore_enabled: false,\n    });\n    setIsDeleting(true);\n    try {\n      await onConfirm();\n      setIsDeleting(false);\n      onDismiss();\n    } catch {\n      setIsDeleting(false);\n    }\n  };\n\n  return (\n    <ConfirmModal\n      body={\n        <>\n          {config.featureToggles.restoreDashboards && (\n            <>\n              <Text element=\"p\">\n                <Trans i18nKey=\"browse-dashboards.action.delete-modal-restore-dashboards-text\">\n                  This action will delete the selected folders immediately but the selected dashboards will be marked\n                  for deletion in 30 days. Your organization administrator can restore the dashboards anytime before the\n                  30 days expire. Folders cannot be restored.\n                </Trans>\n              </Text>\n              <Space v={2} />\n            </>\n          )}\n          <Text element=\"p\">\n            <Trans i18nKey=\"browse-dashboards.action.delete-modal-text\">\n              This action will delete the following content:\n            </Trans>\n          </Text>\n          <DescendantCount selectedItems={selectedItems} />\n          <Space v={2} />\n        </>\n      }\n      description={\n        <>\n          {deleteIsInvalid ? (\n            <Alert\n              severity=\"warning\"\n              title={t('browse-dashboards.action.delete-modal-invalid-title', 'Cannot delete folder')}\n            >\n              <Trans i18nKey=\"browse-dashboards.action.delete-modal-invalid-text\">\n                One or more folders contain library panels or alert rules. Delete these first in order to proceed.\n              </Trans>\n            </Alert>\n          ) : null}\n        </>\n      }\n      confirmationText={t('browse-dashboards.action.confirmation-text', 'Delete')}\n      confirmText={\n        isDeleting\n          ? t('browse-dashboards.action.deleting', 'Deleting...')\n          : t('browse-dashboards.action.delete-button', 'Delete')\n      }\n      onDismiss={onDismiss}\n      onConfirm={onDelete}\n      title={t('browse-dashboards.action.delete-modal-title', 'Delete')}\n      {...props}\n      disabled={deleteIsInvalid}\n    />\n  );\n};\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { Alert, Button, Field, Modal, Text, Space } from '@grafana/ui';\nimport { FolderPicker } from 'app/core/components/Select/FolderPicker';\n\nimport { DashboardTreeSelection } from '../../types';\n\nimport { DescendantCount } from './DescendantCount';\n\nexport interface Props {\n  isOpen: boolean;\n  onConfirm: (targetFolderUid: string) => Promise<void>;\n  onDismiss: () => void;\n  selectedItems: DashboardTreeSelection;\n}\n\nexport const MoveModal = ({ onConfirm, onDismiss, selectedItems, ...props }: Props) => {\n  const [moveTarget, setMoveTarget] = useState<string>();\n  const [isMoving, setIsMoving] = useState(false);\n\n  const selectedFolders = Object.keys(selectedItems.folder).filter((uid) => selectedItems.folder[uid]);\n\n  const onMove = async () => {\n    if (moveTarget !== undefined) {\n      setIsMoving(true);\n      try {\n        await onConfirm(moveTarget);\n        setIsMoving(false);\n        onDismiss();\n      } catch {\n        setIsMoving(false);\n      }\n    }\n  };\n\n  return (\n    <Modal title={t('browse-dashboards.action.move-modal-title', 'Move')} onDismiss={onDismiss} {...props}>\n      {selectedFolders.length > 0 && (\n        <Alert\n          severity=\"info\"\n          title={t('browse-dashboards.action.move-modal-alert', 'Moving this item may change its permissions.')}\n        />\n      )}\n\n      <Text element=\"p\">\n        <Trans i18nKey=\"browse-dashboards.action.move-modal-text\">This action will move the following content:</Trans>\n      </Text>\n\n      <DescendantCount selectedItems={selectedItems} />\n\n      <Space v={3} />\n\n      <Field label={t('browse-dashboards.action.move-modal-field-label', 'Folder name')}>\n        <FolderPicker value={moveTarget} excludeUIDs={selectedFolders} onChange={setMoveTarget} />\n      </Field>\n\n      <Modal.ButtonRow>\n        <Button onClick={onDismiss} variant=\"secondary\" fill=\"outline\">\n          <Trans i18nKey=\"browse-dashboards.action.cancel-button\">Cancel</Trans>\n        </Button>\n        <Button disabled={moveTarget === undefined || isMoving} onClick={onMove} variant=\"primary\">\n          {isMoving\n            ? t('browse-dashboards.action.moving', 'Moving...')\n            : t('browse-dashboards.action.move-button', 'Move')}\n        </Button>\n      </Modal.ButtonRow>\n    </Modal>\n  );\n};\n","import { useEffect } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { getAppEvents } from '@grafana/runtime';\nimport { Box, Button, Stack } from '@grafana/ui';\nimport { Folder } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView, useDeleteRepositoryFilesWithPathMutation } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath } from 'app/features/apiserver/types';\nimport { ResourceEditFormSharedFields } from 'app/features/dashboard-scene/components/Provisioned/ResourceEditFormSharedFields';\nimport { BaseProvisionedFormData } from 'app/features/dashboard-scene/saving/shared';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { useProvisionedFolderFormData } from '../hooks/useProvisionedFolderFormData';\n\nimport { DescendantCount } from './BrowseActions/DescendantCount';\nimport { getFolderURL } from './utils';\n\ninterface FormProps extends DeleteProvisionedFolderFormProps {\n  initialValues: BaseProvisionedFormData;\n  repository?: RepositoryView;\n  workflowOptions: Array<{ label: string; value: string }>;\n  folder?: Folder;\n  isGitHub: boolean;\n}\n\ninterface DeleteProvisionedFolderFormProps {\n  parentFolder?: FolderDTO;\n  onDismiss?: () => void;\n}\n\nfunction FormContent({\n  initialValues,\n  parentFolder,\n  repository,\n  workflowOptions,\n  folder,\n  isGitHub,\n  onDismiss,\n}: FormProps) {\n  const resourceId = parentFolder?.uid || '';\n\n  const [deleteRepoFile, request] = useDeleteRepositoryFilesWithPathMutation();\n\n  const methods = useForm<BaseProvisionedFormData>({ defaultValues: initialValues });\n  const { handleSubmit, watch } = methods;\n  const workflow = watch('workflow');\n\n  const handleSubmitForm = async ({ repo, path, comment, ref }: BaseProvisionedFormData) => {\n    if (!repository?.name) {\n      return;\n    }\n\n    const commitMessage = comment || `Delete folder: ${folder?.metadata?.annotations?.[AnnoKeySourcePath]}`;\n    const targetRef = workflow === 'write' ? undefined : ref;\n\n    deleteRepoFile({\n      name: repo,\n      path: `${path}/`,\n      ref: targetRef,\n      message: commitMessage,\n    });\n  };\n\n  // TODO: move to a hook if this useEffect shared mostly the same logic as in NewProvisionedFolderForm\n  useEffect(() => {\n    if (request.isSuccess && repository) {\n      if (workflow === 'branch') {\n        // TODO: handle display banner https://github.com/grafana/git-ui-sync-project/issues/300\n        // TODO: implement when BE is ready\n        return;\n      }\n\n      if (workflow === 'write') {\n        getAppEvents().publish({\n          type: AppEvents.alertSuccess.name,\n          payload: [\n            t(\n              'browse-dashboards.delete-provisioned-folder-form.alert-folder-deleted-successfully',\n              'Folder deleted successfully'\n            ),\n          ],\n        });\n        // Navigate back to parent folder if it exists, otherwise go to dashboards root\n        if (parentFolder?.parentUid) {\n          window.location.href = getFolderURL(parentFolder.parentUid);\n        } else {\n          window.location.href = '/dashboards';\n        }\n      }\n    }\n\n    if (request.isError) {\n      getAppEvents().publish({\n        type: AppEvents.alertError.name,\n        payload: [\n          t('browse-dashboards.delete-provisioned-folder-form.api-error', 'Failed to delete folder'),\n          request.error,\n        ],\n      });\n      return;\n    }\n  }, [request, repository, workflow, parentFolder]);\n\n  return (\n    <FormProvider {...methods}>\n      <form onSubmit={handleSubmit(handleSubmitForm)}>\n        <Stack direction=\"column\" gap={2}>\n          <Box paddingBottom={2}>\n            <Trans i18nKey=\"browse-dashboards.delete-provisioned-folder-form.delete-warning\">\n              This will delete this folder and all its descendants. In total, this will affect:\n            </Trans>\n            <DescendantCount\n              selectedItems={{\n                folder: { [resourceId]: true },\n                dashboard: {},\n                panel: {},\n                $all: false,\n              }}\n            />\n          </Box>\n\n          <ResourceEditFormSharedFields\n            resourceType=\"folder\"\n            isNew={false}\n            workflow={workflow}\n            workflowOptions={workflowOptions}\n            isGitHub={isGitHub}\n          />\n\n          {/* Delete / Cancel button */}\n          <Stack gap={2}>\n            <Button type=\"submit\" disabled={request.isLoading} variant=\"destructive\">\n              {request.isLoading\n                ? t('browse-dashboards.delete-provisioned-folder-form.button-deleting', 'Deleting...')\n                : t('browse-dashboards.delete-provisioned-folder-form.button-delete', 'Delete')}\n            </Button>\n            <Button variant=\"secondary\" fill=\"outline\" onClick={onDismiss}>\n              <Trans i18nKey=\"browse-dashboards.delete-provisioned-folder-form.button-cancel\">Cancel</Trans>\n            </Button>\n          </Stack>\n        </Stack>\n      </form>\n    </FormProvider>\n  );\n}\n\nexport function DeleteProvisionedFolderForm({ parentFolder, onDismiss }: DeleteProvisionedFolderFormProps) {\n  const { workflowOptions, isGitHub, repository, folder, initialValues } = useProvisionedFolderFormData({\n    folderUid: parentFolder?.uid,\n    action: 'delete',\n    title: parentFolder?.title,\n  });\n\n  if (!initialValues) {\n    return null;\n  }\n\n  return (\n    <FormContent\n      parentFolder={parentFolder}\n      onDismiss={onDismiss}\n      initialValues={initialValues}\n      repository={repository}\n      workflowOptions={workflowOptions}\n      folder={folder}\n      isGitHub={isGitHub}\n    />\n  );\n}\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config, locationService, reportInteraction } from '@grafana/runtime';\nimport { Button, Drawer, Dropdown, Icon, Menu, MenuItem } from '@grafana/ui';\nimport { Permissions } from 'app/core/components/AccessControl';\nimport { appEvents } from 'app/core/core';\nimport { ShowModalReactEvent } from 'app/types/events';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { ManagerKind } from '../../apiserver/types';\nimport { useDeleteFolderMutation, useMoveFolderMutation } from '../api/browseDashboardsAPI';\nimport { getFolderPermissions } from '../permissions';\n\nimport { DeleteModal } from './BrowseActions/DeleteModal';\nimport { MoveModal } from './BrowseActions/MoveModal';\nimport { DeleteProvisionedFolderForm } from './DeleteProvisionedFolderForm';\n\ninterface Props {\n  folder: FolderDTO;\n}\n\nexport function FolderActionsButton({ folder }: Props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [showPermissionsDrawer, setShowPermissionsDrawer] = useState(false);\n  const [showDeleteProvisionedFolderDrawer, setShowDeleteProvisionedFolderDrawer] = useState(false);\n  const [moveFolder] = useMoveFolderMutation();\n  const [deleteFolder] = useDeleteFolderMutation();\n\n  const { canEditFolders, canDeleteFolders, canViewPermissions, canSetPermissions } = getFolderPermissions(folder);\n  const isProvisionedFolder = folder.managedBy === ManagerKind.Repo;\n  // Can only move folders when nestedFolders is enabled and the folder is not provisioned\n  const canMoveFolder = config.featureToggles.nestedFolders && canEditFolders && !isProvisionedFolder;\n\n  const onMove = async (destinationUID: string) => {\n    await moveFolder({ folder, destinationUID });\n    reportInteraction('grafana_manage_dashboards_item_moved', {\n      item_counts: {\n        folder: 1,\n        dashboard: 0,\n      },\n      source: 'folder_actions',\n    });\n  };\n\n  const onDelete = async () => {\n    await deleteFolder(folder);\n    reportInteraction('grafana_manage_dashboards_item_deleted', {\n      item_counts: {\n        folder: 1,\n        dashboard: 0,\n      },\n      source: 'folder_actions',\n    });\n    const { parents } = folder;\n    const parentUrl = parents && parents.length ? parents[parents.length - 1].url : '/dashboards';\n    locationService.push(parentUrl);\n  };\n\n  const showMoveModal = () => {\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: MoveModal,\n        props: {\n          selectedItems: {\n            folder: { [folder.uid]: true },\n            dashboard: {},\n            panel: {},\n            $all: false,\n          },\n          onConfirm: onMove,\n        },\n      })\n    );\n  };\n\n  const showDeleteModal = () => {\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: DeleteModal,\n        props: {\n          selectedItems: {\n            folder: { [folder.uid]: true },\n            dashboard: {},\n            panel: {},\n            $all: false,\n          },\n          onConfirm: onDelete,\n        },\n      })\n    );\n  };\n\n  const showDeleteProvisionedModal = () => {\n    setShowDeleteProvisionedFolderDrawer(true);\n  };\n\n  const managePermissionsLabel = t('browse-dashboards.folder-actions-button.manage-permissions', 'Manage permissions');\n  const moveLabel = t('browse-dashboards.folder-actions-button.move', 'Move');\n  const deleteLabel = t('browse-dashboards.folder-actions-button.delete', 'Delete');\n\n  const menu = (\n    <Menu>\n      {canViewPermissions && <MenuItem onClick={() => setShowPermissionsDrawer(true)} label={managePermissionsLabel} />}\n      {canMoveFolder && <MenuItem onClick={showMoveModal} label={moveLabel} />}\n      {/* TODO: remove isProvisionedFolder check once BE folder delete flow is complete */}\n      {canDeleteFolders && !isProvisionedFolder && (\n        <MenuItem\n          destructive\n          onClick={isProvisionedFolder ? showDeleteProvisionedModal : showDeleteModal}\n          label={deleteLabel}\n        />\n      )}\n    </Menu>\n  );\n\n  if (!canViewPermissions && !canMoveFolder && !canDeleteFolders) {\n    return null;\n  }\n\n  return (\n    <>\n      <Dropdown overlay={menu} onVisibleChange={setIsOpen}>\n        <Button variant=\"secondary\">\n          <Trans i18nKey=\"browse-dashboards.folder-actions-button.folder-actions\">Folder actions</Trans>\n          <Icon name={isOpen ? 'angle-up' : 'angle-down'} />\n        </Button>\n      </Dropdown>\n      {showPermissionsDrawer && (\n        <Drawer\n          title={t('browse-dashboards.action.manage-permissions-button', 'Manage permissions')}\n          subtitle={folder.title}\n          onClose={() => setShowPermissionsDrawer(false)}\n          size=\"md\"\n        >\n          <Permissions resource=\"folders\" resourceId={folder.uid} canSetPermissions={canSetPermissions} />\n        </Drawer>\n      )}\n      {showDeleteProvisionedFolderDrawer && (\n        <Drawer\n          title={t('browse-dashboards.action.delete-provisioned-folder', 'Delete provisioned folder')}\n          subtitle={folder.title}\n          onClose={() => setShowDeleteProvisionedFolderDrawer(false)}\n        >\n          <DeleteProvisionedFolderForm\n            parentFolder={folder}\n            onDismiss={() => setShowDeleteProvisionedFolderDrawer(false)}\n          />\n        </Drawer>\n      )}\n    </>\n  );\n}\n","import { useMemo } from 'react';\n\nimport { Folder } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath } from 'app/features/apiserver/types';\nimport { getDefaultWorkflow, getWorkflowOptions } from 'app/features/dashboard-scene/saving/provisioned/defaults';\nimport { generateTimestamp } from 'app/features/dashboard-scene/saving/provisioned/utils/timestamp';\nimport { useGetResourceRepositoryView } from 'app/features/provisioning/hooks/useGetResourceRepositoryView';\n\nimport { BaseProvisionedFormData } from '../../dashboard-scene/saving/shared';\n\nexport interface UseProvisionedFolderFormDataProps {\n  folderUid?: string;\n  action: 'create' | 'delete';\n  title?: string;\n}\n\nexport interface ProvisionedFolderFormDataResult {\n  repository?: RepositoryView;\n  folder?: Folder;\n  workflowOptions: Array<{ label: string; value: string }>;\n  isGitHub: boolean;\n  initialValues?: BaseProvisionedFormData;\n}\n\n/**\n * Hook for managing provisioned folder create/delete form data.\n */\nexport function useProvisionedFolderFormData({\n  folderUid,\n  action,\n  title,\n}: UseProvisionedFolderFormDataProps): ProvisionedFolderFormDataResult {\n  const { repository, folder, isLoading } = useGetResourceRepositoryView({ folderName: folderUid });\n\n  const workflowOptions = getWorkflowOptions(repository);\n  const isGitHub = repository?.type === 'github';\n  const timestamp = generateTimestamp();\n\n  const initialValues = useMemo(() => {\n    // Only create initial values when we have the data\n    if (!repository || isLoading) {\n      return undefined;\n    }\n\n    return {\n      title: title || '',\n      comment: '',\n      ref: `folder/${timestamp}`,\n      repo: repository.name || '',\n      path: folder?.metadata?.annotations?.[AnnoKeySourcePath] || '',\n      workflow: getDefaultWorkflow(repository),\n    };\n  }, [repository, folder, title, isLoading, timestamp]);\n\n  return {\n    repository,\n    folder,\n    workflowOptions,\n    isGitHub,\n    initialValues,\n  };\n}\n","import { config } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\nimport { AccessControlAction } from 'app/types/accessControl';\nimport { FolderDTO } from 'app/types/folders';\n\nfunction checkFolderPermission(action: AccessControlAction, folderDTO?: FolderDTO) {\n  return folderDTO ? contextSrv.hasPermissionInMetadata(action, folderDTO) : contextSrv.hasPermission(action);\n}\n\nfunction checkCanCreateFolders(folderDTO?: FolderDTO) {\n  // Can only create a folder if we have permissions and either we're at root or nestedFolders is enabled\n  if (folderDTO && folderDTO.uid !== 'general' && !config.featureToggles.nestedFolders) {\n    return false;\n  }\n\n  return checkFolderPermission(AccessControlAction.FoldersCreate, folderDTO);\n}\n\nexport function getFolderPermissions(folderDTO?: FolderDTO) {\n  const canCreateDashboards = checkFolderPermission(AccessControlAction.DashboardsCreate, folderDTO);\n  const canCreateFolders = checkCanCreateFolders(folderDTO);\n  const canDeleteFolders = checkFolderPermission(AccessControlAction.FoldersDelete, folderDTO);\n  const canEditDashboards = checkFolderPermission(AccessControlAction.DashboardsWrite, folderDTO);\n  const canEditFolders = checkFolderPermission(AccessControlAction.FoldersWrite, folderDTO);\n  const canSetPermissions = checkFolderPermission(AccessControlAction.FoldersPermissionsWrite, folderDTO);\n  const canViewPermissions = checkFolderPermission(AccessControlAction.FoldersPermissionsRead, folderDTO);\n\n  return {\n    canCreateDashboards,\n    canCreateFolders,\n    canDeleteFolders,\n    canEditDashboards,\n    canEditFolders,\n    canSetPermissions,\n    canViewPermissions,\n  };\n}\n"],"names":["SortOrder","sortOptions","AlertsFolderView","folder","rules","styles","getStyles","onTagClick","tagName","matchersString","labelFilter","setLabelFilter","nameFilter","sortOrder","setNameFilter","setSortOrder","useAlertsFolderViewParams","filteredRules","filterAndSortRules","hasNoResults","page","numberOfPages","onPageChange","pageItems","usePagination","Stack","FilterInput","Select","value","Icon","grafana_alert","labels","Card","createGrafanaRuleViewLink","TagList","label","Pagination","AlertFolderViewParams","searchParams","setSearchParams","useURLSearchParams","sortParam","defaultSortOrder","useDebounce","originalRules","matchers","rule","nameMatch","labelMatch","ruleDefinition","theme","useRulerNamespaceQuery","alertRuleApi","BrowseFolderAlertingPage","folderUID","folderDTO","isFolderLoading","rulerNamespace","isRulerNamespaceLoading","rulerNamespaceError","saveFolder","navModel","model","alertingTabID","alertingTab","child","onEditTitle","newValue","result","isLoading","folderRules","group","Page","FolderActionsButton","Alert","DeleteModal","onConfirm","onDismiss","selectedItems","props","data","deleteIsInvalid","isDeleting","setIsDeleting","onDelete","MoveModal","moveTarget","setMoveTarget","isMoving","setIsMoving","selectedFolders","uid","onMove","FormContent","initialValues","parentFolder","repository","workflowOptions","isGitHub","resourceId","deleteRepoFile","request","methods","handleSubmit","watch","workflow","handleSubmitForm","repo","path","comment","ref","commitMessage","targetRef","Box","DescendantCount","ResourceEditFormSharedFields","Button","DeleteProvisionedFolderForm","useProvisionedFolderFormData","isOpen","setIsOpen","showPermissionsDrawer","setShowPermissionsDrawer","showDeleteProvisionedFolderDrawer","setShowDeleteProvisionedFolderDrawer","moveFolder","deleteFolder","canEditFolders","canDeleteFolders","canViewPermissions","canSetPermissions","isProvisionedFolder","canMoveFolder","config","destinationUID","parents","parentUrl","showMoveModal","showDeleteModal","showDeleteProvisionedModal","managePermissionsLabel","moveLabel","deleteLabel","menu","Menu","MenuItem","Dropdown","Drawer","folderUid","action","title","timestamp","checkFolderPermission","checkCanCreateFolders","getFolderPermissions","canCreateDashboards","canCreateFolders","canEditDashboards"],"sourceRoot":""}