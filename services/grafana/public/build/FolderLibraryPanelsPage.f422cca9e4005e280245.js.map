{"version":3,"file":"FolderLibraryPanelsPage.f422cca9e4005e280245.js","mappings":"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","sources":["webpack://grafana/./public/app/features/browse-dashboards/BrowseFolderLibraryPanelsPage.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/DeleteModal.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/MoveModal.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/DeleteProvisionedFolderForm.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/FolderActionsButton.tsx","webpack://grafana/./public/app/features/browse-dashboards/hooks/useProvisionedFolderFormData.ts","webpack://grafana/./public/app/features/browse-dashboards/permissions.ts","webpack://grafana/./public/app/features/library-panels/components/OpenLibraryPanelModal/OpenLibraryPanelModal.tsx"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { useParams } from 'react-router-dom-v5-compat';\n\nimport { Page } from 'app/core/components/Page/Page';\n\nimport { GrafanaRouteComponentProps } from '../../core/navigation/types';\nimport { FolderActionsButton } from '../browse-dashboards/components/FolderActionsButton';\nimport { buildNavModel, getLibraryPanelsTabID } from '../folders/state/navModel';\nimport { LibraryPanelsSearch } from '../library-panels/components/LibraryPanelsSearch/LibraryPanelsSearch';\nimport { OpenLibraryPanelModal } from '../library-panels/components/OpenLibraryPanelModal/OpenLibraryPanelModal';\nimport { LibraryElementDTO } from '../library-panels/types';\n\nimport { useGetFolderQuery, useSaveFolderMutation } from './api/browseDashboardsAPI';\n\nexport interface OwnProps extends GrafanaRouteComponentProps<{ uid: string }> {}\n\nexport function BrowseFolderLibraryPanelsPage() {\n  const { uid: folderUID = '' } = useParams();\n  const { data: folderDTO } = useGetFolderQuery(folderUID);\n  const [selected, setSelected] = useState<LibraryElementDTO | undefined>(undefined);\n  const [saveFolder] = useSaveFolderMutation();\n\n  const navModel = useMemo(() => {\n    if (!folderDTO) {\n      return undefined;\n    }\n    const model = buildNavModel(folderDTO);\n\n    // Set the \"Library panels\" tab to active\n    const libraryPanelsTabID = getLibraryPanelsTabID(folderDTO.uid);\n    const libraryPanelsTab = model.children?.find((child) => child.id === libraryPanelsTabID);\n    if (libraryPanelsTab) {\n      libraryPanelsTab.active = true;\n    }\n    return model;\n  }, [folderDTO]);\n\n  const onEditTitle = folderUID\n    ? async (newValue: string) => {\n        if (folderDTO) {\n          const result = await saveFolder({\n            ...folderDTO,\n            title: newValue,\n          });\n          if ('error' in result) {\n            throw result.error;\n          }\n        }\n      }\n    : undefined;\n\n  return (\n    <Page\n      navId=\"dashboards/browse\"\n      pageNav={navModel}\n      onEditTitle={onEditTitle}\n      actions={<>{folderDTO && <FolderActionsButton folder={folderDTO} />}</>}\n    >\n      <Page.Contents>\n        <LibraryPanelsSearch\n          onClick={setSelected}\n          currentFolderUID={folderUID}\n          showSecondaryActions\n          showSort\n          showPanelFilter\n        />\n        {selected ? <OpenLibraryPanelModal onDismiss={() => setSelected(undefined)} libraryPanel={selected} /> : null}\n      </Page.Contents>\n    </Page>\n  );\n}\n\nexport default BrowseFolderLibraryPanelsPage;\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { Alert, ConfirmModal, Text, Space } from '@grafana/ui';\n\nimport { useGetAffectedItemsQuery } from '../../api/browseDashboardsAPI';\nimport { DashboardTreeSelection } from '../../types';\n\nimport { DescendantCount } from './DescendantCount';\n\nexport interface Props {\n  isOpen: boolean;\n  onConfirm: () => Promise<void>;\n  onDismiss: () => void;\n  selectedItems: DashboardTreeSelection;\n}\n\nexport const DeleteModal = ({ onConfirm, onDismiss, selectedItems, ...props }: Props) => {\n  const { data } = useGetAffectedItemsQuery(selectedItems);\n  const deleteIsInvalid = Boolean(data && (data.alertRule || data.libraryPanel));\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const onDelete = async () => {\n    reportInteraction('grafana_manage_dashboards_delete_clicked', {\n      item_counts: {\n        dashboard: Object.keys(selectedItems.dashboard).length,\n        folder: Object.keys(selectedItems.folder).length,\n      },\n      source: 'browse_dashboards',\n      restore_enabled: false,\n    });\n    setIsDeleting(true);\n    try {\n      await onConfirm();\n      setIsDeleting(false);\n      onDismiss();\n    } catch {\n      setIsDeleting(false);\n    }\n  };\n\n  return (\n    <ConfirmModal\n      body={\n        <>\n          {config.featureToggles.restoreDashboards && (\n            <>\n              <Text element=\"p\">\n                <Trans i18nKey=\"browse-dashboards.action.delete-modal-restore-dashboards-text\">\n                  This action will delete the selected folders immediately but the selected dashboards will be marked\n                  for deletion in 30 days. Your organization administrator can restore the dashboards anytime before the\n                  30 days expire. Folders cannot be restored.\n                </Trans>\n              </Text>\n              <Space v={2} />\n            </>\n          )}\n          <Text element=\"p\">\n            <Trans i18nKey=\"browse-dashboards.action.delete-modal-text\">\n              This action will delete the following content:\n            </Trans>\n          </Text>\n          <DescendantCount selectedItems={selectedItems} />\n          <Space v={2} />\n        </>\n      }\n      description={\n        <>\n          {deleteIsInvalid ? (\n            <Alert\n              severity=\"warning\"\n              title={t('browse-dashboards.action.delete-modal-invalid-title', 'Cannot delete folder')}\n            >\n              <Trans i18nKey=\"browse-dashboards.action.delete-modal-invalid-text\">\n                One or more folders contain library panels or alert rules. Delete these first in order to proceed.\n              </Trans>\n            </Alert>\n          ) : null}\n        </>\n      }\n      confirmationText={t('browse-dashboards.action.confirmation-text', 'Delete')}\n      confirmText={\n        isDeleting\n          ? t('browse-dashboards.action.deleting', 'Deleting...')\n          : t('browse-dashboards.action.delete-button', 'Delete')\n      }\n      onDismiss={onDismiss}\n      onConfirm={onDelete}\n      title={t('browse-dashboards.action.delete-modal-title', 'Delete')}\n      {...props}\n      disabled={deleteIsInvalid}\n    />\n  );\n};\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { Alert, Button, Field, Modal, Text, Space } from '@grafana/ui';\nimport { FolderPicker } from 'app/core/components/Select/FolderPicker';\n\nimport { DashboardTreeSelection } from '../../types';\n\nimport { DescendantCount } from './DescendantCount';\n\nexport interface Props {\n  isOpen: boolean;\n  onConfirm: (targetFolderUid: string) => Promise<void>;\n  onDismiss: () => void;\n  selectedItems: DashboardTreeSelection;\n}\n\nexport const MoveModal = ({ onConfirm, onDismiss, selectedItems, ...props }: Props) => {\n  const [moveTarget, setMoveTarget] = useState<string>();\n  const [isMoving, setIsMoving] = useState(false);\n\n  const selectedFolders = Object.keys(selectedItems.folder).filter((uid) => selectedItems.folder[uid]);\n\n  const onMove = async () => {\n    if (moveTarget !== undefined) {\n      setIsMoving(true);\n      try {\n        await onConfirm(moveTarget);\n        setIsMoving(false);\n        onDismiss();\n      } catch {\n        setIsMoving(false);\n      }\n    }\n  };\n\n  return (\n    <Modal title={t('browse-dashboards.action.move-modal-title', 'Move')} onDismiss={onDismiss} {...props}>\n      {selectedFolders.length > 0 && (\n        <Alert\n          severity=\"info\"\n          title={t('browse-dashboards.action.move-modal-alert', 'Moving this item may change its permissions.')}\n        />\n      )}\n\n      <Text element=\"p\">\n        <Trans i18nKey=\"browse-dashboards.action.move-modal-text\">This action will move the following content:</Trans>\n      </Text>\n\n      <DescendantCount selectedItems={selectedItems} />\n\n      <Space v={3} />\n\n      <Field label={t('browse-dashboards.action.move-modal-field-label', 'Folder name')}>\n        <FolderPicker value={moveTarget} excludeUIDs={selectedFolders} onChange={setMoveTarget} />\n      </Field>\n\n      <Modal.ButtonRow>\n        <Button onClick={onDismiss} variant=\"secondary\" fill=\"outline\">\n          <Trans i18nKey=\"browse-dashboards.action.cancel-button\">Cancel</Trans>\n        </Button>\n        <Button disabled={moveTarget === undefined || isMoving} onClick={onMove} variant=\"primary\">\n          {isMoving\n            ? t('browse-dashboards.action.moving', 'Moving...')\n            : t('browse-dashboards.action.move-button', 'Move')}\n        </Button>\n      </Modal.ButtonRow>\n    </Modal>\n  );\n};\n","import { useEffect } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { getAppEvents } from '@grafana/runtime';\nimport { Box, Button, Stack } from '@grafana/ui';\nimport { Folder } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView, useDeleteRepositoryFilesWithPathMutation } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath } from 'app/features/apiserver/types';\nimport { ResourceEditFormSharedFields } from 'app/features/dashboard-scene/components/Provisioned/ResourceEditFormSharedFields';\nimport { BaseProvisionedFormData } from 'app/features/dashboard-scene/saving/shared';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { useProvisionedFolderFormData } from '../hooks/useProvisionedFolderFormData';\n\nimport { DescendantCount } from './BrowseActions/DescendantCount';\nimport { getFolderURL } from './utils';\n\ninterface FormProps extends DeleteProvisionedFolderFormProps {\n  initialValues: BaseProvisionedFormData;\n  repository?: RepositoryView;\n  workflowOptions: Array<{ label: string; value: string }>;\n  folder?: Folder;\n  isGitHub: boolean;\n}\n\ninterface DeleteProvisionedFolderFormProps {\n  parentFolder?: FolderDTO;\n  onDismiss?: () => void;\n}\n\nfunction FormContent({\n  initialValues,\n  parentFolder,\n  repository,\n  workflowOptions,\n  folder,\n  isGitHub,\n  onDismiss,\n}: FormProps) {\n  const resourceId = parentFolder?.uid || '';\n\n  const [deleteRepoFile, request] = useDeleteRepositoryFilesWithPathMutation();\n\n  const methods = useForm<BaseProvisionedFormData>({ defaultValues: initialValues });\n  const { handleSubmit, watch } = methods;\n  const workflow = watch('workflow');\n\n  const handleSubmitForm = async ({ repo, path, comment, ref }: BaseProvisionedFormData) => {\n    if (!repository?.name) {\n      return;\n    }\n\n    const commitMessage = comment || `Delete folder: ${folder?.metadata?.annotations?.[AnnoKeySourcePath]}`;\n    const targetRef = workflow === 'write' ? undefined : ref;\n\n    deleteRepoFile({\n      name: repo,\n      path: `${path}/`,\n      ref: targetRef,\n      message: commitMessage,\n    });\n  };\n\n  // TODO: move to a hook if this useEffect shared mostly the same logic as in NewProvisionedFolderForm\n  useEffect(() => {\n    if (request.isSuccess && repository) {\n      if (workflow === 'branch') {\n        // TODO: handle display banner https://github.com/grafana/git-ui-sync-project/issues/300\n        // TODO: implement when BE is ready\n        return;\n      }\n\n      if (workflow === 'write') {\n        getAppEvents().publish({\n          type: AppEvents.alertSuccess.name,\n          payload: [\n            t(\n              'browse-dashboards.delete-provisioned-folder-form.alert-folder-deleted-successfully',\n              'Folder deleted successfully'\n            ),\n          ],\n        });\n        // Navigate back to parent folder if it exists, otherwise go to dashboards root\n        if (parentFolder?.parentUid) {\n          window.location.href = getFolderURL(parentFolder.parentUid);\n        } else {\n          window.location.href = '/dashboards';\n        }\n      }\n    }\n\n    if (request.isError) {\n      getAppEvents().publish({\n        type: AppEvents.alertError.name,\n        payload: [\n          t('browse-dashboards.delete-provisioned-folder-form.api-error', 'Failed to delete folder'),\n          request.error,\n        ],\n      });\n      return;\n    }\n  }, [request, repository, workflow, parentFolder]);\n\n  return (\n    <FormProvider {...methods}>\n      <form onSubmit={handleSubmit(handleSubmitForm)}>\n        <Stack direction=\"column\" gap={2}>\n          <Box paddingBottom={2}>\n            <Trans i18nKey=\"browse-dashboards.delete-provisioned-folder-form.delete-warning\">\n              This will delete this folder and all its descendants. In total, this will affect:\n            </Trans>\n            <DescendantCount\n              selectedItems={{\n                folder: { [resourceId]: true },\n                dashboard: {},\n                panel: {},\n                $all: false,\n              }}\n            />\n          </Box>\n\n          <ResourceEditFormSharedFields\n            resourceType=\"folder\"\n            isNew={false}\n            workflow={workflow}\n            workflowOptions={workflowOptions}\n            isGitHub={isGitHub}\n          />\n\n          {/* Delete / Cancel button */}\n          <Stack gap={2}>\n            <Button type=\"submit\" disabled={request.isLoading} variant=\"destructive\">\n              {request.isLoading\n                ? t('browse-dashboards.delete-provisioned-folder-form.button-deleting', 'Deleting...')\n                : t('browse-dashboards.delete-provisioned-folder-form.button-delete', 'Delete')}\n            </Button>\n            <Button variant=\"secondary\" fill=\"outline\" onClick={onDismiss}>\n              <Trans i18nKey=\"browse-dashboards.delete-provisioned-folder-form.button-cancel\">Cancel</Trans>\n            </Button>\n          </Stack>\n        </Stack>\n      </form>\n    </FormProvider>\n  );\n}\n\nexport function DeleteProvisionedFolderForm({ parentFolder, onDismiss }: DeleteProvisionedFolderFormProps) {\n  const { workflowOptions, isGitHub, repository, folder, initialValues } = useProvisionedFolderFormData({\n    folderUid: parentFolder?.uid,\n    action: 'delete',\n    title: parentFolder?.title,\n  });\n\n  if (!initialValues) {\n    return null;\n  }\n\n  return (\n    <FormContent\n      parentFolder={parentFolder}\n      onDismiss={onDismiss}\n      initialValues={initialValues}\n      repository={repository}\n      workflowOptions={workflowOptions}\n      folder={folder}\n      isGitHub={isGitHub}\n    />\n  );\n}\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config, locationService, reportInteraction } from '@grafana/runtime';\nimport { Button, Drawer, Dropdown, Icon, Menu, MenuItem } from '@grafana/ui';\nimport { Permissions } from 'app/core/components/AccessControl';\nimport { appEvents } from 'app/core/core';\nimport { ShowModalReactEvent } from 'app/types/events';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { ManagerKind } from '../../apiserver/types';\nimport { useDeleteFolderMutation, useMoveFolderMutation } from '../api/browseDashboardsAPI';\nimport { getFolderPermissions } from '../permissions';\n\nimport { DeleteModal } from './BrowseActions/DeleteModal';\nimport { MoveModal } from './BrowseActions/MoveModal';\nimport { DeleteProvisionedFolderForm } from './DeleteProvisionedFolderForm';\n\ninterface Props {\n  folder: FolderDTO;\n}\n\nexport function FolderActionsButton({ folder }: Props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [showPermissionsDrawer, setShowPermissionsDrawer] = useState(false);\n  const [showDeleteProvisionedFolderDrawer, setShowDeleteProvisionedFolderDrawer] = useState(false);\n  const [moveFolder] = useMoveFolderMutation();\n  const [deleteFolder] = useDeleteFolderMutation();\n\n  const { canEditFolders, canDeleteFolders, canViewPermissions, canSetPermissions } = getFolderPermissions(folder);\n  const isProvisionedFolder = folder.managedBy === ManagerKind.Repo;\n  // Can only move folders when nestedFolders is enabled and the folder is not provisioned\n  const canMoveFolder = config.featureToggles.nestedFolders && canEditFolders && !isProvisionedFolder;\n\n  const onMove = async (destinationUID: string) => {\n    await moveFolder({ folder, destinationUID });\n    reportInteraction('grafana_manage_dashboards_item_moved', {\n      item_counts: {\n        folder: 1,\n        dashboard: 0,\n      },\n      source: 'folder_actions',\n    });\n  };\n\n  const onDelete = async () => {\n    await deleteFolder(folder);\n    reportInteraction('grafana_manage_dashboards_item_deleted', {\n      item_counts: {\n        folder: 1,\n        dashboard: 0,\n      },\n      source: 'folder_actions',\n    });\n    const { parents } = folder;\n    const parentUrl = parents && parents.length ? parents[parents.length - 1].url : '/dashboards';\n    locationService.push(parentUrl);\n  };\n\n  const showMoveModal = () => {\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: MoveModal,\n        props: {\n          selectedItems: {\n            folder: { [folder.uid]: true },\n            dashboard: {},\n            panel: {},\n            $all: false,\n          },\n          onConfirm: onMove,\n        },\n      })\n    );\n  };\n\n  const showDeleteModal = () => {\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: DeleteModal,\n        props: {\n          selectedItems: {\n            folder: { [folder.uid]: true },\n            dashboard: {},\n            panel: {},\n            $all: false,\n          },\n          onConfirm: onDelete,\n        },\n      })\n    );\n  };\n\n  const showDeleteProvisionedModal = () => {\n    setShowDeleteProvisionedFolderDrawer(true);\n  };\n\n  const managePermissionsLabel = t('browse-dashboards.folder-actions-button.manage-permissions', 'Manage permissions');\n  const moveLabel = t('browse-dashboards.folder-actions-button.move', 'Move');\n  const deleteLabel = t('browse-dashboards.folder-actions-button.delete', 'Delete');\n\n  const menu = (\n    <Menu>\n      {canViewPermissions && <MenuItem onClick={() => setShowPermissionsDrawer(true)} label={managePermissionsLabel} />}\n      {canMoveFolder && <MenuItem onClick={showMoveModal} label={moveLabel} />}\n      {/* TODO: remove isProvisionedFolder check once BE folder delete flow is complete */}\n      {canDeleteFolders && !isProvisionedFolder && (\n        <MenuItem\n          destructive\n          onClick={isProvisionedFolder ? showDeleteProvisionedModal : showDeleteModal}\n          label={deleteLabel}\n        />\n      )}\n    </Menu>\n  );\n\n  if (!canViewPermissions && !canMoveFolder && !canDeleteFolders) {\n    return null;\n  }\n\n  return (\n    <>\n      <Dropdown overlay={menu} onVisibleChange={setIsOpen}>\n        <Button variant=\"secondary\">\n          <Trans i18nKey=\"browse-dashboards.folder-actions-button.folder-actions\">Folder actions</Trans>\n          <Icon name={isOpen ? 'angle-up' : 'angle-down'} />\n        </Button>\n      </Dropdown>\n      {showPermissionsDrawer && (\n        <Drawer\n          title={t('browse-dashboards.action.manage-permissions-button', 'Manage permissions')}\n          subtitle={folder.title}\n          onClose={() => setShowPermissionsDrawer(false)}\n          size=\"md\"\n        >\n          <Permissions resource=\"folders\" resourceId={folder.uid} canSetPermissions={canSetPermissions} />\n        </Drawer>\n      )}\n      {showDeleteProvisionedFolderDrawer && (\n        <Drawer\n          title={t('browse-dashboards.action.delete-provisioned-folder', 'Delete provisioned folder')}\n          subtitle={folder.title}\n          onClose={() => setShowDeleteProvisionedFolderDrawer(false)}\n        >\n          <DeleteProvisionedFolderForm\n            parentFolder={folder}\n            onDismiss={() => setShowDeleteProvisionedFolderDrawer(false)}\n          />\n        </Drawer>\n      )}\n    </>\n  );\n}\n","import { useMemo } from 'react';\n\nimport { Folder } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath } from 'app/features/apiserver/types';\nimport { getDefaultWorkflow, getWorkflowOptions } from 'app/features/dashboard-scene/saving/provisioned/defaults';\nimport { generateTimestamp } from 'app/features/dashboard-scene/saving/provisioned/utils/timestamp';\nimport { useGetResourceRepositoryView } from 'app/features/provisioning/hooks/useGetResourceRepositoryView';\n\nimport { BaseProvisionedFormData } from '../../dashboard-scene/saving/shared';\n\nexport interface UseProvisionedFolderFormDataProps {\n  folderUid?: string;\n  action: 'create' | 'delete';\n  title?: string;\n}\n\nexport interface ProvisionedFolderFormDataResult {\n  repository?: RepositoryView;\n  folder?: Folder;\n  workflowOptions: Array<{ label: string; value: string }>;\n  isGitHub: boolean;\n  initialValues?: BaseProvisionedFormData;\n}\n\n/**\n * Hook for managing provisioned folder create/delete form data.\n */\nexport function useProvisionedFolderFormData({\n  folderUid,\n  action,\n  title,\n}: UseProvisionedFolderFormDataProps): ProvisionedFolderFormDataResult {\n  const { repository, folder, isLoading } = useGetResourceRepositoryView({ folderName: folderUid });\n\n  const workflowOptions = getWorkflowOptions(repository);\n  const isGitHub = repository?.type === 'github';\n  const timestamp = generateTimestamp();\n\n  const initialValues = useMemo(() => {\n    // Only create initial values when we have the data\n    if (!repository || isLoading) {\n      return undefined;\n    }\n\n    return {\n      title: title || '',\n      comment: '',\n      ref: `folder/${timestamp}`,\n      repo: repository.name || '',\n      path: folder?.metadata?.annotations?.[AnnoKeySourcePath] || '',\n      workflow: getDefaultWorkflow(repository),\n    };\n  }, [repository, folder, title, isLoading, timestamp]);\n\n  return {\n    repository,\n    folder,\n    workflowOptions,\n    isGitHub,\n    initialValues,\n  };\n}\n","import { config } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\nimport { AccessControlAction } from 'app/types/accessControl';\nimport { FolderDTO } from 'app/types/folders';\n\nfunction checkFolderPermission(action: AccessControlAction, folderDTO?: FolderDTO) {\n  return folderDTO ? contextSrv.hasPermissionInMetadata(action, folderDTO) : contextSrv.hasPermission(action);\n}\n\nfunction checkCanCreateFolders(folderDTO?: FolderDTO) {\n  // Can only create a folder if we have permissions and either we're at root or nestedFolders is enabled\n  if (folderDTO && folderDTO.uid !== 'general' && !config.featureToggles.nestedFolders) {\n    return false;\n  }\n\n  return checkFolderPermission(AccessControlAction.FoldersCreate, folderDTO);\n}\n\nexport function getFolderPermissions(folderDTO?: FolderDTO) {\n  const canCreateDashboards = checkFolderPermission(AccessControlAction.DashboardsCreate, folderDTO);\n  const canCreateFolders = checkCanCreateFolders(folderDTO);\n  const canDeleteFolders = checkFolderPermission(AccessControlAction.FoldersDelete, folderDTO);\n  const canEditDashboards = checkFolderPermission(AccessControlAction.DashboardsWrite, folderDTO);\n  const canEditFolders = checkFolderPermission(AccessControlAction.FoldersWrite, folderDTO);\n  const canSetPermissions = checkFolderPermission(AccessControlAction.FoldersPermissionsWrite, folderDTO);\n  const canViewPermissions = checkFolderPermission(AccessControlAction.FoldersPermissionsRead, folderDTO);\n\n  return {\n    canCreateDashboards,\n    canCreateFolders,\n    canDeleteFolders,\n    canEditDashboards,\n    canEditFolders,\n    canSetPermissions,\n    canViewPermissions,\n  };\n}\n","import debounce from 'debounce-promise';\nimport { MouseEvent, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { SelectableValue, urlUtil } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { locationService } from '@grafana/runtime';\nimport { AsyncSelect, Button, Modal } from '@grafana/ui';\n\nimport { DashboardSearchItem } from '../../../search/types';\nimport { getConnectedDashboards, getLibraryPanelConnectedDashboards } from '../../state/api';\nimport { LibraryElementDTO } from '../../types';\n\nexport interface OpenLibraryPanelModalProps {\n  onDismiss: () => void;\n  libraryPanel: LibraryElementDTO;\n}\n\nexport function OpenLibraryPanelModal({ libraryPanel, onDismiss }: OpenLibraryPanelModalProps): JSX.Element {\n  const [loading, setLoading] = useState(false);\n  const [connected, setConnected] = useState(0);\n  const [option, setOption] = useState<SelectableValue<DashboardSearchItem> | undefined>(undefined);\n  useEffect(() => {\n    const getConnected = async () => {\n      const connectedDashboards = await getLibraryPanelConnectedDashboards(libraryPanel.uid);\n      setConnected(connectedDashboards.length);\n    };\n    getConnected();\n  }, [libraryPanel.uid]);\n  const loadOptions = useCallback(\n    (searchString: string) => loadOptionsAsync(libraryPanel.uid, searchString, setLoading),\n    [libraryPanel.uid]\n  );\n  const debouncedLoadOptions = useMemo(() => debounce(loadOptions, 300, { leading: true }), [loadOptions]);\n\n  const onViewPanel = (e: MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    locationService.push(urlUtil.renderUrl(`/d/${option?.value?.uid}`, {}));\n  };\n\n  return (\n    <Modal\n      title={t('library-panels.modal.title', 'View panel in dashboard')}\n      onDismiss={onDismiss}\n      onClickBackdrop={onDismiss}\n      isOpen\n    >\n      <div>\n        {connected === 0 ? (\n          <span>\n            <Trans i18nKey={'library-panels.modal.panel-not-linked'}>\n              Panel is not linked to a dashboard. Add the panel to a dashboard and retry.\n            </Trans>\n          </span>\n        ) : null}\n        {connected > 0 ? (\n          <>\n            <p>\n              <Trans i18nKey=\"library-panels.modal.body\" count={connected}>\n                This panel is being used in {{ count: connected }} dashboard. Please choose which dashboard to view the\n                panel in:\n              </Trans>\n            </p>\n            <AsyncSelect\n              isClearable\n              isLoading={loading}\n              defaultOptions={true}\n              loadOptions={debouncedLoadOptions}\n              onChange={setOption}\n              placeholder={t('library-panels.modal.select-placeholder', 'Start typing to search for dashboard')}\n              noOptionsMessage={t('library-panels.modal.select-no-options-message', 'No dashboards found')}\n            />\n          </>\n        ) : null}\n      </div>\n      <Modal.ButtonRow>\n        <Button variant=\"secondary\" onClick={onDismiss} fill=\"outline\">\n          <Trans i18nKey={'library-panels.modal.button-cancel'}>Cancel</Trans>\n        </Button>\n        <Button onClick={onViewPanel} disabled={!Boolean(option)}>\n          {option\n            ? t('library-panels.modal.button-view-panel1', 'View panel in {{label}}...', { label: option?.label })\n            : t('library-panels.modal.button-view-panel2', 'View panel in dashboard...')}\n        </Button>\n      </Modal.ButtonRow>\n    </Modal>\n  );\n}\n\nasync function loadOptionsAsync(uid: string, searchString: string, setLoading: (loading: boolean) => void) {\n  setLoading(true);\n  const searchHits = await getConnectedDashboards(uid);\n  const options = searchHits\n    .filter((d) => d.title.toLowerCase().includes(searchString.toLowerCase()))\n    .map((d) => ({ label: d.title, value: d }));\n  setLoading(false);\n\n  return options;\n}\n"],"names":["BrowseFolderLibraryPanelsPage","folderUID","folderDTO","selected","setSelected","saveFolder","navModel","model","libraryPanelsTabID","libraryPanelsTab","child","onEditTitle","newValue","result","DeleteModal","onConfirm","onDismiss","selectedItems","props","data","deleteIsInvalid","isDeleting","setIsDeleting","onDelete","MoveModal","moveTarget","setMoveTarget","isMoving","setIsMoving","selectedFolders","uid","onMove","FormContent","initialValues","parentFolder","repository","workflowOptions","folder","isGitHub","resourceId","deleteRepoFile","request","methods","handleSubmit","watch","workflow","handleSubmitForm","repo","path","comment","ref","commitMessage","targetRef","Stack","Box","DescendantCount","ResourceEditFormSharedFields","Button","DeleteProvisionedFolderForm","useProvisionedFolderFormData","FolderActionsButton","isOpen","setIsOpen","showPermissionsDrawer","setShowPermissionsDrawer","showDeleteProvisionedFolderDrawer","setShowDeleteProvisionedFolderDrawer","moveFolder","deleteFolder","canEditFolders","canDeleteFolders","canViewPermissions","canSetPermissions","isProvisionedFolder","canMoveFolder","config","destinationUID","parents","parentUrl","showMoveModal","showDeleteModal","showDeleteProvisionedModal","managePermissionsLabel","moveLabel","deleteLabel","menu","Menu","MenuItem","Dropdown","Icon","Drawer","folderUid","action","title","isLoading","timestamp","checkFolderPermission","checkCanCreateFolders","getFolderPermissions","canCreateDashboards","canCreateFolders","canEditDashboards","OpenLibraryPanelModal","libraryPanel","loading","setLoading","connected","setConnected","option","setOption","connectedDashboards","loadOptions","searchString","loadOptionsAsync","debouncedLoadOptions","onViewPanel","e","options","d"],"sourceRoot":""}