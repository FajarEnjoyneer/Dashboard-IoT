"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7197],{58102:(C,j,o)=>{o.d(j,{GU:()=>p,YO:()=>E,qm:()=>O});var s=o(74848),r=o(22803),e=o(96540),y=o(92745),D=o(63142),x=o(92948),N=o(10388);const O=({children:i,enterAnimation:g=!0})=>{const b=(0,D.of)(E);return(0,s.jsx)("div",{className:(0,r.cx)(b.loginInnerBox,g&&b.enterAnimation),children:i})},p=({children:i,branding:g,isChangingPassword:b})=>{const u=(0,D.of)(E),[I,z]=(0,e.useState)(!1),L=g?.loginSubtitle??x.M.GetLoginSubTitle(),R=g?.loginTitle??x.M.LoginTitle,T=g?.loginBoxBackground||x.M.LoginBoxBackground(),S=g?.loginLogo,W=g?.hideEdition??x.M.HideEdition;return(0,e.useEffect)(()=>z(!0),[]),(0,s.jsxs)(x.M.LoginBackground,{className:(0,r.cx)(u.container,I&&u.loginAnim,g?.loginBackground),children:[(0,s.jsx)("div",{className:u.loginMain,children:(0,s.jsxs)("div",{className:(0,r.cx)(u.loginContent,T,"login-content-box"),children:[(0,s.jsxs)("div",{className:u.loginLogoWrapper,children:[(0,s.jsx)(x.M.LoginLogo,{className:u.loginLogo,logo:S}),(0,s.jsx)("div",{className:u.titleWrapper,children:b?(0,s.jsx)("h1",{className:u.mainTitle,children:(0,s.jsx)(y.x6,{i18nKey:"login.layout.update-password",children:"Update your password"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:u.mainTitle,children:R}),L&&(0,s.jsx)("h3",{className:u.subTitle,children:L})]})})]}),(0,s.jsx)("div",{className:u.loginOuterBox,children:i})]})}),g?.hideFooter?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(N.wi,{hideEdition:W,customLinks:g?.footerLinks})]})},M=(0,r.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,E=i=>({loginMain:(0,r.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,r.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,r.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,r.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,r.css)({width:"100%",maxWidth:60,marginBottom:i.spacing(2),[i.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,r.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:i.spacing(3)}),titleWrapper:(0,r.css)({textAlign:"center"}),mainTitle:(0,r.css)({fontSize:22,[i.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,r.css)({fontSize:i.typography.size.md,color:i.colors.text.secondary}),loginContent:(0,r.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:i.shape.radius.default,padding:i.spacing(2,0),opacity:0,[i.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[i.breakpoints.up("sm")]:{minHeight:i.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,r.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,r.css)({padding:i.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[i.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,r.css)({[i.transitions.handleMotion("no-preference")]:{animation:`${M} ease-out 0.2s`}})})},38449:(C,j,o)=>{o.r(j),o.d(j,{default:()=>hs});var s=o(74848),r=o(43173),e=o(22803),y=o(96540),D=o(54148),x=o(75683),N=o(51898),O=o(36674),p=o(63142),M=o(41654),E=o(30703),i=o(31286),g=o(34999),b=o(13791),u=o(11098),I=o(45004);const z=N.Tp.pages.PublicDashboard,L=function(){const t=(0,p.of)(R),n=(0,I.P)();return n.footerHide?null:(0,s.jsx)("div",{className:t.footer,"data-testid":z.footer,children:(0,s.jsxs)("a",{className:t.link,href:n.footerLink,target:"_blank",rel:"noreferrer noopener",children:[n.footerText," ",(0,s.jsx)("img",{className:t.logoImg,alt:"",src:n.footerLogo})]})})},R=t=>({footer:(0,e.css)({display:"flex",justifyContent:"end",height:"30px",backgroundColor:t.colors.background.canvas,position:"sticky",bottom:0,zIndex:t.zIndex.navbarFixed,padding:t.spacing(.5,0)}),link:(0,e.css)({display:"flex",alignItems:"center"}),logoImg:(0,e.css)({height:"16px",marginLeft:t.spacing(.5)})});var T=o(92745),S=o(92948),W=o(58102);const U=N.Tp.pages.PublicDashboard.NotAvailable,A=({paused:t})=>{const n=(0,p.of)(Z),a=(0,p.of)(W.YO),c=S.M.LoginBoxBackground();return(0,s.jsx)(S.M.LoginBackground,{className:n.container,"data-testid":U.container,children:(0,s.jsxs)("div",{className:(0,e.cx)(n.box,c),children:[(0,s.jsx)(S.M.LoginLogo,{className:a.loginLogo}),(0,s.jsx)("p",{className:n.title,"data-testid":U.title,children:t?(0,T.t)("dashboard.public-dashboard-not-available.paused","This dashboard has been paused by the administrator"):(0,T.t)("dashboard.public-dashboard-not-available.does-not-exist","The dashboard you are trying to access does not exist")}),t&&(0,s.jsx)("p",{className:n.description,"data-testid":U.pausedDescription,children:(0,s.jsx)(T.x6,{i18nKey:"dashboard.public-dashboard-not-available.try-again-later",children:"Try again later"})})]})})},Z=t=>({container:(0,e.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%",":before":{opacity:1}}),box:(0,e.css)({width:"608px",display:"flex",alignItems:"center",flexDirection:"column",gap:t.spacing(4),zIndex:1,borderRadius:t.shape.borderRadius(4),padding:t.spacing(6,8),opacity:1}),title:(0,e.css)({fontSize:t.typography.h3.fontSize,textAlign:"center",margin:0}),description:(0,e.css)({fontSize:t.typography.h5.fontSize,margin:0})});var G=o(96221),J=o(6262),V=o(41644);const k=N.Tp.pages.PublicDashboardScene;function X({route:t}){const{accessToken:n=""}=(0,D.g)(),a=(0,V.sP)(),c=(0,p.of)(K),{dashboard:l,isLoading:h,loadError:d}=a.useState();return(0,y.useEffect)(()=>(a.loadDashboard({uid:n,route:J.Z4.Public}),()=>{a.clearState()}),[a,n,t.routeName]),d?(0,s.jsx)(w,{error:d}):l?l.state.controls?.state.hideTimeControls?(0,s.jsx)(H,{model:l}):(0,s.jsx)(O.$L,{scene:l,children:(0,s.jsx)(H,{model:l})}):(0,s.jsx)(b.Y,{layout:x.k.Custom,className:c.loadingPage,"data-testid":k.loadingPage,children:h&&(0,s.jsx)(u.A,{})})}function H({model:t}){const[n,a]=(0,y.useState)(!1),{controls:c,title:l}=t.useState(),{timePicker:h,refreshPicker:d,hideTimeControls:v}=c.useState(),f=t.getBodyToRender(),m=(0,p.of)(K),P=(0,I.P)();return(0,y.useEffect)(()=>d.activate(),[d]),(0,y.useEffect)(()=>(a(!0),t.activate()),[t]),n?(0,s.jsxs)(b.Y,{layout:x.k.Custom,className:m.page,"data-testid":k.page,children:[(0,s.jsxs)("div",{className:m.controls,children:[(0,s.jsxs)(M.B,{alignItems:"center",children:[!P.headerLogoHide&&(0,s.jsx)("div",{className:m.iconTitle,children:(0,s.jsx)(E.I,{name:"grafana",size:"lg","aria-hidden":!0})}),(0,s.jsx)("span",{className:m.title,children:l})]}),!v&&(0,s.jsxs)(M.B,{children:[(0,s.jsx)(h.Component,{model:h}),(0,s.jsx)(d.Component,{model:d})]})]}),(0,s.jsx)("div",{className:m.body,children:(0,s.jsx)(f.Component,{model:f})}),(0,s.jsx)(L,{})]}):null}function K(t){return{loadingPage:(0,e.css)({justifyContent:"center"}),page:(0,e.css)({padding:t.spacing(0,2)}),controls:(0,e.css)({display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:t.zIndex.navbarFixed,background:t.colors.background.canvas,padding:t.spacing(2,0),[t.breakpoints.down("sm")]:{flexDirection:"column",gap:t.spacing(1),alignItems:"stretch"}}),iconTitle:(0,e.css)({display:"none",[t.breakpoints.up("sm")]:{display:"flex",alignItems:"center"}}),title:(0,e.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",fontSize:t.typography.h4.fontSize,margin:0}),body:(0,e.css)({label:"body",display:"flex",flex:1,flexDirection:"column",overflowY:"auto"})}}function w({error:t}){const n=(0,p.of)(K),a=t.status,c=t.messageId,l=t.message,h=a===403&&c==="publicdashboards.notEnabled",d=a===404&&c==="publicdashboards.notFound",v=a===404&&c==="publicdashboards.dashboardNotFound",f=d?void 0:!h,m=d||v;return f===!1?(0,s.jsx)(A,{paused:!0}):m?(0,s.jsx)(A,{}):(0,s.jsx)(b.Y,{layout:x.k.Custom,className:n.loadingPage,"data-testid":k.loadingPage,children:(0,s.jsx)(i.a,{paddingY:4,display:"flex",direction:"column",alignItems:"center",children:(0,s.jsx)(g.F,{severity:G.Qd.Error,title:l,children:l})})})}var q=o(84596),_=o(84600),ss=o(27963),ts=o(69289),Y=o(52763),os=o(74618),ns=o(47797);const $=({initError:t})=>t?(0,s.jsx)("div",{className:as.dashboardLoading,children:(0,s.jsx)(g.F,{severity:G.Qd.Error,title:t.message,children:(0,ns.q6)(t.error)})}):null,as={dashboardLoading:(0,e.css)({height:"60vh",display:"flex",alignItems:"center",justifyContent:"center"})};var es=o(46505),is=o(77598),Q=o(75421),rs=o(27081);const ls=N.Tp.pages.PublicDashboard,cs=({dashboard:t})=>{const n=(0,Y.wA)(),a=(0,I.P)(),c=l=>{n((0,ts.Cj)(l))};return(0,s.jsx)(_.d,{title:t.title,pageIcon:a.headerLogoHide?void 0:"grafana",buttonOverflowAlignment:"right",children:!t.timepicker.hidden&&(0,s.jsx)(os.$,{dashboard:t,onChangeTimeZone:c})})},ds=t=>{const{route:n}=t,a=(0,D.zy)(),{accessToken:c}=(0,D.g)(),l=(0,Y.wA)(),h=(0,ss.Il)(),d=(0,q.A)({...t,location:a}),v=(0,p.of)(gs),f=(0,Y.d4)(B=>B.dashboard),m=f.initError,P=f.getModel();return(0,y.useEffect)(()=>{l((0,rs.v)({routeName:n.routeName,fixUrl:!1,accessToken:c,keybindingSrv:h.keybindings}))},[n.routeName,c,h.keybindings,l]),(0,y.useEffect)(()=>{if(d?.location.search!==a.search){const B=d?.queryParams,F=t.queryParams;(F?.from!==B?.from||F?.to!==B?.to)&&!P?.timepicker.hidden&&(0,Q.jG)().updateTimeRangeFromUrl(),!B?.refresh&&F?.refresh&&(0,Q.jG)().setAutoRefresh(F.refresh)}},[d,a.search,t.queryParams,P?.timepicker.hidden,c]),m?(0,s.jsx)(fs,{error:m}):P?(0,s.jsxs)(b.Y,{pageNav:{text:P.title},layout:x.k.Custom,"data-testid":ls.page,children:[(0,s.jsx)(cs,{dashboard:P}),f.initError&&(0,s.jsx)($,{initError:f.initError}),(0,s.jsx)("div",{className:v.gridContainer,children:(0,s.jsx)(is.N,{dashboard:P,isEditable:!1,viewPanel:null,editPanel:null,hidePanelMenus:!0})}),(0,s.jsx)("div",{className:v.footer,children:(0,s.jsx)(L,{})})]}):(0,s.jsx)(es.P,{initPhase:f.initPhase})},gs=t=>({gridContainer:(0,e.css)({flex:1,padding:t.spacing(2,2,2,2),overflow:"auto"}),footer:(0,e.css)({padding:t.spacing(0,2)})}),us=ds;function fs({error:t}){let n,a;if(typeof t.error=="object"&&t.error!==null&&"data"in t.error){const f=t.error;n=f.data.statusCode,a=f.data.messageId}const c=n===403&&a==="publicdashboards.notEnabled",l=n===404&&a==="publicdashboards.notFound",h=n===404&&a==="publicdashboards.dashboardNotFound",d=l?void 0:!c,v=l||h;return d===!1?(0,s.jsx)(A,{paused:!0}):v?(0,s.jsx)(A,{}):(0,s.jsx)($,{initError:t})}function xs(t){return r.$.featureToggles.publicDashboardsScene?(0,s.jsx)(X,{...t}):(0,s.jsx)(us,{...t})}const hs=xs},20230:(C,j,o)=>{C.exports=o.p+"static/img/grab_dark.4ee8d28b.svg"},5878:(C,j,o)=>{C.exports=o.p+"static/img/grab_light.322c3334.svg"}}]);

//# sourceMappingURL=PublicDashboardPage.3f9870a41a97915ab0ea.js.map