"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3124],{47466:(It,J,t)=>{t.d(J,{o:()=>T});var r=t(74848),M=t(22803),R=t(63142),H=t(77239);const T=({items:i,children:a,isPinned:c,scrollable:X=!1,maxHeight:Q})=>{const Z=(0,R.of)(B),it=X?{maxHeight:Q,overflowY:"auto"}:{};return(0,r.jsxs)("div",{className:Z.wrapper,style:it,children:[i.map(({label:ut,value:ht,color:n,colorIndicator:s,colorPlacement:d,isActive:v,lineStyle:e},g)=>(0,r.jsx)(H.B,{label:ut,value:ht,color:n,colorIndicator:s,colorPlacement:d,isActive:v,justify:"space-between",isPinned:c,lineStyle:e,showValueScroll:!X},g)),a]})},B=i=>({wrapper:(0,M.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${i.colors.border.weak}`,padding:i.spacing(1)})})},41530:(It,J,t)=>{t.d(J,{A:()=>T});var r=t(74848),M=t(22803),R=t(63142),H=t(77239);const T=({item:i,isPinned:a})=>{const c=(0,R.of)(B),{label:X,value:Q,color:Z,colorIndicator:it}=i;return(0,r.jsx)("div",{className:c.wrapper,children:(0,r.jsx)(H.B,{label:X,value:Q,color:Z,colorIndicator:it,marginRight:"22px",isPinned:a})})},B=i=>({wrapper:(0,M.css)({display:"flex",flexDirection:"column",flex:1,padding:i.spacing(1),lineHeight:1})})},77239:(It,J,t)=>{t.d(J,{B:()=>d});var r=t(74848),M=t(22803),R=t(96540),H=t(63142),T=t(53371),B=t(45967),i=t(64394),a=t(71479),c=t(55978),X=t(55302),Q=(e=>(e[e.Leading=0]="Leading",e[e.Trailing=1]="Trailing",e))(Q||{});const Z=({color:e=i.F,colorIndicator:g=c.Ev,position:m=0,lineStyle:h})=>{const E=(0,H.of)(it);return g===c.fX.series?(0,r.jsx)(a.p,{color:e,lineStyle:h,className:m===0?E.leading:E.trailing}):(0,r.jsx)("span",{style:{backgroundColor:e},className:(0,M.cx)(m===0?E.leading:E.trailing,(0,X.L$)(g,E))})},it=e=>({leading:(0,M.css)({marginRight:e.spacing(.5)}),trailing:(0,M.css)({marginLeft:e.spacing(.5)}),value:(0,M.css)({width:"12px",height:"12px",borderRadius:e.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,M.css)({}),pie_1_4:(0,M.css)({}),pie_2_4:(0,M.css)({}),pie_3_4:(0,M.css)({}),marker_sm:(0,M.css)({width:"4px",height:"4px",borderRadius:e.shape.radius.circle,minWidth:"4px"}),marker_md:(0,M.css)({width:"8px",height:"8px",borderRadius:e.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,M.css)({width:"12px",height:"12px",borderRadius:e.shape.radius.circle,minWidth:"12px"})});var ut=(e=>(e.label="label",e.value="value",e))(ut||{});const ht="Copied to clipboard",n=2*1e3,s=7,d=({label:e,value:g,color:m,colorIndicator:h,colorPlacement:E=c.lJ.first,justify:N="flex-start",isActive:z=!1,marginRight:tt="0px",isPinned:et,lineStyle:dt,showValueScroll:K})=>{const S=(0,H.of)(v,N,tt),ft=K?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"pre-line",wordBreak:"break-word",lineHeight:1.2},[st,$]=(0,R.useState)(!1),[Ut,Vt]=(0,R.useState)(null),[Wt,yt]=(0,R.useState)(!1),W=(0,R.useRef)(null),k=(0,R.useRef)(null);(0,R.useEffect)(()=>{let rt;return Wt&&(rt=setTimeout(()=>{yt(!1)},n)),()=>{window.clearTimeout(rt)}},[Wt]);const Pt=async(rt,Et)=>{if(!(navigator?.clipboard&&window.isSecureContext)){Ft(rt,Et);return}try{await navigator.clipboard.writeText(rt),Vt({[`${Et}`]:rt}),yt(!0)}catch{Vt(null)}},Ft=(rt,Et)=>{const St=document.createElement("textarea");W.current?.appendChild(St),St.value=rt,St.focus(),St.select();try{document.execCommand("copy")&&(Vt({[`${Et}`]:rt}),yt(!0))}catch(Nt){console.error("Unable to copy to clipboard",Nt)}St.remove()},Xt=rt=>{rt.currentTarget.offsetWidth<rt.currentTarget.scrollWidth&&$(!0)},wt=()=>$(!1);return e.length*s>window.innerWidth/2&&(e=e.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,r.jsxs)("div",{className:S.contentWrapper,children:[(m||e)&&(0,r.jsxs)("div",{className:S.valueWrapper,children:[m&&E===c.lJ.first&&(0,r.jsx)(Z,{color:m,colorIndicator:h,lineStyle:dt}),et?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(B.m,{content:e,interactive:!1,show:st,children:(0,r.jsxs)(r.Fragment,{children:[Wt&&Ut?.label&&(0,r.jsx)(T.r,{placement:"top",referenceElement:W.current,children:ht}),(0,r.jsx)("div",{className:(0,M.cx)(S.label,z&&S.activeSeries,navigator?.clipboard&&S.copy),onMouseEnter:Xt,onMouseLeave:wt,onClick:()=>Pt(e,"label"),ref:W,children:e})]})})}):(0,r.jsx)("div",{className:(0,M.cx)(S.label,z&&S.activeSeries),children:e})]}),(0,r.jsxs)("div",{className:S.valueWrapper,children:[m&&E===c.lJ.leading&&(0,r.jsx)(Z,{color:m,colorIndicator:h,position:Q.Leading,lineStyle:dt}),et?(0,r.jsxs)(r.Fragment,{children:[Wt&&Ut?.value&&(0,r.jsx)(T.r,{placement:"top",referenceElement:k.current,children:ht}),(0,r.jsx)("div",{className:(0,M.cx)(S.value,z,navigator?.clipboard&&S.copy),style:ft,onClick:()=>Pt(g?g.toString():"","value"),ref:k,children:g})]}):(0,r.jsx)("div",{className:(0,M.cx)(S.value,z),style:ft,children:g}),m&&E===c.lJ.trailing&&(0,r.jsx)(Z,{color:m,colorIndicator:h,position:Q.Trailing,lineStyle:dt})]})]})},v=(e,g,m)=>({contentWrapper:(0,M.css)({display:"flex",alignItems:"start",justifyContent:g,marginRight:m}),label:(0,M.css)({color:e.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:e.spacing(2)}),value:(0,M.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,M.css)({display:"flex",alignItems:"center"}),activeSeries:(0,M.css)({fontWeight:e.typography.fontWeightBold,color:e.colors.text.maxContrast}),copy:(0,M.css)({cursor:"pointer"})})},73163:(It,J,t)=>{t.d(J,{Xx:()=>it,ko:()=>Q});var r=t(60519),M=t(32899),R=t(95004),H=t(63704),T=t(68143),B=t(43173),i=t(73427),a=t(86967),c=t(92367);const X=(n,s,d)=>(v,e,g)=>(s.variables&&d&&(v=v.replace(/\$\w+/g,m=>{const h=m.slice(1);return s.variables.some(E=>E.key===h)&&d[h]!=null?d[h]:m})),n(v,e,g)),Q=(n,s,d,v,e,g)=>!e||e.length===0?[]:e.map(h=>{const E=(0,r.vd)(n,s,d),N={...d,__dataContext:E},z=(et,dt,K)=>v(et,{...N,...dt},K);return g.valueRowIndex!==void 0&&!isNaN(g.valueRowIndex)?E.value.rowIndex=g.valueRowIndex:E.value.calculatedValue=g.calculatedValue,{title:v(h.title,N),confirmation:et=>X(z,h,et)(h.confirmation||`Are you sure you want to ${h.title}?`),onClick:(et,dt,K)=>{let S=Z(h,X(z,h,K));try{(0,T.AI)().fetch(S).subscribe({error:ft=>{i.lE.emit(M.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(ft)},complete:()=>{i.lE.emit(M.r1.alertSuccess,["API call was successful"])}})}catch(ft){i.lE.emit(M.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(ft);return}},oneClick:h.oneClick??!1,style:{backgroundColor:h.style?.backgroundColor??B.$.theme2.colors.secondary.main},variables:h.variables}}).filter(h=>!!h),Z=(n,s)=>{const d=new URL(ut(s(n.fetch.url))),v={};let e={url:d.toString(),method:n.fetch.method,data:ht(n,s),headers:v};return n.fetch.headers&&n.fetch.headers.forEach(([g,m])=>{v[s(g)]=s(m)}),n.fetch.queryParams&&(n.fetch.queryParams?.forEach(([g,m])=>{d.searchParams.append(s(g),s(m))}),e.url=d.toString()),v["X-Grafana-Action"]="1",e.headers=v,e},it=(n=[],s=[])=>({name:"Default field",type:R.PU.string,config:{links:n,actions:s},values:[]}),ut=n=>{if(n.startsWith("/")){const d=H.sQ.sanitizeUrl(n);n=(0,c.z)(d,[])}return n},ht=(n,s)=>{let d=n.fetch.body?s(n.fetch.body):"{}";return n.fetch.method===a.DO.GET&&(d=void 0),d}},24131:(It,J,t)=>{t.r(J),t.d(J,{plugin:()=>He});var r=t(16207),M=t(83340),R=t(64394),H=t(38809),T=t(38919),B=t(95004),i=t(92745),a=t(739),c=t(99555),X=t(44017),Q=t(45013),Z=t(79277),it=t(41069),ut=t(14099),ht=t(99709),n=t(74848),s=t(96540),d=t(14477),v=t(53568),e=t(23414),g=t(63142),m=t(54735),h=t(92790),E=t(69234),N=t(78308),z=t(2543),tt=t(33553),et=t(76637),dt=t(4268),K=t(36192),S=t(68706);function ft(o,f){return f[0].fields.slice(1).some(p=>!p.config.custom?.hideFrom?.legend)}const st=(0,s.memo)(({data:o,placement:f,calcs:p,displayMode:F,colorField:_,...j})=>{const D=(0,g.$j)(),q=o[0].fields[0].config,nt=q.color?.mode,U=[];if(nt===R.Y.Thresholds){const O={mode:tt.O.Absolute,steps:[]},L={mode:tt.O.Percentage,steps:[]};for(let mt=1;mt<o[0].fields.length;mt++){const ct=o[0].fields[mt];if(ct.config.thresholds&&ct.config.thresholds.steps.length>1)if(ct.config.thresholds.mode===tt.O.Absolute)for(const V of ct.config.thresholds.steps)(0,z.includes)(O.steps,V)||O.steps.push(V);else for(const V of ct.config.thresholds.steps)(0,z.includes)(L.steps,V)||L.steps.push(V)}const ot=(0,S.EI)(q,D,O),Ct=(0,S.EI)(q,D,L);U.push(...ot,...Ct)}const gt=[];for(let O=1;O<o[0].fields.length;O++){const L=o[0].fields[O].config.mappings;if(L)for(const ot of L)(0,z.includes)(gt,ot)||gt.push(ot)}const Tt=(0,S.K1)(gt,D),Lt=o[0].fields.slice(1).map((O,L)=>{const Ct=L+1;if(!O||O.config.custom?.hideFrom?.legend)return;const mt=O.state?.displayName??O.name,ct=(0,et.lz)(O,D).color;return{disabled:O.state?.hideFrom?.viz,color:ct,label:mt,yAxis:O.config.custom?.axisPlacement===a.vM.Right?2:1,getDisplayValues:()=>(0,K.UO)(p,O,D),getItemKey:()=>`${mt}-0-${Ct}`}}).filter(O=>O!==void 0);return(0,n.jsx)(m.KU.Legend,{placement:f,...j,children:(0,n.jsx)(dt.t,{placement:f,items:Lt,thresholdItems:U,mappingItems:Tt,displayMode:F,sortBy:j.sortBy,sortDesc:j.sortDesc,isSortable:!0})})});st.displayName="BarChartLegend";var $=t(36613),Ut=t(16515),Vt=t(8721),Wt=t(11576),yt=t(55386),W=t(21275),k=t(47276),Pt=t(62748),Ft=t(76234),Xt=t(5421),wt=t(80011),rt=t(6773),Et=t(46485),St=t(81897);const Nt=Xt.WC.interval,ue=Et.ur,pe=Et.ur,ye=8,he=30,xe=.65,Ee=.1,Me=.15,Oe=5,Pe=10,Se=.1;function Te(o,f,p,F,_){const j=(0,v.kD)(o,14),D=f/(j.width+2)*14,q=p/F,nt=Math.min(q,D);return{fontSize:Math.min(nt,_??nt),textMetrics:j}}function Ce(o,f){const{xOri:p,xDir:F,rawValue:_,getColor:j,formatValue:D,formatShortValue:q,fillOpacity:nt=1,showValue:U,xSpacing:gt=0,hoverMulti:Tt=!1,timeZone:Lt="browser"}=o,O=p===a.Lt.Horizontal,L=!o.text?.valueSize,ot=o.stacking!==a.gs.None,Ct=o.stacking===a.gs.Percent;let{groupWidth:mt,barWidth:ct,barRadius:V=0}=o;ot&&([mt,ct]=[ct,mt]);let G;const bt=Array(30).fill(null);let Mt;const lt=u=>Array.from(u.data[0].map((l,x)=>x)),pt=gt===0?void 0:(u,l)=>{const x=u.bbox.width,C=F*(O?1:-1);let b=l.length,A=b-1,I=0,Rt=x/$.A.pxRatio,Ot=Math.abs(Math.floor(Rt/gt));I=b<Ot?0:Math.ceil(b/Ot);let qt=l.map((Bt,te)=>I!==0&&(gt>0?te:A-te)%I>0?null:Bt);return C===1?qt:qt.reverse()},Dt=(u,l,x,C,b)=>{if(o.xTimeAuto){let A=Nt.year;return b<e.Zj.second?A=Nt.millisecond:b<e.Zj.minute?A=Nt.second:b<e.Zj.hour?A=Nt.minute:b<e.Zj.day?A=Nt.hour:b<e.Zj.month?A=Nt.day:b<e.Zj.year?A=Nt.month:A=Nt.year,l.map(I=>I==null?"":(0,wt.LE)(I,{format:A,timeZone:Lt}))}return l.map(A=>O?q(0,A):D(0,A))},Ht=(u,l,x)=>{l=0,x=Math.max(1,u.data[0].length-1);let C=0;(0,Et.mn)(u.data[0].length,mt,ue,0,(A,I,Rt)=>{C=I+Rt/2});let b=x-l;if(C===.5)l-=b;else{let I=(1/(1-C*2)*b-b)/2;l-=I,x+=I}return[l,x]};let oe=(u,l)=>{let x=Array.from({length:l},()=>({offs:Array(u).fill(0),size:Array(u).fill(0)}));return(0,Et.mn)(u,mt,ue,null,(C,b,A)=>{(0,Et.mn)(l,ct,pe,null,(I,Rt,Ot)=>{x[I].offs[C]=b+A*Rt,x[I].size[C]=A*Ot})}),x},xt=(u,l)=>{let x=Array.from({length:l},()=>({offs:Array(u).fill(0),size:Array(u).fill(0)}));return(0,Et.mn)(u,mt,ue,null,(C,b,A)=>{(0,Et.mn)(l,ct,pe,null,(I,Rt,Ot)=>{x[I].offs[C]=b,x[I].size[C]=A})}),x};const kt=O?Ee:Me,$t=O?Oe:Pe;let Zt=[],w=[],P=1,y,Y=o.text?.valueSize??he,at=$t,Gt=1/0,jt=1/0,Qt=j!=null,ae=Qt?{fill:{unit:3,values:(u,l)=>w[l].fill},stroke:{unit:3,values:(u,l)=>w[l].stroke}}:{},At=$.A.paths.bars({radius:Ct?0:ot?(u,l)=>l===u.data.length-1?[V,0]:[0,0]:V,disp:{x0:{unit:2,values:(u,l)=>Zt[l].offs},size:{unit:2,values:(u,l)=>Zt[l].size},...ae},each:(u,l,x,C,b,A,I)=>{C-=u.bbox.left,b-=u.bbox.top;let Rt=u.data[l][x];O?(Gt=Math.min(Gt,Rt<0?u.bbox.height-(b+I):b),jt=A):(Gt=I,jt=Math.min(jt,Rt<0?C:u.bbox.width-(C+A)));let Ot={x:C,y:b,w:A,h:I,sidx:l,didx:x};if(!ot&&o.fullHighlight&&(o.xOri===a.Lt.Horizontal?(Ot.y=0,Ot.h=u.bbox.height):(Ot.x=0,Ot.w=u.bbox.width)),G.add(Ot),U!==a.yL.Never){const qt=_(l,x);let Bt=1;Ct&&de[l][x]&&(Bt=de[l][x]);const te=Bt===0?0:qt/Bt,le=D(l,te);if(at=Math.min(at,Math.round(kt*(O?A:I))),y[x]===void 0&&(y[x]={}),y[x][l]={text:le,value:_(l,x),hidden:!1},L){const{fontSize:ee,textMetrics:Yt}=Te(y[x][l].text,jt*(O?xe:1)-(O?0:at),Gt*(O?1:xe)-(O?at:0),1);y[x][l].textMetrics=Yt;let vt=Math.round(Math.min(Y,he,ee));P=vt/Y*(vt/14),Y=vt}else y[x][l].textMetrics=(0,v.kD)(y[x][l].text,Y);let fe=O?0:-Math.round(Se*Y),zt=_(l,x);if(o.negY?.[l]&&zt!=null&&(zt*=-1),zt!=null){const ee=u.bbox.left+(O?C+A/2:zt<0?C-at:C+A+at);let Yt=u.bbox.top+(O?zt<0?b+I+at:b-at:b+I/2-fe);const{textMetrics:vt={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=y[x][l];let se=0,re=0;O?(se=vt.width*P/2,re=zt>0?(vt.actualBoundingBoxAscent+vt.actualBoundingBoxDescent)*P:0):(re=(vt.actualBoundingBoxAscent+vt.actualBoundingBoxDescent)*P/2,se=zt<0?vt.width*P:0),Yt-re<0&&(Yt=re),y[x][l].x=ee,y[x][l].y=Yt,y[x][l].bbox={x:ee-se,y:Yt-re,w:vt.width*P,h:(vt.actualBoundingBoxAscent+vt.actualBoundingBoxDescent)*P}}}}});const _t=u=>{u.root.querySelectorAll(".u-cursor-pt").forEach(l=>{l.style.borderRadius="0",o.fullHighlight&&(l.style.zIndex="-1")})},ge={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(u,l)=>{if(l===0){bt.fill(null),Mt=null;let x=u.cursor.left*$.A.pxRatio,C=u.cursor.top*$.A.pxRatio;G.get(x,C,1,1,b=>{(0,St.ur)(x,C,b.x,b.y,b.x+b.w,b.y+b.h)&&(Mt=bt[0]=b,bt[Mt.sidx]=Mt,Tt&&(0,St.Tr)(G,void 0,Mt.didx).forEach(A=>{bt[A.sidx]=A}))})}return bt[l]?.didx},points:{fill:"rgba(255,255,255,0.4)",bbox:(u,l)=>{let x=bt[l],C=x!=null;return{left:C?x.x/$.A.pxRatio:-10,top:C?x.y/$.A.pxRatio:-10,width:C?x.w/$.A.pxRatio:0,height:C?x.h/$.A.pxRatio:0}}},focus:{prox:1e3,dist:(u,l)=>Mt?.sidx===l?0:1/0}},me=u=>{if(G=G||new St.C$(0,0,u.bbox.width,u.bbox.height),G.clear(),u.series.forEach(l=>{l._paths=null}),ot?Zt=[null,...xt(u.data[0].length,u.data.length-1)]:Zt=[null,...oe(u.data[0].length,u.data.length-1)],Qt){w=[null];for(let l=1;l<u.data.length;l++){let x=u.data[l].map((C,b)=>C!=null?j(l,b,C):null);w.push({fill:nt<1?x.map(C=>C!=null?rt.MV.alpha(C,nt):null):x,stroke:x})}}y={},Y=o.text?.valueSize??he,at=$t,Gt=jt=1/0},$e=u=>{if(U===a.yL.Never||Y<ye)return;u.ctx.save(),u.ctx.fillStyle=f.colors.text.primary,u.ctx.font=`${Y}px ${f.typography.fontFamily}`;let l,x;for(const C in y){let b=!0;for(const A in y[C]){const I=y[C][A],{text:Rt,x:Ot=0,y:qt=0}=I;let{value:Bt}=I;o.negY?.[A]&&Bt!=null&&(Bt*=-1);let te=O?"center":Bt!==null&&Bt<0?"right":"left",le=O?Bt!==null&&Bt<0?"top":"alphabetic":"middle";if(te!==l&&(u.ctx.textAlign=l=te),le!==x&&(u.ctx.textBaseline=x=le),U===a.yL.Always)u.ctx.fillText(Rt,Ot,qt);else if(U===a.yL.Auto){let{bbox:fe}=I,zt=!1;if(fe==null)zt=!0,I.hidden=!0;else if(!b)for(const ee in y[C]){if(ee===A)continue;const Yt=y[C][ee],{bbox:vt,hidden:se}=Yt;if(!se&&vt&&(0,St.HY)(fe,vt)){zt=!0,I.hidden=!0;break}}b=!1,!zt&&u.ctx.fillText(Rt,Ot,qt)}}}u.ctx.restore()};let de=null;function Ze(u,l){return de=null,(0,K.bq)(u[0],l,({totals:x})=>{de=x})}return{cursor:ge,xRange:Ht,xValues:Dt,xSplits:lt,hFilter:pt,barsBuilder:At,init:_t,drawClear:me,draw:$e,prepData:Ze}}const Kt={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:a.wV.Auto,showValue:a.yL.Auto,stacking:a.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},ve={fillOpacity:80,gradientMode:a.on.None,lineWidth:1};function be(o,f,p,F,_,j){if(o.length===0||o.every(U=>U.length===0))return{warn:"",series:[],_rest:[]};(0,Ut.Fm)(o),(0,Ut.j2)(o,f);let D={...o[0]};const q=D.fields.findIndex(U=>U.type===B.PU.time);q>=0&&o.length>1&&(D=(0,Vt.Fd)({frames:o,keepDisplayNames:!0})??D);const nt=D.fields.find(U=>U.state?.displayName===_||U.name===_)??D.fields.find(U=>U.type===B.PU.string)??D.fields[q];if(nt!=null){const U=[nt],gt=[],Tt=j==null?void 0:D.fields.find(L=>L.state?.displayName===j||L.name===j);D.fields.forEach(L=>{if(L!==nt)if(L.type===B.PU.number&&!L.config.custom?.hideFrom?.viz){const ot={...L,values:L.values.map(Ct=>Number.isFinite(Ct)?Ct:null),config:{...L.config,custom:{...L.config.custom,stacking:{group:"_",mode:p}}}};U.push(ot)}else gt.push(L)});let Lt=null;U.length===1&&(Lt=(0,i.t)("bar-chart.warn.missing-numeric","No numeric fields found")),D.fields=U;const O=[D];return(0,Ft.O2)(O,F,0),{series:O,_rest:gt,color:Tt,warn:Lt}}return{series:[],_rest:[],color:null,warn:(0,i.t)("bar-chart.warn.missing-series","Bar charts require a string or time field")}}const De=({series:o,totalSeries:f,color:p,orientation:F,options:_,timeZone:j,theme:D})=>{let{showValue:q,groupWidth:nt,barWidth:U,barRadius:gt=0,stacking:Tt,text:Lt,tooltip:O,xTickLabelRotation:L,xTickLabelMaxLength:ot,xTickLabelSpacing:Ct=0,legend:mt,fullHighlight:ct}=_,V=o[0];const G=new k.e,ne=V.fields.map((w,P)=>Tt===a.gs.Percent?(0,Wt.J)({field:{...w,config:{...w.config,unit:"percentunit"}},theme:D}):w.display),bt=(w,P)=>(0,yt.cN)(ne[w](P)),Mt=(w,P)=>ce(bt(w,P),ot),lt=Ae(F);V.fields.length===2&&Tt===a.gs.None&&(f===1&&(nt=U),U=1);const pt=(w,P)=>V.fields[w].values[P];let Dt,Ht=1;if(p!=null){const w=p.display;Ht=(p.config.custom.fillOpacity??100)/100,Dt=(P,y)=>w(p.values[y]).color}else V.fields.some(P=>P.config.color?.mode===W.Yb.Thresholds||P.config.mappings?.some(Y=>Y.type==="value"?Object.values(Y.options).some(at=>at.color!=null):Y.options.result.color!=null))&&(Ht=(V.fields.find(y=>y.type===B.PU.number)?.config?.custom?.fillOpacity??100)/100,Dt=(y,Y)=>{let at=V.fields[y];return at.display(at.values[Y]).color});const oe={xOri:lt.xOri,xDir:lt.xDir,groupWidth:nt,barWidth:U,barRadius:gt,stacking:Tt,rawValue:pt,getColor:Dt,fillOpacity:Ht,formatValue:bt,formatShortValue:Mt,timeZone:j,text:Lt,showValue:q,legend:mt,xSpacing:Ct,xTimeAuto:V.fields[0]?.type===B.PU.time&&!V.fields[0].config.unit?.startsWith("time:"),negY:V.fields.map(w=>w.config.custom?.transform===a.NU.NegativeY),fullHighlight:ct,hoverMulti:O.mode===a.$N.Multi},xt=Ce(oe,D);if(G.setCursor(xt.cursor),G.addHook("init",xt.init),G.addHook("drawClear",xt.drawClear),G.addHook("draw",xt.draw),L!==0){let w=50,P=lt.xOri===a.Lt.Horizontal?14:5;G.setPadding(Le(V,L,ot,w,P))}G.setPrepData(xt.prepData),G.addScale({scaleKey:"x",isTime:!1,range:xt.xRange,distribution:a.L4.Ordinal,orientation:lt.xOri,direction:lt.xDir});const kt=V.fields[0]?.config.custom?.axisPlacement!==a.vM.Hidden?lt.xOri===a.Lt.Horizontal?a.vM.Bottom:a.vM.Left:a.vM.Hidden,$t=V.fields[0]?.config.custom?.axisPlacement!==a.vM.Hidden;G.addAxis({scaleKey:"x",isTime:!1,placement:kt,label:V.fields[0]?.config.custom?.axisLabel,splits:xt.xSplits,filter:lt.xOri===0?xt.hFilter:void 0,values:xt.xValues,timeZone:j,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:lt.xOri===0?L*-1:0,theme:D,show:$t});for(let w=1;w<V.fields.length;w++){const P=V.fields[w],y={...ve,...P.config.custom},Y=P.config.unit||Pt.s,at=(0,et.Qi)(P),jt=(0,et.lz)(P,D).color;let Qt=y.axisSoftMin,ae=y.axisSoftMax;if(Qt==null&&P.config.min==null&&(Qt=0),ae==null&&P.config.max==null&&(ae=0),y.thresholdsStyle&&P.config.thresholds&&(y.thresholdsStyle.mode??a.Ly.Off)!==a.Ly.Off&&G.addThresholds({config:y.thresholdsStyle,thresholds:P.config.thresholds,scaleKey:Y,theme:D,hardMin:P.config.min,hardMax:P.config.max,softMin:y.axisSoftMin,softMax:y.axisSoftMax}),G.addSeries({scaleKey:Y,pxAlign:!0,lineWidth:y.lineWidth,lineColor:jt,fillOpacity:y.fillOpacity,theme:D,colorMode:at,pathBuilder:xt.barsBuilder,show:!y.hideFrom?.viz,gradientMode:y.gradientMode,thresholds:P.config.thresholds,hardMin:P.config.min,hardMax:P.config.max,softMin:y.axisSoftMin,softMax:y.axisSoftMax}),G.addScale({scaleKey:Y,min:P.config.min,max:P.config.max,softMin:Qt,softMax:ae,centeredZero:y.axisCenteredZero,orientation:lt.yOri,direction:lt.yDir,distribution:y.scaleDistribution?.type,log:y.scaleDistribution?.log,decimals:P.config.decimals}),y.axisPlacement!==a.vM.Hidden){let At=y.axisPlacement;(!At||At===a.vM.Auto)&&(At=a.vM.Left),lt.xOri===1&&(At===a.vM.Left&&(At=a.vM.Bottom),At===a.vM.Right&&(At=a.vM.Top));let _t={scaleKey:Y,label:y.axisLabel,size:y.axisWidth,placement:At,formatValue:(ge,me)=>(0,yt.cN)(P.display(ge,me)),filter:lt.yOri===0?xt.hFilter:void 0,tickLabelRotation:lt.xOri===1?L*-1:0,theme:D,grid:{show:y.axisGridShow},decimals:P.config.decimals};y.axisBorderShow&&(_t.border={show:!0}),y.axisColorMode===a.Y$.Series&&(_t.color=jt),G.addAxis(_t)}}let Zt=(0,K.ro)(V);return G.setStackingGroups(Zt),{builder:G,prepData:(w,P)=>(o=w,V=o[0],p=P,G.prepData(o))}};function ce(o,f){return o.length>f?o.substring(0,f).concat("..."):o}function Le(o,f,p,F=0,_=0){const j=o.fields[0].values,D=e.pi,q=o.fields[0].display,nt=O=>q?q(j[O]):j[O];let U=0;for(let O=0;O<j.length;O++){let L=(0,v.kD)(ce((0,yt.cN)(nt(O)),p),D);U=L.width>U?L.width:U}const gt=f>0?Math.cos(f*Math.PI/180)*(0,v.kD)(ce((0,yt.cN)(nt(j.length-1)),p),D).width:0,Tt=f<0?Math.cos(f*-1*Math.PI/180)*(0,v.kD)(ce((0,yt.cN)(nt(0)),p),D).width:0,Lt=Math.sin((f>=0?f:f*-1)*Math.PI/180)*U-_;return[Math.round(e.pi*$.A.pxRatio),gt,Lt,Math.max(0,Tt-F)]}function Ae(o){return o===a.wV.Vertical?{xOri:a.Lt.Horizontal,xDir:a.ON.Right,yOri:a.Lt.Vertical,yDir:a.ON.Up}:{xOri:a.Lt.Vertical,xDir:a.ON.Down,yOri:a.Lt.Horizontal,yDir:a.ON.Right}}const Re=(0,v.kD)("M",e.pi).width,Be=Math.PI/180,Ue=o=>{const{data:f,options:p,fieldConfig:F,width:_,height:j,timeZone:D,id:q,replaceVariables:nt}=o,U=(0,g.$j)(),{barWidth:gt,barRadius:Tt=0,showValue:Lt,groupWidth:O,stacking:L,legend:ot,tooltip:Ct,text:mt,xTickLabelRotation:ct,xTickLabelSpacing:V,fullHighlight:G,xField:ne,colorByField:bt}=p;let{orientation:Mt,xTickLabelMaxLength:lt=0}=p;Mt=Mt===T.wV.Auto?_<j?T.wV.Horizontal:T.wV.Vertical:Mt,lt=ct===0?1/0:lt||Math.floor(j/2/Math.sin(Math.abs(ct*Be))/Re-3);const pt=(0,s.useMemo)(()=>be(f.series,F,L,U,ne,bt),[f.series,F,L,U,ne,bt]),Dt=(0,s.useMemo)(()=>pt.series.map(P=>({...P,fields:P.fields.filter((y,Y)=>Y===0||!y.state?.hideFrom?.viz)})),[pt.series]),Ht=Dt[0]?.length??0,oe=Dt[0]?.fields.length??0,xt=Math.max(0,(pt.series[0]?.fields.length??0)-1);let{builder:kt,prepData:$t}=(0,s.useMemo)(()=>Ht===0?{builder:null,prepData:null}:De({series:Dt,totalSeries:xt,color:pt.color,orientation:Mt,options:p,timeZone:D,theme:U}),[Mt,D,o.data.structureRev,xt,oe,Ht,gt,Tt,Lt,O,L,ot,Ct,mt?.valueSize,ct,V,G,ne,bt,lt]);const Zt=(0,s.useMemo)(()=>$t==null?[]:$t(Dt,pt.color),[$t,Dt,pt.color]);if(pt.warn!=null||kt==null)return(0,n.jsx)(d.a,{panelId:q,fieldConfig:F,data:f,message:pt.warn??"",needsNumberField:!0});const w=ot.showLegend&&ft(kt,pt.series)?(0,n.jsx)(st,{data:pt.series,colorField:pt.color,...ot}):null;return(0,n.jsx)(m.KU,{width:o.width,height:o.height,legend:w,children:(P,y)=>(0,n.jsx)(h.Z,{config:kt,data:Zt,width:P,height:y,children:o.options.tooltip.mode!==a.$N.None&&(0,n.jsx)(E.xl,{config:kt,maxWidth:p.tooltip.maxWidth,hoverMode:p.tooltip.mode===a.$N.Single?E.b3.xOne:E.b3.xAll,getDataLinks:(Y,at)=>Dt[0].fields[Y].getLinks?.({valueRowIndex:at})??[],render:(Y,at,Gt,jt,Qt,ae,At,_t)=>(0,n.jsx)(N.k,{series:Dt[0],_rest:pt._rest,dataIdxs:at,seriesIdx:Gt,mode:p.tooltip.mode,sortOrder:p.tooltip.sort,isPinned:jt,maxHeight:p.tooltip.maxHeight,replaceVariables:nt,dataLinks:_t,hideZeros:p.tooltip.hideZeros})})})})};var We=t(32881),Fe=t(77824),Ne=t(45967),ze=t(32635);const Ie=o=>{const f=[{label:(0,i.t)("barchart.tick-spacing-editor.gaps-options.label-none","None"),value:0,description:(0,i.t)("barchart.tick-spacing-editor.gaps-options.description-none","Show all tick marks")},{label:(0,i.t)("barchart.tick-spacing-editor.gaps-options.label-small","Small"),value:100,description:(0,i.t)("barchart.tick-spacing-editor.gaps-options.description-small","Require {{spacing}} spacing",{spacing:"100px"})},{label:(0,i.t)("barchart.tick-spacing-editor.gaps-options.label-medium","Medium"),value:200,description:(0,i.t)("barchart.tick-spacing-editor.gaps-options.description-medium","Require {{spacing}} spacing",{spacing:"200px"})},{label:(0,i.t)("barchart.tick-spacing-editor.gaps-options.label-large","Large"),value:300,description:(0,i.t)("barchart.tick-spacing-editor.gaps-options.description-large","Require {{spacing}} spacing",{spacing:"300px"})}];let p=o.value??0;const F=p<0;F&&(p*=-1);let _=f[0];for(const q of f)if(_=q,p<=_.value)break;const j=q=>{o.onChange(q*(F?-1:1))},D=()=>{o.onChange(o.value*-1)};return(0,n.jsxs)(We.Gy,{children:[(0,n.jsx)(Fe.z,{value:_.value,options:f,onChange:j}),p!==0&&(0,n.jsx)(Ne.m,{content:(0,i.t)("barchart.tick-spacing-editor.content-require-space-from-the-right-side","Require space from the right side"),placement:"top",children:(0,n.jsx)("div",{children:(0,n.jsx)(ze.S,{value:F,onChange:D,label:(0,i.t)("barchart.tick-spacing-editor.label-rtl","RTL")})})})]})};var je=t(57866),ie=t(46644);const Ve=(o,f,p)=>{if(f==="graph"){const F=p.angular,_=o.fieldConfig??{defaults:{},overrides:[]};if(F.xaxis?.mode==="series"){const j=o.transformations||[];j.push({id:"reduce",options:{reducers:we(F.xaxis?.values)}},{id:"transpose",options:{}}),o.transformations=j,_.overrides.push({matcher:{id:je.Ct.byName,options:"Field"},properties:[{id:"custom.axisPlacement",value:a.vM.Hidden}]}),o.fieldConfig=_,o.options={...o.options,groupWidth:1}}}return{}},we=o=>{const f=[];return o?.forEach(p=>{Object.values(ie.gy).includes(p)?f.push(p):p==="current"?f.push(ie.gy.lastNotNull):p==="total"?f.push(ie.gy.sum):p==="avg"&&f.push(ie.gy.mean)}),o?f:[ie.gy.sum]};var Jt=t(73495);class Ke{getListWithDefaults(f){return f.getListAppender({name:Jt.m.BarChart,pluginId:"barchart",options:{showValue:a.yL.Never,legend:{calcs:[],displayMode:a.lm.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:p=>{p.options.barWidth=.8}}})}getSuggestionsForData(f){const p=this.getListWithDefaults(f),{dataSummary:F}=f;F.frameCount===1&&(!F.hasNumberField||!F.hasStringField||F.rowCountTotal>50||(p.append({name:Jt.m.BarChart}),F.numberFieldCount>1&&(p.append({name:Jt.m.BarChartStacked,options:{stacking:a.gs.Normal}}),p.append({name:Jt.m.BarChartStackedPercent,options:{stacking:a.gs.Percent}})),p.append({name:Jt.m.BarChartHorizontal,options:{orientation:T.wV.Horizontal}}),F.numberFieldCount>1&&(p.append({name:Jt.m.BarChartHorizontalStacked,options:{stacking:a.gs.Normal,orientation:T.wV.Horizontal}}),p.append({name:Jt.m.BarChartHorizontalStackedPercent,options:{orientation:T.wV.Horizontal,stacking:a.gs.Percent}}))))}}const He=new r.m(Ue).setPanelChangeHandler(Ve).useFieldConfig({standardOptions:{[M.uo.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:R.Y.PaletteClassic}},[M.uo.Links]:{settings:{showOneClick:!0}},[M.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:o=>{const f=ve;o.addSliderInput({path:"lineWidth",name:(0,i.t)("barchart.config.name-line-width","Line width"),defaultValue:f.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:(0,i.t)("barchart.config.name-fill-opacity","Fill opacity"),defaultValue:f.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:(0,i.t)("barchart.config.name-gradient-mode","Gradient mode"),defaultValue:(0,c.P)().fillGradient[0].value,settings:{options:(0,c.P)().fillGradient}}),o.addSelect({category:["Graph styles"],name:(0,i.t)("barchart.config.name-transform","Transform"),path:"transform",settings:{options:[{label:(0,i.t)("barchart.config.transform-options.label-constant","Constant"),value:a.NU.Constant,description:(0,i.t)("barchart.config.transform-options.description-constant","The first value will be shown as a constant line")},{label:(0,i.t)("barchart.config.transform-options.label-negative-y","Negative Y"),value:a.NU.NegativeY,description:(0,i.t)("barchart.config.transform-options.description-negative-y","Flip the results to negative values on the y axis")}],isClearable:!0},hideFromDefaults:!0}),o.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:(0,i.t)("barchart.config.name-show-thresholds","Show thresholds"),category:[(0,i.t)("barchart.config.category-thresholds","Thresholds")],defaultValue:{mode:a.Ly.Off},settings:{options:(0,c.P)().thresholdsDisplayModes},editor:ht.D,override:ht.D,process:H.hS,shouldApply:()=>!0}),X.rg(o,f),Q.e(o)}}).setPanelOptions(o=>{o.addFieldNamePicker({path:"xField",name:(0,i.t)("barchart.config.name-x-axis","X Axis"),settings:{placeholderText:(0,i.t)("barchart.config.placeholder-x-axis","First string or time field")}}).addRadio({path:"orientation",name:(0,i.t)("barchart.config.name-orientation","Orientation"),settings:{options:[{value:T.wV.Auto,label:(0,i.t)("barchart.config.orientation-options.label-auto","Auto")},{value:T.wV.Horizontal,label:(0,i.t)("barchart.config.orientation-options.label-horizontal","Horizontal")},{value:T.wV.Vertical,label:(0,i.t)("barchart.config.orientation-options.label-line-vertical","Vertical")}]},defaultValue:Kt.orientation}).addSliderInput({path:"xTickLabelRotation",name:(0,i.t)("barchart.config.name-rotate-x-labels","Rotate x-axis tick labels"),defaultValue:Kt.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:(0,i.t)("barchart.config.name-x-label-max-length","X-axis tick label max length"),description:(0,i.t)("barchart.config.description-x-label-max-length","X-axis labels will be truncated to the length provided"),settings:{placeholder:(0,i.t)("barchart.config.placeholder-x-label-max-length","None"),min:0},showIf:f=>f.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:(0,i.t)("barchart.config.name-x-label-min-spacing","X-axis labels minimum spacing"),defaultValue:Kt.xTickLabelSpacing,editor:Ie}).addRadio({path:"showValue",name:(0,i.t)("barchart.config.name-show-values","Show values"),settings:{options:[{value:a.yL.Auto,label:(0,i.t)("barchart.config.show-values-options.label-auto","Auto")},{value:a.yL.Always,label:(0,i.t)("barchart.config.show-values-options.label-always","Always")},{value:a.yL.Never,label:(0,i.t)("barchart.config.show-values-options.label-never","Never")}]},defaultValue:Kt.showValue}).addRadio({path:"stacking",name:(0,i.t)("barchart.config.name-stacking","Stacking"),settings:{options:(0,c.P)().stacking},defaultValue:Kt.stacking}).addSliderInput({path:"groupWidth",name:(0,i.t)("barchart.config.name-group-width","Group width"),defaultValue:Kt.groupWidth,settings:{min:0,max:1,step:.01},showIf:(f,p)=>f.stacking&&f.stacking!==a.gs.None?!1:ke(p)!==1}).addSliderInput({path:"barWidth",name:(0,i.t)("barchart.config.name-bar-width","Bar width"),defaultValue:Kt.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:(0,i.t)("barchart.config.name-bar-radius","Bar radius"),defaultValue:Kt.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:(0,i.t)("barchart.config.name-full-highlight","Highlight full area on hover"),defaultValue:Kt.fullHighlight,showIf:f=>f.stacking===a.gs.None}),o.addFieldNamePicker({path:"colorByField",name:(0,i.t)("barchart.config.name-color-by-field","Color by field"),description:(0,i.t)("barchart.config.description-color-by-field","Use the color value for a sibling field to color each bar value.")}),Z.D(o,!1,!1,Z.U),it.H(o),ut.I(o,!1)}).setSuggestionsSupplier(new Ke);function ke(o){let f=0;if(o)for(const p of o)for(const F of p.fields)F.type===B.PU.number&&f++;return f}},86967:(It,J,t)=>{t.d(J,{DO:()=>H,en:()=>r,gR:()=>M,xp:()=>R});var r=(c=>(c.Center="center",c.Left="left",c.LeftRight="leftright",c.Right="right",c.Scale="scale",c))(r||{}),M=(c=>(c.Bottom="bottom",c.Center="center",c.Scale="scale",c.Top="top",c.TopBottom="topbottom",c))(M||{}),R=(c=>(c.Contain="contain",c.Cover="cover",c.Fill="fill",c.Original="original",c.Tile="tile",c))(R||{}),H=(c=>(c.GET="GET",c.POST="POST",c.PUT="PUT",c))(H||{}),T=(c=>(c.Straight="straight",c))(T||{});const B={vertices:[]},i={connections:[]},a={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},16913:(It,J,t)=>{t.d(J,{OG:()=>H,u6:()=>M});var r=t(73163);const M=(T,B)=>{const i=[];if((T.config.links?.length??0)>0&&T.getLinks!=null){const a=T.values[B],c=T.display?T.display(a):{text:`${a}`,numeric:+a},X=new Set;T.getLinks({calculatedValue:c,valueRowIndex:B}).forEach(Q=>{const Z=`${Q.title}/${Q.href}`;X.has(Z)||(i.push(Q),X.add(Z))})}return i},R=T=>{},H=(T,B,i,a)=>{const c=[],X=new Set;return(0,r.ko)(T,B,B.state.scopedVars,i,B.config.actions??[],{valueRowIndex:a}).forEach(Z=>{const it=`${Z.title}`;X.has(it)||(c.push(Z),X.add(it))}),c}},78308:(It,J,t)=>{t.d(J,{k:()=>it});var r=t(74848),M=t(55386),R=t(95004),H=t(739),T=t(55302),B=t(39064),i=t(61048),a=t(41530),c=t(47466),X=t(16913),Q=t(74542),Z=t(76234);const it=({series:ut,_rest:ht,dataIdxs:n,seriesIdx:s,mode:d=H.$N.Single,sortOrder:v=H.xB.None,isPinned:e,annotate:g,maxHeight:m,replaceVariables:h=z=>z,dataLinks:E,hideZeros:N})=>{const z=ut.fields[0],tt=(0,M.cN)(z.display(z.values[n[0]])),et=(0,T.cp)(ut.fields,z,n,s,d,v,S=>S.type===R.PU.number||S.type===R.PU.enum,N);ht?.forEach(S=>{S.config.custom?.hideFrom?.tooltip||et.push({label:S.state?.displayName??S.name,value:(0,Q.Sc)(S,S.values[n[0]])})});let dt;if(s!=null){const S=ut.fields[s],ft=E.some(st=>st.oneClick===!0);if(e||ft){const st=n[s],$=(0,X.OG)(ut,S,h,st);dt=(0,r.jsx)(B.S,{dataLinks:E,actions:$,annotate:g})}}const K=z.config.custom?.hideFrom?.tooltip?null:{label:z.type===R.PU.time?"":z.state?.displayName??z.name,value:tt};return(0,r.jsxs)(i.i,{children:[K!=null&&(0,r.jsx)(a.A,{item:K,isPinned:e}),(0,r.jsx)(c.o,{items:et,isPinned:e,scrollable:(0,Z.T5)({mode:d,maxHeight:m}),maxHeight:m}),dt]})}},76234:(It,J,t)=>{t.d(J,{B_:()=>Q,Fg:()=>ut,O2:()=>it,T5:()=>ht});var r=t(95004),M=t(16515),R=t(63409),H=t(34455),T=t(55386),B=t(11576),i=t(406),a=t(739),c=t(70332);function X(n){let s=new Map;return n.map(v=>({...v,fields:v.fields.map(e=>{if(e.type===r.PU.enum){let g=(0,c.M)(e.config,e.type),m=s.get(g);m||(m=[],s.set(g,m));let h=e.values.toArray().slice(),E=e.config.type.enum.text;if(m.length>0)for(let N=0;N<h.length;N++)h[N]+=m.length;return m.push(...E),e.config.type.enum.text=m,{...e,values:h}}return e})}))}function Q(n,s,d,v){if(!n?.length)return null;(0,M.Fm)(n);let e=v!=null;v!=null&&v>0&&(n=[{...n[0],fields:[n[0].fields[v],...n[0].fields.filter((E,N)=>N!==v)]}]);for(let E of n)for(let N of E.fields)N.type===r.PU.time&&typeof N.values[0]!="number"&&(N.values=(0,i.s7)(N,{destinationType:r.PU.time}).values);let g=0;t:for(let E of n)for(let N of E.fields)if(N.type===r.PU.enum&&++g>1){n=X(n);break t}let m;const h=[];for(let E of n){const N=[];let z=!1,tt=!1,et=e?E:(0,R.M)({frame:E,refFieldPseudoMin:d?.from.valueOf(),refFieldPseudoMax:d?.to.valueOf()});const dt=(0,H.C)(et).fields;for(let K=0;K<(dt?.length||0);K++){const S=dt[K];switch(S.type){case r.PU.time:z=!0,N.push(S);break;case r.PU.number:tt=e?K>0:!0,m={...S,values:S.values.map($=>Number.isFinite($)||$==null?$:null)},N.push(m);break;case r.PU.enum:tt=!0;case r.PU.string:m={...S,values:S.values},N.push(m);break;case r.PU.boolean:tt=!0;const ft=S.config?.custom??{},st={...S.config,max:1,min:0,custom:ft};ft.lineInterpolation!==a.dx.StepBefore&&(ft.lineInterpolation=a.dx.StepAfter),m={...S,config:st,type:r.PU.number,values:S.values.map($=>$==null?$:$?1:0)},(0,T.j9)(st.unit)||(st.unit="bool",m.display=(0,B.J)({field:m,theme:s})),N.push(m);break}}(e||z)&&tt&&h.push({...E,length:et.length,fields:N})}return h.length?(it(h,s,0),Z(h,s),h):null}const Z=(n,s)=>{const{palette:d}=s.visualization;for(const v of n)for(const e of v.fields)if(e.type===r.PU.enum){const g=d[e.state?.seriesIndex%d.length],m=s.visualization.getColorByName(g),h=e.config.type.enum;h.color=Array(h.text.length).fill(m),e.display=(0,B.J)({field:e,theme:s})}},it=(n,s,d)=>{let v=0;n.forEach(e=>{e.fields.forEach((g,m)=>{m!==d&&(g.type===r.PU.number||g.type===r.PU.boolean||g.type===r.PU.enum)&&(g.state={...g.state,seriesIndex:v++},g.display=(0,B.J)({field:g,theme:s}))})})};function ut(n,s){return!n||!n.length?[s]:n.map(d=>d?.length?d:s)}const ht=n=>n.mode===a.$N.Multi&&n.maxHeight!=null},99914:(It,J,t)=>{t.d(J,{Oq:()=>R,QB:()=>T,it:()=>M,uZ:()=>r});var r=(i=>(i.Circle="circle",i.Square="square",i))(r||{}),M=(i=>(i.Auto="auto",i.Manual="manual",i))(M||{}),R=(i=>(i.Lines="lines",i.Points="points",i.PointsAndLines="points+lines",i))(R||{});const H={id:""},T={fillOpacity:50,show:"points"},B={series:[]}},74542:(It,J,t)=>{t.d(J,{Sc:()=>X,hV:()=>Z,rE:()=>ut});var r=t(55386),M=t(57866),R=t(16515),H=t(36638),T=t(95004),B=t(64394),i=t(43173),a=t(739),c=t(99914);function X(n,s){return n.display?(0,r.cN)(n.display(s)):`${s}`}function Q(n){return n.id===M.jR.byIndex?(s,d)=>d===n.options:()=>!1}function Z(n,s,d,v){(0,R.Fm)(d),(0,R.j2)(d,v);let e=[];s.length===0&&(s=[{}]);const{palette:g,getColorByName:m}=i.$.theme2.visualization;if(s.forEach((h,E)=>{if(n===c.it.Manual&&(h.frame?.matcher==null||h.x?.matcher==null||h.y?.matcher==null))return;let N=(0,H.NS)(h.x?.matcher??{id:M.Ct.byTypes,options:new Set(["number","time"])}),z=(0,H.NS)(h.y?.matcher??{id:M.Ct.byType,options:"number"}),tt=h.color?(0,H.NS)(h.color.matcher):null,et=h.size?(0,H.NS)(h.size.matcher):null,dt=h.frame?Q(h.frame.matcher):null;d.forEach((K,S)=>{if(dt!=null&&!dt(K,S))return;let ft=[],st=[],$=K.fields.filter(W=>W.type===T.PU.number||W.type===T.PU.time),Ut=$.find(W=>N(W,K,d)),Vt=$.filter(W=>W.type===T.PU.number),Wt=tt!=null?Vt.find(W=>W!==Ut&&tt(W,K,d)):void 0,yt=et!=null?Vt.find(W=>W!==Ut&&W!==Wt&&et(W,K,d)):void 0;Ut!=null&&(Vt.forEach(W=>{if(W!==Ut&&!(n===c.it.Auto&&(W===Wt||W===yt))&&!(n===c.it.Manual&&st.length>0)&&z(W,K,d)&&!W.config.custom?.hideFrom?.viz){let k=W,Pt=h.name?.fixed;if(Pt==null){const Xt=d.length>1&&(K.name!=null||Object.keys(k.labels??{}).length>0),{displayName:wt,displayNameFromDS:rt}=k.config,Et=wt!=null||rt!=null;if(Xt&&Et){const St=k.state.displayName;k.config.displayName=k.config.displayNameFromDS=k.state.displayName=void 0,Pt=(0,R.Ct)(k,K,d),Pt=Pt.replace(k.name,rt??wt),k.config.displayName=wt,k.config.displayNameFromDS=rt,k.state.displayName=St}else Pt=(0,R.Ct)(k,K,d)}let Ft={name:{value:Pt},showPoints:k.config.custom.show===c.Oq.Lines?a.yL.Never:a.yL.Always,pointShape:k.config.custom.pointShape,pointStrokeWidth:k.config.custom.pointStrokeWidth,fillOpacity:k.config.custom.fillOpacity,showLine:k.config.custom.show!==c.Oq.Points,lineWidth:k.config.custom.lineWidth??2,lineStyle:k.config.custom.lineStyle,x:{field:Ut},y:{field:k},color:{},size:{},_rest:ft};Wt!=null&&(Ft.color.field=Wt),yt!=null&&(Ft.size.field=yt,Ft.size.min=yt.config.custom.pointSize?.min??5,Ft.size.max=yt.config.custom.pointSize?.max??100),st.push(Ft)}}),st.length,K.fields.forEach(W=>{st.some(({x:Pt,y:Ft,color:Xt,size:wt})=>Pt.field===W||Ft.field===W||Xt.field===W||wt.field===W)||ft.push(W)}),e.push(...st))})}),e.length!==0){let h=0;e.forEach((E,N)=>{if(E.color.field==null){let z=E.y.field.config.color??{mode:B.Y.PaletteClassic},tt="";z.mode===B.Y.PaletteClassic?tt=m(g[h++%g.length]):z.mode===B.Y.Fixed&&(tt=m(z.fixedColor)),E.color.fixed=tt}E.size.field==null&&(E.size.fixed=E.y.field.config.custom.pointSize?.fixed??5)}),it(e)}return e}function it(n){let s=n.map(e=>e.name.value.split(/\s+/g));const{prefix:d,suffix:v}=ht(s);(d<1/0||v<1/0)&&n.forEach((e,g)=>{e.name.value=s[g].slice(d,s[g].length-v).join(" ")})}function ut(n){let s=n.map(m=>m.split(/\s+/g)),{prefix:d,suffix:v}=ht(s),e=s[0];if(e.length===1&&d===1&&v===1)return"";let g=[];return d>0&&g.push(...e.slice(0,d)),v>0&&g.push(...e.slice(-v)),g.join(" ")}function ht(n){let s=1/0,d=1/0,v=n[0];for(let e=1;e<n.length;e++)n[e].length<v.length&&(v=n[e]);for(let e=1;e<n.length;e++){let g=n[e];if(g!==v){let m=0;for(let E=0;E<v.length&&g[E]===v[E];E++)m++;m<s&&(s=m);let h=0;for(let E=v.length-1;E>=0&&g[E]===v[E];E--)h++;h<d&&(d=h)}}return{prefix:s,suffix:d}}}}]);

//# sourceMappingURL=barChartPanel.4c69fcd236cf5608bf6a.js.map