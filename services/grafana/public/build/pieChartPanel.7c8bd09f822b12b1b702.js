(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6105],{33434:(dt,L,x)=>{"use strict";x.d(L,{A:()=>V});var I=x(5556),R=x.n(I),F=x(96540),K=x(46942),U=x.n(K),nt=["top","left","transform","className","children","innerRef"];function Z(){return Z=Object.assign?Object.assign.bind():function(m){for(var w=1;w<arguments.length;w++){var k=arguments[w];for(var O in k)Object.prototype.hasOwnProperty.call(k,O)&&(m[O]=k[O])}return m},Z.apply(this,arguments)}function P(m,w){if(m==null)return{};var k={},O=Object.keys(m),M,z;for(z=0;z<O.length;z++)M=O[z],!(w.indexOf(M)>=0)&&(k[M]=m[M]);return k}function V(m){var w=m.top,k=w===void 0?0:w,O=m.left,M=O===void 0?0:O,z=m.transform,E=m.className,D=m.children,j=m.innerRef,H=P(m,nt);return F.createElement("g",Z({ref:j,className:U()("visx-group",E),transform:z||"translate("+M+", "+k+")"},H),D)}V.propTypes={top:R().number,left:R().number,transform:R().string,className:R().string,children:R().node,innerRef:R().oneOfType([R().string,R().func,R().object])}},68293:(dt,L,x)=>{"use strict";x.r(L),x.d(L,{Group:()=>I.A});var I=x(33434)},44916:(dt,L,x)=>{"use strict";var I;I=!0,L.A=m;var R=Z(x(96540)),F=Z(x(46942)),K=x(68293),U=x(9810),nt=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function Z(w){return w&&w.__esModule?w:{default:w}}function P(){return P=Object.assign?Object.assign.bind():function(w){for(var k=1;k<arguments.length;k++){var O=arguments[k];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(w[M]=O[M])}return w},P.apply(this,arguments)}function V(w,k){if(w==null)return{};var O={},M=Object.keys(w),z,E;for(E=0;E<M.length;E++)z=M[E],!(k.indexOf(z)>=0)&&(O[z]=w[z]);return O}function m(w){var k=w.className,O=w.top,M=w.left,z=w.data,E=z===void 0?[]:z,D=w.centroid,j=w.innerRadius,H=j===void 0?0:j,Q=w.outerRadius,J=w.cornerRadius,q=w.startAngle,Bt=w.endAngle,Qt=w.padAngle,Jt=w.padRadius,qt=w.pieSort,te=w.pieSortValues,mt=w.pieValue,It=w.children,Pt=w.fill,et=Pt===void 0?"":Pt,pt=V(w,nt),_t=(0,U.arc)({innerRadius:H,outerRadius:Q,cornerRadius:J,padRadius:Jt}),vt=(0,U.pie)({startAngle:q,endAngle:Bt,padAngle:Qt,value:mt,sort:qt,sortValues:te}),wt=vt(E);return It?R.default.createElement(R.default.Fragment,null,It({arcs:wt,path:_t,pie:vt})):R.default.createElement(K.Group,{className:"visx-pie-arcs-group",top:O,left:M},wt.map(function(xt,Mt){return R.default.createElement("g",{key:"pie-arc-"+Mt},R.default.createElement("path",P({className:(0,F.default)("visx-pie-arc",k),d:_t(xt)||"",fill:et==null||typeof et=="string"?et:et(xt)},pt)),D?.(_t.centroid(xt),xt))}))}},9810:(dt,L,x)=>{"use strict";L.__esModule=!0,L.arc=nt,L.area=Z,L.line=P,L.pie=V,L.radialLine=m,L.stack=w;var I=x(43106),R=U(x(33518)),F=U(x(76290)),K=U(x(90203));function U(k){return k&&k.__esModule?k:{default:k}}function nt(k){var O=k===void 0?{}:k,M=O.innerRadius,z=O.outerRadius,E=O.cornerRadius,D=O.startAngle,j=O.endAngle,H=O.padAngle,Q=O.padRadius,J=(0,I.arc)();return M!=null&&(0,R.default)(J.innerRadius,M),z!=null&&(0,R.default)(J.outerRadius,z),E!=null&&(0,R.default)(J.cornerRadius,E),D!=null&&(0,R.default)(J.startAngle,D),j!=null&&(0,R.default)(J.endAngle,j),H!=null&&(0,R.default)(J.padAngle,H),Q!=null&&(0,R.default)(J.padRadius,Q),J}function Z(k){var O=k===void 0?{}:k,M=O.x,z=O.x0,E=O.x1,D=O.y,j=O.y0,H=O.y1,Q=O.defined,J=O.curve,q=(0,I.area)();return M&&(0,R.default)(q.x,M),z&&(0,R.default)(q.x0,z),E&&(0,R.default)(q.x1,E),D&&(0,R.default)(q.y,D),j&&(0,R.default)(q.y0,j),H&&(0,R.default)(q.y1,H),Q&&q.defined(Q),J&&q.curve(J),q}function P(k){var O=k===void 0?{}:k,M=O.x,z=O.y,E=O.defined,D=O.curve,j=(0,I.line)();return M&&(0,R.default)(j.x,M),z&&(0,R.default)(j.y,z),E&&j.defined(E),D&&j.curve(D),j}function V(k){var O=k===void 0?{}:k,M=O.startAngle,z=O.endAngle,E=O.padAngle,D=O.value,j=O.sort,H=O.sortValues,Q=(0,I.pie)();return(j===null||j!=null)&&Q.sort(j),(H===null||H!=null)&&Q.sortValues(H),D!=null&&Q.value(D),E!=null&&(0,R.default)(Q.padAngle,E),M!=null&&(0,R.default)(Q.startAngle,M),z!=null&&(0,R.default)(Q.endAngle,z),Q}function m(k){var O=k===void 0?{}:k,M=O.angle,z=O.radius,E=O.defined,D=O.curve,j=(0,I.radialLine)();return M&&(0,R.default)(j.angle,M),z&&(0,R.default)(j.radius,z),E&&j.defined(E),D&&j.curve(D),j}function w(k){var O=k.keys,M=k.value,z=k.order,E=k.offset,D=(0,I.stack)();return O&&D.keys(O),M&&(0,R.default)(D.value,M),z&&D.order((0,F.default)(z)),E&&D.offset((0,K.default)(E)),D}},33518:(dt,L)=>{"use strict";L.__esModule=!0,L.default=x;function x(I,R){I(R)}},90203:(dt,L,x)=>{"use strict";L.__esModule=!0,L.STACK_OFFSET_NAMES=L.STACK_OFFSETS=void 0,L.default=K;var I=x(43106),R={expand:I.stackOffsetExpand,diverging:I.stackOffsetDiverging,none:I.stackOffsetNone,silhouette:I.stackOffsetSilhouette,wiggle:I.stackOffsetWiggle};L.STACK_OFFSETS=R;var F=Object.keys(R);L.STACK_OFFSET_NAMES=F;function K(U){return U&&R[U]||R.none}},76290:(dt,L,x)=>{"use strict";L.__esModule=!0,L.STACK_ORDER_NAMES=L.STACK_ORDERS=void 0,L.default=K;var I=x(43106),R={ascending:I.stackOrderAscending,descending:I.stackOrderDescending,insideout:I.stackOrderInsideOut,none:I.stackOrderNone,reverse:I.stackOrderReverse};L.STACK_ORDERS=R;var F=Object.keys(R);L.STACK_ORDER_NAMES=F;function K(U){return U&&R[U]||R.none}},43106:(dt,L,x)=>{"use strict";x.r(L),x.d(L,{arc:()=>It,area:()=>wt,areaRadial:()=>Ct,curveBasis:()=>Yt,curveBasisClosed:()=>we,curveBasisOpen:()=>Qe,curveBundle:()=>re,curveCardinal:()=>le,curveCardinalClosed:()=>Je,curveCardinalOpen:()=>qe,curveCatmullRom:()=>tn,curveCatmullRomClosed:()=>ot,curveCatmullRomOpen:()=>yn,curveLinear:()=>et,curveLinearClosed:()=>Ae,curveMonotoneX:()=>nn,curveMonotoneY:()=>sn,curveNatural:()=>De,curveStep:()=>on,curveStepAfter:()=>an,curveStepBefore:()=>rn,line:()=>vt,lineRadial:()=>ye,linkHorizontal:()=>Ue,linkRadial:()=>tt,linkVertical:()=>Ye,pie:()=>je,pointRadial:()=>At,radialArea:()=>Ct,radialLine:()=>ye,stack:()=>un,stackOffsetDiverging:()=>cn,stackOffsetExpand:()=>Lt,stackOffsetNone:()=>bt,stackOffsetSilhouette:()=>hn,stackOffsetWiggle:()=>i,stackOrderAppearance:()=>l,stackOrderAscending:()=>u,stackOrderDescending:()=>d,stackOrderInsideOut:()=>v,stackOrderNone:()=>Ot,stackOrderReverse:()=>C,symbol:()=>Ze,symbolCircle:()=>Ft,symbolCross:()=>xe,symbolDiamond:()=>be,symbolSquare:()=>Wt,symbolStar:()=>ie,symbolTriangle:()=>$t,symbolWye:()=>Se,symbols:()=>se});var I=Math.PI,R=2*I,F=1e-6,K=R-F;function U(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function nt(){return new U}U.prototype=nt.prototype={constructor:U,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,s){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(t,e,n,s,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +s+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,s,r){t=+t,e=+e,n=+n,s=+s,r=+r;var a=this._x1,h=this._y1,o=n-t,c=s-e,_=a-t,p=h-e,y=_*_+p*p;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(y>F)if(!(Math.abs(p*o-c*_)>F)||!r)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var b=n-a,N=s-h,T=o*o+c*c,S=b*b+N*N,A=Math.sqrt(T),W=Math.sqrt(y),G=r*Math.tan((I-Math.acos((T+y-S)/(2*A*W)))/2),Y=G/W,X=G/A;Math.abs(Y-1)>F&&(this._+="L"+(t+Y*_)+","+(e+Y*p)),this._+="A"+r+","+r+",0,0,"+ +(p*b>_*N)+","+(this._x1=t+X*o)+","+(this._y1=e+X*c)}},arc:function(t,e,n,s,r,a){t=+t,e=+e,n=+n,a=!!a;var h=n*Math.cos(s),o=n*Math.sin(s),c=t+h,_=e+o,p=1^a,y=a?s-r:r-s;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+_:(Math.abs(this._x1-c)>F||Math.abs(this._y1-_)>F)&&(this._+="L"+c+","+_),n&&(y<0&&(y=y%R+R),y>K?this._+="A"+n+","+n+",0,1,"+p+","+(t-h)+","+(e-o)+"A"+n+","+n+",0,1,"+p+","+(this._x1=c)+","+(this._y1=_):y>F&&(this._+="A"+n+","+n+",0,"+ +(y>=I)+","+p+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,s){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}};const Z=nt;function P(t){return function(){return t}}var V=Math.abs,m=Math.atan2,w=Math.cos,k=Math.max,O=Math.min,M=Math.sin,z=Math.sqrt,E=1e-12,D=Math.PI,j=D/2,H=2*D;function Q(t){return t>1?0:t<-1?D:Math.acos(t)}function J(t){return t>=1?j:t<=-1?-j:Math.asin(t)}function q(t){return t.innerRadius}function Bt(t){return t.outerRadius}function Qt(t){return t.startAngle}function Jt(t){return t.endAngle}function qt(t){return t&&t.padAngle}function te(t,e,n,s,r,a,h,o){var c=n-t,_=s-e,p=h-r,y=o-a,b=y*c-p*_;if(!(b*b<E))return b=(p*(e-a)-y*(t-r))/b,[t+b*c,e+b*_]}function mt(t,e,n,s,r,a,h){var o=t-n,c=e-s,_=(h?a:-a)/z(o*o+c*c),p=_*c,y=-_*o,b=t+p,N=e+y,T=n+p,S=s+y,A=(b+T)/2,W=(N+S)/2,G=T-b,Y=S-N,X=G*G+Y*Y,rt=r-a,at=b*S-T*N,Rt=(Y<0?-1:1)*z(k(0,rt*rt*X-at*at)),St=(at*Y-G*Rt)/X,ut=(-at*G-Y*Rt)/X,ht=(at*Y+G*Rt)/X,ft=(-at*G+Y*Rt)/X,B=St-A,$=ut-W,zt=ht-A,Dt=ft-W;return B*B+$*$>zt*zt+Dt*Dt&&(St=ht,ut=ft),{cx:St,cy:ut,x01:-p,y01:-y,x11:St*(r/rt-1),y11:ut*(r/rt-1)}}function It(){var t=q,e=Bt,n=P(0),s=null,r=Qt,a=Jt,h=qt,o=null;function c(){var _,p,y=+t.apply(this,arguments),b=+e.apply(this,arguments),N=r.apply(this,arguments)-j,T=a.apply(this,arguments)-j,S=V(T-N),A=T>N;if(o||(o=_=Z()),b<y&&(p=b,b=y,y=p),!(b>E))o.moveTo(0,0);else if(S>H-E)o.moveTo(b*w(N),b*M(N)),o.arc(0,0,b,N,T,!A),y>E&&(o.moveTo(y*w(T),y*M(T)),o.arc(0,0,y,T,N,A));else{var W=N,G=T,Y=N,X=T,rt=S,at=S,Rt=h.apply(this,arguments)/2,St=Rt>E&&(s?+s.apply(this,arguments):z(y*y+b*b)),ut=O(V(b-y)/2,+n.apply(this,arguments)),ht=ut,ft=ut,B,$;if(St>E){var zt=J(St/y*M(Rt)),Dt=J(St/b*M(Rt));(rt-=zt*2)>E?(zt*=A?1:-1,Y+=zt,X-=zt):(rt=0,Y=X=(N+T)/2),(at-=Dt*2)>E?(Dt*=A?1:-1,W+=Dt,G-=Dt):(at=0,W=G=(N+T)/2)}var Ht=b*w(W),Zt=b*M(W),Be=y*w(X),Ie=y*M(X);if(ut>E){var Ve=b*w(G),Fe=b*M(G),fn=y*w(Y),dn=y*M(Y),yt;if(S<D&&(yt=te(Ht,Zt,fn,dn,Ve,Fe,Be,Ie))){var pn=Ht-yt[0],_n=Zt-yt[1],vn=Ve-yt[0],gn=Fe-yt[1],mn=1/M(Q((pn*vn+_n*gn)/(z(pn*pn+_n*_n)*z(vn*vn+gn*gn)))/2),xn=z(yt[0]*yt[0]+yt[1]*yt[1]);ht=O(ut,(y-xn)/(mn-1)),ft=O(ut,(b-xn)/(mn+1))}}at>E?ft>E?(B=mt(fn,dn,Ht,Zt,b,ft,A),$=mt(Ve,Fe,Be,Ie,b,ft,A),o.moveTo(B.cx+B.x01,B.cy+B.y01),ft<ut?o.arc(B.cx,B.cy,ft,m(B.y01,B.x01),m($.y01,$.x01),!A):(o.arc(B.cx,B.cy,ft,m(B.y01,B.x01),m(B.y11,B.x11),!A),o.arc(0,0,b,m(B.cy+B.y11,B.cx+B.x11),m($.cy+$.y11,$.cx+$.x11),!A),o.arc($.cx,$.cy,ft,m($.y11,$.x11),m($.y01,$.x01),!A))):(o.moveTo(Ht,Zt),o.arc(0,0,b,W,G,!A)):o.moveTo(Ht,Zt),!(y>E)||!(rt>E)?o.lineTo(Be,Ie):ht>E?(B=mt(Be,Ie,Ve,Fe,y,-ht,A),$=mt(Ht,Zt,fn,dn,y,-ht,A),o.lineTo(B.cx+B.x01,B.cy+B.y01),ht<ut?o.arc(B.cx,B.cy,ht,m(B.y01,B.x01),m($.y01,$.x01),!A):(o.arc(B.cx,B.cy,ht,m(B.y01,B.x01),m(B.y11,B.x11),!A),o.arc(0,0,y,m(B.cy+B.y11,B.cx+B.x11),m($.cy+$.y11,$.cx+$.x11),A),o.arc($.cx,$.cy,ht,m($.y11,$.x11),m($.y01,$.x01),!A))):o.arc(0,0,y,X,Y,A)}if(o.closePath(),_)return o=null,_+""||null}return c.centroid=function(){var _=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-D/2;return[w(p)*_,M(p)*_]},c.innerRadius=function(_){return arguments.length?(t=typeof _=="function"?_:P(+_),c):t},c.outerRadius=function(_){return arguments.length?(e=typeof _=="function"?_:P(+_),c):e},c.cornerRadius=function(_){return arguments.length?(n=typeof _=="function"?_:P(+_),c):n},c.padRadius=function(_){return arguments.length?(s=_==null?null:typeof _=="function"?_:P(+_),c):s},c.startAngle=function(_){return arguments.length?(r=typeof _=="function"?_:P(+_),c):r},c.endAngle=function(_){return arguments.length?(a=typeof _=="function"?_:P(+_),c):a},c.padAngle=function(_){return arguments.length?(h=typeof _=="function"?_:P(+_),c):h},c.context=function(_){return arguments.length?(o=_??null,c):o},c}function Pt(t){this._context=t}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function et(t){return new Pt(t)}function pt(t){return t[0]}function _t(t){return t[1]}function vt(){var t=pt,e=_t,n=P(!0),s=null,r=et,a=null;function h(o){var c,_=o.length,p,y=!1,b;for(s==null&&(a=r(b=Z())),c=0;c<=_;++c)!(c<_&&n(p=o[c],c,o))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(p,c,o),+e(p,c,o));if(b)return a=null,b+""||null}return h.x=function(o){return arguments.length?(t=typeof o=="function"?o:P(+o),h):t},h.y=function(o){return arguments.length?(e=typeof o=="function"?o:P(+o),h):e},h.defined=function(o){return arguments.length?(n=typeof o=="function"?o:P(!!o),h):n},h.curve=function(o){return arguments.length?(r=o,s!=null&&(a=r(s)),h):r},h.context=function(o){return arguments.length?(o==null?s=a=null:a=r(s=o),h):s},h}function wt(){var t=pt,e=null,n=P(0),s=_t,r=P(!0),a=null,h=et,o=null;function c(p){var y,b,N,T=p.length,S,A=!1,W,G=new Array(T),Y=new Array(T);for(a==null&&(o=h(W=Z())),y=0;y<=T;++y){if(!(y<T&&r(S=p[y],y,p))===A)if(A=!A)b=y,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),N=y-1;N>=b;--N)o.point(G[N],Y[N]);o.lineEnd(),o.areaEnd()}A&&(G[y]=+t(S,y,p),Y[y]=+n(S,y,p),o.point(e?+e(S,y,p):G[y],s?+s(S,y,p):Y[y]))}if(W)return o=null,W+""||null}function _(){return vt().defined(r).curve(h).context(a)}return c.x=function(p){return arguments.length?(t=typeof p=="function"?p:P(+p),e=null,c):t},c.x0=function(p){return arguments.length?(t=typeof p=="function"?p:P(+p),c):t},c.x1=function(p){return arguments.length?(e=p==null?null:typeof p=="function"?p:P(+p),c):e},c.y=function(p){return arguments.length?(n=typeof p=="function"?p:P(+p),s=null,c):n},c.y0=function(p){return arguments.length?(n=typeof p=="function"?p:P(+p),c):n},c.y1=function(p){return arguments.length?(s=p==null?null:typeof p=="function"?p:P(+p),c):s},c.lineX0=c.lineY0=function(){return _().x(t).y(n)},c.lineY1=function(){return _().x(t).y(s)},c.lineX1=function(){return _().x(e).y(n)},c.defined=function(p){return arguments.length?(r=typeof p=="function"?p:P(!!p),c):r},c.curve=function(p){return arguments.length?(h=p,a!=null&&(o=h(a)),c):h},c.context=function(p){return arguments.length?(p==null?a=o=null:o=h(a=p),c):a},c}function xt(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Mt(t){return t}function je(){var t=Mt,e=xt,n=null,s=P(0),r=P(H),a=P(0);function h(o){var c,_=o.length,p,y,b=0,N=new Array(_),T=new Array(_),S=+s.apply(this,arguments),A=Math.min(H,Math.max(-H,r.apply(this,arguments)-S)),W,G=Math.min(Math.abs(A)/_,a.apply(this,arguments)),Y=G*(A<0?-1:1),X;for(c=0;c<_;++c)(X=T[N[c]=c]=+t(o[c],c,o))>0&&(b+=X);for(e!=null?N.sort(function(rt,at){return e(T[rt],T[at])}):n!=null&&N.sort(function(rt,at){return n(o[rt],o[at])}),c=0,y=b?(A-_*Y)/b:0;c<_;++c,S=W)p=N[c],X=T[p],W=S+(X>0?X*y:0)+Y,T[p]={data:o[p],index:c,value:X,startAngle:S,endAngle:W,padAngle:G};return T}return h.value=function(o){return arguments.length?(t=typeof o=="function"?o:P(+o),h):t},h.sortValues=function(o){return arguments.length?(e=o,n=null,h):e},h.sort=function(o){return arguments.length?(n=o,e=null,h):n},h.startAngle=function(o){return arguments.length?(s=typeof o=="function"?o:P(+o),h):s},h.endAngle=function(o){return arguments.length?(r=typeof o=="function"?o:P(+o),h):r},h.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:P(+o),h):a},h}var ve=ee(et);function ge(t){this._curve=t}ge.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function ee(t){function e(n){return new ge(t(n))}return e._curve=t,e}function Et(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(ee(n)):e()._curve},t}function ye(){return Et(vt().curve(ve))}function Ct(){var t=wt().curve(ve),e=t.curve,n=t.lineX0,s=t.lineX1,r=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Et(n())},delete t.lineX0,t.lineEndAngle=function(){return Et(s())},delete t.lineX1,t.lineInnerRadius=function(){return Et(r())},delete t.lineY0,t.lineOuterRadius=function(){return Et(a())},delete t.lineY1,t.curve=function(h){return arguments.length?e(ee(h)):e()._curve},t}function At(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}var Vt=Array.prototype.slice;function Ke(t){return t.source}function We(t){return t.target}function ne(t){var e=Ke,n=We,s=pt,r=_t,a=null;function h(){var o,c=Vt.call(arguments),_=e.apply(this,c),p=n.apply(this,c);if(a||(a=o=Z()),t(a,+s.apply(this,(c[0]=_,c)),+r.apply(this,c),+s.apply(this,(c[0]=p,c)),+r.apply(this,c)),o)return a=null,o+""||null}return h.source=function(o){return arguments.length?(e=o,h):e},h.target=function(o){return arguments.length?(n=o,h):n},h.x=function(o){return arguments.length?(s=typeof o=="function"?o:P(+o),h):s},h.y=function(o){return arguments.length?(r=typeof o=="function"?o:P(+o),h):r},h.context=function(o){return arguments.length?(a=o??null,h):a},h}function me(t,e,n,s,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+s)/2,n,e,r,s,r)}function Ge(t,e,n,s,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,s,n,s,r)}function $e(t,e,n,s,r){var a=At(e,n),h=At(e,n=(n+r)/2),o=At(s,n),c=At(s,r);t.moveTo(a[0],a[1]),t.bezierCurveTo(h[0],h[1],o[0],o[1],c[0],c[1])}function Ue(){return ne(me)}function Ye(){return ne(Ge)}function tt(){var t=ne($e);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const Ft={draw:function(t,e){var n=Math.sqrt(e/D);t.moveTo(n,0),t.arc(0,0,n,0,H)}},xe={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var jt=Math.sqrt(1/3),Te=jt*2;const be={draw:function(t,e){var n=Math.sqrt(e/Te),s=n*jt;t.moveTo(0,-n),t.lineTo(s,0),t.lineTo(0,n),t.lineTo(-s,0),t.closePath()}};var Xe=.8908130915292852,Oe=Math.sin(D/10)/Math.sin(7*D/10),Kt=Math.sin(H/10)*Oe,He=-Math.cos(H/10)*Oe;const ie={draw:function(t,e){var n=Math.sqrt(e*Xe),s=Kt*n,r=He*n;t.moveTo(0,-n),t.lineTo(s,r);for(var a=1;a<5;++a){var h=H*a/5,o=Math.cos(h),c=Math.sin(h);t.lineTo(c*n,-o*n),t.lineTo(o*s-c*r,c*s+o*r)}t.closePath()}},Wt={draw:function(t,e){var n=Math.sqrt(e),s=-n/2;t.rect(s,s,n,n)}};var Gt=Math.sqrt(3);const $t={draw:function(t,e){var n=-Math.sqrt(e/(Gt*3));t.moveTo(0,n*2),t.lineTo(-Gt*n,-n),t.lineTo(Gt*n,-n),t.closePath()}};var it=-.5,st=Math.sqrt(3)/2,Nt=1/Math.sqrt(12),Re=(Nt/2+1)*3;const Se={draw:function(t,e){var n=Math.sqrt(e/Re),s=n/2,r=n*Nt,a=s,h=n*Nt+n,o=-a,c=h;t.moveTo(s,r),t.lineTo(a,h),t.lineTo(o,c),t.lineTo(it*s-st*r,st*s+it*r),t.lineTo(it*a-st*h,st*a+it*h),t.lineTo(it*o-st*c,st*o+it*c),t.lineTo(it*s+st*r,it*r-st*s),t.lineTo(it*a+st*h,it*h-st*a),t.lineTo(it*o+st*c,it*c-st*o),t.closePath()}};var se=[Ft,xe,be,Wt,ie,$t,Se];function Ze(){var t=P(Ft),e=P(64),n=null;function s(){var r;if(n||(n=r=Z()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return s.type=function(r){return arguments.length?(t=typeof r=="function"?r:P(r),s):t},s.size=function(r){return arguments.length?(e=typeof r=="function"?r:P(+r),s):e},s.context=function(r){return arguments.length?(n=r??null,s):n},s}function gt(){}function oe(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ut(t){this._context=t}Ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oe(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Yt(t){return new Ut(t)}function Pe(t){this._context=t}Pe.prototype={areaStart:gt,areaEnd:gt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:oe(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function we(t){return new Pe(t)}function Me(t){this._context=t}Me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:oe(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Qe(t){return new Me(t)}function Ee(t,e){this._basis=new Ut(t),this._beta=e}Ee.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var s=t[0],r=e[0],a=t[n]-s,h=e[n]-r,o=-1,c;++o<=n;)c=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(s+c*a),this._beta*e[o]+(1-this._beta)*(r+c*h));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const re=function t(e){function n(s){return e===1?new Ut(s):new Ee(s,e)}return n.beta=function(s){return t(+s)},n}(.85);function kt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ae(t,e){this._context=t,this._k=(1-e)/6}ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:kt(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:kt(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const le=function t(e){function n(s){return new ae(s,e)}return n.tension=function(s){return t(+s)},n}(0);function ue(t,e){this._context=t,this._k=(1-e)/6}ue.prototype={areaStart:gt,areaEnd:gt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:kt(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Je=function t(e){function n(s){return new ue(s,e)}return n.tension=function(s){return t(+s)},n}(0);function ce(t,e){this._context=t,this._k=(1-e)/6}ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kt(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const qe=function t(e){function n(s){return new ce(s,e)}return n.tension=function(s){return t(+s)},n}(0);function he(t,e,n){var s=t._x1,r=t._y1,a=t._x2,h=t._y2;if(t._l01_a>E){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);s=(s*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>E){var _=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,p=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*_+t._x1*t._l23_2a-e*t._l12_2a)/p,h=(h*_+t._y1*t._l23_2a-n*t._l12_2a)/p}t._context.bezierCurveTo(s,r,a,h,t._x2,t._y2)}function Ce(t,e){this._context=t,this._alpha=e}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,s=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:he(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const tn=function t(e){function n(s){return e?new Ce(s,e):new ae(s,0)}return n.alpha=function(s){return t(+s)},n}(.5);function lt(t,e){this._context=t,this._alpha=e}lt.prototype={areaStart:gt,areaEnd:gt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,s=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:he(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ot=function t(e){function n(s){return e?new lt(s,e):new ue(s,0)}return n.alpha=function(s){return t(+s)},n}(.5);function ct(t,e){this._context=t,this._alpha=e}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,s=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:he(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const yn=function t(e){function n(s){return e?new ct(s,e):new ce(s,0)}return n.alpha=function(s){return t(+s)},n}(.5);function en(t){this._context=t}en.prototype={areaStart:gt,areaEnd:gt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Ae(t){return new en(t)}function fe(t){return t<0?-1:1}function Ne(t,e,n){var s=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(s||r<0&&-0),h=(n-t._y1)/(r||s<0&&-0),o=(a*r+h*s)/(s+r);return(fe(a)+fe(h))*Math.min(Math.abs(a),Math.abs(h),.5*Math.abs(o))||0}function de(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function pe(t,e,n){var s=t._x0,r=t._y0,a=t._x1,h=t._y1,o=(a-s)/3;t._context.bezierCurveTo(s+o,r+o*e,a-o,h-o*n,a,h)}function Xt(t){this._context=t}Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pe(this,this._t0,de(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,pe(this,de(this,n=Ne(this,t,e)),n);break;default:pe(this,this._t0,n=Ne(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function ke(t){this._context=new Le(t)}(ke.prototype=Object.create(Xt.prototype)).point=function(t,e){Xt.prototype.point.call(this,e,t)};function Le(t){this._context=t}Le.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,s,r,a){this._context.bezierCurveTo(e,t,s,n,a,r)}};function nn(t){return new Xt(t)}function sn(t){return new ke(t)}function ze(t){this._context=t}ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var s=_e(t),r=_e(e),a=0,h=1;h<n;++a,++h)this._context.bezierCurveTo(s[0][a],r[0][a],s[1][a],r[1][a],t[h],e[h]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function _e(t){var e,n=t.length-1,s,r=new Array(n),a=new Array(n),h=new Array(n);for(r[0]=0,a[0]=2,h[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,a[e]=4,h[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,a[n-1]=7,h[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)s=r[e]/a[e-1],a[e]-=s,h[e]-=s*h[e-1];for(r[n-1]=h[n-1]/a[n-1],e=n-2;e>=0;--e)r[e]=(h[e]-r[e+1])/a[e];for(a[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function De(t){return new ze(t)}function Tt(t,e){this._context=t,this._t=e}Tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function on(t){return new Tt(t,.5)}function rn(t){return new Tt(t,0)}function an(t){return new Tt(t,1)}function bt(t,e){if((h=t.length)>1)for(var n=1,s,r,a=t[e[0]],h,o=a.length;n<h;++n)for(r=a,a=t[e[n]],s=0;s<o;++s)a[s][1]+=a[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function Ot(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function ln(t,e){return t[e]}function un(){var t=P([]),e=Ot,n=bt,s=ln;function r(a){var h=t.apply(this,arguments),o,c=a.length,_=h.length,p=new Array(_),y;for(o=0;o<_;++o){for(var b=h[o],N=p[o]=new Array(c),T=0,S;T<c;++T)N[T]=S=[0,+s(a[T],b,T,a)],S.data=a[T];N.key=b}for(o=0,y=e(p);o<_;++o)p[y[o]].index=o;return n(p,y),p}return r.keys=function(a){return arguments.length?(t=typeof a=="function"?a:P(Vt.call(a)),r):t},r.value=function(a){return arguments.length?(s=typeof a=="function"?a:P(+a),r):s},r.order=function(a){return arguments.length?(e=a==null?Ot:typeof a=="function"?a:P(Vt.call(a)),r):e},r.offset=function(a){return arguments.length?(n=a??bt,r):n},r}function Lt(t,e){if((s=t.length)>0){for(var n,s,r=0,a=t[0].length,h;r<a;++r){for(h=n=0;n<s;++n)h+=t[n][r][1]||0;if(h)for(n=0;n<s;++n)t[n][r][1]/=h}bt(t,e)}}function cn(t,e){if((c=t.length)>0)for(var n,s=0,r,a,h,o,c,_=t[e[0]].length;s<_;++s)for(h=o=0,n=0;n<c;++n)(a=(r=t[e[n]][s])[1]-r[0])>0?(r[0]=h,r[1]=h+=a):a<0?(r[1]=o,r[0]=o+=a):(r[0]=0,r[1]=a)}function hn(t,e){if((r=t.length)>0){for(var n=0,s=t[e[0]],r,a=s.length;n<a;++n){for(var h=0,o=0;h<r;++h)o+=t[h][n][1]||0;s[n][1]+=s[n][0]=-o/2}bt(t,e)}}function i(t,e){if(!(!((h=t.length)>0)||!((a=(r=t[e[0]]).length)>0))){for(var n=0,s=1,r,a,h;s<a;++s){for(var o=0,c=0,_=0;o<h;++o){for(var p=t[e[o]],y=p[s][1]||0,b=p[s-1][1]||0,N=(y-b)/2,T=0;T<o;++T){var S=t[e[T]],A=S[s][1]||0,W=S[s-1][1]||0;N+=A-W}c+=y,_+=N*y}r[s-1][1]+=r[s-1][0]=n,c&&(n-=_/c)}r[s-1][1]+=r[s-1][0]=n,bt(t,e)}}function l(t){var e=t.map(f);return Ot(t).sort(function(n,s){return e[n]-e[s]})}function f(t){for(var e=-1,n=0,s=t.length,r,a=-1/0;++e<s;)(r=+t[e][1])>a&&(a=r,n=e);return n}function u(t){var e=t.map(g);return Ot(t).sort(function(n,s){return e[n]-e[s]})}function g(t){for(var e=0,n=-1,s=t.length,r;++n<s;)(r=+t[n][1])&&(e+=r);return e}function d(t){return u(t).reverse()}function v(t){var e=t.length,n,s,r=t.map(g),a=l(t),h=0,o=0,c=[],_=[];for(n=0;n<e;++n)s=a[n],h<o?(h+=r[s],c.push(s)):(o+=r[s],_.push(s));return _.reverse().concat(c)}function C(t){return Ot(t).reverse()}},17334:dt=>{function L(x,I,R){var F,K,U,nt,Z;I==null&&(I=100);function P(){var m=Date.now()-nt;m<I&&m>=0?F=setTimeout(P,I-m):(F=null,R||(Z=x.apply(U,K),U=K=null))}var V=function(){U=this,K=arguments,nt=Date.now();var m=R&&!F;return F||(F=setTimeout(P,I)),m&&(Z=x.apply(U,K),U=K=null),Z};return V.clear=function(){F&&(clearTimeout(F),F=null)},V.flush=function(){F&&(Z=x.apply(U,K),U=K=null,clearTimeout(F),F=null)},V}L.debounce=L,dt.exports=L},96894:(dt,L,x)=>{"use strict";x.r(L),x.d(L,{plugin:()=>hn});var I=x(16207),R=x(83340),F=x(64394),K=x(92745),U=x(45013),nt=x(79277),Z=x(41069),P=x(87252),V=x(74848),m=x(96540),w=x(64423),k=x(44232),O=x(55386),M=x(57852),z=x(14477),E=x(739),D=x(63142),j=x(54735),H=x(4268),Q=x(22940),J=x(64400),q=x(22803),Bt=function(){function i(f){var u=f.x,g=u===void 0?0:u,d=f.y,v=d===void 0?0:d;this.x=0,this.y=0,this.x=g,this.y=v}var l=i.prototype;return l.value=function(){return{x:this.x,y:this.y}},l.toArray=function(){return[this.x,this.y]},i}();function Qt(i){return!!i&&i instanceof Element}function Jt(i){return!!i&&(i instanceof SVGElement||"ownerSVGElement"in i)}function qt(i){return!!i&&"createSVGPoint"in i}function te(i){return!!i&&"getScreenCTM"in i}function mt(i){return!!i&&"changedTouches"in i}function It(i){return!!i&&"clientX"in i}function Pt(i){return!!i&&(i instanceof Event||"nativeEvent"in i&&i.nativeEvent instanceof Event)}function et(){return et=Object.assign?Object.assign.bind():function(i){for(var l=1;l<arguments.length;l++){var f=arguments[l];for(var u in f)Object.prototype.hasOwnProperty.call(f,u)&&(i[u]=f[u])}return i},et.apply(this,arguments)}var pt={x:0,y:0};function _t(i){if(!i)return et({},pt);if(mt(i))return i.changedTouches.length>0?{x:i.changedTouches[0].clientX,y:i.changedTouches[0].clientY}:et({},pt);if(It(i))return{x:i.clientX,y:i.clientY};var l=i?.target,f=l&&"getBoundingClientRect"in l?l.getBoundingClientRect():null;return f?{x:f.x+f.width/2,y:f.y+f.height/2}:et({},pt)}function vt(i,l){if(!i||!l)return null;var f=_t(l),u=Jt(i)?i.ownerSVGElement:i,g=te(u)?u.getScreenCTM():null;if(qt(u)&&g){var d=u.createSVGPoint();return d.x=f.x,d.y=f.y,d=d.matrixTransform(g.inverse()),new Bt({x:d.x,y:d.y})}var v=i.getBoundingClientRect();return new Bt({x:f.x-v.left-i.clientLeft,y:f.y-v.top-i.clientTop})}function wt(i,l){if(Qt(i)&&l)return vt(i,l);if(Pt(i)){var f=i,u=f.target;if(u)return vt(u,f)}return null}var xt=["children","id","from","to","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform"];function Mt(){return Mt=Object.assign?Object.assign.bind():function(i){for(var l=1;l<arguments.length;l++){var f=arguments[l];for(var u in f)Object.prototype.hasOwnProperty.call(f,u)&&(i[u]=f[u])}return i},Mt.apply(this,arguments)}function je(i,l){if(i==null)return{};var f={},u=Object.keys(i),g,d;for(d=0;d<u.length;d++)g=u[d],!(l.indexOf(g)>=0)&&(f[g]=i[g]);return f}function ve(i){var l=i.children,f=i.id,u=i.from,g=i.to,d=i.fromOffset,v=d===void 0?"0%":d,C=i.fromOpacity,t=C===void 0?1:C,e=i.toOffset,n=e===void 0?"100%":e,s=i.toOpacity,r=s===void 0?1:s,a=i.rotate,h=i.transform,o=je(i,xt);return m.createElement("defs",null,m.createElement("radialGradient",Mt({id:f,gradientTransform:a?"rotate("+a+")":h},o),!!l&&l,!l&&m.createElement("stop",{offset:v,stopColor:u,stopOpacity:t}),!l&&m.createElement("stop",{offset:n,stopColor:g,stopOpacity:r})))}var ge=x(33434),ee=x(44916),Et=["tooltipOpen"];function ye(i,l){if(i==null)return{};var f={},u=Object.keys(i),g,d;for(d=0;d<u.length;d++)g=u[d],!(l.indexOf(g)>=0)&&(f[g]=i[g]);return f}function Ct(){return Ct=Object.assign?Object.assign.bind():function(i){for(var l=1;l<arguments.length;l++){var f=arguments[l];for(var u in f)Object.prototype.hasOwnProperty.call(f,u)&&(i[u]=f[u])}return i},Ct.apply(this,arguments)}function At(i){var l=(0,m.useState)(Ct({tooltipOpen:!1},i)),f=l[0],u=l[1],g=(0,m.useCallback)(function(v){return u(typeof v=="function"?function(C){var t=C.tooltipOpen,e=ye(C,Et);return Ct({},v(e),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:v.tooltipLeft,tooltipTop:v.tooltipTop,tooltipData:v.tooltipData})},[u]),d=(0,m.useCallback)(function(){return u({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[u]);return{tooltipOpen:f.tooltipOpen,tooltipLeft:f.tooltipLeft,tooltipTop:f.tooltipTop,tooltipData:f.tooltipData,updateTooltip:u,showTooltip:g,hideTooltip:d}}var Vt=x(17334);function Ke({debounce:i,scroll:l,polyfill:f}={debounce:0,scroll:!1}){const u=f||(typeof window>"u"?class{}:window.ResizeObserver);if(!u)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[g,d]=(0,m.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),v=(0,m.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:g}),C=i?typeof i=="number"?i:i.scroll:null,t=i?typeof i=="number"?i:i.resize:null,e=(0,m.useRef)(!1);(0,m.useEffect)(()=>(e.current=!0,()=>void(e.current=!1)));const[n,s,r]=(0,m.useMemo)(()=>{const c=()=>{if(!v.current.element)return;const{left:_,top:p,width:y,height:b,bottom:N,right:T,x:S,y:A}=v.current.element.getBoundingClientRect(),W={left:_,top:p,width:y,height:b,bottom:N,right:T,x:S,y:A};Object.freeze(W),e.current&&!$e(v.current.lastBounds,W)&&d(v.current.lastBounds=W)};return[c,t?(0,Vt.debounce)(c,t):c,C?(0,Vt.debounce)(c,C):c]},[d,C,t]);function a(){v.current.scrollContainers&&(v.current.scrollContainers.forEach(c=>c.removeEventListener("scroll",r,!0)),v.current.scrollContainers=null),v.current.resizeObserver&&(v.current.resizeObserver.disconnect(),v.current.resizeObserver=null)}function h(){v.current.element&&(v.current.resizeObserver=new u(r),v.current.resizeObserver.observe(v.current.element),l&&v.current.scrollContainers&&v.current.scrollContainers.forEach(c=>c.addEventListener("scroll",r,{capture:!0,passive:!0})))}const o=c=>{!c||c===v.current.element||(a(),v.current.element=c,v.current.scrollContainers=me(c),h())};return ne(r,!!l),We(s),(0,m.useEffect)(()=>{a(),h()},[l,r,s]),(0,m.useEffect)(()=>a,[]),[o,g,n]}function We(i){(0,m.useEffect)(()=>{const l=i;return window.addEventListener("resize",l),()=>void window.removeEventListener("resize",l)},[i])}function ne(i,l){(0,m.useEffect)(()=>{if(l){const f=i;return window.addEventListener("scroll",f,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",f,!0)}},[i,l])}function me(i){const l=[];if(!i||i===document.body)return l;const{overflow:f,overflowX:u,overflowY:g}=window.getComputedStyle(i);return[f,u,g].some(d=>d==="auto"||d==="scroll")&&l.push(i),[...l,...me(i.parentElement)]}const Ge=["x","y","top","bottom","left","right","width","height"],$e=(i,l)=>Ge.every(f=>i[f]===l[f]),Ue=Ke;var Ye=x(5556),tt=x.n(Ye),Ft=x(40961);function xe(i,l){i.prototype=Object.create(l.prototype),i.prototype.constructor=i,jt(i,l)}function jt(i,l){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,g){return u.__proto__=g,u},jt(i,l)}var Te=function(i){xe(l,i);function l(){return i.apply(this,arguments)||this}var f=l.prototype;return f.componentWillUnmount=function(){this.node&&document.body&&(document.body.removeChild(this.node),delete this.node)},f.render=function(){return!this.node&&typeof document<"u"&&(this.node=document.createElement("div"),this.props.zIndex!=null&&(this.node.style.zIndex=""+this.props.zIndex),document.body.append(this.node)),this.node?Ft.createPortal(this.props.children,this.node):null},l}(m.PureComponent);Te.propTypes={zIndex:tt().oneOfType([tt().number,tt().string])};var be=x(46942),Xe=x.n(be),Oe=["className","top","left","offsetLeft","offsetTop","style","children","unstyled","applyPositionStyle"];function Kt(){return Kt=Object.assign?Object.assign.bind():function(i){for(var l=1;l<arguments.length;l++){var f=arguments[l];for(var u in f)Object.prototype.hasOwnProperty.call(f,u)&&(i[u]=f[u])}return i},Kt.apply(this,arguments)}function He(i,l){if(i==null)return{};var f={},u=Object.keys(i),g,d;for(d=0;d<u.length;d++)g=u[d],!(l.indexOf(g)>=0)&&(f[g]=i[g]);return f}var ie={position:"absolute",backgroundColor:"white",color:"#666666",padding:".3rem .5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"},Wt=m.forwardRef(function(i,l){var f=i.className,u=i.top,g=i.left,d=i.offsetLeft,v=d===void 0?10:d,C=i.offsetTop,t=C===void 0?10:C,e=i.style,n=e===void 0?ie:e,s=i.children,r=i.unstyled,a=r===void 0?!1:r,h=i.applyPositionStyle,o=h===void 0?!1:h,c=He(i,Oe);return m.createElement("div",Kt({ref:l,className:Xe()("visx-tooltip",f),style:Kt({top:u==null||t==null?u:u+t,left:g==null||v==null?g:g+v},o&&{position:"absolute"},!a&&n)},c),s)});Wt.propTypes={children:tt().node,className:tt().string,left:tt().number,offsetLeft:tt().number,offsetTop:tt().number,top:tt().number,applyPositionStyle:tt().bool,unstyled:tt().bool},Wt.displayName="Tooltip";const Gt=Wt;function $t(){return $t=Object.assign?Object.assign.bind():function(i){for(var l=1;l<arguments.length;l++){var f=arguments[l];for(var u in f)Object.prototype.hasOwnProperty.call(f,u)&&(i[u]=f[u])}return i},$t.apply(this,arguments)}function it(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function st(i,l){i.prototype=Object.create(l.prototype),i.prototype.constructor=i,Nt(i,l)}function Nt(i,l){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,g){return u.__proto__=g,u},Nt(i,l)}var Re={top:0,right:0,bottom:0,left:0,width:0,height:0};function Se(i){var l;return l=function(f){st(u,f);function u(d){var v;return v=f.call(this,d)||this,v.state={rect:void 0,parentRect:void 0},v.nodeRef=m.createRef(),v.getRects=v.getRects.bind(it(v)),v}var g=u.prototype;return g.componentDidMount=function(){var v,C=this;this.node=(v=this.nodeRef)!=null&&v.current?this.nodeRef.current:Ft.findDOMNode(this),this.setState(function(){return C.getRects()})},g.getRects=function(){if(!this.node)return this.state;var v=this.node,C=v.parentNode,t=v.getBoundingClientRect?v.getBoundingClientRect():Re,e=C!=null&&C.getBoundingClientRect?C.getBoundingClientRect():Re;return{rect:t,parentRect:e}},g.render=function(){return m.createElement(i,$t({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},u}(m.PureComponent),l.displayName="withBoundingRects("+(i.displayName||"")+")",l}var se=(0,m.createContext)({isFlippedVertically:!1,isFlippedHorizontally:!1}),Ze=se.Provider,gt=se.Consumer,oe=function(){return useContext(se)},Ut=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function Yt(){return Yt=Object.assign?Object.assign.bind():function(i){for(var l=1;l<arguments.length;l++){var f=arguments[l];for(var u in f)Object.prototype.hasOwnProperty.call(f,u)&&(i[u]=f[u])}return i},Yt.apply(this,arguments)}function Pe(i,l){if(i==null)return{};var f={},u=Object.keys(i),g,d;for(d=0;d<u.length;d++)g=u[d],!(l.indexOf(g)>=0)&&(f[g]=i[g]);return f}function we(i){var l=i.children,f=i.getRects,u=i.left,g=u===void 0?0:u,d=i.offsetLeft,v=d===void 0?10:d,C=i.offsetTop,t=C===void 0?10:C,e=i.parentRect,n=i.rect,s=i.style,r=s===void 0?ie:s,a=i.top,h=a===void 0?0:a,o=i.unstyled,c=o===void 0?!1:o,_=i.nodeRef,p=Pe(i,Ut),y,b=!1,N=!1;if(n&&e){var T=g,S=h;if(e.width){var A=T+v+n.width-e.width,W=n.width-T-v;b=A>0&&A>W}else{var G=T+v+n.width-window.innerWidth,Y=n.width-T-v;b=G>0&&G>Y}if(e.height){var X=S+t+n.height-e.height,rt=n.height-S-t;N=X>0&&X>rt}else N=S+t+n.height>window.innerHeight;T=b?T-n.width-v:T+v,S=N?S-n.height-t:S+t,T=Math.round(T),S=Math.round(S),y="translate("+T+"px, "+S+"px)"}return m.createElement(Gt,Yt({ref:_,style:Yt({left:0,top:0,transform:y},!c&&r)},p),m.createElement(Ze,{value:{isFlippedVertically:!N,isFlippedHorizontally:!b}},l))}we.propTypes={nodeRef:tt().oneOfType([tt().string,tt().func,tt().object])};const Me=Se(we);var Qe=["detectBounds","zIndex"],Ee=["left","top","detectBounds","zIndex"];function re(){return re=Object.assign?Object.assign.bind():function(i){for(var l=1;l<arguments.length;l++){var f=arguments[l];for(var u in f)Object.prototype.hasOwnProperty.call(f,u)&&(i[u]=f[u])}return i},re.apply(this,arguments)}function kt(i,l){if(i==null)return{};var f={},u=Object.keys(i),g,d;for(d=0;d<u.length;d++)g=u[d],!(l.indexOf(g)>=0)&&(f[g]=i[g]);return f}function ae(i){var l=i===void 0?{}:i,f=l.detectBounds,u=f===void 0?!0:f,g=l.zIndex,d=kt(l,Qe),v=Ue(d),C=v[0],t=v[1],e=v[2],n=(0,m.useState)(!1),s=n[0],r=n[1];(0,m.useEffect)(function(){r(!1)},[]);var a=(0,m.useMemo)(function(){return function(h){var o=h.left,c=o===void 0?0:o,_=h.top,p=_===void 0?0:_,y=h.detectBounds,b=h.zIndex,N=kt(h,Ee),T=y??u,S=b??g,A=T?Me:Gt,W=s?0:window.scrollX,G=s?0:window.scrollY,Y=c+(t.left||0)+W,X=p+(t.top||0)+G;return m.createElement(Te,{zIndex:S},m.createElement(A,re({left:Y,top:X},N)))}},[u,g,t.left,t.top,s]);return{containerRef:C,containerBounds:t,forceRefreshBounds:e,TooltipInPortal:a}}var le=x(84140),ue=x(51898),Je=x(6399),ce=x(63428);let qe=0;const he=()=>qe++;function Ce(i){const l=(0,m.useRef)(null);return l.current===null&&(l.current=i+he()),l.current.toString()}var tn=x(35484),lt=(i=>(i.Donut="donut",i.Pie="pie",i))(lt||{}),ot=(i=>(i.Name="name",i.Percent="percent",i.Value="value",i))(ot||{}),ct=(i=>(i.Percent="percent",i.Value="value",i))(ct||{});const yn={values:[]},en={displayLabels:[]};function Ae(i){return!i.field.custom?.hideFrom?.viz&&!isNaN(i.display.numeric)}function fe(i,l){return l.display.numeric+i}const Ne=({fieldDisplayValues:i,pieType:l,width:f,height:u,highlightedTitle:g,displayLabels:d=[],tooltipOptions:v})=>{const C=(0,D.$j)(),t=Ce("PieChart"),e=(0,D.of)(Tt),n=At(),{containerRef:s,TooltipInPortal:r}=ae({detectBounds:!0,scroll:!0}),a=i.filter(Ae),h=T=>T.display.numeric,o=T=>`${t}-${(0,le.A)(T).toHex()}`,c=T=>`url(#${o(T)})`,_=d.length>0,p=v.mode!=="none"&&n.tooltipOpen,y=a.reduce(fe,0),b=sn(f,u,l),N=[...new Set(a.map(T=>T.display.color??F.F))];return(0,V.jsxs)("div",{className:e.container,children:[(0,V.jsx)("svg",{width:b.size,height:b.size,ref:s,style:{overflow:"visible"},children:(0,V.jsxs)(ge.A,{top:b.position,left:b.position,children:[N.map(T=>(0,V.jsx)(ve,{id:o(T),from:Le(T,C),to:nn(T,C),fromOffset:b.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:b.outerRadius},T)),(0,V.jsx)(ee.A,{data:a,pieValue:h,outerRadius:b.outerRadius,innerRadius:b.innerRadius,cornerRadius:3,padAngle:.005,children:T=>(0,V.jsxs)(V.Fragment,{children:[T.arcs.map(S=>{const A=S.data.display.color??F.F,W=_e(g,S);return S.data.hasLinks&&S.data.getLinks?(0,V.jsx)(Je.e,{links:S.data.getLinks,children:G=>(0,V.jsx)(de,{tooltip:n,highlightState:W,arc:S,pie:T,fill:c(A),openMenu:G.openMenu,tooltipOptions:v})},S.index):(0,V.jsx)(de,{highlightState:W,tooltip:n,arc:S,pie:T,fill:c(A),tooltipOptions:v},S.index)}),_&&T.arcs.map(S=>{const A=_e(g,S);return(0,V.jsx)(pe,{arc:S,highlightState:A,outerRadius:b.outerRadius,innerRadius:b.innerRadius,displayLabels:d,total:y,color:C.colors.text.primary},S.index)})]})})]})}),p?(0,V.jsx)(r,{top:n.tooltipTop,className:e.tooltipPortal,left:n.tooltipLeft,unstyled:!0,applyPositionStyle:!0,children:(0,V.jsx)(ce.o,{series:n.tooltipData})},Math.random()):null]})};function de({arc:i,pie:l,highlightState:f,openMenu:u,fill:g,tooltip:d,tooltipOptions:v}){const C=(0,D.$j)(),t=(0,D.of)(Tt),{eventBus:e}=(0,J.d2)(),n=(0,m.useCallback)(a=>{e?.publish({type:M.ql.type,payload:{raw:a,x:0,y:0,dataId:i.data.display.title}}),d.hideTooltip()},[e,i,d]),s=(0,m.useCallback)(a=>{e?.publish({type:M.b_.type,payload:{raw:a,x:0,y:0,dataId:i.data.display.title}});const h=a.currentTarget.ownerSVGElement;if(h){const o=wt(h,a);d.showTooltip({tooltipLeft:o.x,tooltipTop:o.y,tooltipData:Xt(l,i,v)})}},[e,i,d,l,v]),r=De(f,t);return(0,V.jsx)("g",{className:r,onMouseMove:v.mode!=="none"?s:void 0,onMouseOut:n,onClick:u,"data-testid":ue.Tp.components.Panels.Visualization.PieChart.svgSlice,children:(0,V.jsx)("path",{d:l.path({...i}),fill:g,stroke:C.colors.background.primary,strokeWidth:1})},i.data.display.title)}function pe({arc:i,outerRadius:l,innerRadius:f,displayLabels:u,total:g,color:d,highlightState:v}){const C=(0,D.of)(Tt),t=f===0?l/6:f,[e,n]=ke(i,l,t);if(!(i.endAngle-i.startAngle>=.3))return null;let r=u.includes(ot.Name)?Math.min(Math.max(l/150*14,12),30):Math.min(Math.max(l/100*14,12),36);return(0,V.jsx)("g",{className:De(v,C),children:(0,V.jsxs)("text",{fill:d,x:e,y:n,dy:".33em",fontSize:r,fontWeight:500,textAnchor:"middle",pointerEvents:"none",children:[u.includes(ot.Name)&&(0,V.jsx)("tspan",{x:e,dy:"1.2em",children:i.data.display.title}),u.includes(ot.Value)&&(0,V.jsx)("tspan",{x:e,dy:"1.2em",children:(0,O.cN)(i.data.display)}),u.includes(ot.Percent)&&(0,V.jsx)("tspan",{x:e,dy:"1.2em",children:(i.data.display.numeric/g*100).toFixed(i.data.field.decimals??0)+"%"})]})})}function Xt(i,l,f){return f.mode==="multi"?i.arcs.filter(u=>{if(f.hideZeros&&u.value===0)return!1;const g=u.data.field.custom;return!g?.hideFrom?.tooltip&&!g?.hideFrom?.viz}).map(u=>({color:u.data.display.color??F.F,label:u.data.display.title,value:(0,O.cN)(u.data.display),isActive:u.index===l.index})):[{color:l.data.display.color??F.F,label:l.data.display.title,value:(0,O.cN)(l.data.display)}]}function ke(i,l,f){const u=(l+f)/2,g=(+i.startAngle+ +i.endAngle)/2-Math.PI/2;return[Math.cos(g)*u,Math.sin(g)*u]}function Le(i,l){return(0,le.A)(i).darken(20*(l.isDark?1:-.7)).spin(4).toRgbString()}function nn(i,l){return(0,le.A)(i).darken(10*(l.isDark?1:-.7)).spin(-4).toRgbString()}function sn(i,l,f,u=16){const g=Math.min(l,i),d=(g-u*2)/2,v=f===lt.Pie?d:Math.max(d/3,20),C=d-v,t=(g-u*2)/2,e=1-(d-C)/d;return{position:t+u,size:g,outerRadius:d,innerRadius:C,gradientFromOffset:e}}var ze=(i=>(i[i.Highlighted=0]="Highlighted",i[i.Deemphasized=1]="Deemphasized",i[i.Normal=2]="Normal",i))(ze||{});function _e(i,l){return i?i===l.data.display.title?0:1:2}function De(i,l){switch(i){case 0:return l.svgArg.highlighted;case 1:return l.svgArg.deemphasized;case 2:default:return l.svgArg.normal}}const Tt=i=>({container:(0,q.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),svgArg:{normal:(0,q.css)({[i.transitions.handleMotion("no-preference")]:{transition:"all 200ms ease-in-out"}}),highlighted:(0,q.css)({[i.transitions.handleMotion("no-preference")]:{transition:"all 200ms ease-in-out"},transform:"scale3d(1.03, 1.03, 1)"}),deemphasized:(0,q.css)({[i.transitions.handleMotion("no-preference")]:{transition:"all 200ms ease-in-out"},fillOpacity:.5})},tooltipPortal:(0,q.css)((0,tn.getTooltipContainerStyles)(i))}),on={displayMode:E.lm.List,showLegend:!0,placement:"right",calcs:[],values:[ct.Percent]};function rn(i){const{data:l,timeZone:f,fieldConfig:u,replaceVariables:g,width:d,height:v,options:C,id:t}=i,e=(0,D.$j)(),n=Ot(),s=(0,k.PI)({fieldConfig:u,reduceOptions:C.reduceOptions,data:l.series,theme:e,replaceVariables:g,timeZone:f});return bt(s)?(0,V.jsx)(j.KU,{width:d,height:v,legend:an(i,s),children:(r,a)=>(0,V.jsx)(Ne,{width:r,height:a,highlightedTitle:n,fieldDisplayValues:s,tooltipOptions:C.tooltip,pieType:C.pieType,displayLabels:C.displayLabels})}):(0,V.jsx)(z.a,{panelId:t,fieldConfig:u,data:l})}function an(i,l){const f=i.options.legend??on;if(f.showLegend===!1)return;const u=l.filter(Ae).reduce(fe,0),g=l.sort((d,v)=>isNaN(d.display.numeric)?1:isNaN(v.display.numeric)?-1:v.display.numeric-d.display.numeric).map((d,v)=>{const C=d.field.custom?.hideFrom??{};if(C.legend)return;const t=!!C.viz,e=d.display;return{label:e.title??"",color:e.color??F.F,yAxis:1,disabled:t,getItemKey:()=>(e.title??"")+v,getDisplayValues:()=>{const n=f.values??[];let s=[];if(n.includes(ct.Value)&&s.push({numeric:e.numeric,text:(0,O.cN)(e),title:"Value"}),n.includes(ct.Percent)){const r=t?0:e.numeric/u,a=r*100;s.push({numeric:r,percent:a,text:t||isNaN(r)?i.fieldConfig.defaults.noValue??"-":a.toFixed(d.field.decimals??0)+"%",title:n.length>1?"Percent":""})}return s}}}).filter(d=>!!d);return(0,V.jsx)(j.KU.Legend,{placement:f.placement,width:f.width,children:(0,V.jsx)(H.t,{items:g,seriesVisibilityChangeBehavior:Q.K.Hide,placement:f.placement,displayMode:f.displayMode})})}function bt(i){return i.some(l=>l.view?.dataFrame.length)}function Ot(){const[i,l]=(0,m.useState)(),{eventBus:f}=(0,J.d2)();return(0,m.useEffect)(()=>{const u=v=>{l(v.payload.dataId)},g=v=>{l(void 0)},d=new w.yU;return d.add(f.getStream(M.b_).subscribe({next:u})),d.add(f.getStream(M.ql).subscribe({next:g})),()=>{d.unsubscribe()}},[l,f]),i}var ln=x(57866);const un=(i,l,f)=>{if(l==="grafana-piechart-panel"&&f.angular){const u=f.angular,g=[];let d=i.options;if(u.aliasColors)for(const v of Object.keys(u.aliasColors)){const C=u.aliasColors[v];C&&g.push({matcher:{id:ln.Ct.byName,options:v},properties:[{id:R.uo.Color,value:{mode:F.Y.Fixed,fixedColor:C}}]})}if(i.fieldConfig={overrides:g,defaults:{unit:u.format,decimals:u.decimals?u.decimals:0}},d.legend={placement:"right",values:[],displayMode:E.lm.Table,showLegend:!0,calcs:[]},u.valueName)switch(d.reduceOptions={calcs:[]},u.valueName){case"current":d.reduceOptions.calcs=["lastNotNull"];break;case"min":d.reduceOptions.calcs=["min"];break;case"max":d.reduceOptions.calcs=["max"];break;case"avg":d.reduceOptions.calcs=["mean"];break;case"total":d.reduceOptions.calcs=["sum"];break}switch(u.legendType){case"Under graph":d.legend.placement="bottom";break;case"Right side":d.legend.placement="right";break}switch(u.pieType){case"pie":d.pieType=lt.Pie;break;case"donut":d.pieType=lt.Donut;break}return u.legend&&(u.legend.show||(d.legend.showLegend=!1),u.legend.values&&d.legend.values.push(ct.Value),u.legend.percentage&&d.legend.values.push(ct.Percent)),u.legendType==="On graph"&&(d.legend.showLegend=!1,d.displayLabels=[ot.Name],u.legend.values&&d.displayLabels.push(ot.Value),u.legend.percentage&&d.displayLabels.push(ot.Percent)),d}return{}};var Lt=x(73495);class cn{getSuggestionsForData(l){const f=l.getListAppender({name:Lt.m.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[ot.Percent],legend:{calcs:[],displayMode:E.lm.Hidden,placement:"right",values:[],showLegend:!1}}}),{dataSummary:u}=l;if(u.hasNumberField){if(u.hasStringField&&u.frameCount===1){if(u.rowCountTotal>30||u.rowCountTotal<2)return;f.append({name:Lt.m.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),f.append({name:Lt.m.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:lt.Donut}});return}u.numberFieldCount>30||u.numberFieldCount<2||(f.append({name:Lt.m.PieChart}),f.append({name:Lt.m.PieChartDonut,options:{pieType:lt.Donut}}))}}}const hn=new I.m(rn).setPanelChangeHandler(un).useFieldConfig({disableStandardOptions:[R.uo.Thresholds],standardOptions:{[R.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:F.Y.PaletteClassic}}},useCustomConfig:i=>{U.e(i)}}).setPanelOptions(i=>{(0,P.L)(i);const l=[(0,K.t)("piechart.category-pie-chart","Pie chart")],f=[(0,K.t)("piechart.category-legend","Legend")];i.addRadio({name:(0,K.t)("piechart.name-pie-chart-type","Pie chart type"),category:l,description:(0,K.t)("piechart.description-pie-chart-type","How the pie chart should be rendered"),path:"pieType",settings:{options:[{value:lt.Pie,label:(0,K.t)("piechart.pie-chart-type-options.label-pie","Pie")},{value:lt.Donut,label:(0,K.t)("piechart.pie-chart-type-options.label-donut","Donut")}]},defaultValue:lt.Pie}).addMultiSelect({name:(0,K.t)("piechart.name-labels","Labels"),category:l,path:"displayLabels",description:(0,K.t)("piechart.description-labels","Select the labels to be displayed in the pie chart"),settings:{options:[{value:ot.Percent,label:(0,K.t)("piechart.labels-options.label-percent","Percent")},{value:ot.Name,label:(0,K.t)("piechart.labels-options.label-name","Name")},{value:ot.Value,label:(0,K.t)("piechart.labels-options.label-value","Value")}]}}),nt.D(i,!1,!1,nt.U),Z.H(i,!1),i.addMultiSelect({name:(0,K.t)("piechart.name-legend-values","Legend values"),path:"legend.values",category:f,settings:{options:[{value:ct.Percent,label:(0,K.t)("piechart.legend-values-options.label-percent","Percent")},{value:ct.Value,label:(0,K.t)("piechart.legend-values-options.label-value","Value")}]},showIf:u=>u.legend.showLegend!==!1})}).setSuggestionsSupplier(new cn)}}]);

//# sourceMappingURL=pieChartPanel.7c8bd09f822b12b1b702.js.map