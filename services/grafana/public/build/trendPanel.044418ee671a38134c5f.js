"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2666],{47466:($,A,e)=>{e.d(A,{o:()=>p});var n=e(74848),l=e(22803),x=e(63142),O=e(77239);const p=({items:u,children:y,isPinned:a,scrollable:T=!1,maxHeight:M})=>{const C=(0,x.of)(E),S=T?{maxHeight:M,overflowY:"auto"}:{};return(0,n.jsxs)("div",{className:C.wrapper,style:S,children:[u.map(({label:N,value:F,color:s,colorIndicator:o,colorPlacement:c,isActive:f,lineStyle:t},i)=>(0,n.jsx)(O.B,{label:N,value:F,color:s,colorIndicator:o,colorPlacement:c,isActive:f,justify:"space-between",isPinned:a,lineStyle:t,showValueScroll:!T},i)),y]})},E=u=>({wrapper:(0,l.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${u.colors.border.weak}`,padding:u.spacing(1)})})},41530:($,A,e)=>{e.d(A,{A:()=>p});var n=e(74848),l=e(22803),x=e(63142),O=e(77239);const p=({item:u,isPinned:y})=>{const a=(0,x.of)(E),{label:T,value:M,color:C,colorIndicator:S}=u;return(0,n.jsx)("div",{className:a.wrapper,children:(0,n.jsx)(O.B,{label:T,value:M,color:C,colorIndicator:S,marginRight:"22px",isPinned:y})})},E=u=>({wrapper:(0,l.css)({display:"flex",flexDirection:"column",flex:1,padding:u.spacing(1),lineHeight:1})})},77239:($,A,e)=>{e.d(A,{B:()=>c});var n=e(74848),l=e(22803),x=e(96540),O=e(63142),p=e(53371),E=e(45967),u=e(64394),y=e(71479),a=e(55978),T=e(55302),M=(t=>(t[t.Leading=0]="Leading",t[t.Trailing=1]="Trailing",t))(M||{});const C=({color:t=u.F,colorIndicator:i=a.Ev,position:r=0,lineStyle:d})=>{const m=(0,O.of)(S);return i===a.fX.series?(0,n.jsx)(y.p,{color:t,lineStyle:d,className:r===0?m.leading:m.trailing}):(0,n.jsx)("span",{style:{backgroundColor:t},className:(0,l.cx)(r===0?m.leading:m.trailing,(0,T.L$)(i,m))})},S=t=>({leading:(0,l.css)({marginRight:t.spacing(.5)}),trailing:(0,l.css)({marginLeft:t.spacing(.5)}),value:(0,l.css)({width:"12px",height:"12px",borderRadius:t.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,l.css)({}),pie_1_4:(0,l.css)({}),pie_2_4:(0,l.css)({}),pie_3_4:(0,l.css)({}),marker_sm:(0,l.css)({width:"4px",height:"4px",borderRadius:t.shape.radius.circle,minWidth:"4px"}),marker_md:(0,l.css)({width:"8px",height:"8px",borderRadius:t.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,l.css)({width:"12px",height:"12px",borderRadius:t.shape.radius.circle,minWidth:"12px"})});var N=(t=>(t.label="label",t.value="value",t))(N||{});const F="Copied to clipboard",s=2*1e3,o=7,c=({label:t,value:i,color:r,colorIndicator:d,colorPlacement:m=a.lJ.first,justify:h="flex-start",isActive:j=!1,marginRight:P="0px",isPinned:D,lineStyle:R,showValueScroll:I})=>{const g=(0,O.of)(f,h,P),v=I?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"pre-line",wordBreak:"break-word",lineHeight:1.2},[X,B]=(0,x.useState)(!1),[Y,H]=(0,x.useState)(null),[J,b]=(0,x.useState)(!1),w=(0,x.useRef)(null),U=(0,x.useRef)(null);(0,x.useEffect)(()=>{let W;return J&&(W=setTimeout(()=>{b(!1)},s)),()=>{window.clearTimeout(W)}},[J]);const L=async(W,Z)=>{if(!(navigator?.clipboard&&window.isSecureContext)){K(W,Z);return}try{await navigator.clipboard.writeText(W),H({[`${Z}`]:W}),b(!0)}catch{H(null)}},K=(W,Z)=>{const G=document.createElement("textarea");w.current?.appendChild(G),G.value=W,G.focus(),G.select();try{document.execCommand("copy")&&(H({[`${Z}`]:W}),b(!0))}catch(Q){console.error("Unable to copy to clipboard",Q)}G.remove()},V=W=>{W.currentTarget.offsetWidth<W.currentTarget.scrollWidth&&B(!0)},z=()=>B(!1);return t.length*o>window.innerWidth/2&&(t=t.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,n.jsxs)("div",{className:g.contentWrapper,children:[(r||t)&&(0,n.jsxs)("div",{className:g.valueWrapper,children:[r&&m===a.lJ.first&&(0,n.jsx)(C,{color:r,colorIndicator:d,lineStyle:R}),D?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(E.m,{content:t,interactive:!1,show:X,children:(0,n.jsxs)(n.Fragment,{children:[J&&Y?.label&&(0,n.jsx)(p.r,{placement:"top",referenceElement:w.current,children:F}),(0,n.jsx)("div",{className:(0,l.cx)(g.label,j&&g.activeSeries,navigator?.clipboard&&g.copy),onMouseEnter:V,onMouseLeave:z,onClick:()=>L(t,"label"),ref:w,children:t})]})})}):(0,n.jsx)("div",{className:(0,l.cx)(g.label,j&&g.activeSeries),children:t})]}),(0,n.jsxs)("div",{className:g.valueWrapper,children:[r&&m===a.lJ.leading&&(0,n.jsx)(C,{color:r,colorIndicator:d,position:M.Leading,lineStyle:R}),D?(0,n.jsxs)(n.Fragment,{children:[J&&Y?.value&&(0,n.jsx)(p.r,{placement:"top",referenceElement:U.current,children:F}),(0,n.jsx)("div",{className:(0,l.cx)(g.value,j,navigator?.clipboard&&g.copy),style:v,onClick:()=>L(i?i.toString():"","value"),ref:U,children:i})]}):(0,n.jsx)("div",{className:(0,l.cx)(g.value,j),style:v,children:i}),r&&m===a.lJ.trailing&&(0,n.jsx)(C,{color:r,colorIndicator:d,position:M.Trailing,lineStyle:R})]})]})},f=(t,i,r)=>({contentWrapper:(0,l.css)({display:"flex",alignItems:"start",justifyContent:i,marginRight:r}),label:(0,l.css)({color:t.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:t.spacing(2)}),value:(0,l.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,l.css)({display:"flex",alignItems:"center"}),activeSeries:(0,l.css)({fontWeight:t.typography.fontWeightBold,color:t.colors.text.maxContrast}),copy:(0,l.css)({cursor:"pointer"})})},73163:($,A,e)=>{e.d(A,{Xx:()=>S,ko:()=>M});var n=e(60519),l=e(32899),x=e(95004),O=e(63704),p=e(68143),E=e(43173),u=e(73427),y=e(86967),a=e(92367);const T=(s,o,c)=>(f,t,i)=>(o.variables&&c&&(f=f.replace(/\$\w+/g,r=>{const d=r.slice(1);return o.variables.some(m=>m.key===d)&&c[d]!=null?c[d]:r})),s(f,t,i)),M=(s,o,c,f,t,i)=>!t||t.length===0?[]:t.map(d=>{const m=(0,n.vd)(s,o,c),h={...c,__dataContext:m},j=(D,R,I)=>f(D,{...h,...R},I);return i.valueRowIndex!==void 0&&!isNaN(i.valueRowIndex)?m.value.rowIndex=i.valueRowIndex:m.value.calculatedValue=i.calculatedValue,{title:f(d.title,h),confirmation:D=>T(j,d,D)(d.confirmation||`Are you sure you want to ${d.title}?`),onClick:(D,R,I)=>{let g=C(d,T(j,d,I));try{(0,p.AI)().fetch(g).subscribe({error:v=>{u.lE.emit(l.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(v)},complete:()=>{u.lE.emit(l.r1.alertSuccess,["API call was successful"])}})}catch(v){u.lE.emit(l.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(v);return}},oneClick:d.oneClick??!1,style:{backgroundColor:d.style?.backgroundColor??E.$.theme2.colors.secondary.main},variables:d.variables}}).filter(d=>!!d),C=(s,o)=>{const c=new URL(N(o(s.fetch.url))),f={};let t={url:c.toString(),method:s.fetch.method,data:F(s,o),headers:f};return s.fetch.headers&&s.fetch.headers.forEach(([i,r])=>{f[o(i)]=o(r)}),s.fetch.queryParams&&(s.fetch.queryParams?.forEach(([i,r])=>{c.searchParams.append(o(i),o(r))}),t.url=c.toString()),f["X-Grafana-Action"]="1",t.headers=f,t},S=(s=[],o=[])=>({name:"Default field",type:x.PU.string,config:{links:s,actions:o},values:[]}),N=s=>{if(s.startsWith("/")){const c=O.sQ.sanitizeUrl(s);s=(0,a.z)(c,[])}return s},F=(s,o)=>{let c=s.fetch.body?o(s.fetch.body):"{}";return s.fetch.method===y.DO.GET&&(c=void 0),c}},86967:($,A,e)=>{e.d(A,{DO:()=>O,en:()=>n,gR:()=>l,xp:()=>x});var n=(a=>(a.Center="center",a.Left="left",a.LeftRight="leftright",a.Right="right",a.Scale="scale",a))(n||{}),l=(a=>(a.Bottom="bottom",a.Center="center",a.Scale="scale",a.Top="top",a.TopBottom="topbottom",a))(l||{}),x=(a=>(a.Contain="contain",a.Cover="cover",a.Fill="fill",a.Original="original",a.Tile="tile",a))(x||{}),O=(a=>(a.GET="GET",a.POST="POST",a.PUT="PUT",a))(O||{}),p=(a=>(a.Straight="straight",a))(p||{});const E={vertices:[]},u={connections:[]},y={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},16913:($,A,e)=>{e.d(A,{OG:()=>O,u6:()=>l});var n=e(73163);const l=(p,E)=>{const u=[];if((p.config.links?.length??0)>0&&p.getLinks!=null){const y=p.values[E],a=p.display?p.display(y):{text:`${y}`,numeric:+y},T=new Set;p.getLinks({calculatedValue:a,valueRowIndex:E}).forEach(M=>{const C=`${M.title}/${M.href}`;T.has(C)||(u.push(M),T.add(C))})}return u},x=p=>{},O=(p,E,u,y)=>{const a=[],T=new Set;return(0,n.ko)(p,E,E.state.scopedVars,u,E.config.actions??[],{valueRowIndex:y}).forEach(C=>{const S=`${C.title}`;T.has(S)||(a.push(C),T.add(S))}),a}},76234:($,A,e)=>{e.d(A,{B_:()=>M,Fg:()=>N,O2:()=>S,T5:()=>F});var n=e(95004),l=e(16515),x=e(63409),O=e(34455),p=e(55386),E=e(11576),u=e(406),y=e(739),a=e(70332);function T(s){let o=new Map;return s.map(f=>({...f,fields:f.fields.map(t=>{if(t.type===n.PU.enum){let i=(0,a.M)(t.config,t.type),r=o.get(i);r||(r=[],o.set(i,r));let d=t.values.toArray().slice(),m=t.config.type.enum.text;if(r.length>0)for(let h=0;h<d.length;h++)d[h]+=r.length;return r.push(...m),t.config.type.enum.text=r,{...t,values:d}}return t})}))}function M(s,o,c,f){if(!s?.length)return null;(0,l.Fm)(s);let t=f!=null;f!=null&&f>0&&(s=[{...s[0],fields:[s[0].fields[f],...s[0].fields.filter((m,h)=>h!==f)]}]);for(let m of s)for(let h of m.fields)h.type===n.PU.time&&typeof h.values[0]!="number"&&(h.values=(0,u.s7)(h,{destinationType:n.PU.time}).values);let i=0;e:for(let m of s)for(let h of m.fields)if(h.type===n.PU.enum&&++i>1){s=T(s);break e}let r;const d=[];for(let m of s){const h=[];let j=!1,P=!1,D=t?m:(0,x.M)({frame:m,refFieldPseudoMin:c?.from.valueOf(),refFieldPseudoMax:c?.to.valueOf()});const R=(0,O.C)(D).fields;for(let I=0;I<(R?.length||0);I++){const g=R[I];switch(g.type){case n.PU.time:j=!0,h.push(g);break;case n.PU.number:P=t?I>0:!0,r={...g,values:g.values.map(B=>Number.isFinite(B)||B==null?B:null)},h.push(r);break;case n.PU.enum:P=!0;case n.PU.string:r={...g,values:g.values},h.push(r);break;case n.PU.boolean:P=!0;const v=g.config?.custom??{},X={...g.config,max:1,min:0,custom:v};v.lineInterpolation!==y.dx.StepBefore&&(v.lineInterpolation=y.dx.StepAfter),r={...g,config:X,type:n.PU.number,values:g.values.map(B=>B==null?B:B?1:0)},(0,p.j9)(X.unit)||(X.unit="bool",r.display=(0,E.J)({field:r,theme:o})),h.push(r);break}}(t||j)&&P&&d.push({...m,length:D.length,fields:h})}return d.length?(S(d,o,0),C(d,o),d):null}const C=(s,o)=>{const{palette:c}=o.visualization;for(const f of s)for(const t of f.fields)if(t.type===n.PU.enum){const i=c[t.state?.seriesIndex%c.length],r=o.visualization.getColorByName(i),d=t.config.type.enum;d.color=Array(d.text.length).fill(r),t.display=(0,E.J)({field:t,theme:o})}},S=(s,o,c)=>{let f=0;s.forEach(t=>{t.fields.forEach((i,r)=>{r!==c&&(i.type===n.PU.number||i.type===n.PU.boolean||i.type===n.PU.enum)&&(i.state={...i.state,seriesIndex:f++},i.display=(0,E.J)({field:i,theme:o}))})})};function N(s,o){return!s||!s.length?[o]:s.map(c=>c?.length?c:o)}const F=s=>s.mode===y.$N.Multi&&s.maxHeight!=null},96827:($,A,e)=>{e.r(A),e.d(A,{plugin:()=>j});var n=e(16207),l=e(95004),x=e(92745),O=e(79277),p=e(41069),E=e(12241),u=e(74848),y=e(96540),a=e(36638),T=e(57866),M=e(8721),C=e(43173),S=e(14477),N=e(64400),F=e(93630),s=e(739),o=e(69234),c=e(17669),f=e(3041),t=e(32503),i=e(78308),r=e(76234);const d=({data:P,timeRange:D,timeZone:R,width:I,height:g,options:v,fieldConfig:X,replaceVariables:B,id:Y})=>{const{dataLinkPostProcessor:H}=(0,N.d2)(),J=v.xField??P.series[0]?.fields.find(U=>U.type===l.PU.number)?.name,b=(U,L,K)=>(L={...L,x:a.sJ.get(T.Ct.byName).get(J)},(0,c.m)(U,L)),w=(0,y.useMemo)(()=>{if(P.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:P.series};let U=P.series,L;if(v.xField){if(L=(0,t.gG)(v.xField,U[0]),L==null)return{warning:"Unable to find field: "+v.xField,frames:P.series}}else if(L=U[0]?U[0].fields.findIndex(K=>K.type===l.PU.number):-1,L===-1)return{warning:"No numeric fields found for X axis",frames:U};if(L!=null){const K=U[0].fields[L];if(K.type===l.PU.number&&!(0,M.g2)(K.values))return{warning:"Values must be in ascending order",frames:U}}return{frames:(0,r.B_)(U,C.$.theme2,void 0,L)}},[P.series,v.xField]);return w.warning||!w.frames?(0,u.jsx)(S.a,{panelId:Y,fieldConfig:X,data:P,message:w.warning,needsNumberField:!0}):(0,u.jsx)(f.Z,{frames:w.frames,structureRev:P.structureRev,timeRange:D,timeZone:R,width:I,height:g,legend:v.legend,options:v,preparePlotFrame:b,replaceVariables:B,dataLinkPostProcessor:H,children:(U,L)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(F.Z,{config:U}),v.tooltip.mode!==s.$N.None&&(0,u.jsx)(o.xl,{config:U,hoverMode:v.tooltip.mode===s.$N.Single?o.b3.xOne:o.b3.xAll,getDataLinks:(K,V)=>L.fields[K].getLinks?.({valueRowIndex:V})??[],render:(K,V,z,W=!1,Z,G,Q,_)=>(0,u.jsx)(i.k,{series:L,dataIdxs:V,seriesIdx:z,mode:v.tooltip.mode,sortOrder:v.tooltip.sort,isPinned:W,maxHeight:v.tooltip.maxHeight,replaceVariables:B,dataLinks:_,hideZeros:v.tooltip.hideZeros}),maxWidth:v.tooltip.maxWidth})]})})};var m=e(73495);class h{getSuggestionsForData(D){const{dataSummary:R}=D;return R.numberFieldCount<2||R.rowCountTotal<2||R.rowCountTotal<2?void 0:D.getListAppender({name:m.m.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:s.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:g=>{g.fieldConfig?.defaults.custom?.drawStyle!==s.GR.Bars&&(g.fieldConfig.defaults.custom.lineWidth=Math.max(g.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const j=new n.m(d).useFieldConfig((0,E.V)(E.S,!1)).setPanelOptions(P=>{const D=[(0,x.t)("trend.category-x-axis","X axis")];P.addFieldNamePicker({path:"xField",name:(0,x.t)("trend.name-x-field","X field"),description:(0,x.t)("trend.description-x-field","An increasing numeric value"),category:D,defaultValue:void 0,settings:{isClearable:!0,placeholderText:(0,x.t)("trend.placeholder-x-field","First numeric value"),filter:R=>R.type===l.PU.number}}),O.D(P,!1,!0,O.U),p.H(P)}).setSuggestionsSupplier(new h)}}]);

//# sourceMappingURL=trendPanel.044418ee671a38134c5f.js.map